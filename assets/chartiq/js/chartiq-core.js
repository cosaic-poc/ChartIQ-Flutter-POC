(()=>{var t,e,i,a={728:()=>{},73:(t,e,i)=>{"use strict";var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B;function V(){}i.d(e,{$$:()=>q,$I:()=>X,Pz:()=>W,hM:()=>Y,rx:()=>Q}),function(){var t,e="2023/11/01",i=["127.0.0.1","localhost","cosaic.io","chartiq.com"];if(t=new Date(e).getTime()){var a=(new Date).getTime();if(t<=a)console.error("This license has expired!");else;}if("undefined"!=typeof document&&i&&i.length>0){for(var r=document.location.href,n=!1,s=0;s<i.length;s++)if(r.indexOf(i[s])>-1){n=!0;break}n||(alert("ERROR: Not licensed for domain "+r),console.error("ERROR: Not licensed for domain "+r))}}(),V[589718]=function(){for(var t=2;9!==t;)switch(t){case 5:var e;try{for(var i=2;6!==i;)switch(i){case 4:i="undefined"==typeof P6uHc?3:9;break;case 5:e.P6uHc=e,i=4;break;case 2:Object.defineProperty(Object.prototype,"tXEUk",{get:function(){for(;;)return this},configurable:!0}),e=tXEUk,i=5;break;case 3:throw"";case 9:delete e.P6uHc,delete Object.prototype.tXEUk,i=6}}catch(t){e=window}return e;case 1:return globalThis;case 2:t="object"==typeof globalThis?1:5}}(),function(t){function e(t,e,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[4]="P",s[3]="roperty",s[5]="define",n=3;break;case 3:s[7]=!0,s[7]=!1;try{for(var o=2;13!==o;)switch(o){case 2:s[6]={},s[9]=(0,s[0][1])(s[0][0]),s[8]=[s[9],s[9].prototype][s[0][3]],o=4;break;case 4:o=s[8].hasOwnProperty(s[0][4])&&s[8][s[0][4]]===s[8][s[0][2]]?3:9;break;case 3:return;case 9:s[8][s[0][4]]=s[8][s[0][2]],s[6].set=function(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];s[8][s[0][2]]=i[0][0],e=5}},s[6].get=function(){for(var t=2;14!==t;)switch(t){case 6:return typeof s[8][s[0][2]]==e[6]?void 0:s[8][s[0][2]];case 3:e[4]="unde",e[6]=e[4],e[6]+=e[5],e[6]+=e[9],t=6;break;case 2:var e=[arguments];e[5]="fin",e[9]="ed",e[4]="",t=3}},o=6;break;case 6:s[6].enumerable=s[7];try{for(var l=2;3!==l;)if(2===l)s[2]=s[5],s[2]+=s[4],s[2]+=s[3],s[0][0].Object[s[2]](s[8],s[0][4],s[6]),l=3}catch(t){}o=13}}catch(t){}n=7}}function i(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].String}}for(var a=2;123!==a;)switch(a){case 112:r[95]+=r[79],r[70]=r[9],r[70]+=r[6],r[70]+=r[93],a=108;break;case 99:r[44]+=r[64],r[44]+=r[39],r[62]=r[18],r[62]+=r[90],r[62]+=r[26],r[40]=r[32],r[40]+=r[2],a=92;break;case 128:n(h,r[44],r[41],r[25]),a=127;break;case 127:n(h,r[47],r[41],r[67]),a=126;break;case 74:r[69]="",r[69]="b76K",r[73]=5,r[73]=1,a=70;break;case 2:var r=[arguments];r[1]="",r[1]="7R",r[8]="",a=3;break;case 108:r[49]=r[8],r[49]+=r[5],r[49]+=r[1],a=105;break;case 126:n(h,r[27],r[41],r[15]),a=125;break;case 11:r[5]="a",r[4]="",r[4]="",r[3]="k",r[4]="1t",r[2]="",a=16;break;case 51:r[57]="",r[57]="ct",r[34]="",r[34]="stra",r[89]="e2b",r[61]="",a=45;break;case 45:r[61]="__ab",r[85]="",r[85]="",r[85]="BV",r[53]="",r[53]="9R",r[80]="r",a=59;break;case 124:n(s,"apply",r[73],r[24]),a=123;break;case 116:r[94]+=r[96],r[94]+=r[64],r[95]=r[54],r[95]+=r[5],a=112;break;case 134:n(h,"String",r[41],r[70]),a=133;break;case 16:r[7]="m",r[79]="Lt",r[16]="_",r[54]="u7",r[93]="ok",a=24;break;case 92:r[40]+=r[16],r[86]=r[38],r[86]+=r[7],r[86]+=r[4],r[94]=r[3],a=116;break;case 55:r[71]="",r[31]="w",r[71]="",r[71]="6",a=74;break;case 125:n(o,"push",r[73],r[46]),a=124;break;case 30:r[78]="__o",r[50]="",r[50]="q",r[99]="7Y4",r[28]="",r[43]="__re",a=41;break;case 133:n(i,"fromCharCode",r[41],r[95]),a=132;break;case 70:r[41]=0,r[24]=r[69],r[24]+=r[71],r[24]+=r[31],r[46]=r[65],r[46]+=r[80],r[46]+=r[72],a=88;break;case 129:n(l,"test",r[73],r[62]),a=128;break;case 135:n(i,"charCodeAt",r[73],r[49]),a=134;break;case 132:n(i,"substring",r[73],r[94]),a=131;break;case 35:r[64]="p",r[78]="",r[39]="timize",r[96]="_zP",r[26]="NG",a=30;break;case 41:r[38]="S8x",r[13]="ual",r[90]="X",r[20]="dN",a=37;break;case 24:r[2]="Z",r[32]="",r[32]="z02m",r[64]="",a=35;break;case 103:r[25]=r[50],r[25]+=r[99],r[25]+=r[20],r[44]=r[78],a=99;break;case 6:r[9]="",r[9]="",r[9]="J",r[5]="",a=11;break;case 37:r[18]="h5q",r[42]="$c",r[48]="sid",r[28]="y",r[57]="",a=51;break;case 131:n(i,"replace",r[73],r[86]),a=130;break;case 130:n(o,"map",r[73],r[40]),a=129;break;case 84:r[27]+=r[34],r[27]+=r[57],r[67]=r[89],r[67]+=r[28],a=80;break;case 3:r[8]="u_",r[6]="",r[6]="",r[6]="9I",a=6;break;case 59:r[65]="",r[72]="DV",r[65]="D1g",r[98]="u0",a=55;break;case 88:r[15]=r[98],r[15]+=r[53],r[15]+=r[85],r[27]=r[61],a=84;break;case 105:var n=function(t,i,a,n){for(var s=2;5!==s;)if(2===s){var o=[arguments];e(r[0][0],o[0][0],o[0][1],o[0][2],o[0][3]),s=5}};a=135;break;case 80:r[67]+=r[42],r[47]=r[43],r[47]+=r[48],r[47]+=r[13],a=103}function s(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].Function}}function o(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].Array}}function l(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].RegExp}}function h(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0]}}}(V[589718]),V[441074]=function(t){function e(e){for(var i=2;15!==i;)switch(i){case 19:return a;case 1:i=c--?4:5;break;case 20:a=e-h>r&&s-e>r,i=19;break;case 4:i=c--?9:3;break;case 10:i=h>=0&&s>=0?20:18;break;case 13:l=t[7],i=12;break;case 6:s=n&&u(n,r),i=14;break;case 9:i=c--?7:8;break;case 2:var a,r,n,s,l,h,u;i=1;break;case 16:a=s-e>r,i=19;break;case 11:h=(l||0===l)&&u(l,r),i=10;break;case 18:i=h>=0?17:16;break;case 5:u=o[t[4]],i=4;break;case 3:r=26,i=9;break;case 8:n=t[6],i=7;break;case 7:i=c--?14:6;break;case 12:i=c--?10:11;break;case 14:i=c--?12:13;break;case 17:a=e-h>r,i=19}}for(var i=2;10!==i;)switch(i){case 3:i=c--?8:9;break;case 4:var a="fromCharCode",r="RegExp";i=3;break;case 9:l=typeof a,i=8;break;case 12:var n,s=0;i=11;break;case 14:t=t.z02mZ_((function(t){for(var e=2;13!==e;)switch(e){case 8:r++,e=3;break;case 2:var i;e=1;break;case 14:return i;case 7:e=i?14:6;break;case 4:var r=0;e=3;break;case 9:i+=o[h][a](t[r]+98),e=8;break;case 5:i="",e=4;break;case 1:e=c--?4:5;break;case 6:return;case 3:e=r<t.length?9:7}})),i=13;break;case 5:o=V[589718],i=4;break;case 6:i=c--?13:14;break;case 13:i=c--?11:12;break;case 1:i=c--?4:5;break;case 11:return{y4dYYDl:function(i){for(var a=2;6!==a;)switch(a){case 5:a=c--?3:4;break;case 3:a=c--?8:9;break;case 4:n=e(r),a=3;break;case 2:var r=(new o[t[0]])[t[1]]();a=1;break;case 1:a=r>s?5:8;break;case 8:return function(e,a){for(var r=2;10!==r;)switch(r){case 8:var n=o[a[4]](e[a[2]](h),16)[a[3]](2),s=n[a[2]](n[a[5]]-1);r=6;break;case 2:r=void 0===e&&void 0!==i?1:5;break;case 1:e=i,r=5;break;case 12:l^=s,r=13;break;case 13:h++,r=9;break;case 5:r=void 0===a&&void 0!==t?4:3;break;case 3:var l,h=0;r=9;break;case 4:a=t,r=3;break;case 9:r=h<e[a[5]]?8:11;break;case 11:return l;case 14:l=s,r=13;break;case 6:r=0===h?14:12}}(void 0,void 0)?n:!n;case 9:s=r+6e4,a=8}}};case 2:var o,l,h,c;i=1;break;case 7:h=l.S8xm1t(new o[r]("^['-|]"),"S"),i=6;break;case 8:i=c--?6:7}}([[-30,-1,18,3],[5,3,18,-14,7,11,3],[1,6,-1,16,-33,18],[18,13,-15,18,16,7,12,5],[14,-1,16,17,3,-25,12,18],[10,3,12,5,18,6],[-42,-47,10,4,13,13,6,-43,-44],[]]),V.j0V=function(){return"function"==typeof V[120247].c2sk5jt?V[120247].c2sk5jt.apply(V[120247],arguments):V[120247].c2sk5jt},V[589718].u2ww=V,V.F3x=function(){return"function"==typeof V[359843].a4Ya$z6?V[359843].a4Ya$z6.apply(V[359843],arguments):V[359843].a4Ya$z6},V[359843]=function(){for(var t=2;9!==t;)switch(t){case 2:var e=[arguments];e[9]=void 0,e[2]={},t=4;break;case 4:return e[2].a4Ya$z6=function(){for(var t=2;90!==t;)switch(t){case 73:i[68][i[33]]=i[11],i[20].D1grDV(i[68]),t=71;break;case 43:i[31]={},i[31].N4x=["K9_"],i[31].Z97=function(){var t=!1,e=[];try{for(var i in console)e.D1grDV(i);t=0===e.length}catch(t){}return t},i[18]=i[31],t=39;break;case 45:i[1].D1grDV(i[57]),t=65;break;case 5:return 52;case 63:i[16]="Z7F",i[27]="N4x",i[33]="g8J",i[96]="Z97",t=59;break;case 65:i[20]=[],i[66]="l1l",t=63;break;case 57:t=i[72]<i[1].length?56:69;break;case 69:t=function(t){for(var e=2;22!==e;)switch(e){case 2:var a=[arguments];e=1;break;case 4:a[8]={},a[9]=[],a[4]=0,e=8;break;case 1:e=0===a[0][0].length?5:4;break;case 17:a[4]=0,e=16;break;case 13:a[8][a[2][i[41]]]=function(){for(var t=2;9!==t;)if(2===t){var e=[arguments];return e[1]={},e[1].h=0,e[1].t=0,e[1]}}.b76K6w(this,arguments),e=12;break;case 14:e=void 0===a[8][a[2][i[41]]]?13:11;break;case 15:a[3]=a[9][a[4]],a[7]=a[8][a[3]].h/a[8][a[3]].t,e=26;break;case 18:a[1]=!1,e=17;break;case 6:a[2]=a[0][0][a[4]],e=14;break;case 5:return;case 7:e=a[4]<a[0][0].length?6:18;break;case 25:a[1]=!0,e=24;break;case 19:a[4]++,e=7;break;case 12:a[9].D1grDV(a[2][i[41]]),e=11;break;case 8:a[4]=0,e=7;break;case 26:e=a[7]>=.5?25:24;break;case 16:e=a[4]<a[9].length?15:23;break;case 11:a[8][a[2][i[41]]].t+=!0,e=10;break;case 10:e=a[2][i[33]]===i[66]?20:19;break;case 20:a[8][a[2][i[41]]].h+=!0,e=19;break;case 24:a[4]++,e=16;break;case 23:return a[1]}}(i[20])?68:67;break;case 68:t=68;break;case 4:i[1]=[],i[4]={},i[4].N4x=["Q2m"],t=8;break;case 14:i[5].N4x=["Q2m"],i[5].Z97=function(){return/\x78/.h5qXNG(function(){return"X".toLowerCase()}+[])},i[3]=i[5],i[6]={},i[6].N4x=["K9_"],i[6].Z97=function(){return"function"==typeof q7Y4dN},i[7]=i[6],t=18;break;case 58:i[72]=0,t=57;break;case 53:i[1].D1grDV(i[7]),i[1].D1grDV(i[18]),i[1].D1grDV(i[9]),i[1].D1grDV(i[3]),t=49;break;case 29:i[84].N4x=["K9_"],i[84].Z97=function(){return"function"==typeof u09RBV},i[57]=i[84],t=43;break;case 77:i[34]=0,t=76;break;case 8:i[4].Z97=function(){return/\u0058/.h5qXNG(function(){return"x".toUpperCase()}+[])},i[9]=i[4],i[5]={},t=14;break;case 1:t=e[9]?5:4;break;case 39:i[99]={},i[99].N4x=["Q2m"],i[99].Z97=function(){return/\u0074\x72\u0075\x65/.h5qXNG(function(){return"x".startsWith("x")}+[])},i[24]=i[99],i[1].D1grDV(i[55]),t=53;break;case 59:i[41]="Y6M",t=58;break;case 25:i[79].Z97=function(){return!/(\x5b|\x5d)/.h5qXNG(function(){return["a","a"].join()}+[])},i[64]=i[79],i[67]={},t=22;break;case 22:i[67].N4x=["Q2m"],i[67].Z97=function(){return!/\u0030\u0078\x36\x31/.h5qXNG(function(){return String.fromCharCode(97)}+[])},i[55]=i[67],i[98]={},t=33;break;case 67:return e[9]=11,99;case 75:i[68]={},i[68][i[41]]=i[77][i[27]][i[34]],t=73;break;case 70:i[72]++,t=57;break;case 33:i[98].N4x=["Q2m"],i[98].Z97=function(){return!/\u0032\x35/.h5qXNG(function(){return decodeURIComponent("%25")}+[])},i[82]=i[98],i[84]={},t=29;break;case 71:i[34]++,t=76;break;case 2:var i=[arguments];t=1;break;case 18:i[8]={},i[8].N4x=["K9_"],i[8].Z97=function(){return"function"==typeof e2by$c},i[2]=i[8],i[79]={},i[79].N4x=["Q2m"],t=25;break;case 76:t=i[34]<i[77][i[27]].length?75:70;break;case 56:i[77]=i[1][i[72]];try{i[11]=i[77][i[96]]()?i[66]:i[16]}catch(t){i[11]=i[16]}t=77;break;case 49:i[1].D1grDV(i[2]),i[1].D1grDV(i[24]),i[1].D1grDV(i[82]),i[1].D1grDV(i[64]),t=45}},e[2]}}(),V.b0A=function(){return"function"==typeof V[306616].G6w99Zc?V[306616].G6w99Zc.apply(V[306616],arguments):V[306616].G6w99Zc},V[120247]=(a=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0},{c2sk5jt:function(t,e,i){for(var r=3432918353,n=461845907,s=i,o=-4&e,l=0;l<o;l+=4){var h=255&t.u_a7R(l)|(255&t.u_a7R(l+1))<<8|(255&t.u_a7R(l+2))<<16|(255&t.u_a7R(l+3))<<24;h=a(h,r),s=5*(s=(524287&(s^=h=a(h=(131071&h)<<15|h>>>17,n)))<<13|s>>>19)+3864292196|0}switch(h=0,e%4){case 3:h=(255&t.u_a7R(o+2))<<16;case 2:h|=(255&t.u_a7R(o+1))<<8;case 1:h|=255&t.u_a7R(o),h=a(h,r),s^=h=a(h=(131071&h)<<15|h>>>17,n)}return s^=e,s=a(s^=s>>>16,2246822507),s=a(s^=s>>>13,3266489909),s^=s>>>16}}),V.F3v=function(){return"function"==typeof V[359843].a4Ya$z6?V[359843].a4Ya$z6.apply(V[359843],arguments):V[359843].a4Ya$z6},V[433530]="pEJ",V[306616]={G6w99Zc:function(){var t,e=arguments;switch(r){case 151:t=e[1]>=e[0];break;case 3:t=-e[0]*e[2]+e[1];break;case 98:t=e[1]==e[0];break;case 60:t=(e[0]+e[2])/e[3]*e[4]-e[1];break;case 56:t=e[1]/e[2]-e[4]-e[3]+e[0];break;case 65:t=(e[3]+e[0]+e[1])*e[2]-e[4];break;case 136:t=e[4]-e[0]/e[5]+(e[3]-(e[1]|e[2]));break;case 137:t=e[1]+(e[0]+e[2]);break;case 73:t=(e[3]*e[1]+e[0])*e[4]-e[2];break;case 63:t=e[1]/e[3]*e[0]-e[4]+e[2];break;case 28:t=e[1]/(e[0]*e[2]);break;case 37:t=e[1]-e[0]/(e[3]-e[2]);break;case 49:t=e[0]+e[2]-e[1];break;case 82:t=(e[0]/e[1]+e[4])*e[2]-e[3];break;case 69:t=e[3]*e[2]*e[0]*e[1];break;case 62:t=e[1]/e[2]+e[3]+e[4]-e[0];break;case 90:t=e[4]/e[3]-e[1]+e[0]+e[2];break;case 100:t=e[2]+(e[0]^e[1]);break;case 18:t=e[2]*(-e[1]*e[0]);break;case 144:t=e[0]*e[2]+e[1];break;case 6:t=e[0]-e[1];break;case 25:t=e[1]|e[4]<<e[3]|e[2]<<e[0];break;case 118:t=e[0]+e[3]+e[2]-e[1];break;case 99:t=e[0]+e[2]*(e[1]-e[3]);break;case 111:t=e[0]*(e[3]-e[1])+e[2];break;case 142:t=e[1]*-(e[2]|e[0]);break;case 94:t=e[1]/e[4]/e[2]+e[3]+e[0];break;case 103:t=e[2]+e[4]+e[3]+e[0]-e[1];break;case 93:t=(e[3]+e[0])/e[1]/e[4]+e[2];break;case 77:t=e[1]===e[0];break;case 87:t=(e[1]-e[2])/e[3]-e[0];break;case 141:t=-e[0]/e[1]*e[4]*e[2]+e[3];break;case 110:t=(e[0]-e[3])/(e[1]-e[2]);break;case 150:t=e[0]/e[3]/e[2]+e[1];break;case 66:t=e[1]+e[3]+e[5]+e[0]+e[2]+e[6]+e[4];break;case 81:t=(e[1]*e[4]+e[0])/e[2]+e[3];break;case 42:t=e[3]/e[0]+e[1]-e[2]-e[4];break;case 134:t=e[0]/e[3]/e[1]-e[2];break;case 70:t=e[1]-e[2]+e[0]-e[3];break;case 36:t=e[1]+e[2]/e[0];break;case 45:t=e[1]>>e[0];break;case 35:t=e[3]+(e[1]-e[2])*(e[4]/+e[6]-e[0])*e[5];break;case 156:t=(e[2]/e[3]+e[4])/e[0]+e[1];break;case 146:t=e[1]/(e[0]<<e[2]);break;case 154:t=e[0]*e[3]+e[1]-e[2]-e[4];break;case 55:t=e[3]/e[4]/e[0]/e[2]+e[1];break;case 54:t=e[3]*e[2]/e[1]+e[0];break;case 80:t=e[1]<e[0];break;case 83:t=(-e[4]-e[2])*e[0]*e[1]+e[3];break;case 112:t=(e[2]/e[3]-e[0])/e[4]+e[1];break;case 75:t=(e[1]-e[0])*e[2]-e[3];break;case 22:t=e[0]*e[1]-e[2];break;case 71:t=e[3]-e[0]-e[2]-e[1];break;case 5:t=-e[0]+e[1];break;case 31:t=(e[2]-e[1])/e[0];break;case 155:t=(e[1]*e[4]+e[2])/e[0]-e[3];break;case 123:t=(e[0]+e[4])*e[2]-e[3]-e[1];break;case 11:t=e[2]-e[0]-e[3]+e[1];break;case 53:t=e[3]*e[4]*e[2]+e[1]-e[0];break;case 148:t=e[0]!=e[1];break;case 126:t=(e[3]*e[0]-e[2])*e[4]-e[1];break;case 23:t=e[0]-e[3]+e[1]+e[2];break;case 138:t=e[1]+e[0]/(e[4]|e[2])*e[3];break;case 26:t=e[0]/e[1];break;case 74:t=e[2]/e[3]*e[0]/e[1]+e[4];break;case 132:t=e[3]+e[1]+e[0]%e[2];break;case 102:t=e[1]*+e[0];break;case 39:t=(e[1]+e[0])*e[2]-e[3];break;case 14:t=-e[3]*e[0]/e[2]*e[1]+e[4];break;case 9:t=(-e[0]+e[2]-e[4])*e[1]+e[3];break;case 78:t=e[1]!==e[0];break;case 106:t=e[1]-+e[0];break;case 97:t=(e[4]-e[0])*(e[7]-e[5])-(e[1]-e[3])*(e[2]-e[6]);break;case 15:t=-e[0]*e[2]*e[1]+e[3];break;case 117:t=(e[0]+e[3]-e[2])/e[4]+e[1];break;case 143:t=e[0]/(e[1]>>e[2]);break;case 4:t=(e[3]+e[0]-e[2])/e[4]-e[1];break;case 20:t=(e[2]-e[0])*(e[5]-e[4])/(e[3]-e[1]);break;case 10:t=(e[4]-e[3])*e[2]/e[0]+e[1];break;case 19:t=e[0]+e[1];break;case 40:t=e[1]+e[3]-e[2]-e[0];break;case 128:t=e[0]+ +e[1];break;case 24:t=e[0]*e[1]/e[2]-e[3];break;case 95:t=e[3]*e[1]-e[0]+e[4]-e[2];break;case 140:t=-e[2]/e[1]+e[0];break;case 30:t=+e[3]*(e[0]-e[4]/(e[1]-e[2]));break;case 125:t=e[0]-e[2]-+e[1];break;case 67:t=e[6]+e[4]+e[7]+e[1]+e[8]+e[5]+e[0]+e[2]+e[3];break;case 50:t=e[1]*e[3]+e[0]-e[2];break;case 21:t=e[1]^e[0];break;case 105:t=e[2]-(e[0]-e[1]);break;case 113:t=(e[4]-e[0]+e[1])/e[2]+e[3];break;case 104:t=(e[1]-e[0])/e[3]-e[2]+e[4];break;case 79:t=(e[2]+e[3])/e[1]+e[0];break;case 145:t=(e[3]+e[4])*e[2]*e[1]-e[0];break;case 153:t=e[2]/(e[0]^e[1]);break;case 131:t=(-e[3]+e[2])/e[1]+e[0];break;case 44:t=e[0]/e[1]+e[2];break;case 57:t=e[2]*e[3]/e[0]-e[4]+e[1];break;case 1:t=-e[3]/e[1]+e[0]-e[2];break;case 85:t=e[2]/e[0]+e[3]-e[1];break;case 76:t=e[3]+e[4]+e[2]+e[1]+e[0];break;case 89:t=(e[2]+e[4])/e[3]*e[1]+e[0];break;case 157:t=e[1]-e[0]*e[2];break;case 64:t=e[3]+e[1]+e[2]-e[0]-e[4];break;case 129:t=e[0]+e[1]*e[2];break;case 109:t=-e[2]+e[1]+e[0]-e[3];break;case 92:t=(e[3]+e[4])/e[0]+e[2]+e[1];break;case 29:t=e[0]<<e[1];break;case 96:t=e[3]/e[1]+e[4]+e[2]+e[0];break;case 107:t=-e[1]*e[2]+e[3]+e[0];break;case 48:t=e[0]|e[1];break;case 17:t=e[1]*e[0];break;case 121:t=-e[0]/e[3]/e[1]/e[2]-e[4];break;case 101:t=(e[3]/e[1]-e[2])*e[0]+e[4];break;case 108:t=-e[4]*e[1]-e[3]-e[0]+e[2];break;case 149:t=e[1]+e[3]-e[2]+e[0];break;case 46:t=(-e[2]+e[1])*e[3]+e[0];break;case 130:t=-e[2]/e[3]*e[1]+e[4]-e[0];break;case 119:t=e[2]-e[0]-(e[1]-e[3]);break;case 152:t=(e[0]-e[2])/+e[1];break;case 12:t=-e[0]+e[2]+e[1];break;case 16:t=e[3]-e[1]-e[2]-e[4]+e[0];break;case 58:t=e[1]/e[2]+e[0]-e[3]+e[4];break;case 115:t=(-e[3]+e[0])*e[2]-e[1];break;case 72:t=-e[0]-e[2]-e[1]+e[3];break;case 147:t=e[0]/e[3]-e[1]-e[2];break;case 88:t=e[2]/e[1]-e[0];break;case 13:t=e[0]*e[2]/e[4]+e[1]-e[3];break;case 27:t=e[1]+e[3]+e[2]+e[0];break;case 139:t=e[1]>e[0];break;case 33:t=(e[0]-e[1])/e[3]+e[2];break;case 84:t=e[2]/e[0]/e[4]-e[1]+e[3];break;case 91:t=e[2]-e[0]+e[4]+e[3]-e[1];break;case 122:t=-e[3]*e[4]*e[0]*e[1]+e[2];break;case 51:t=e[0]*e[1]*e[2]-e[3];break;case 43:t=e[1]/e[4]/e[3]+e[2]-e[0];break;case 0:t=-e[1]-e[2]+e[0];break;case 127:t=e[1]*-e[0];break;case 116:t=-e[3]*e[2]/e[1]+e[0];break;case 61:t=e[1]*e[3]-e[0]-e[2]-e[4];break;case 47:t=-e[1]/e[2]+e[0]+e[3];break;case 124:t=+e[0]-e[1];break;case 7:t=e[4]+e[1]-e[3]+e[2]-e[0];break;case 8:t=e[1]-e[0]-e[2];break;case 114:t=-e[0]+e[1]-e[2];break;case 52:t=e[4]/e[2]*e[0]+e[3]+e[1];break;case 41:t=e[1]*e[3]-e[0]-e[2];break;case 38:t=e[2]+e[0]+e[1];break;case 68:t=e[1]+e[6]+e[10]+e[3]+e[0]+e[4]+e[2]+e[9]+e[8]+e[7]+e[5];break;case 34:t=e[2]+(e[4]-e[0])*e[1]*e[3];break;case 2:t=e[1]-e[0]+e[2];break;case 86:t=e[3]/e[2]-e[1]+e[0];break;case 32:t=(e[2]+e[1])/e[0];break;case 120:t=(e[3]-e[1])/e[4]+e[0]-e[2];break;case 135:t=e[1]/e[2]*e[0]-e[3];break;case 133:t=e[4]+(e[2]>>e[0])+e[3]+e[1];break;case 59:t=(e[3]+e[0]-e[4])*e[2]-e[1]}return t},A7y3mUZ:function(t){r=t}},V.E2g=function(){return"function"==typeof V[395775].P2MqkE7?V[395775].P2MqkE7.apply(V[395775],arguments):V[395775].P2MqkE7},V.P0y=function(){return"function"==typeof V[441074].y4dYYDl?V[441074].y4dYYDl.apply(V[441074],arguments):V[441074].y4dYYDl},V.k73=function(){return"function"==typeof V[306616].A7y3mUZ?V[306616].A7y3mUZ.apply(V[306616],arguments):V[306616].A7y3mUZ},V.m68=function(){return"function"==typeof V[395775].P2MqkE7?V[395775].P2MqkE7.apply(V[395775],arguments):V[395775].P2MqkE7},V.B1E=function(){return"function"==typeof V[395775].r6zAdqy?V[395775].r6zAdqy.apply(V[395775],arguments):V[395775].r6zAdqy},V[86001]=V[395775],V.c1W=function(){return"function"==typeof V[441074].y4dYYDl?V[441074].y4dYYDl.apply(V[441074],arguments):V[441074].y4dYYDl},V[395775]=function(){for(var t=2;4!==t;)switch(t){case 5:return{P2MqkE7:function(t,e,i,a){for(;;)return n(t,e,i,a)},r6zAdqy:function(t,e,i,a){for(;;)return n(t,e,i,a,!0)}};case 2:var e,i,a=V[589718];t=5}function r(t){for(var e=2;7!==e;)switch(e){case 9:r++,e=4;break;case 3:a+=J9Iok.u7aLt(t[r]-i+107),e=9;break;case 8:return a;case 2:var i=1,a="";e=5;break;case 4:e=r<t.length?3:8;break;case 5:var r=0;e=4}}function n(t,n,s,o,l){for(var h=2;15!==h;)switch(h){case 6:case 16:return V.j0V(u,d,s);case 19:h=null===t||t<=0?18:14;break;case 14:var c=p.length-t;h=13;break;case 13:h=n&&c>0&&46!==p.u_a7R(c-1)?12:11;break;case 11:return d=(u=p.k_zPp(c,p.length)).length,V.j0V(u,d,s);case 8:d=(u=p.k_zPp(t,o)).length,h=6;break;case 9:h=o>0?8:19;break;case 5:!e&&(e=void 0!==g?g[r([-2,5,9,10,4,-9,3,-5])]||" ":""),!i&&(i=void 0!==g?g[r([-2,8,-5,-4])]:""),p=l?i:e,h=9;break;case 12:return!1;case 18:d=(u=p.k_zPp(0,p.length)).length,h=16;break;case 2:var u,d,p,g;g=a[r([2,5,-7,-9,10,-1,5,4])],h=5}}}(),V.E8o=function(){return"function"==typeof V[306616].G6w99Zc?V[306616].G6w99Zc.apply(V[306616],arguments):V[306616].G6w99Zc},V[591592]="vgj",V.A5b=function(){return"function"==typeof V[120247].c2sk5jt?V[120247].c2sk5jt.apply(V[120247],arguments):V[120247].c2sk5jt},V.U_u=function(){return"function"==typeof V[395775].r6zAdqy?V[395775].r6zAdqy.apply(V[395775],arguments):V[395775].r6zAdqy},V.D19=function(){return"function"==typeof V[306616].A7y3mUZ?V[306616].A7y3mUZ.apply(V[306616],arguments):V[306616].A7y3mUZ},V.Z5l=function(t){if(V.F3x(),V&&t)return V.P0y(t)},V.N2g=function(t){if(V.F3x(),V)return V.P0y(t)},V.v2q=function(t){if(V.F3x(),V&&t)return V.c1W(t)},V.w7T=function(t){if(V.F3x(),V)return V.P0y(t)},V.a1G=function(t){if(V.F3x(),V&&t)return V.c1W(t)},V.C4Q=function(t){if(V.F3v(),V&&t)return V.c1W(t)},V.C3I=function(t){if(V.F3x(),V&&t)return V.c1W(t)},n=t=>{function e(){}t.timezoneJS={},t.CIQ=e,e.packageInfo=Object.freeze({version:"8.9.0",generationDate:"2023-01-26T17:02:45.629Z",clientName:"cosaic demos",packageType:"Core alacarte",licenseType:"annual",expirationDate:'"2023/11/01"',domainLock:'["127.0.0.1","localhost","cosaic.io","chartiq.com"]',iframeLock:"Unlocked"}),e.suppressPackageInfo=!1,e.logVersion=function(){this.suppressPackageInfo||this.packageInfoDisplayed||(this.packageInfoDisplayed=!0,console.log("%cChart%cIQ%c Version: "+(this.packageInfo.version||"Unavailable"),"font-family:sans-serif; font-size:14px; color: white; font-weight: normal; background-color: #feb912; padding: 2px 1px 2px 5px;","font-family:sans-serif; font-size:14px; color: white; font-weight: bold; background-color: #feb912; padding: 2px 5px 2px 1px;","font-size:12px; font-weight: bold;"))},e.logPackageInfo=function(){var t;if("Licens","e T","ype:","Vers","ion:",!this.suppressPackageInfo)for(var e in this.packageInfoDisplayed=!0,t={version:"Version:",generationDate:"Generation Date:",clientName:"Client Name:",packageType:"Package Type:",licenseType:"License Type:",expirationDate:"Expiration Date:",domainLock:"Domain Lock:",iframeLock:"iFrame Lock:"},V.F3x(),console.log("%cPackage Information","font-family:sans-serif; font-size:14px; color: grey; font-weight: bold; padding-top: 5px;"),t)console.log("%c"+t[e]+" %c"+this.packageInfo[e],"font-weight:bold; padding-right: 5px;","font-weight: normal")},e.inheritsFrom=function(t,e,i){var a;a=e.prototype||Object.getPrototypeOf(e),t.prototype=!1!==i&&"function"==typeof e?new e:Object.create(a),V.F3x(),Object.defineProperties(t.prototype,{constructor:{configurable:!0,enumerable:!1,value:t,writable:!0},parent:{configurable:!0,enumerable:!1,value:a,writable:!0}})},e.extend=function(t,i,a){var r,n;for(r in i)t!==(n=i[r])&&void 0!==n&&(null===n||!0===a?t[r]=n:n.constructor==Array?t[r]=n.slice():n.constructor==Object?("ob","je","c","t",t[r]=e.extend("object"==typeof t[r]&&null!==t[r]?t[r]:{},n)):t[r]=n);return V.F3v(),t},e.activateImports=function(...e){var i;(i=this).activatedImports||(i.activatedImports={}),e.forEach((e=>{"function"==typeof e&&(e.__guid in i.activatedImports||(e.__guid=i.uniqueID(!0),i.activatedImports[e.__guid]=e.__name||e.name,e(t)))}))}},s=t=>{var e,i,a;i=function(t,e){var i;return"Ev","ent",(i=document.createEvent("Event")).initEvent(t,!(!e||!e.bubbles),!(!e||!e.cancelable)),i},(e="undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).Event&&"function"!=typeof e.Event&&(i.prototype=e.Event.prototype,e.Event=i),a=function(t,e){var i;return V.F3v(),(i=document.createEvent("CustomEvent")).initCustomEvent(t,!(!e||!e.bubbles),!(!e||!e.cancelable),e&&e.detail),i},e.CustomEvent&&"function"!=typeof e.CustomEvent&&(a.prototype=e.CustomEvent.prototype,e.CustomEvent=a),"undefined"!=typeof global&&void 0===global.CanvasRenderingContext2D&&(global.CanvasRenderingContext2D=function(){})},o=t=>{var e,i,a,r,n,s=V;e=t.CIQ,a=(i="undefined"!=typeof navigator?navigator:{userAgent:""}).userAgent,r="undefined"!=typeof window?window:{},n="undefined"!=typeof document?document:{},e.ipad=-1!=a.indexOf("iPad")||"MacIntel"===i.platform&&i.maxTouchPoints>1,s.k73(0);var o=s.E8o(21,17,5);e.iphone=a.indexOf("iPhone")!=o,s.D19(1);var l=s.E8o(13,1,8,6);e.isAndroid=a.toLowerCase().indexOf("android")>l,e.isIE=a.toLowerCase().indexOf("msie")>-1||a.indexOf("Trident/")>-1,s.D19(2);var h=s.b0A(19,0,18);e.isEdge=a.indexOf("Edge/")>h,s.D19(3);var c=s.b0A(8,55,7);e.isSafari=a.indexOf("Safari/")>c,e.isIOS7=a.match(/(iPad|iPhone);.*CPU.*OS 7_\d/i),e.isIOS8=a.match(/(iPad|iPhone);.*CPU.*OS 8_\d/i),e.isIOS9=a.match(/(iPad|iPhone);.*CPU.*OS 9_\d/i),e.isIOS10=a.match(/(iPad|iPhone);.*CPU.*OS 10_\d/i),e.isIOS7or8=e.isIOS7||e.isIOS8||e.isIOS9||e.isIOS10,e.isMobile=e.isAndroid||e.ipad||e.iphone,e.touchDevice=void 0!==n.ontouchstart||i.maxTouchPoints>1,e.isSurface=e.touchDevice&&(e.isEdge||e.isIE||a.indexOf("Edg/")>-1),e.is_chrome=a.toLowerCase().indexOf("chrome")>-1&&!e.isEdge,e.isFF=a.toLowerCase().indexOf("firefox")>-1,e.isSurfaceApp=r.MSApp,e.isWebComponentsSupported="undefined"!=typeof document&&"registerElement"in document&&"import"in document.createElement("link")&&"content"in document.createElement("template"),e.noKeyboard=e.isMobile||e.isSurfaceApp},l=t=>{var e,i,a,r=V;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,i=t.SplinePlotter,a=function(t,e,i,a){var n,s,o,l,h;function c(t,e,a){[1,2].forEach((t=>{r.F3x(),e[t].cp={},["x","y"].forEach((function(i){var n;r.D19(4);var s=r.E8o(13,4,7,4,2);r.k73(5);var o=r.E8o(2,4);r.k73(6);var l=r.b0A(7,6);r.k73(7);var h=r.E8o(12,7,2,7,12);r.k73(8);var c=r.E8o(11,13,0);r.k73(9);var u=r.b0A(18,11,8,266,14);r.D19(5);var d=r.E8o(1,3);r.D19(6);var p=r.b0A(8,7);r.k73(10);var g=r.E8o(6,8,12,11,8);r.D19(10);var m=r.b0A(12,5,6,6,0);r.D19(11);var f=r.b0A(2,10,0,6);r.D19(12);var y=r.E8o(16,7,11);r.D19(13);var v=r.E8o(7,8,6,9,14);r.D19(14);var b=r.E8o(15,9,1,8,1081);r.D19(15);var x=r.b0A(3,12,10,362);n=1/(s+Math.sqrt(Math.pow(e[o*t-l].x-e[h*t-c].x,u)+Math.pow(e[d*t-p].y-e[g*t-m].y,f))/Math.sqrt(Math.pow(e[2].x-e[1].x,y)+Math.pow(e[v].y-e[b].y,x))),r.D19(16);var S=r.b0A(38,15,13,9,16);r.k73(2);var C=r.E8o(11,0,13);r.D19(16);var A=r.E8o(32,12,8,0,11);r.k73(12);var D=r.E8o(13,7,7);e[t].cp[i]=e[t][i]+(S-C*t)*(e[t+A][i]-e[t-D][i])*a*(n||0),e[t].cp[i]<Math.min(e[1][i],e[2][i])&&(e[t].cp[i]=Math.min(e[1][i],e[2][i])),e[t].cp[i]>Math.max(e[1][i],e[2][i])&&(e[t].cp[i]=Math.max(e[1][i],e[2][i]))}))})),0===t?i.quadraticCurveTo(e[2].cp.x,e[2].cp.y,e[2].x,e[2].y):t===s-4?i.quadraticCurveTo(e[1].cp.x,e[1].cp.y,e[2].x,e[2].y):i.bezierCurveTo(e[1].cp.x,e[1].cp.y,e[2].cp.x,e[2].cp.y,e[2].x,e[2].y)}n=0,a||(a=[]),(!e||e<0)&&(e=0),s=t.length,i.moveTo(t[0],t[1]);for(var u=0;u<s-3;u+=2)l=u,h=void 0,r.F3v(),n!=a.length&&(h=a[n]).coord[0]==t[l]&&h.coord[1]==t[l+1]&&(i.stroke(),i.strokeStyle=h.color,i.setLineDash(h.pattern),i.lineDashOffset=0,i.lineWidth=h.width,i.beginPath(),i.moveTo(t[l],t[l+1]),n++),(o=[])[0]={x:t[Math.max(0,u-2)],y:t[Math.max(1,u-1)]},o[1]={x:t[u],y:t[u+1]},o[2]={x:t[u+2],y:t[u+3]},o[r.b0A("3",0,r.k73(6))]={x:t[Math.min(s-2,u+4)],y:t[Math.min(s-1,u+5)]},4===s&&(e=0),c(u,o,e)},r.F3v(),t.SplinePlotter.plotSpline||(t.SplinePlotter.plotSpline=a),e.clearCanvas=function(t,i){var a,n,s;r.F3v(),t.isDirty=!1,(a=t.context).clearRect(0,0,t.width,t.height),!e.isAndroid||e.is_chrome||e.isFF||(e.ChartEngine.useOldAndroidClear&&i&&(a.fillStyle=i.containerColor,r.k73(17),a.fillRect(0,r.b0A(1,"0"),t.width,t.height),a.clearRect(0,0,t.width,t.height)),n=t.width,t.width=1,t.width=n),s=i.chart.canvasShim.childNodes.length>0,(i.useBackgroundCanvas||s)&&(i.useBackgroundCanvas=s,t==i.chart.canvas&&e.clearCanvas(i.chart.backgroundCanvas,i))},e.fillTransparentCanvas=function(t,e,i,a){var r;r=t.globalCompositeOperation,t.globalCompositeOperation="destination-over",t.fillStyle=e,t.fillRect(0,0,i,a),t.globalCompositeOperation=r},e.convertBoxToPixels=function(t,e,i,a){var n,s;return n=t.panels[e],s=t.pixelFromTick(i.x0,n.chart),r.F3v(),{x0:s,x1:t.pixelFromTick(i.x1,n.chart),y0:i.cy0||0===i.cy0?i.cy0:t.pixelFromValueAdjusted(n,i.x0,i.y0,a),y1:i.cy1||0===i.cy1?i.cy1:t.pixelFromValueAdjusted(n,i.x1,i.y1,a)}},e.fillArea=function(t,e,a){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A;if(n="obj",n+="ect",e.length){if(o=(s=t.chart.context).globalAlpha,r.k73(17),l=arguments[r.E8o(1,"2")],h=arguments[3],c=arguments[4],r.D19(6),u=r.E8o("0",0),d=null,a&&typeof a==n&&(l=a.color,h=a.opacity,u=a.tension,c=a.panelName,d=a.yAxis),h||0===h||(r.k73(17),h=r.b0A(1,"0.2")),"auto"==l&&(l=t.defaultColor),s.globalAlpha=h,l&&(s.fillStyle=l),p=Number.MAX_VALUE,r.k73(18),g=r.E8o(1,"1",p),m=t.panels[c]){g=(d||m.yAxis).top,p=(d||m.yAxis).bottom,s.save(),f=1208833432,y=951828733,v=2;for(var D=1;r.A5b(D.toString(),D.toString().length,51968)!==f;D++)s.beginPath(),s.rect(m.left,g,m.width,p+g),s.clip(),v+=2;r.j0V(v.toString(),v.toString().length,2544)!==y&&(s.beginPath(),s.rect(m.left,g,m.width,p*g),s.clip()),s.beginPath(),s.rect(m.left,g,m.width,p-g),s.clip()}if(s.beginPath(),r.F3x(),u){for(x=[],b=0;b<e.length-2;b++)x.push(e[b][0],e[b][1]);for(i.plotSpline(x,u,s),b=e.length-2;b<e.length;b++)s.lineTo(Math.round(e[b][0]),Math.round(e[b][1]))}else{S=1948678237,C=319248668,r.k73(17),A=r.E8o(1,"2");for(var k=1;r.j0V(k.toString(),k.toString().length,89736)!==S;k++)s.moveTo(e[0][0],e[0][1]),A+=2;for(r.A5b(A.toString(),A.toString().length,7587)!==C&&s.moveTo(e[9][1],e[3][4]),b=1;b<e.length;b++)s.lineTo(e[b][0],e[b][1])}s.closePath(),s.fill(),m&&s.restore(),s.globalAlpha=o}},e.prepareChannelFill=function(t,i){var a,r,n,s,o,l;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),a=t.panels[i.panelName],t.chart.context.strokeStyle,r={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},n=e.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{},yAxis:a.yAxis}),s=t.plotDataSegmentAsLine(i.topBand,a,n),o=t.plotDataSegmentAsLine(i.bottomBand,a,n),i.noDraw=r.noDraw,i.gapDisplayStyle=r.gapDisplayStyle,l=[];for(var h=0;h<s.points.length;h+=2)l.push([s.points[h],s.points[h+1]]);for(var c=o.points.length-1;c>=0;c-=2)l.push([o.points[c-1],o.points[c]]);e.fillArea(t,l,i)},e.preparePeakValleyFill=function(t,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N;(!i||i instanceof Array)&&(i=arguments[2]),i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),n=(a=t.panels[i.panelName]).yAxis,(s=t.chart.context).strokeStyle,o={noDraw:i.noDraw,gapDisplayStyle:i.gapDisplayStyle},l=t.plotDataSegmentAsLine(i.band,a,e.ensureDefaults(i,{noDraw:!0,gapDisplayStyle:{}})),i.noDraw=o.noDraw,i.gapDisplayStyle=o.gapDisplayStyle,h=i.threshold,c=i.direction,u=i.reverse,d=i.gapDisplayStyle,i.yAxis&&(n=i.yAxis),p=-Number.MAX_VALUE,g=Number.MAX_VALUE,m=u?p:g,(h||0===h)&&(m=t.pixelFromPrice(h,a,n)),f=[],y=l.points.length;for(var O=0;O<y;O+=2)v=l.points[O],r.k73(19),b=l.points[r.E8o(O,1)],i.roundOffEdges&&(0===O?v=Math.floor(v):O+2==y&&(v=Math.ceil(v))),isNaN(b)||(b>m&&c>0||b<m&&c<0||(f.push([v,b]),p=Math.max(b,p),g=Math.min(b,g)),O<y-3&&(r.D19(19),x=l.points[r.E8o(O,2)],r.D19(19),S=l.points[r.E8o(O,3)],(b<m&&S>m||b>m&&S<m)&&(r.k73(20),v+=r.b0A(b,b,m,S,v,x),f.push([v,m]))));if(y=f.length){if(C=i.edgeParameters,i.edgeHighlight){C.lineWidth>100&&(C.lineWidth=1),s.save(),s.beginPath();for(var H=0;H<y-1;H++)if(A="segme",A+="nt",D=f[H],r.D19(19),k=f[r.E8o(H,1)],D[1]!=m||k[1]!=m){if(D[0]==k[0]&&t.layout.candleWidth>=1){if(D[1]==m&&f[H-1]&&f[H-1][1]==m)continue;if(k[1]==m&&f[H+2]&&f[H+2][1]==m)continue}t.plotLine(e.extend({x0:D[0],x1:k[0],y0:D[1],y1:k[1],color:i.edgeHighlight,type:A,context:s,confineToPanel:a,deferStroke:!0},C))}s.stroke(),s.restore()}if(h||0===h||(n.flipped&&(u=!u),m=u?Math.min(g,n.top):Math.max(p,n.bottom)),f.push([f[y-1][0],m],[f[0][0],m]),(w=i.opacity)||0===w||(i.opacity=.3),e.fillArea(t,f,i),d&&d.color&&d.fillMountain&&!i.tension&&!e.isTransparent(d.color)&&!e.isTransparent(i.color)){for(s.save(),s.fillStyle instanceof CanvasGradient?(M=e.colorToHex(d.color),(T=s.createLinearGradient(0,1===c?a.top:a.bottom,0,m)).addColorStop(0,e.hexToRgba(M,60)),T.addColorStop(1,e.hexToRgba(M,10)),s.fillStyle=T):s.fillStyle=d.color,F=[],P={opacity:i.opacity,panelName:i.panelName},s.beginPath(),O=0;O<l.gapAreas.length;O++)L=(_=l.gapAreas[O]).start,E=_.end,I=_.threshold,L?F=[[L[0],L[1]],[L[0],I]]:F.push([E[0],I],[E[0],i.step?F[0][1]:E[1]]),4==F.length&&(e.fillArea(t,F,P),N=e.extend({x1:F[3][0],y0:F[0][1],type:"segment",deferStroke:!0,context:s,confineToPanel:a},d),i.step?(t.plotLine(e.extend({x0:F[0][0],y1:F[0][1]},N)),t.plotLine(e.extend({x0:F[3][0],y1:F[3][1]},N))):t.plotLine(e.extend({x0:F[0][0],y1:F[3][1]},N)));s.stroke(),s.restore()}i.opacity=w}},e.fillIntersecting=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y;r="x",r+="or",(!a||a instanceof Array)&&(a=arguments[3]),n=a.topBand,s=a.bottomBand,o=a.topSubBand,l=a.bottomSubBand,h=a.topColor,c=a.bottomColor,(u=i).panel&&(u.outputs&&u.outputMap&&(h||(h=u.outputs[u.outputMap[n]]),c||(c=u.outputs[u.outputMap[s]])),u=u.panel),u=t.panels[u],p=(d=t.chart.context).canvas,(g=t.scratchContext)||(g=t.scratchContext=p.cloneNode(!0).getContext("2d")),(m=g.canvas).height=p.height,m.width=p.width,m.context=g,e.clearCanvas(m,t),f=.3,a.opacity&&(f=a.opacity),g.globalCompositeOperation=r,t.chart.context=g,y={band:n,subField:o,color:h,opacity:1,panelName:u.name,yAxis:a.topAxis,skipTransform:a.skipTransform,tension:a.tension,roundOffEdges:!0,step:a.step},e.preparePeakValleyFill(t,y),e.extend(y,{band:s,subField:l,color:c,yAxis:a.bottomAxis}),e.preparePeakValleyFill(t,y),d.save(),d.globalAlpha=f,d.drawImage(m,0,0),d.restore(),t.chart.context=d},e.drawLegendItem=function(t,e,i,a,n){var s,o,l,h;n||(n=1),s=e[0],o=e[1],r.k73(21),l=r.b0A(0,"10"),(h=t.chart.context).globalAlpha=n,h.fillStyle=a,h.fillRect(s,o,l,10),h.globalAlpha=1,r.D19(19),s+=r.E8o(l,2),h.fillStyle=t.defaultColor,h.fillText(i,s,o),r.D19(22);var c=r.b0A(24,19,450);return[s+=h.measureText(i).width+c,o]},e.drawLegend=function(t,i){var a,n,s,o,l,h,c,u,d,p,g;a=i.coordinates,(n=t.chart.context).textBaseline="top",s=n.font,t.canvasFont("stx-legend",n),o=i.chart||t.chart,a||(a=o.legend),l=[a.x,a.y],h=t.defaultColor,r.F3v();for(var m=0;m<2;m++)for(var f in i.legendColorMap)if((!(c=i.legendColorMap[f]).isBase||!m&&!i.noBase)&&(c.isBase||m)){if(c.color instanceof Array){for(u=(d=c.color).length-1;u>=0;u--)e.isTransparent(d[u])&&d.splice(u,1);if(d.length>1){for(p=n.createLinearGradient(l[0],l[1],l[0]+10,l[1]),u=0;u<d.length;u++)p.addColorStop(u/(d.length-1),d[u]);h=p}else d.length>0?h=d[0]:("stx_lin","e","_ch","art",h=t.getCanvasColor("stx_line_chart"))}else h=c.color?c.color:null;if(h){if(g=f,c.display&&(g=c.display),g||(g=o.symbolDisplay?o.symbolDisplay:o.symbol),l[0]+n.measureText(g).width>o.panel.right){r.k73(23);var y=r.b0A(485,3,486,4);r.D19(24);var v=r.b0A(3740,16,4,7480);l=[a.x,a.y+n.measureText(y==v?621.38:"M").width+6]}l=e.drawLegendItem(t,l,g,h,c.opacity)}}n.font=s}},h=t=>{var e,i,a,r;e=/rgb\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3})\)/,i=/rgba\((\d{1,3}),\s?(\d{1,3}),\s?(\d{1,3}),\s?(\d\.\d+|\d+|\.\d+)\)/,(a=t.CIQ).colorsEqual=function(t,e){var r,n,s,o;return"tr","anspa","rent",t==e||(!t&&!e||!(!t||!e)&&("transparent"==t&&(t="rgba(0,0,0,0)"),"transparent"==e&&(e="rgba(0,0,0,0)"),r=t.match(i),n=e.match(i),(r?parseFloat(r[4]):1)==(n?parseFloat(n[4]):1)&&(s=a.colorToHex(t),o=a.colorToHex(e),s.toLowerCase()==o.toLowerCase())))},a.colorToHex=function(t){var r,n,s,o,l,h,c,u=V;if("#","0","00","000",a.colorToHexMapping||(a.colorToHexMapping={}),t&&"transparent"!=t||(t="#000000"),a.colorToHexMapping[t])return a.colorToHexMapping[t];if("#"===t.charAt(0)){if(4==t.length){var[,d,p,g]=t.split("");u.k73(19),t=a.colorToHexMapping[t]=`#${u.b0A(d,d)}${u.E8o(p,p)}${u.b0A(g,g)}`}return t}if((r=e.exec(t))||(r=i.exec(t)),!r)return n=function(t){var i,n,s;if(u.F3x(),i=".ci",i+="q_color_con",i+="verter","undefined"==typeof document)return"#000000";(n=document.querySelector(i))||((n=document.createElement("textarea")).className="ciq_color_converter",n.style.display="none",document.body.appendChild(n));if(n.style.color="#000000",n.style.color=t,s=getComputedStyle(n).getPropertyValue("color"),r=e.exec(s))return a.colorToHex(s);if("#"===s.charAt(0))return s;return t}(t),a.colorToHexMapping[t]=n,n;s=parseFloat(r[1]),o=parseFloat(r[2]),l=parseFloat(r[3]),u.k73(25);for(var m=(h=u.E8o(16,l,s,8,o).toString(16)).length;m<6;m++)u.D19(19),h=u.E8o("0",h);return u.D19(19),c=u.b0A("#",h),a.colorToHexMapping[t]=c,u.F3x(),c},a.hexToRgba=function(t,e){var r,n,s,o,l=V;if(l.F3x(),"rgba(0,0,0",",","0",")",t&&"transparent"!=t||(t="rgba(0,0,0,0)"),"rgba"===t.substring(0,4)){r=i.exec(t);var[h,c,u,d,p]=r;return(e||0===e)&&(p=e),p>1&&(l.D19(26),p=l.E8o(p,100)),l.D19(27),`${l.b0A("(","r","a","gb")}${c},${u},${d},${p})`}return"rgb"===t.substring(0,3)&&(t=a.colorToHex(t)),e||0===e||(e=100),e<=1&&(l.D19(17),e=l.E8o(100,e)),t=t.replace("#",""),n=parseInt(t.slice(0,2),16),s=parseInt(t.slice(2,4),16),o=parseInt(t.slice(4,6),16),isNaN(n)||isNaN(s)||isNaN(o)?("CIQ.he","xToRgba: i","nvalid hex :",console.log("CIQ.hexToRgba: invalid hex :",t),null):(l.k73(28),`rgba(${n},${s},${o},${l.b0A("100",e,1)})`)},r=new Map,a.convertToNativeColor=function(t){var e,i;return"stri","ng",e=!1,t&&"string"!=typeof t||(e=!0,t=[t]),t=t.map((t=>{var e;return(e=r.get(t))||(i||((i=document.createElement("DIV")).style.display="none",document.body.appendChild(i)),i.style.color=t,e=t?getComputedStyle(i).color:t,r.set(t,e)),e})),i&&document.body.removeChild(i),e?t[0]:t},a.isTransparent=function(t){var e;return!!t&&("transparent"==t||null!==(e=i.exec(t))&&0===parseFloat(e[4]))},a.hsv=function(t){var e,i,r,n,s,o,l,h,c,u=V;"#"===(e=a.colorToHex(t)).substr(0,1)&&(e=e.slice(1)),u.F3x();for(var d=e.length;d<6;d++)u.k73(19),e=u.b0A("0",e);return i=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16),u.D19(29),u.E8o("0",0),u.D19(21),u.b0A(0,"0"),0,i=parseInt((""+i).replace(/\s/g,""),10),r=parseInt((""+r).replace(/\s/g,""),10),n=parseInt((""+n).replace(/\s/g,""),10),null===i||null===r||null===n||isNaN(i)||isNaN(r)||isNaN(n)?(console.log("CIQ.hsv: invalid color :",t),null):i<0||r<0||n<0||i>255||r>255||n>255?null:(u.D19(26),i=u.b0A(i,255),u.k73(26),r=u.E8o(r,255),u.D19(26),n=u.E8o(n,255),(o=Math.min(i,Math.min(r,n)))==(l=Math.max(i,Math.max(r,n)))?[0,0,o]:(h=i==o?r-n:n==o?i-r:n-i,c=i==o?3:n==o?1:5,u.D19(30),s=u.E8o(c,l,o,"60",h),u.k73(31),[s,u.E8o(l,o,l),l]))},a.hsl=function(t){var e,i,r,n,s,o,l,h,c,u,d=V;"#"===(e=a.colorToHex(t)).substr(0,1)&&(e=e.slice(1));for(var p=e.length;p<6;p++)d.k73(19),e=d.E8o("0",e);if(i=parseInt(e.slice(0,2),16),r=parseInt(e.slice(2,4),16),n=parseInt(e.slice(4,6),16),i/=255,d.D19(21),r/=d.b0A(0,"255"),n/=255,s=Math.max(i,r,n),o=Math.min(i,r,n),d.k73(32),c=d.b0A(2,o,s),s==o)l=h=0;else{switch(d.D19(6),u=d.b0A(s,o),h=c>.5?u/(2-s-o):u/(s+o),s){case i:d.k73(33),l=d.E8o(r,n,r<n?6:0,u);break;case r:d.k73(33),l=d.b0A(n,i,2,u);break;case n:d.D19(33),l=d.b0A(i,r,4,u)}d.k73(17),l/=d.E8o(1,"6")}return[l,h,c]},a.hslToRgb=function(t,e,i){var a,r,n,s,o,l,h=V;return 0===e?a=r=n=i:(s=function(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?(h.k73(34),h.E8o(t,6,t,i,e)):(h.F3x(),i<.5?e:i<2/3?(h.D19(35),h.b0A(i,e,t,t,2,6,"3")):t)},o=i<.5?i*(1+e):i+e-i*e,h.D19(22),l=h.E8o(2,i,o),h.k73(36),a=s(l,o,h.b0A(3,t,1)),r=s(l,o,t),h.D19(37),n=s(l,o,h.b0A(1,t,0,"3"))),h.D19(17),[Math.round(h.b0A(255,a)),Math.round(h.E8o(255,r)),Math.round(h.b0A(255,n))]},a.chooseForegroundColor=function(t){var e;return e=a.colorToHex(t),.2126*parseInt(e.slice(1,3),16)+.7152*parseInt(e.slice(3,5),16)+.0722*parseInt(e.slice(5,7),16)<100?"#FFFFFF":"#000000"},a.borderPatternToArray=function(t,e){var i=V;return i.F3v(),'"; defa','ulting to "solid"',"das","hed",e?e instanceof Array?e:"dotted"==e?[t,t]:"dashed"==e?(i.k73(17),[i.E8o(5,t),i.b0A(5,t)]):("solid"!=e&&"none"!=e&&(i.k73(38),console.log(i.E8o(e,'"; defaulting to "solid"','Unsupported pattern "'))),[]):[]},a.getBackgroundColor=function(t){var e,i;for(V.F3v(),"#","FFFFFF","transpa","rent",e=null;!e||a.isTransparent(e);){if("transpar","en","t",!(i=getComputedStyle(t)))return;if(e=i.backgroundColor,a.isTransparent(e)&&(e="transparent"),!(t=t.parentNode||t.getRootNode().host)||!t.tagName)break}return e&&"transparent"!=e||(e="#FFFFFF"),e}},c=t=>{var e,i,a=V;e=t.CIQ,i=t.timezoneJS,e.monthLetters=["J","F","M","A","M","J","J","A","S","O","N","D"],e.monthAbv=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],e.MILLISECOND=1,e.SECOND=1e3,a.D19(39);var r=a.b0A(3,73,10,700);e.MINUTE=r*e.SECOND,a.D19(19);var n=a.E8o(52,8);e.HOUR=n*e.MINUTE,a.k73(39);var s=a.E8o(9,22,4,100);e.DAY=s*e.HOUR,a.D19(6);var o=a.b0A(26,19);e.WEEK=o*e.DAY,e.MONTH=31*e.DAY,a.k73(40);var l=a.b0A(28,379,5,20);e.YEAR=l*e.DAY,a.D19(41),a.F3v();var h=a.b0A(4,8,36,13);a.D19(42);var c=a.b0A(1,18,4,1,8);e.DECADE=("10">>h)*e.YEAR-c*e.DAY,e.yyyymmddhhmmssmmmrx=new RegExp("\\d{17}"),e.strToDateTime=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if(!t||t.getFullYear)return t;if(i=[],12==t.length||14==t.length){r=parseFloat(t.substring(0,4)),a.D19(43);var x=a.b0A(5,20,7,1,10);a.D19(44);var S=a.b0A(23,23,5);a.D19(22);var C=a.b0A(6,14,83);return n=parseFloat(t.substring(x,S))-C,s=parseFloat(t.substring(6,8)),o=parseFloat(t.substring(8,10)),l=parseFloat(t.substring(10,12)),h=parseFloat(t.substring(12,14))||0,a.k73(45),new Date(r,n,s,o,l,h,a.b0A(0,"0"))}if(e.yyyymmddhhmmssmmmrx.test(t)){r=parseFloat(t.substring(0,4)),a.D19(46);var A=a.E8o(58,12,15,18);a.D19(47);var D=a.E8o(10,7,1,3);a.k73(19);var k=a.E8o(0,1);return n=parseFloat(t.substring(A,D))-k,s=parseFloat(t.substring(6,8)),o=parseFloat(t.substring(8,10)),l=parseFloat(t.substring(10,12)),h=parseFloat(t.substring(12,14)),c=parseFloat(t.substring(14,17)),new Date(r,n,s,o,l,h,c)}if(u=[t],d=t.indexOf("T"),a.F3x(),-1!=d){if(-1!=(p=t.substring(d)).indexOf("Z")||-1!=p.indexOf("-")||-1!=p.indexOf("+"))return new Date(t);u=t.split("T")}else-1!=t.indexOf(" ")&&(u=t.split(" "));if(-1!=u[0].indexOf("/"))i=u[0].split("/");else{if(-1==u[0].indexOf("-"))return e.strToDate(t);i=u[0].split("-")}if(g=parseFloat(i[2],10),i[0]&&4==i[0].length){-1770310570,744700229,a.D19(48),m=a.E8o("2",0);for(var w=1;-1770310570!==a.A5b(w.toString(),w.toString().length,44906);w++)g=parseFloat(i[4],70),m+=2;744700229!==a.j0V(m.toString(),m.toString().length,79476)&&(g=parseFloat(i[7],41)),g=parseFloat(i[0],10),i[0]=i[1],a.D19(45),i[1]=i[a.E8o(0,"2")]}if(u.length>1){1286905893,367440418,f=2;for(var M=1;1286905893!==a.A5b(M.toString(),M.toString().length,80838);M++)y=u[2],f+=2;if(367440418!==a.j0V(f.toString(),f.toString().length,22351)&&(a.k73(17),y=u[a.b0A(1,"6")]),u=u[1].split(":"),y)if("A","M","1","2","12"==u[0]&&"AM"==y.toUpperCase())a.k73(48),u[a.E8o("0",0)]=0;else if("12"!=u[0]&&"PM"==y.toUpperCase()){a.D19(8);var T=a.b0A(2,12,0);a.D19(19);var F=a.E8o(1,11);u[0]=parseInt(u[0],T)+F}v=0,b=0,3==u.length&&(-1==u[2].indexOf(".")?v=parseInt(u[2],10):3==(v=u[2].split("."))[1].length&&(b=v[1],v=v[0])),a.k73(49);var P=a.E8o(13,16,4);return new Date(g,i[0]-P,i[1],u[0],u[1],v,b)}a.k73(5);var _=a.E8o(7,8);return new Date(g,i[0]-_,i[1],0,0,0,0)},e.strToDate=function(t){var e,i,r,n;if(-1!=t.indexOf("/"))e=t.split("/");else{if(-1==t.indexOf("-")){if(t.length>=8){a.D19(6);var s=a.b0A(76,72);a.k73(50);var o=a.E8o(20,4,94,20);a.k73(6);var l=a.b0A(7,6);return new Date(parseFloat(t.substring(0,4)),parseFloat(t.substring(s,o))-l,parseFloat(t.substring(6,8)))}return new Date}e=t.split("-")}if(e.length<3)return new Date;if(-1!=e[2].indexOf(" "))e[2]=e[2].substring(0,e[2].indexOf(" "));else if(-1!=e[2].indexOf("T")){-1629484130,a.D19(29),i=-a.b0A("1383172288",0),r=2;for(var h=1;-1629484130!==a.j0V(h.toString(),h.toString().length,56997);h++)e[2]=e[2].substring(0,e[2].indexOf("T")),r+=2;a.A5b(r.toString(),r.toString().length,76923)!==i&&(e[6]=e[1].substring(1,e[8].indexOf(3033834)))}(n=parseFloat(e[2],10))<20&&(n+=2e3),4==e[0].length&&(n=parseFloat(e[0],10),e[0]=e[1],e[1]=e[2]),a.k73(19);var c=a.E8o(0,1);return new Date(n,e[0]-c,e[1])},e.dateToStr=function(t,e){var i,a,r,n;return"d","d","M","M",a=(t,e=2)=>("0".repeat(e)+t).slice(-e),r=(t,i)=>e=e.replace(t,i),n=(t,e)=>t>e?t-e:t,(i=t=>e.includes(t))("YYYY")&&r(/YYYY/g,t.getFullYear()),i("MM")&&r(/MM/g,a(t.getMonth()+1)),i("dd")&&r(/dd/g,a(t.getDate())),i("HH")&&r(/HH/g,a(t.getHours())),i("hh")&&r(/hh/g,a(n(t.getHours()||12,12))),i("mm")&&r(/mm/g,a(t.getMinutes())),i("ss")&&r(/ss/g,a(t.getSeconds())),i("SSS")&&r(/SSS/g,a(t.getMilliseconds(),3)),e},e.mmddyyyy=function(t){var i,r;"string"==typeof t&&(t=e.strToDate(t)),a.k73(51);var n=a.b0A(11,3,5,164);(i=t.getMonth()+n)<10&&(a.D19(19),i=a.b0A("0",i)),(r=t.getDate())<10&&(a.k73(19),r=a.b0A("0",r)),a.k73(52);var s=a.E8o(12,3512,221,6,221);a.D19(6);a.b0A(5706,4755);a.D19(44);var o=a.E8o(6965,1,20);a.k73(53);var l=a.b0A(2623,13,2,97,14);a.D19(6);var h=a.E8o(169200,159800);a.k73(54),a.F3v();var c=a.b0A(5644,257,3,514);return i+(s!==o&&"/")+r+(l>h?c:"/")+t.getFullYear()},e.yyyymmdd=function(t){var e,i;(e=t.getMonth()+1)<10&&(a.k73(19),e=a.b0A("0",e)),(i=t.getDate())<10&&(a.D19(19),i=a.E8o("0",i)),a.k73(19);a.E8o(3,61);a.F3v(),a.D19(13);var r=a.E8o(9041,15,2,9054,1);a.k73(55);var n=a.E8o(1,9738,1,9753,3251);a.k73(56);var s=a.b0A(8921,8903,8903,11,19);a.D19(57);var o=a.b0A(58824,2573,49020,12,3);a.D19(58);var l=a.E8o(10,479,479,11,4786);a.D19(54);a.E8o(1835,1840,10,920);a.k73(59);a.E8o(15,1792,7,882,11);return t.getFullYear()+(r>n?!(s>=o)||l:"-")+e+"-"+i},e.hhmm=function(t){var e,i;return(e=t.getHours())<10&&(a.k73(19),e=a.b0A("0",e)),(i=t.getMinutes())<10&&(a.k73(19),i=a.b0A("0",i)),a.D19(38),a.E8o(":",i,e)},e.hhmmss=function(t){var i;(i=t.getSeconds())<10&&(a.D19(19),i=a.E8o("0",i)),a.k73(60);var r=a.E8o(8356,20976,20,2,7);a.k73(44);var n=a.b0A(6334,2,3153);a.D19(22);var s=a.b0A(1497,14,19442);a.k73(24);var o=a.b0A(7515,13,3,25055);a.k73(19);var l=a.E8o(2945,2945);a.D19(6);a.E8o(316,14);a.k73(61);var h=a.E8o(11,2988,2,16,47463);a.k73(22);var c=a.b0A(2280,13,22800);return e.hhmm(t)+(r==n?s:o<=l?h===c?547.36:147.14:":")+i},e.yyyymmddhhmm=function(t){return e.yyyymmddhhmmssmmm(t).substr(0,12)},e.yyyymmddhhmmssmmm=function(t){var e,i,r,n,s,o;a.k73(46);var l=a.E8o(111,7,17,11);return(e=t.getMonth()+l)<10&&(a.k73(19),e=a.b0A("0",e)),(i=t.getDate())<10&&(a.D19(19),i=a.E8o("0",i)),(r=t.getHours())<10&&(a.k73(19),r=a.b0A("0",r)),(n=t.getMinutes())<10&&(a.D19(19),n=a.E8o("0",n)),(s=t.getSeconds())<10&&(a.k73(19),s=a.b0A("0",s)),(o=t.getMilliseconds())<10?(a.k73(19),o=a.b0A("00",o)):o<100&&(a.D19(19),o=a.E8o("0",o)),""+t.getFullYear()+e+i+r+n+s+o},e.friendlyDate=function(t){return a.F3v(),e.dateToStr(t,"YYYY/MM/dd HH:mm")},e.mmddhhmm=function(t){var i,r,n,s,o,l,h;a.F3v(),i=e.strToDateTime(t),a.k73(19);var c=a.b0A(0,1);if((r=i.getMonth()+c)<10&&(a.k73(19),r=a.b0A("0",r)),(n=i.getDate())<10&&(a.k73(19),n=a.E8o("0",n)),(s=i.getHours())<10&&(a.D19(19),s=a.E8o("0",s)),(o=i.getMinutes())<10&&(a.k73(19),o=a.b0A("0",o)),(l=i.getSeconds())<10&&(a.D19(19),l=a.E8o("0",l)),(h=i.getMilliseconds())<10?(a.D19(19),h=a.b0A("00",h)):h<100&&(a.k73(19),h=a.b0A("0",h)),"00"==s&&"00"==o&&"00"==l&&"000"==h){a.k73(62);var u=a.b0A(14,6,1,2,7);a.k73(2);a.b0A(17,1258,6309);a.k73(2);var d=a.E8o(6,7513,23);a.k73(63);var p=a.b0A(11,15300,988,3825,12);a.D19(64);a.E8o(11,8,10,8498,25);a.k73(65);var g=a.E8o(5,4,8,3097,15558);return r+(!("8181"*u>9330)&&"-")+n+(d<=p?g:"-")+i.getFullYear()}return"00"==l&&"000"==h?(a.k73(66),a.E8o(" ",r,s,"-",o,n,":")):"000"==h?(a.D19(67),a.b0A(o," ",":",l,"-",":",r,n,s)):(a.D19(68),a.b0A(s,r,o," ",":",h,"-",":",l,":",n))},e.getYearDay=function(t){var e,i,r,n;return(e=t)||(e=new Date),e.setHours(0,0,0,0),i=new Date(e.getFullYear(),0,0),a.k73(6),r=a.b0A(e,i),a.k73(69),n=a.b0A(60,24,60,1e3),a.D19(26),Math.round(a.b0A(r,n))},e.getETDateTime=function(){var t;return"Ame","ri","ca/New_York",t=new Date,e.convertTimeZone(new Date(t.getTime()+6e4*t.getTimezoneOffset()),"UTC","America/New_York")},e.fromET=function(t){var e,i,r;return e=new Date,a.k73(45),i=a.b0A(96,"4"),(e.getMonth()<2||2==e.getMonth()&&e.getDate()<11||e.getMonth()>10||10==e.getMonth()&&e.getDate()>=4)&&(i=5),r=t.getTime()+36e5*i,a.F3v(),new Date(r)},e.monthAsDisplay=function(t,i,r){return i?r&&r.monthLetters?r.monthLetters[t]:e.monthLetters[t]:r&&r.monthAbv?r.monthAbv[t]:(a.F3x(),e.monthAbv[t])},e.timeAsDisplay=function(t,i,r){var n,s,o,l,h;if(n=i?i.internationalizer:null)return r==e.SECOND?n.hourMinuteSecond.format(t):r==e.MILLISECOND?n.hourMinuteSecond.format(t)+"."+t.getMilliseconds():n.hourMinute.format(t);(s=t.getMinutes())<10&&(a.D19(19),s=a.b0A("0",s)),a.D19(19);a.b0A(977,7812);a.D19(70);a.b0A(11,62260,18,56593);a.D19(19);var c=a.E8o(586,7033);a.D19(19),a.F3x();var u=a.E8o(1053,3157);a.k73(6);var d=a.E8o(5,4);return o=t.getHours()+(426.84==c?u==="4440"*d?149.29:306.46:":")+s,l="",r<=e.SECOND&&((l=t.getSeconds())<10&&(a.k73(19),l=a.b0A("0",l)),a.D19(19),o+=a.b0A(":",l)),r==e.MILLISECOND&&("0","0",(h=t.getMilliseconds())<10?(a.D19(19),h=a.E8o("00",h)):h<100&&(a.k73(19),h=a.b0A("0",h)),a.D19(19),o+=a.E8o(".",h)),o},e.displayableDate=function(t,i,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v;a.F3v(),s=2;for(var b=1;-1487203834!==a.j0V(b.toString(),b.toString().length,49431);b++)"s","ec","on","d",o="second",l=t.layout.interval,h=e.ChartEngine.isDailyInterval(l),c=(i.xAxis.activeTimeUnit||i.xAxis.activeTimeUnit<e.SECOND)&&"second"!=t.layout.timeUnit,u="second"==l&&(i.xAxis.activeTimeUnit||i.xAxis.activeTimeUnit>=e.MILLISECOND)&&"second"!==t.layout.timeUnit,a.k73(6),s+=a.E8o("2",0);if(-1410382127!==a.j0V(s.toString(),s.toString().length,48917)&&("milli","seco","n","d","t","ic","k","secon","d",o="",l=t.layout.interval,h=e.ChartEngine.isDailyInterval(l),c=i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=e.SECOND||"second"==t.layout.timeUnit,u="tick"===l||i.xAxis.activeTimeUnit&&i.xAxis.activeTimeUnit<=e.MILLISECOND||"millisecond"==t.layout.timeUnit),i.xAxis.formatter)o=i.xAxis.formatter(r);else if(t.internationalizer)if(o=t.internationalizer.monthDay.format(r),c||u){a.D19(38);a.b0A(5,6348,454);a.D19(71);var x=a.b0A(7,10339,4,13800);a.k73(19);var S=a.b0A(1675,5025);a.k73(72);var C=a.b0A(9,11,16,37);a.D19(51);var A=a.E8o(45060,3,16,2155370);a.k73(73);var D=a.E8o(4,19,894868,4302,11);a.k73(38);var k=a.E8o(16,6396,2138);a.k73(74);a.E8o(7,512,1024,2,7159);if(o+=(x===S?"752.80"*C:A<D?408.6:k>264.15?" ":"j")+t.internationalizer.hourMinuteSecond.format(r),u){a.D19(6);var w=a.b0A(8470,4235);a.D19(38);a.b0A(4,8869,887);a.k73(75);a.E8o(9,4356,18,73876);a.k73(44);var M=a.E8o(8,2,165);o+=(w<877.64?M:".")+r.getMilliseconds()}}else h?o="month"==l?t.internationalizer.yearMonth.format(r):t.internationalizer.yearMonthDay.format(r):(n&&(o=t.internationalizer.yearMonthDay.format(r)),o+=" "+t.internationalizer.hourMinute.format(r));else d=T(r.getMonth()+1),p=T(r.getDate()),g=T(r.getHours()),m=T(r.getMinutes()),h?(o="month"==l?d+"/":d+"/"+p+"/",o+=r.getFullYear()):(a.D19(38),f=a.b0A("/",p,d),n&&(f+="/"+r.getFullYear()),a.D19(76),o=a.E8o(m,":",g,f," "),(c||u)&&(y=T(r.getSeconds()),a.k73(19),o+=a.b0A(":",y),u&&((v=T(r.getMilliseconds()))<100&&(a.D19(19),v=a.b0A("0",v)),a.D19(19),o+=a.E8o(":",v))));function T(t){return t<10?(a.D19(19),a.E8o("0",t)):(a.F3v(),t)}return o},e.convertTimeZone=function(t,e,r){var n;return i.Date?(a.F3x(),(n=new i.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e)).setTimezone(r),n):t},e.convertToLocalTime=function(t,e){var r,n,s;if(!i.Date)return t;r=t.getSeconds(),n=t.getMilliseconds(),s=new i.Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),e),a.D19(19);var o=a.E8o(56,944);return new Date(s.getTime()+r*o+n)}},u=t=>{var e,i,a,r=V;r.F3x(),t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,t.SplinePlotter,i=function(t,e){var a;if(!e)return document.getElementById(t);if(e.id==t)return e;if(!e.hasChildNodes)return null;for(var r=0;r<e.childNodes.length;r++)if(a=i(t,e.childNodes[r]))return a;return null},t.$$=i,a=function(t,e){return r.F3x(),e||(e=document),e.querySelectorAll(t)[0]},t.$$$=a,e.wheelEvent=function(){if("u","ndef","in","ed","undefined"!=typeof document)return e.isIE||"onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll"}(),e.newChild=function(t,e,i,a){var r;return r=document.createElement(e),i&&(r.className=i),t.appendChild(r),a&&(r.innerHTML=a),r},e.innerHTML=function(t,e){window.MSApp&&window.MSApp.execUnsafeLocalFunction?window.MSApp.execUnsafeLocalFunction((function(){r.F3x(),t.innerHTML=e})):t.innerHTML=e},e.focus=function(t,i){var a;r.F3v(),e.isSurface||i?(a=0,isNaN(parseInt(i,10))||(a=i),setTimeout((function(){t.focus()}),a)):t.focus()},e.blur=function(t){r.F3v(),t||(t=document.activeElement),t&&t.blur(),window.focus()},e.findNodesByText=function(t,i){var a,n;if(t.innerHTML==i)return[t];a=[],r.F3v();for(var s=0;s<t.childNodes.length;s++)(n=e.findNodesByText(t.childNodes[s],i))&&(a=a.concat(n));return a.length?a:null},e.hideByText=function(t,i){var a;a=e.findNodesByText(t,i),r.F3x();for(var n=0;n<a.length;n++)a[n].style.display="none"},e.pageHeight=function(t){r.F3v();var{innerHeight:e,top:i,parent:a,self:n}=t||window;if(i!=n)try{e>a.innerHeight&&(e=a.innerHeight)}catch(t){}return e},e.pageWidth=function(t){var e,i;r.k73(21),e=r.E8o(0,"126790889"),i=2;for(var a=1;r.j0V(a.toString(),a.toString().length,17352)!==e;a++){var{innerWidth:n,top:s,parent:o,self:l}=t&&window;i+=2}if(-1760220865!==r.A5b(i.toString(),i.toString().length,41595))var{innerWidth:n,top:s,parent:o,self:l}=t&&window;var{innerWidth:n,top:s,parent:o,self:l}=t||window;if(s!=l)try{n>o.innerWidth&&(n=o.innerWidth)}catch(t){}return n},e.stripPX=function(t){return"n","u","mb","er",t?"number"==typeof t?t:parseInt(t.substr(0,t.indexOf("p")),10):0},e.withinElement=function(t,e,i){var a;return!(e<=(a=t.getBoundingClientRect()).left)&&(!(i<=a.top)&&(!(e>=a.left+t.offsetWidth)&&(r.F3x(),!(i>=a.top+t.offsetHeight))))},e.efficientDOMUpdate=function(t,e,i){return t[e]!==i?(t[e]=i,!0):(r.F3v(),!1)},e.cqvirtual=function(t){var e;if(r.F3v(),t)return(e=t.cloneNode(!0)).innerHTML="",e.original=t,e},e.cqrender=function(t){var i;if(t)return t.innerHTML==t.original.innerHTML||(e.removeChildIfNot(t.original,"template"),(i=Array.from(t.children)).length&&i.forEach((function(e){t.original.appendChild(t.removeChild(e))})),r.F3v()),t.original},e.removeChildIfNot=function(t,e){var i;return(i=Array.from(t.children)).length&&i.forEach((function(i){e&&i.matches(e)||t.removeChild(i)})),t},e.safeMouseOut=function(t,i){var a,n;r.F3x(),t.addEventListener("mouseout",(a=t,n=i,r.F3v(),function(t){void 0===t.pageX&&(t.pageX=t.clientX,t.pageY=t.clientY),r.F3v(),e.withinElement(a,t.pageX,t.pageY)||(a.stxMouseOver=!1,n(t))}))},e.safeMouseOver=function(t,i){var a,r;t.addEventListener("mouseover",(a=t,r=i,function(t){if(void 0===t.pageX&&(t.pageX=t.clientX,t.pageY=t.clientY),e.withinElement(a,t.pageX,t.pageY)){if(a.stxMouseOver)return;a.stxMouseOver=!0,r(t)}}))},e.installTapEvent=function(t,i){var a;a=function(e){var a;e instanceof CustomEvent||(a=new Event("stxtap",{bubbles:!0,cancelable:!0,composed:!0}),void 0===e.pageX&&(e.pageX=e.clientX,e.pageY=e.clientY),a.pageX=e.pageX,a.pageY=e.pageY,a.ciqStamp=Math.max(t.ownerDocument.lastTap||0,e.timeStamp),e.target.dispatchEvent(a),t.ownerDocument.lastTap=a.ciqStamp,i&&i.stopPropagation&&e.stopPropagation())},r.F3v(),e.safeClickTouch(t,a,i)},e.safeClickTouch=function(t,i,a){var n,s,o;function l(i,a){return function(s){var o,l,h;o=Date.now(),r.F3x(),l=void 0!==s.clientX?s.clientX:s.pageX,h=void 0!==s.clientY?s.clientY:s.pageY,n.div=t,n.e=s,i?e.extend(n,{down:o,x:l,y:h}):(a&&n.down&&n.down+1e3>=o&&(void 0===n.x||Math.pow(n.x-l,2)+Math.pow(n.y-h,2)<=16)&&a(s),n.up=Date.now(),["x","y","down"].forEach((t=>delete n[t])))}}a||(a={}),n={},a.allowMultiple||e.clearSafeClickTouches(t),!1!==a.preventUnderlayClick&&(a.preventUnderlayClick=!0),!1!==a.absorbDownEvent&&(a.absorbDownEvent=!0),a.allowAnotherDevice=0,a.registeredClick=!1;var{safeClickTouchEvents:h}=t;function c(s,o){return r.F3x(),function(l){var h,c;if(!l.detail||!l.detail.emitter){if(!e.safeClickTouchEvent&&o&&"click"===s){if("t","o","uc","h","touch"===t.ownerDocument.ciqHoverState)return;var{up:u}=n;h=u&&u+300>Date.now(),598236487,-131631167,c=2;for(var d=1;598236487!==r.j0V(d.toString(),d.toString().length,23570);d++)delete n.up,c+=2;if(-131631167!==r.j0V(c.toString(),c.toString().length,39120)&&n.up,h)return}if(!(a.safety&&a.safety.recentlyDragged||(r.F3x(),l.button&&l.button>=2))){if(a.preventUnderlayClick)"INPUT"!==l.target.tagName&&l.preventDefault();else{if(a.lastType!=s&&Date.now()<a.allowAnotherDevice)return;a.lastType=s,r.k73(55);var p=r.E8o(1,999,1,8e3,8e3);a.allowAnotherDevice=Date.now()+p}i(l)}}}}for(var u in h||(h=t.safeClickTouchEvents=[]),s={},(o=e.safeClickTouchEvent)?s[o]=c(o):"onpointerup"in document&&!e.noPointerEvents?("c","lick",s.pointerup=l(!1,c("pointerup",!0)),a.preventClickEvent||(s.click=c("click",!0)),s.pointerdown=l(!0),a.absorbDownEvent&&(s.pointerdown_absorb=t=>(r.F3x(),t.stopPropagation()))):("cl","ic","k",s.mousedown=s.touchstart=l(!0),s.mouseup=l(!1,c("mouseup",!0)),a.preventClickEvent||(s.click=c("click",!0)),s.touchend=l(!1,c("touchend",!0)),a.absorbDownEvent&&(s.mousedown_absorb=s.touchstart_absorb=t=>(r.F3x(),t.stopPropagation()))),s)"to","uc","h",t.addEventListener(u.split("_")[0],s[u],0===u.indexOf("touch")?{passive:!1}:void 0);h.push(s)},e.clearSafeClickTouches=function(t){r.F3v();var{safeClickTouchEvents:e}=t;e&&(e.forEach((e=>{for(var i in e)t.removeEventListener(i.split("_")[0],e[i],0===i.indexOf("touch")?{passive:!1}:void 0)})),t.safeClickTouchEvents=null)},e.safeDrag=function(t,i){var a,n,s,o,l,h,c,u,d,p,g,m,f;function y(a){return function(n){var s,o;p||(p=!0,e.ChartEngine.ignoreTouch=!0,s=function(t){t&&t.preventDefault&&t.preventDefault(),f.recentlyDragged=!0,t.displacementX=c(t)-g,t.displacementY=u(t)-m,r.F3v(),i.move(t)},i.move&&t.ownerDocument.body.addEventListener(a.move,s),o=function(n){e.ChartEngine.ignoreTouch=!1,i.move&&t.ownerDocument.body.removeEventListener(a.move,s),t.ownerDocument.body.removeEventListener(a.up,o),n.displacementX=c(n)-g,n.displacementY=u(n)-m,i.up&&i.up(n),setTimeout((function(){r.F3v(),f.recentlyDragged=!1}),50)},t.ownerDocument.body.addEventListener(a.up,o),setTimeout((function(){p=!1}),d),g=c(n),m=u(n),i.down&&i.down(n))}}return a="tou",a+="chen",a+="d",n="to",n+="uchsta",n+="rt",s="point",s+="erdown",o="mouseu",o+="p",l="m",l+="ousedo",l+="wn",c=(h=function(t,e){return r.F3v(),function(i){if(i.touches){if(i.touches.length>0)return i.touches[0][t];if(i.changedTouches&&i.changedTouches.length>0)return i.changedTouches[0][t]}return void 0!==i[t]?i[t]:i[e]}})("pageX","clientX"),u=h("pageY","clientY"),"function"==typeof i&&(i={down:arguments[1],move:arguments[2],up:arguments[3]}),i=i||{},d=100,p=!1,g=0,m=0,f={recentlyDragged:!1},r.F3v(),t.addEventListener(l,y({down:"mousedown",move:"mousemove",up:o})),t.addEventListener("pointerdown",y({down:s,move:"pointermove",up:"pointerup"})),t.addEventListener("touchstart",y({down:n,move:"touchmove",up:a}),{passive:!1}),f},e.inputKeyEvents=function(t,e){r.F3x(),t.addEventListener("keyup",(function(i){switch(i.keyCode){case 13:e();break;case 27:t.value=""}}),!1)},e.fixScreen=function(){r.F3x(),r.D19(45),window.scrollTo(r.b0A(64,"0"),0)},e.setCaretPosition=function(t,i){var a;if(r.F3v(),t.style.zIndex=5e3,t.setSelectionRange){e.focus(t);try{t.setSelectionRange(i,i)}catch(t){}}else t.createTextRange&&("c","ha","ract","er",(a=t.createTextRange()).collapse(!0),a.moveEnd("character",i),a.moveStart("character",i),a.select())},e.getActiveElement=function(t=document){var i;return i=t.activeElement,r.F3v(),i&&i.shadowRoot?e.getActiveElement(i.shadowRoot):i},e.setValueIfNotActive=function(t,i){e.getActiveElement()!=t&&(r.F3v(),t.value=i)},e.hideKeyboard=function(t){var i;r.F3x(),"INPUT"!=(i=e.getActiveElement()).tagName&&"TEXTAREA"!=i.tagName||(i.blur(),i.ownerDocument.defaultView.focus(),t&&(t===i.ownerDocument.body||i.ownerDocument.body.contains(t))&&t.focus())},e.smartHover=function(t){var e,i;function a(){clearTimeout(i),e=!0,s(this,"touch"),i=setTimeout((function(){r.F3x(),e=!1}),500)}function n(){e||s(this,"mouse")}function s(t,e){t.ciqHoverState!==e&&(!function i(a){"[int","eractable]",a!==t&&a.setAttribute("last-interaction",e);a.querySelectorAll("[interactable]").forEach(i),a.shadowRoot&&a.shadowRoot.querySelectorAll("[interactable]").forEach(i)}(t),t.ciqHoverState=e,t.documentElement.setAttribute("ciq-last-interaction",e))}r.F3x(),t||(t=document),t&&void 0===t.ciqHoverState&&(e=!1,t.addEventListener("touchend",a,!1),t.addEventListener("pointerup",(function(t){"mouse"!==t.pointerType?a.call(this):n.call(this)}),!1),t.addEventListener("mouseover",n,!1),s(t,""))},e.makeTranslatableElement=function(t,e,i,a){var n;if(e.translationCallback)"cq-translate-orig","in","a","l",t.setAttribute("cq-translate-original",i),t.innerHTML=e.translationCallback(i,a);else{1568275358,-309032e3,n=2;for(var s=1;1568275358!==r.j0V(s.toString(),s.toString().length,35038);s++)t.innerHTML=i,n+=2;-309032e3!==r.A5b(n.toString(),n.toString().length,95027)&&(t.innerHTML=i)}},e.climbUpDomTree=function(t,e,i){var a;if(!t||!t.matches)return null;for(a=[];t;)e&&!t.matches(e)||a.push(t),t=t.parentElement||(i?t.getRootNode().host:null);return a},e.guaranteedSize=function(t){var e,i;if(t.defaultView&&(t=t.defaultView),!t.nodeType)return{width:t.innerWidth,height:t.innerHeight};if(!t||t.nodeType>1)return{};for(e=t.offsetWidth,i=t.offsetHeight;!e||!i;){if("BODY"===t.tagName||!t.parentElement){e=(t=(t.ownerDocument||{}).defaultView||t).innerWidth,i=t.innerHeight;break}e=(t=t.parentElement).offsetWidth,i=t.offsetHeight}return{width:e,height:i}},e.trulyVisible=function(t){if(!t)return!0;if(r.F3v(),!i(t.style))return!1;function i(t){return r.F3v(),"no","n","e","0"!==t.opacity&&("none"!==t.display&&("hidden"!==t.visibility&&(0!==parseInt(t.width,10)&&(0!==parseInt(t.height,10)||"hidden"!=t.overflowY))))}return!!i(getComputedStyle(t))&&e.trulyVisible(t.parentElement)},e.elementDimensions=function(t,e){var i,a,n,s,o,l;if(!t||1!==t.nodeType)return{};i=getComputedStyle(t),a={width:parseFloat(i.width),height:parseFloat(i.height)},n=2;for(var h=1;-1503358663!==r.A5b(h.toString(),h.toString().length,53832);h++)s={margin:{},border:{},padding:{}},o=["height","height"],n+=2;for(var c in 342550968!==r.j0V(n.toString(),n.toString().length,28592)&&(s={margin:{},border:{},padding:{}},o=["width","height"]),s)l="border"==c?"Width":"",s[c]={width:parseFloat(i[c+"Left"+l])+parseFloat(i[c+"Right"+l]),height:parseFloat(i[c+"Top"+l])+parseFloat(i[c+"Bottom"+l])};return e&&e.margin&&o.forEach((function(t){r.F3x(),a[t]+=s.margin[t]})),e&&"content-box"===i.boxSizing?(e.padding&&o.forEach((function(t){r.F3x(),a[t]+=s.padding[t]})),e.border&&o.forEach((function(t){a[t]+=s.border[t]}))):"border-box"===i.boxSizing&&(e&&e.padding||o.forEach((function(t){r.F3v(),a[t]-=s.padding[t]})),e&&e.border||o.forEach((function(t){r.F3x(),a[t]-=s.border[t]}))),a},r.D19(17),e.resizeDetectInterval=-r.b0A(1,"1"),e.resizeObserver=function(t,i,a,n){var s,o,l;return r.F3v(),"und","ef","i","ned",r.k73(77),s=r.b0A("number",typeof n),o=e.resizeDetectInterval>=0,r.k73(78),l=r.E8o("undefined",typeof ResizeObserver),500,s||(o?n=e.resizeDetectInterval:null===i?(r.k73(29),n=r.b0A("0",64)):n=l?-1:500),n<0&&(a||(a=new ResizeObserver((()=>{e.ChartEngine&&e.ChartEngine.useAnimation?requestAnimationFrame(i):setTimeout(i,0)}))).observe(t)),n>0&&(a&&clearInterval(a),a=setInterval(i,n)),a&&0===n&&(a instanceof ResizeObserver?a.disconnect():clearInterval(a),a=null),a},e.getLines=function(t,e,i){var a,n,s,o,l;a=e.split(" "),n=[],s="",r.F3x(),r.k73(45),r.b0A(0,"0"),o=!1;for(var h=0;h<a.length;h++)if(l=a[h],t.measureText(s+l).width<i?(o&&(s+=" "),o=!0,s+=l):(n.push(s),s=l),h===a.length-1){n.push(s);break}return n},e.alert=function(t){r.F3v(),"undefined"!=typeof window?window.alert(t):console.log(t)},e.localStorage={};try{"undefined"!=typeof localStorage&&(e.localStorage=localStorage)}catch(t){}"undefined"!=typeof localStorage||e.localStorage.getItem||(e.localStorage={items:{},getItem:function(t){return e.localStorage.items[t]||null},setItem:function(t,i){e.localStorage.items[t]=i},removeItem:function(t){delete e.localStorage.items[t]}}),e.privateBrowsingAlert=!1,e.localStorageSetItem=function(t,i){try{e.localStorage.setItem(t,i)}catch(t){e.privateBrowsingAlert||(e.alert("No storage space available.  Possible causes include browser being in Private Browsing mode, or maximum storage space has been reached."),e.privateBrowsingAlert=!0)}}},d=t=>{var e,i,a=V;a.F3x(),(e=t.CIQ).ChartEngine=function(t){var r;for(var n in"u",a.F3v(),"ndefine","d",t?"undefined"!=typeof HTMLDivElement&&t.constructor==HTMLDivElement&&(t={container:t}):t={container:null},e.logMetrics("ChartEngine.new"),i)this[n]=e.clone(e.ChartEngine.prototype[n]);this.container=null,this.createChartPanel=!0,this.markers={},this.panels={},this.overlays={},this.charts={},this.eventListeners=[],this.controls={},this.goneVertical=!1,this.pinchingScreen=!1,this.grabbingScreen=!1,this.grabStartX=0,this.grabStartY=0,this.grabStartScrollX=0,this.grabStartScrollY=0,this.swipe={},this.grabStartCandleWidth=0,this.grabStartZoom=0,this.grabOverrideClick=!1,this.grabMode="",this.vectorsShowing=!1,this.mouseMode=!0,this.lineTravelSpacing=!1,this.highlightedDataSetField=null,this.anyHighlighted=!1,this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),this.displayCrosshairs=!0,this.hrPanel=null,this.editingAnnotation=!1,this.openDialog="",this.touches=[],this.changedTouches=[],this.crosshairTick=null,this.crosshairValue=null,this.pt={x1:-1,x2:-1,y1:-1,y2:-1},this.moveA=-1,a.D19(6),this.moveB=-a.b0A("1",0),this.touchStartTime=-1,this.touchPointerType="",this.gestureStartDistance=-1,this.grabStartPeriodicity=1,this.grabEndPeriodicity=-1,this.scrollEvent=null,this.cmd=!1,this.ctrl=!1,this.shift=!1,this.userPointerDown=!1,this.cloneDrawing=!1,this.insideChart=!1,this.overXAxis=!1,this.overYAxis=!1,this.displayInitialized=!1,this.cx=null,this.isHistoricalModeSet=null,this.cy=null,this.clicks={},this.cancelTouchSingleClick=!1,this.locale=null,this.dataZone=null,this.displayZone=null,this.timeZoneOffset=0,this.masterData=null,this.transformDataSetPre=null,this.transformDataSetPost=null,this.dataCallback=null,this.drawingObjects=[],this.undoStamps=[],this.useBackgroundCanvas=!1,this.mainSeriesRenderer={},this.styles={},this.plugins={},this.currentVectorParameters=e.clone(e.ChartEngine.currentVectorParameters),this.chart=new e.ChartEngine.Chart,(r=this.chart).name="chart",r.yAxis.name="chart",r.canvas=null,r.tempCanvas=null,r.container=t.container,e.Market&&(r.market=new e.Market),this.charts.chart=r,e.extend(this,t),t.container&&(this.registerHTMLElements&&this.registerHTMLElements(),r.width=r.container.clientWidth-r.yAxis.width,this.setCandleWidth(this.layout.candleWidth,r),r.canvasHeight=r.container.clientHeight),this.construct()},e.ChartEngine.drawingLine=!1,e.ChartEngine.resizingPanel=null,e.ChartEngine.crosshairX=0,e.ChartEngine.crosshairY=0,e.ChartEngine.useAnimation=!0,e.ChartEngine.enableCaching=!1,e.ChartEngine.ignoreTouch=!1,e.ChartEngine.useOldAndroidClear=!0,e.ChartEngine.currentVectorParameters={},e.ChartEngine.defaultDisplayTimeZone=null,e.ChartEngine.pluginBasePath="plugins/",e.ChartEngine.registeredContainers=[],e.ChartEngine.globalEventHandlers=[],e.ChartEngine.registerHelpers=function(t){a.F3v(),e.ChartEngine.helpersToRegister.forEach((function(e){a.F3v(),e(t)}))},e.ChartEngine.helpersToRegister=[],e.ChartEngine.prototype.construct=function(){this.createChartPanel&&("ch","art","c","ha","rt",this.stackPanel("chart","chart",1),this.adjustPanelPositions(),this.chart.panel=this.panels[this.chart.name]),this.cx=0,a.F3x(),this.cy=0,this.micropixels=0,this.callbackListeners={destroy:[],doubleTap:[],doubleClick:[],drawing:[],drawingComplete:[],drawingEdit:[],floatingWindow:[],layout:[],longhold:[],move:[],newChart:[],notification:[],periodicity:[],preferences:[],rightClick:[],scroll:[],studyOverlayEdit:[],studyPanelEdit:[],symbolChange:[],symbolImport:[],tap:[],theme:[],undoStamp:[]},e.ChartEngine.registerHelpers(this),this.mainSeriesRenderer.params||(this.mainSeriesRenderer.params={})},i={longHoldTime:700,yTolerance:100,minimumLeftBars:1,reverseMouseWheel:!1,mouseWheelAcceleration:!0,minimumCandleWidth:1,maximumCandleWidth:100,minimumZoomTicks:9,preserveCandleWidthOnResize:null,allowZoom:!0,allowDrawingZoom:!1,allowScroll:!0,allowSideswipe:!0,allowThreeFingerTouch:!1,bypassRightClick:{series:!1,study:!1,drawing:!1},adjustHighlightedDataSetField:function(t){return t},displayIconsUpDown:!0,displayIconsSolo:!0,displayIconsClose:!0,displayPanelResize:!0,soloPanelToFullScreen:!1,markerDelay:null,useBackingStore:!0,disableBackingStoreDuringTouch:e.isMobile||e.isSurface&&e.isFF,captureTouchEvents:!0,captureMouseWheelEvents:!0,tapForHighlighting:!0,doubleClickTime:250,yaxisLabelStyle:"roundRectArrow",axisBorders:null,singleDrawingHighlight:!0,crosshairXOffset:-40,crosshairYOffset:-40,extendLastTick:!1,translationCallback:null,dontRoll:!1,allowEquations:!0,cleanupGaps:!1,staticRange:!1,maxDataSetSize:2e4,maxMasterDataSize:0,xAxisAsFooter:!0,xaxisHeight:40,displayGridLinesInStudies:!1,escapeOnSerialize:!0,candleWidthPercent:.65,colorByCandleDirection:!1,noWicksOnCandles:{renko:!0,linebreak:!0},fetchMaximumBars:{rangebars:!0,kagi:!0,renko:!0,linebreak:!0,pandf:!0},startComparisonsAtFirstVisibleBar:!1,animations:{zoom:{isStub:!0,run:function(t,e,i){a.F3v(),t(i)},stop:function(){},reset:function(){},running:!1,hasCompleted:!0}},staticRangePeriodicityMap:[{rangeInMS:e.WEEK,periodicity:1,interval:5,timeUnit:"minute"},{rangeInMS:e.MONTH,periodicity:1,interval:30,timeUnit:"minute"},{rangeInMS:e.YEAR,periodicity:1,interval:"day"},{rangeInMS:e.DECADE,periodicity:1,interval:"week"},{rangeInMS:10*e.DECADE,periodicity:1,interval:"month"},{rangeInMS:Number.MAX_VALUE,periodicity:12,interval:"month"}],dynamicRangePeriodicityMap:[{interval:1,timeUnit:"minute",rangeInMS:e.MINUTE},{interval:5,timeUnit:"minute",rangeInMS:5*e.MINUTE},{interval:30,timeUnit:"minute",rangeInMS:30*e.MINUTE},{interval:60,timeUnit:"minute",rangeInMS:60*e.MINUTE},{interval:"day",rangeInMS:e.DAY},{interval:"month",rangeInMS:e.MONTH},{interval:"year",rangeInMS:e.YEAR}],layout:{interval:"day",periodicity:1,timeUnit:null,candleWidth:8,flipped:!1,volumeUnderlay:!1,adj:!0,crosshair:!1,chartType:"candle",extended:!1,marketSessions:{},aggregationType:"ohlc",chartScale:"linear",studies:{},panels:{},setSpan:{},outliers:!1,animation:!0},preferences:{currentPriceLine:!1,dragging:{series:!0,study:!0,yaxis:!0},drawings:null,highlightsRadius:10,highlightsTapRadius:30,magnet:!1,horizontalCrosshairField:null,labels:!0,language:null,timeZone:null,whitespace:50,zoomInSpeed:null,zoomOutSpeed:null,zoomAtCurrentMousePosition:!1},streamParameters:{count:0,maxWait:1e3,maxTicks:100,timeout:-1},autoPickCandleWidth:{turnOn:!1,candleWidth:5}},e.extend(e.ChartEngine.prototype,i),a.k73(6),e.ChartEngine.NONE=a.b0A("0",0),e.ChartEngine.CLOSEUP=1,e.ChartEngine.CLOSEDOWN=2,e.ChartEngine.CLOSEEVEN=4,e.ChartEngine.CANDLEUP=8,e.ChartEngine.CANDLEDOWN=16,e.ChartEngine.CANDLEEVEN=32},p=t=>{var e,i=V;i.F3v(),(e=t.CIQ).convertFutureMonth=function(t){var e;if("1","2","1","1","1","0",(e=t.toString()).length<=0||e.length>2)return"";switch(e){case"1":return"F";case"2":return"G";case"3":return"H";case"4":return"J";case"5":return"K";case"6":return"M";case"7":return"N";case"8":return"Q";case"9":return"U";case"10":return"V";case"11":return"X";case"12":return"Z";case"F":return"1";case"G":return"2";case"H":return"3";case"J":return"4";case"K":return"5";case"M":return"6";case"N":return"7";case"Q":return"8";case"U":return"9";case"V":return"10";case"X":return"11";case"Z":return"12"}return e},e.money=function(t,a,r){return r||(r="$"),3==r.length&&(r+=" "),a||0===a||(i.D19(48),a=i.E8o("2",2)),r+e.commas((Math.round(1e4*t)/1e4).toFixed(a))},e.convertCurrencyCode=function(t){return"C","F","A","E","C","$","","","","z","",{JPY:"",USD:"$",AUD:"A$",BRL:"R$",CAD:"CA$",CNY:"CN",CZK:"K",DKK:"kr",EUR:"",GBP:"",HKD:"HK$",HUF:"Ft",ILS:"",INR:"",KRW:"",MXN:"MX$",NOK:"kr",NZD:"NZ$",PLN:"z",RUB:"",SAR:"",SEK:"kr",SGD:"S$",THB:"",TRY:"",TWD:"NT$",VND:"",XAF:"FCFA",XCD:"EC$",XOF:"CFA",XPF:"CFPF",ZAR:"R"}[t]||t},e.commas=function(t){return t.toString().replace(/\B(?=(\d{3}){1,4}(?!\d))/g,",")},e.cleanPeriodicity=function(t,e,a){return"y","e","ar","t","i","c","k",isNaN(t)&&(t=1),e||(e=1),!isNaN(e)&&a?("minu","te","ho","u","r","hour"!=a&&"minute"!=a&&"second"!=a&&"millisecond"!=a&&(e=a,a=null)):"tick"==e?a=null:a||isNaN(e)||(a="minute"),"hour"==a&&(a="minute",i.k73(17),e=i.b0A(60,e)),"year"==e&&("mon","th",e="month",t||(t=1),i.k73(17),t=i.E8o(12,t)),{period:t,interval:e,timeUnit:a}},e.readablePeriodicity=function(t){var a,r;i.F3x(),a=t.layout.periodicity,r=t.layout.interval,"number"==typeof t.layout.interval&&t.layout.timeUnit?(a=t.layout.interval*t.layout.periodicity,r=t.layout.timeUnit):"number"!=typeof t.layout.interval||t.layout.timeUnit||(a=t.layout.interval*t.layout.periodicity,r="minute"),a%60==0&&"minute"==r&&(i.k73(21),a/=i.b0A(0,"60"),r="hour"),i.D19(65);var n=i.E8o(16,6,12,290,3445);i.k73(49);i.E8o(111900,104453,13);i.k73(24);var s=i.E8o(98624,10,8,117116);i.k73(79);var o=i.b0A(4624,4633,4613,20);i.k73(19);i.E8o(648,7772);i.D19(8);i.E8o(15,9127,1);return a+(n>=s?o:" ")+t.translateIf(e.capitalize(r))},e.fixPrice=function(t){var e;if(i.F3x(),!t&&0!==t)return null;for(var a=(e=t.toFixed(10)).length-1;a>1&&"0"==e.charAt(a);a--);return i.D19(19),e=e.substring(0,i.b0A(a,1)),parseFloat(e)},e.condenseInt=function(t){var e;if(null==t)return"";if(i.F3v(),t===1/0||t===-1/0)return"n/a";if(i.D19(80),e=i.b0A(0,t),isNaN(t))t=t.toString();else if((t=Math.abs(t))>1e12){i.k73(81);i.b0A(17,86,1,923,6);i.D19(82);var a=i.b0A(20352,1,8,161624,10);t=Math.round(t/1e11)/10+(8120<=a?"k":"t")}else if(t>1e11){i.k73(19);var r=i.E8o(999999997,3);i.D19(19);i.E8o(3970,20);i.k73(19);var n=i.b0A(227,454);i.D19(38);i.b0A(17,3,1970);i.D19(2);i.b0A(13,341,3422);i.D19(8);var s=i.E8o(9,957,6);i.D19(19);var o=i.b0A(174,2786);i.k73(6);i.E8o(81760,76650);t=Math.round(t/r)+(n>177.01?"b":s<=o||"D")}else if(t>1e10){i.k73(83);var l=i.b0A(18,9,15,2917,3);i.k73(84);var h=i.E8o(1,14,61,77,61);i.D19(8);i.E8o(11,7241,0);i.D19(54);var c=i.E8o(4239,80655,19,4245);t=(Math.round(t/1e8)/10).toFixed(l)+("3519"<<h!=9599?"b":c)}else if(t>1e9)t=(Math.round(t/1e7)/100).toFixed(2)+"b";else if(t>1e8){i.D19(55);var u=i.b0A(1,999999,1,999993,999993);i.D19(85);var d=i.E8o(5,8808,75420,9);i.D19(2);var p=i.b0A(11,9513,28);i.D19(19);i.b0A(3,13);i.k73(8);var g=i.E8o(9,59360,55641);i.k73(24);var m=i.E8o(2972,20,4,11900);t=Math.round(t/u)+(d<=p?"m":1520!=g||m)}else if(t>1e7){i.D19(49);var f=i.b0A(16,22,7);i.k73(86);var y=i.E8o(5318,8,69043,69043);i.D19(8);i.b0A(3,2480,1237);i.k73(19);var v=i.E8o(471,8e3);i.k73(44);i.b0A(6569,1,11);i.D19(6);i.b0A(9154,18);i.D19(87);var b=i.b0A(1517,36480,18,6);i.k73(62);i.E8o(37,3251,1,18,16);t=(Math.round(t/1e5)/10).toFixed(f)+(5620!=y?"m":v<746.59?23.48:2230===b?10:60.48)}else if(t>1e6){i.k73(62);var x=i.E8o(15,6,6,13,3);i.k73(88);i.E8o(19,1,9750);i.D19(89);var S=i.E8o(53,2,194,3,7);i.k73(19);i.b0A(7955,15);i.D19(6);var C=i.E8o(9910,20);i.D19(90);var A=i.b0A(19,16,6648,148,1332);i.D19(22);var D=i.E8o(6395,18,108735);i.k73(2);var k=i.b0A(20,0,21);i.D19(24);var w=i.b0A(3630,19,3,19350);i.D19(38);var M=i.b0A(12,1673,105);i.k73(44);i.E8o(3223,1,6447);i.k73(91);var T=i.b0A(4,28,897,16,4);t=(Math.round(t/1e4)/100).toFixed(x)+(S===C?A:D!="3070"*k?"m":w<M?"n":T)}else if(t>1e5){i.D19(11);var F=i.b0A(8,7,1007,6);i.k73(6);i.b0A(8337,20);i.D19(92);var P=i.E8o(988,265,13,3948,4);i.k73(93);var _=i.E8o(15,1,3271,4080,5);i.k73(55);var L=i.b0A(1,5539,1,5554,5554);i.k73(94);var E=i.b0A(2034,2277,1,9,9);t=Math.round(t/F)+(470.12!=P?"k":310.01!=_?L:E)}else if(t>1e4)t=(Math.round(t/100)/10).toFixed(1)+"k";else if(t>1e3){i.k73(6);var I=i.E8o(14,12);i.k73(75);i.E8o(6,2491,16,37280);i.D19(95);i.b0A(18,9,9350,1170,17);i.k73(44);var N=i.b0A(692,4,8817);i.k73(96);var O=i.E8o(3004,3025,2,3025,3);i.k73(58);i.E8o(7,4884,2,18,2457);t=(Math.round(t/10)/100).toFixed(I)+(642.96!==N?"k":!(485.61>=O)||9260)}else t=t.toString();return e&&(i.k73(19),t=i.b0A("-",t)),t},e.calculateTradingDecimalPlaces=function(t){var e,a,r,n,s,o,l,h,c;if(e=t.chart,i.k73(48),a=i.b0A("2",0),50,(r=e.masterData)&&r.length>50)for(var u=2;u<50&&!((n=r.length-u)<0);u++)if((s=r[n]).Close&&"number"==typeof s.Close&&-1!=(l=(o=s.Close.toString()).indexOf("."))){i.D19(19);var d=i.E8o(0,1);(h=o.length-l-d)>a&&(a=h)}return i.F3v(),a>(c=e.yAxis.maxDecimalPlaces)&&null!==c&&(a=c),a},e.minMax=function(t,e,i,a){var r,n,s,o,l,h,c;r=Number.MAX_VALUE,n=-1*Number.MAX_VALUE,i||(i="Close"),s=a?"High":i,o=a?"Low":i;for(var u=0;u<t.length;u++)(l=t[u])&&((h=l[e])||0===h)&&(c=h,"object"==typeof h&&(c=h[s]),isNaN(c)||!c&&0!==c||(n=Math.max(n,c)),"object"==typeof h&&(c=h[o]),isNaN(c)||!c&&0!==c||(r=Math.min(r,c)));return[r,n]},e.symbolEqual=function(t,e){var i,a;return"ob","jec","t",!(!t||!e)&&("object"!=typeof t&&(t={symbol:t}),"object"!=typeof e&&(e={symbol:e}),"function"==typeof t.equals?t.equals(e):(i=t.symbol,a=e.symbol,i&&(i=i.toUpperCase()),a&&(a=a.toUpperCase()),i==a&&t.source==e.source))},e.addMemberToMasterdata=function(t){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;function k(t,e){var a;if(i.F3x(),!t||"object"!=typeof t)return t=e;for(var r in a={Close:t.Close,High:t.High,Low:t.Low,Open:t.Open,Volume:t.Volume},t=e,a)"nu","mb","e","r",null===t.Close?void 0!==t[r]&&(t[r]=null):"number"!=typeof t[r]?t[r]=a[r]:"number"==typeof a[r]&&("Open"==r?t.Open=a.Open:"Low"==r&&t.Low>a.Low?t.Low=a.Low:"High"==r&&t.High<a.High?t.High=a.High:"Volume"==r&&(t.Volume+=a.Volume));return t}if(t.constructor===e.ChartEngine&&(t={stx:arguments[0],label:arguments[1],data:arguments[2],fields:arguments[3],createObject:arguments[4],fieldForLabel:arguments[5]}),a=t.stx,r=t.label,n=t.data,s=t.fields,o=t.createObject,l=t.fieldForLabel,h=t.chart?t.chart:a.chart,t.noCleanupDates||a.doCleanupDates(n,a.layout.interval),c=[],a.getSeries&&(c=a.getSeries({symbol:r,chart:h})),n&&n.constructor==Object&&(n=[n]),n&&n.length){for(u=0,d=0,p=h.masterData,g=a.layout,p||(p=[]),y=h&&h.defaultPlotField||null,v=a.mainSeriesRenderer.params.type&&!a.mainSeriesRenderer.highLowBars,b=g.chartType,!v&&b&&(x=e.Renderer.produce(b,{}))&&(v=!x.highLowBars),S=e.yyyymmddhhmmssmmm;u<p.length&&d<n.length;){if(f=n[d],m=p[u],f.DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=e.strToDateTime(f.Date),0===d)for(var w=0;w<c.length;w++)(!c[w].endPoints.begin||c[w].endPoints.begin>f.DT)&&(c[w].endPoints.begin=f.DT);+f.DT!=+m.DT?f.DT<m.DT?p.splice(u,0,{DT:f.DT,Date:f.Date}):P(f.DT):(F(m,f),d++,u++)}if(u>=p.length)for(;d<n.length;)(f=n[d]).DT&&void 0!==f.DT?("number"==typeof f.DT&&(f.DT=new Date(f.DT)),f.Date&&17==f.Date.length||(f.Date=S(f.DT))):f.DT=e.strToDateTime(f.Date),F(m={DT:f.DT,Date:f.Date},f),p.push(m),d++;if(t.fillGaps&&p.length)if(C={noCleanupDates:!0,cleanupGaps:t.fillGaps},s)for(var M=0;M<s.length;M++)C.field=s[M],a.doCleanupGaps(p,h,C);else C.field=r,a.doCleanupGaps(p,h,C);for(var T=0;T<c.length;T++)(!(A=c[T].endPoints).end||!r||A.end<=m[r].DT)&&(A.end=r?m[r].DT:m.DT,D=r||c[T].parameters&&c[T].parameters.field||h.defaultPlotField,c[T].lastQuote=a.getFirstLastDataRecord(p,D,!0));a.setMasterData(p,h,{noCleanupDates:!0})}function F(t,i){var a,n,h;if(s&&s.length)if("*"==s[0])e.extend(t,i);else for(var c=0;c<s.length;c++)t[s[c]]=i[s[c]];else if(o){if("n","u","mb","er",void 0!==i.Value)return void(t[r]=i.Value);t[r]="aggregate"==o?k(t[r],i):i,"number"==typeof(a=t[r]).Close&&("number"!=typeof a.Open&&(a.Open=a.Close),n=Math.max(a.Open,a.Close),h=Math.min(a.Open,a.Close),("number"!=typeof a.High||a.High<n)&&(a.High=n),("number"!=typeof a.Low||a.Low>h)&&(a.Low=h)),a.Volume&&"number"!=typeof a.Volume&&(a.Volume=parseInt(a.Volume,10))}else l?t[r]=i[l]:v&&y&&void 0!==i[y]?t[r]=i[y]:g.adj&&void 0!==i.Adj_Close?t[r]=i.Adj_Close:void 0!==i.Close?t[r]=i.Close:void 0!==i.Value?t[r]=i.Value:t[r]=i[r]}function P(t){var e,a,r;i.F3v(),e=u,i.k73(16);var n=i.E8o(28,11,7,0,9);if(a=p.length-n,p[a].DT<t)return i.k73(19),void(u=i.b0A(a,1));if(+p[a].DT!=+t){for(u++,r=0;++r<100;){switch(+p[u].DT==+t?(i.k73(17),i.E8o(1,"0")):p[u].DT<t?1:(i.F3v(),p[u-1].DT>t?-1:(+p[u-1].DT==+t&&u--,0))){case 0:return;case 1:e=u;break;case-1:a=u}i.D19(32),u=Math.round(i.E8o(2,e,a))}if(r>=100){"!!!Warning: addM","emberToMasterdata() di","d not fin","d insertion point.",console.log("!!!Warning: addMemberToMasterdata() did not find insertion point."),i.D19(49);var s=i.b0A(0,6,7);u=p.length-s}}else u=a}}},g=t=>{var e;(e=t.CIQ).xor=function(t,e){var i,a;return i=!t,a=!e,V.k73(78),V.F3v(),V.E8o(a,i)},e.round=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)},e.countDecimals=function(t){var i;if("number"!=typeof t||isNaN(t))return 0;if(Math.floor(t)===Number(t))return 0;if((i=t.toString().split("e-")).length>1){V.k73(49);var a=V.b0A(0,2,3);return e.countDecimals(Number(i[0]))+Number(i[a])}return i[0].indexOf(".")>-1?i[0].split(".")[1].length:0},e.isValidNumber=function(t){for(var e=1;-1615433474!==V.A5b(e.toString(),e.toString().length,73687);e++)return isFinite(t)&&+t===t;if(-2024730202!==V.A5b(2..toString(),2..toString().length,68166))return isFinite(t)||-t==t},e.log10=function(t){return V.F3v(),Math.log(t)/Math.LN10},e.random=function(){var t=V;if("undefined"!=typeof crypto&&void 0!==crypto.getRandomValues){t.D19(22);var e=t.b0A(6,2,11);t.k73(2);var i=t.b0A(15,236,34);return crypto.getRandomValues(new Uint8Array(e))[0]/i}return"random",Math.random()},e.boxIntersects=function(t,e,i,a,r,n,s,o,l){var h,c,u,d,p,g;function m(t,e){return V.D19(97),V.F3x(),V.E8o(n,t,o,r,e,r,n,s)}if(void 0!==arguments[9]&&console.warn("CIQ.boxIntersects() no longer supports isLog argument, please be sure arguments are passed in as pixels."),h=Math.min(t,i),c=Math.max(t,i),u=Math.min(e,a),d=Math.max(e,a),V.k73(98),p=V.b0A("ray",l),isNaN(r)||isNaN(s)||isNaN(n)||isNaN(o))return!1;if("line"!=l){if(r<h&&s<h&&(!p||r>s))return!1;if(r>c&&s>c&&(!p||r<s))return!1;if(n<u&&o<u&&(!p||n>o))return!1;if(n>d&&o>d&&(!p||n<o))return!1}return!((g={a:m(t,e),b:m(t,a),c:m(i,e),d:m(i,a)}).a>0&&g.b>0&&g.c>0&&g.d>0)&&(V.F3x(),!(g.a<0&&g.b<0&&g.c<0&&g.d<0))},e.linesIntersect=function(t,e,i,a,r,n,s,o,l){var h,c,u,d,p,g=V;if("verti","cal","horizon","tal","lin","e",g.k73(97),h=g.E8o(s,n,a,r,o,t,i,e),g.D19(97),c=g.b0A(r,o,t,s,n,s,r,i),g.D19(97),u=g.b0A(t,a,t,i,e,s,r,i),0===h)return 0===c&&0===u;if(g.k73(26),d=g.E8o(c,h),g.D19(26),p=g.E8o(u,h),"segment"==l){if(d>=0&&d<=1&&p>=0&&p<=1)return!0}else if("line"==l||"horizontal"==l||"vertical"==l){if(d>=0&&d<=1)return!0}else if("ray"==l&&d>=0&&d<=1&&p>=0)return!0;return!1},e.yIntersection=function(t,e){var i,a,r,n,s,o,l,h,c,u=V;if(i=t.x0,a=t.x1,r=e,n=e,s=t.y0,o=t.y1,0,1e4,u.k73(97),u.F3x(),l=u.b0A(0,n,o,r,1e4,i,s,a),u.D19(97),h=u.b0A(r,1e4,i,0,n,0,r,s),u.k73(26),c=u.E8o(h,l),0===l){if(0!==h)return null;c=1}return u.D19(99),u.E8o(s,o,c,s)},e.xIntersection=function(t,e){var i,a,r,n,s,o,l,h,c,u=V;if(i=t.x0,a=t.x1,0,1e4,r=t.y0,n=t.y1,u.F3x(),s=e,o=e,u.D19(97),l=u.b0A(s,1e4,n,0,o,i,r,a),u.k73(97),h=u.E8o(0,o,i,s,1e4,s,0,r),u.k73(26),c=u.b0A(h,l),0===l){if(0!==h)return null;c=1}return u.D19(99),u.E8o(i,a,c,i)},e.intersectLineLineX=function(t,e,i,a,r,n,s,o){var l,h,c,u=V;return u.F3v(),u.k73(97),l=u.E8o(r,o,t,s,n,s,r,i),u.D19(97),h=u.E8o(s,n,a,r,o,t,i,e),u.k73(26),c=u.b0A(l,h),u.D19(99),u.b0A(t,e,c,t)},e.intersectLineLineY=function(t,e,i,a,r,n,s,o){var l,h,c,u=V;return u.k73(97),l=u.b0A(r,o,t,s,n,s,r,i),u.D19(97),h=u.b0A(s,n,a,r,o,t,i,e),u.D19(26),c=u.b0A(l,h),u.k73(99),u.E8o(i,a,c,i)},e.withinRadius=function(t,e,i){return t&&e&&(t.x-e.x)**2+(t.y-e.y)**2<=i**2}},m=t=>{var e,i;e=t.CIQ,i=Object.freeze({"ChartEngine.new":0}),e.configureMetricsClient=t=>{var a;V.F3x(),e.logMetrics=(a=t)&&void 0!==a.url?function(t){var r,n;r=e.localStorage.getItem("uuid"),V.F3v(),null==r&&(r=e.uniqueID(),e.localStorage.setItem("uuid",r)),n={slot:i[t],uuid:r},e.postAjax({contentType:"application/json",noEpoch:!0,payload:JSON.stringify(n),url:`${a.url}/metrics/${a.clientId}`})}:()=>{}},e.configureMetricsClient()},f=t=>{var e,i=V;(e=t.CIQ).deleteRHS=function(t,e){var a;for(var r in i.F3v(),a=!1,t)t[r]==e&&(delete t[r],a=!0);return a},e.scrub=function(t,e){for(var a in i.F3v(),t)void 0===t[a]&&delete t[a],e&&null===t[a]&&delete t[a]},e.dataBindSafeAssignment=function(t,a){for(var r in e.extend(t,a),i.F3v(),t)void 0===a[r]&&(t[r]=void 0)},e.clone=function(t,a){var r;if(null===t||"object"!=typeof t)return t;if(r=t.constructor,i.F3x(),r==Date||r==RegExp||r==String||r==Number||r==Boolean)return new r(t.valueOf());if(r==Function)return function(){return t.apply(this,arguments)};if(!a)try{a=new r}catch(e){a=Object.create(Object.getPrototypeOf(t))}for(var n in t)a[n]=a[n]!==t[n]?e.clone(t[n],null):a[n];return a},e.shallowClone=function(t){var e;if(i.F3x(),!t)return t;if(t.constructor==Array){e=new Array(t.length);for(var a=0;a<t.length;a++)e[a]=t[a];return e}for(var r in e={},t)e[r]=t[r];return e},e.ensureDefaults=function(t,e){for(var a in i.F3x(),e)"und","efi","n","ed",void 0===t[a]&&(t[a]=e[a]);return t},e.transferObject=function(t,e){var i;for(i in t)t.hasOwnProperty(i)&&delete t[i];for(i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},e.equals=function(t,i,a){if(t===i)return!0;if(!t&&i)return!1;if(t&&!i)return!1;if(typeof t!=typeof i)return!1;for(var r of[...new Set(Object.keys(t).concat(Object.keys(i)))])if(!a||!a[r]){if("object"==typeof t[r]){if(e.equals(t[r],i[r]))continue;return!1}if(i[r]!=t[r])return!1}return!0},e.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},e.first=function(t){for(var e in t)return e;return null},e.last=function(t){var e;for(var i in e=null,t)e=i;return e},e.objLength=function(t){var e;if(!t)return 0;for(var i in e=0,t)e++;return e},e.deriveFromObjectChain=function(t,e){var a,r;if(-1==e.indexOf("."))return{obj:t,member:e};i.F3x(),a=e.split(".");for(var n=0;n<a.length-1;n++)t[r=a[n]]||0===t[r]||(t[r]={}),t=t[r];return{obj:t,member:a[n]}},e.createObjectChainNames=function(t,e){var a;a=[];for(var r=0;r<e.length;r++)a.push(t+"--\x3e"+e[r]);return i.F3v(),a},e.getObjectChainRoot=function(t){return t?(i.F3x(),t.split("--\x3e")[0]):null},i.F3v(),e.existsInObjectChain=function(t,e){var i,a;if("--",">",-1==e.indexOf("--\x3e"))return(i=t[e])||0===i?{obj:t,member:e}:null;a=e.split("--\x3e");for(var r=0;r<a.length;r++){if(!(i=t[a[r]])&&0!==i)return null;if(!(r<a.length-1))return{obj:t,member:a[r]};t=i}},e.derivedFrom=function(t,e){return!!e.isPrototypeOf(t)||t instanceof e},e.replaceFields=function(t,i){var a,r,n,s,o;if(!t)return t;for(var l in a={},t)if(r=t[l],(n=i[l])||(n=l),r&&"object"==typeof r)if(r.constructor==Array){s=a[n]=new Array(r.length);for(var h=0;h<s.length;h++)o=r[h],s[h]="object"==typeof o?e.replaceFields(o,i):o}else a[n]=e.replaceFields(r,i);else a[n]=r;return a},e.removeNullValues=function(t){var a;for(var r in i.F3x(),a=e.clone(t))a[r]||delete a[r];return a},e.reverseObject=function(t){var e;for(var i in e={},t)e[t[i]]=i;return e},e.getFromNS=(t,e,i)=>{var a,r,n;if(t){a=t,r=e.split(".");for(var s=0;s<r.length&&("u","ndefin","ed",void 0!==a[n=r[s]]);s++)a=a[n];if(s===r.length)return a}return i},e.getFnFromNS=(t,a,r)=>(i.F3v(),e.getFromNS(t,a,(function(){return r}))),e.get=(t,a)=>(i.F3x(),e.getFromNS(e,t,a)),e.getFn=(t,a)=>(i.F3x(),e.getFromNS(e,t,(function(){return a})))},y=t=>{var e,i=V;i.F3x(),(e=t.CIQ).Plotter=function(){this.seriesArray=[],this.seriesMap={}},e.extend(e.Plotter.prototype,{Series:function(t,a,r,n,s,o){this.name=t,this.strokeOrFill=a,this.color=r,this.moves=[],this.text=[],(!n||n>1||n<0)&&(i.D19(45),n=i.b0A(0,"1")),this.opacity=n,(!s||s>25||s<1)&&(s=1),this.width=s,this.pattern=e.borderPatternToArray(s,o)},newSeries:function(t,a,r,n,s){var o;o=r.constructor==String?new this.Series(t,a,r,n,s):new this.Series(t,a,r.color,r.opacity,s>=0?s:e.stripPX(r.width),r.borderTopStyle),i.F3x(),this.seriesArray.push(o),this.seriesMap[t]=o},reset:function(t){var e;for(var i in this.seriesMap)t&&t!=i||(e=this.seriesMap[i])&&(e.moves=[],e.text=[])},moveTo:function(t,e,a){i.F3x(),this.seriesMap[t].moves.push({action:"moveTo",x:e,y:a})},lineTo:function(t,e,a){var r,n;i.F3x(),n=(r=this.seriesMap[t]).pattern,r.moves.push({action:"lineTo",x:e,y:a,pattern:n})},dashedLineTo:function(t,e,a,r){i.F3x(),this.seriesMap[t].moves.push({action:"lineTo",x:e,y:a,pattern:r})},quadraticCurveTo:function(t,e,a,r,n){var s,o;i.F3x(),o=(s=this.seriesMap[t]).pattern,s.moves.push({action:"quadraticCurveTo",x0:e,y0:a,x:r,y:n,pattern:o})},bezierCurveTo:function(t,e,a,r,n,s,o){var l,h;i.F3v(),h=(l=this.seriesMap[t]).pattern,l.moves.push({action:"bezierCurveTo",x0:e,y0:a,x1:r,y1:n,x:s,y:o,pattern:h})},addText:function(t,e,i,a,r,n,s){this.seriesMap[t].text.push({text:e,x:i,y:a,bg:r})},drawText:function(t,e){for(var i,a,r,n,s=0;s<e.text.length;s++)(i=e.text[s]).bg&&(a=i.width?i.width:t.measureText(i.text).width,r=i.height?i.height:12,n=t.fillStyle,t.fillStyle=i.bg,"right"==t.textAlign?t.fillRect(i.x,i.y-r/2,-a,-r):t.fillRect(i.x,i.y-r/2,a,r),t.fillStyle=n),t.fillText(i.text,i.x,i.y)},draw:function(t,e){var a,r,n,s,o,l,h;a=t.lineWidth,r=t.fillStyle,n=t.strokeStyle,i.F3v(),s=t.globalAlpha;for(var c=0;c<this.seriesArray.length;c++)if(o=this.seriesArray[c],!e||o.name==e){t.beginPath(),t.lineWidth=o.width,t.globalAlpha=o.opacity,t.fillStyle=o.color,t.strokeStyle=o.color,t.save(),l=[0,0];for(var u=0;u<o.moves.length;u++)"bezierCurv","e","T","o",(h=o.moves[u]).pattern||(h.pattern=[]),JSON.stringify(t.getLineDash())!==JSON.stringify(h.pattern)&&(t["fill"==o.strokeOrFill?"fill":"stroke"](),t.beginPath(),t.moveTo(l[0],l[1])),t.setLineDash(h.pattern),t.lineDashOffset=0,"quadraticCurveTo"==h.action?t[h.action](h.x0,h.y0,h.x,h.y):"bezierCurveTo"==h.action?t[h.action](h.x0,h.y0,h.x1,h.y1,h.x,h.y):t[h.action](h.x,h.y),l=[h.x,h.y];t["fill"==o.strokeOrFill?"fill":"stroke"](),t.closePath(),t.restore(),this.drawText(t,o),t.lineWidth=1}t.lineWidth=a,t.fillStyle=r,t.strokeStyle=n,t.globalAlpha=s}},!0)},v=t=>{var e,i=V;(e=t.CIQ).Renderer=function(){},e.Renderer.produce=function(t,a){var r,n;if("lin",i.F3x(),"e",r=null,t)for(var s in e.Renderer)if((n=e.Renderer[s]).requestNew&&(r=n.requestNew(t.split("_"),a)),r)return r;return a.type="line",new e.Renderer.Lines({params:a})},e.Renderer.colorFunctions={},e.Renderer.registerColorFunction=function(t,a){i.F3x(),e.Renderer.colorFunctions[t]=a},e.Renderer.unregisterColorFunction=function(t){i.F3v(),delete e.Renderer.colorFunctions[t]},e.Renderer.prototype.init={},e.Renderer.prototype.adjustYAxis=function(){},e.Renderer.prototype.draw=function(){},i.F3x(),e.Renderer.prototype.drawIndividualSeries=function(t,e){},e.Renderer.prototype.construct=function(t){var i;t||(t={}),i=t.params?t.params:{},this.init&&e.ensureDefaults(i,this.init),i.name||(i.name=e.uniqueID()),i.heightPercentage||(i.heightPercentage=.7),i.opacity||(i.opacity=1),!1!==i.highlightable&&(i.highlightable=!0),i.panel||(i.panel="chart"),i.yAxis&&(i.yAxis=new e.ChartEngine.YAxis(i.yAxis),i.yAxis.name||(i.yAxis.name=i.name)),this.cb=t.callback,this.params=i,this.seriesParams=[],this.caches={},this.colors={}},e.Renderer.prototype.attachSeries=function(t,a){var r,n,s,o,l,h,c,u,d,p;if("s","t","ring",!(r=this.stx))return this;if((n=r.chart.series[t])||(n={parameters:{}}),s=this.params,o=n.parameters,l={id:t,chartType:s.type,display:o.display,border_color_up:s.defaultBorders?"auto":null,fill_color_up:o.color,opacity_up:s.opacity,border_color_down:s.defaultBorders?"auto":null,fill_color_down:o.color,opacity_down:s.opacity,color:o.color,symbol:o.symbol,symbolObject:e.clone(o.symbolObject)},"string"==typeof a)l.color=l.fill_color_down=l.fill_color_up=a;else if("object"==typeof a){for(var g in a)l[g]=a[g];h=l.color,c=l.border_color,h&&(l.fill_color_up||(l.fill_color_up=h),l.fill_color_down||(l.fill_color_down=h),l.fill_color_even||(l.fill_color_even=h)),c&&(l.border_color_up||(l.border_color_up=c),l.border_color_down||(l.border_color_down=c),l.border_color_even||(l.border_color_even=c))}for(l.symbol&&l.field!=l.symbol&&(l.subField=l.field,l.field=l.symbol),l.id||(l.id=e.uniqueID()),u=0;u<this.seriesParams.length;++u)if(this.seriesParams[u].id===l.id){this.removeSeries(l.id,!0);break}return this.seriesParams.splice(u,0,l),l.fill_color_up!=l.fill_color_down?(" d","o","wn"," u","p"," ","u","p",i.D19(19),this.colors[i.b0A(t," up")]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display+" up":t+" up"},i.k73(19),this.colors[i.b0A(t," dn")]={color:l.fill_color_down,opacity:l.opacity_down,display:l.display?l.display+" down":t+" down"}):this.colors[t]={color:l.fill_color_up,opacity:l.opacity_up,display:l.display?l.display:t},d=s.panel,r.panels[d]?s.yAxis?(s.yAxis=r.addYAxis(r.panels[d],s.yAxis),s.yAxis.needsInitialPadding=!0,o.yAxis=s.yAxis,r.resizeChart()):l.yAxis&&(s.yAxis=l.yAxis):((p=s.yAxis)||((p=new e.ChartEngine.YAxis).needsInitialPadding=!0),p.name=d,r.createPanel(d,d,null,null,p)),this},e.Renderer.prototype.removeSeries=function(t,e){var a,r,n,s,o,l,h,c;for(var u in a=null,r=!1,(s=(n=this.stx).chart).seriesRenderers){o=s.seriesRenderers[u];for(var d=0;d<o.seriesParams.length;d++)(l=o.seriesParams[d]).id==t&&this===o?a=d:!l.isComparison||l.panel!=s.panel.name||l.yAxis&&l.yAxis!=s.yAxis||(r=!0)}if(null!==a&&("li","ne","a","r",s.forcePercentComparison&&!r&&this.seriesParams[a].isComparison&&"linear"!=n.layout.chartScale&&n.setChartScale(),this.seriesParams.splice(a,1)),i.k73(19),delete this.colors[i.E8o(t," up")],i.D19(19),i.F3v(),delete this.colors[i.b0A(t," dn")],delete this.colors[t],!e){for(var p in s.seriesRenderers){c=s.seriesRenderers[p];for(var g=0;g<c.seriesParams.length;g++){if(c.seriesParams[g].id==t){h=!0;break}h=!1}if(h)break}!1!==h&&null===a||n.deleteSeries&&n.deleteSeries(t,s)}return n.deleteYAxisIfUnused(n.panels[this.params.panel],this.params.yAxis),n.resizeChart(),this},e.Renderer.prototype.modifyRenderer=function(t){var a;i.F3x(),this.params;var{stx:r}=this;for(var n in t)switch("s","ty","l","e","t","y","p","e","b","a","seline",a=t[n],n){case"baseline":a?("object"==typeof a&&(this.params.baseline=e.ensureDefaults(a,e.ChartEngine.Chart.prototype.baseline)),r.registerBaselineToHelper(this)):r.removeBaselineFromHelper(this);break;case"type":this.params.type=a;break;case"style":this.params.style=a}},e.Renderer.prototype.getDependents=function(t){var e,a;for(var r in i.F3v(),e=[],t.chart.seriesRenderers)(a=t.chart.seriesRenderers[r]).params.dependentOf==this.params.name&&e.push(a);return e},e.Renderer.prototype.undraggable=function(t){return this==t.mainSeriesRenderer||this.params.dependentOf==t.mainSeriesRenderer.params.name},e.Renderer.prototype.removeAllSeries=function(t){var e;if(t||this===this.stx.mainSeriesRenderer){e=[];for(var i=0;i<this.seriesParams.length;i++)e.push(this.seriesParams[i].id);for(var a=0;a<e.length;a++)this.removeSeries(e[a])}return this.seriesParams=[],this.colors={},this.stx.deleteYAxisIfUnused(this.stx.panels[this.params.panel],this.params.yAxis),this.stx.resizeChart(),this},e.Renderer.prototype.getYAxis=function(t){var e,i;if(this.params)if(this.params.yAxis)e=this.params.yAxis;else{if(!(i=t.panels[this.params.panel]))return!1;e=i.yAxis}else e=t.chart.panel.yAxis;return e},e.Renderer.prototype.ready=function(){return this.stx.createDataSet(),i.F3v(),this.stx.draw(),this},e.Renderer.Lines=function(t){this.construct(t);var{params:i}=this;if(i.type||(i.type="line"),!i.style)if("mountain"===i.type)i.baseline?i.style="stx_baseline_delta_mountain":i.colored?i.style="stx_colored_mountain_chart":i.style="stx_mountain_chart";else i.style="stx_line_chart";this.supportsAnimation=!0,"wave"==i.type||"channel"==i.type?(i.step=i.vertex=i.baseline=i.colored=!1,this.highLowBars=this.barsHaveWidth=!0,this.supportsAnimation=!1):"step"==i.type&&(i.step=!0);var{baseline:a}=i;a&&"object"==typeof a&&e.ensureDefaults(i.baseline,e.ChartEngine.Chart.prototype.baseline)},e.inheritsFrom(e.Renderer.Lines,e.Renderer,!1),e.Renderer.Lines.requestNew=function(t,i){var a,r,n,s,o,l;a=null,r=i.step,n=i.colored,s=i.baseline,o=i.vertex;for(var h=0;h<t.length;h++)switch("mo","un","t","ain",l=t[h]){case"line":case"mountain":case"wave":case"channel":a=l;break;case"baseline":s=!0;break;case"colored":n=!0;break;case"step":r=!0;break;case"vertex":o=!0;break;case"delta":break;default:return null}return null!==a||s||r?new e.Renderer.Lines({params:e.extend(i,{type:a,step:r,colored:n,baseline:s,vertex:o})}):null},e.Renderer.Lines.prototype.draw=function(){var t,a,r,n,s,o,l,h,c,u;function d(e){var a,r,n;return a=e.fill_color_up||t.getCanvasColor("stx_line_up"),r=e.fill_color_down||t.getCanvasColor("stx_line_down"),n=e.color||t.getCanvasColor("stx_line_chart"),function(t,e,s){return e.iqPrevClose||0===e.iqPrevClose?(i.F3x(),e.Close>e.iqPrevClose?a:e.Close<e.iqPrevClose?r:n):n}}for(t=this.stx,a=this.stx.panels[this.params.panel].chart,i.F3v(),r={},s=this.seriesParams,o=this.params.colorFunction,n=0;n<s.length;n++){if(l=s[n],this.params.colored){h=["_color_up","_color_down","_color"];for(var p=0;p<h.length;p++)(c=l["border"+h[p]])&&"auto"!=c&&(l["fill"+h[p]]=c);o||(o=d(l)),this.params.colorFunction=o}u={},a.series[l.id]&&(u=e.clone(a.series[l.id].parameters)),r[l.id]={parameters:e.extend(e.extend(u,this.params),l),yValueCache:this.caches[l.id]},this==t.mainSeriesRenderer&&a.customChart&&a.customChart.colorFunction&&(r[l.id].parameters.colorFunction=a.customChart.colorFunction)}for(n in t.drawSeries(a,r,this.params.yAxis,this),r)this.caches[n]=r[n].yValueCache},e.Renderer.Lines.prototype.drawIndividualSeries=function(t,i){var a,r,n,s,o;if("mountai","n","w","ave",!i.invalid&&(a=this.stx,r=t.context,n=null,s=i.colorFunction,o=a.panels[i.panel]||t.panel,"string"!=typeof s||(s=e.Renderer.colorFunctions[s])))return i.vertex&&(r.save(),r.lineJoin="bevel"),"wave"==i.type?n=a.drawWaveChart(o,i):i.baseline?(n=a.drawBaselineChart(o,i),a.positionBaselineHandle(this)):"mountain"==i.type?(i.returnObject=!0,n=a.drawMountainChart(o,i,s)):"channel"==i.type?(i.returnObject=!0,n=a.drawChannelChart(o,s,i)):(i.returnObject=!0,n=a.drawLineChart(o,i.style,s,i)),i.vertex&&(a.scatter(o,{yAxis:i.yAxis,field:i.symbol||i.field,subField:i.subField,symbol:i.symbol,color:i.vertex_color,highlight:i.highlight}),r.restore()),n},e.Renderer.OHLC=function(t){var e;this.construct(t),(e=this.params).type||(e.type="candle"),this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.histogram&&(e.type="candle",this.highLowBars=!1,e.volume=e.hollow=!1),"bar"==e.type&&(e.volume=e.hollow=e.histogram=!1),"candle"==e.type&&(e.hlc=e.colored=!1),i.F3v(),e.volume&&(e.hollow=!0)},e.inheritsFrom(e.Renderer.OHLC,e.Renderer,!1),e.Renderer.OHLC.requestNew=function(t,i){var a,r,n;a=null,r=i.histogram;for(var s=0;s<t.length;s++)switch("h","i","s","togram",n=t[s]){case"candle":a=n;break;case"histogram":"candl","e",r=!0,a="candle";break;default:return null}return null===a?null:new e.Renderer.OHLC({params:e.extend(i,{type:a,histogram:r})})},e.Renderer.OHLC.getChartParts=function(t,e){return"borde","r_color_up","c","an","dle","ca","ndle","ca","n","dl",i.F3x(),"e","c","and","l","e","ca","n","dl","e","stx_histogram_","up","h","istogram",8,16,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:16,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0}]},e.Renderer.OHLC.prototype.draw=function(){var t,a,r,n,s,o,l;for(i.F3x(),t=this.stx,a=this.stx.panels[this.params.panel].chart,r={},s=this.seriesParams,n=0;n<s.length;n++)o=s[n],l={},a.series[o.id]&&(l=e.clone(a.series[o.id].parameters)),r[o.id]={parameters:e.extend(e.extend(l,this.params),o)},this==t.mainSeriesRenderer&&a.customChart&&a.customChart.colorFunction&&(r[o.id].parameters.colorFunction=a.customChart.colorFunction);for(n in t.drawSeries(a,r,this.params.yAxis,this),r)r[n].yValueCache&&(this.caches[n]=r[n].yValueCache)},e.Renderer.OHLC.prototype.getColor=function(t,a,r,n,s,o){var l,h,c,u,d;return l=o||r.color,h=this.params.yAxis||a.yAxis,!n||("border-left-c","olor",l=o||r.borderLeftColor||r["border-left-color"])?s?(c=t.pixelFromTransformedValue(h.highValue,a),isNaN(c)&&(c=0),i.F3x(),u=r.backgroundColor,l&&!e.isTransparent(l)?((d=t.chart.context.createLinearGradient(0,c,0,2*h[h.flipped?"top":"bottom"]-c)).addColorStop(0,l),d.addColorStop(1,u),d):u):l:null},e.Renderer.OHLC.prototype.drawIndividualSeries=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P;if("o","p","e",i.F3v(),"n","st","ri","ng",!a.invalid&&(r=this.stx,n=t.context,s=a.colorFunction,o=r.panels[a.panel]||t.panel,"string"!=typeof s||(s=e.Renderer.colorFunctions[s]))){if(l=r.layout.candleWidth-t.tmpWidth<=2&&t.tmpWidth<=3,i.D19(45),i.b0A(32,"1"),2,4,8,16,32,t.state.chartType||(t.state.chartType={}),h=t.state.chartType.pass={},c=r.colorByCandleDirection,a.colorBasis&&(c="open"==a.colorBasis),u=a.histogram,d=a.type,p=a.hollow,g=r.noWicksOnCandles[d],r.startClip(o.name),m=null,f={colors:[],cache:[]},y=[],s)if(v={isHistogram:u,field:a.field,yAxis:a.yAxis,isVolume:a.volume,highlight:a.highlight},u||"bar"!=d)"c","a","n","dle","candle"!=d||g||r.drawShadows(o,s,v),f=r.drawCandles(o,s,v),v.isOutline=!0,!p&&l||r.drawCandles(o,s,v);else{"b","a","r","hl","c",v.type=a.hlc?"hlc":"bar",-626470990,-2014777577,b=2;for(var _=1;-626470990!==i.j0V(_.toString(),_.toString().length,64066);_++)f=r.drawBarChart(o,"stx_bar_chart",s,v),b+=2;-2014777577!==i.j0V(b.toString(),b.toString().length,82706)&&(f=r.drawBarChart(o,"",s,v))}else{x=u&&!1!==a.gradient,S=e.Renderer.OHLC.getChartParts(a.style,c);for(var L=0;L<S.length;L++)if(!(C=S[L]).skipIfPass||h.even){if(u){if("histogram"!=C.type)continue}else if("bar"==d){if("bar"!=C.type)continue;if(a.colored&&!C.condition)continue;if(!a.colored&&C.condition)continue}else if(p){if("hollow"!=C.type)continue;if("shadow"==C.drawType&&g)continue}else{if("candle"!=d)continue;if("sh","a","d","ow","candle"!=C.type)continue;if("shadow"==C.drawType){if("stx_","cand","le_shadow_","down",g)continue;if(A=a.border_color_up||r.getCanvasColor("stx_candle_shadow_up"),D=a.border_color_down||r.getCanvasColor("stx_candle_shadow_down"),k=a.border_color_even||r.getCanvasColor("stx_candle_shadow_even"),e.colorsEqual(A,D)&&e.colorsEqual(A,k)&&e.colorsEqual(A,r.defaultColor)){if(C.condition)continue}else if(!C.condition)continue}}w=r.canvasStyle(C.style),M=this.getColor(r,o,w,!1,!1,a[C.fill]),T=this.getColor(r,o,w,!1,x,a[C.fill]),F=this.getColor(r,o,w,C.useBorderStyleProp&&!l,x,a[C.border]),"candle"==C.drawType&&("c","an","d","le","hollow"==C.type?(!e.isTransparent(T)&&e.colorsEqual(F,T)&&(F=C.useColorInMap?"transparent":T),C.useColorInMap||(T=r.containerColor)):"candle"==C.type&&l&&(e.isTransparent(T)?T=F:F=T)),n.globalAlpha=a.opacity,y.push(r.drawBarTypeChartInner({fillColor:T,borderColor:F,condition:C.condition,style:C.style,type:"bar"==d&&a.hlc?"hlc":C.drawType,panel:o,field:a.field,yAxis:a.yAxis,volume:a.volume&&a.hollow,highlight:a.highlight})),m||(m={}),C.useColorInMap&&(m[M]=1)}}for(var E in r.endClip(),m)a.hollow&&e.equals(E,r.containerColor)||f.colors.push(E);for(E=0;E<y.length;E++)for(var I=0;I<y[E].cache.length;I++)((P=y[E].cache[I])||0===P)&&(f.cache[I]=P);return f}},e.Renderer.Candles=function(t){var e;this.construct(t),e=this.params,i.F3v(),e.type="candle",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.hlc=e.colored=e.histogram=!1,e.volume&&(e.hollow=!0)},e.inheritsFrom(e.Renderer.Candles,e.Renderer.OHLC,!1),e.Renderer.SimpleHistogram=function(t){var e;this.construct(t),(e=this.params).type="candle",e.histogram=!0,i.F3x(),this.barsHaveWidth=this.standaloneBars=!0,this.highLowBars=!1,e.hlc=e.colored=e.hollow=e.volume=!1},e.inheritsFrom(e.Renderer.SimpleHistogram,e.Renderer.Candles,!1)},b=t=>{var e,i=V;(e=t.CIQ).capitalize=function(t){if(!t)return"";i.k73(86);var e=i.E8o(10,18,1,9);return i.F3v(),t.charAt(0).toUpperCase()+t.slice(e)},i.F3x(),e.camelCaseRegExp=/-([a-z])/g,e.makeCamelCase=function(t){return i.F3x(),t.replace(e.camelCaseRegExp,(function(t){return i.F3v(),t[1].toUpperCase()}))},e.uniqueID=function(t){var e,a,r,n,s,o,l,h,c,u;return"undefi",i.F3x(),"n","e","d","un","d","efi","ned",e="random",a="undefined"!=typeof crypto&&void 0!==crypto.getRandomValues,r="undefined"!=typeof crypto&&void 0!==crypto.randomUUID,t?r?crypto.randomUUID():(n=t=>t.toString(16).padStart(2,0),s=a?t=>crypto.getRandomValues(new Uint8Array(t)):(t=>{var a;return"und","efi","ned",a=(new Date).getTime(),"undefined"!=typeof performance&&"function"==typeof performance.now&&(a+=performance.now()),a=Math.pow(a,3),t=>(i.F3v(),new Uint8Array(t).map((()=>{var t;i.D19(49);var r=i.E8o(1536,1289,9);i.D19(6);var n=i.E8o(3840,3584);return t=(a+Math[e]()*r)%n|0,i.D19(26),a=Math.floor(i.E8o(a,256)),t})))})(),o=t=>(i.F3x(),`4${t.slice(1)}`),l=t=>(i.F3x(),`${Number(3&t[0]|8).toString(16)}${t.slice(1)}`),h=t=>{var e;return e=s(t),[...e].map(n).join("")},i.D19(45),`${h(4)}-${h(i.b0A(64,"2"))}-${o(h(2))}-${l(h(2))}-${h(6)}`):(c=new Date,i.k73(21),u=c.getTime().toString(i.E8o(0,"36")),(u+=a?crypto.getRandomValues(new Uint8Array([1])).toString(36):Math.floor(Math[e]()*Math.pow(36,2)).toString(36)).toUpperCase())}},x=t=>{var e;(e=t.CIQ).getHostName=function(t){try{return t.match(/:\/\/(.[^/]+)/)[V.E8o(0,"1",V.D19(21))]}catch(t){return""}},e.qs=function(t){var e,i,a,r;e={},t||(t=window.location.search.substring(1)),i=t.split("&");for(var n=0;n<i.length;n++)(a=i[n].indexOf("="))>0?(r=i[n].substring(0,a),V.k73(100),e[r]=i[n].substring(V.E8o("1",0,a))):e[r=i[n]]=null;return e},e.postAjax=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,g=V;if("Conte","nt-","Type","application/x-www-fo","rm-urlencode","d","PO","ST","st","r","ing","string"==typeof t&&(t={url:t,payload:i,cb:a,contentType:r,noEpoch:n,method:null,responseHeaders:!1}),g.F3v(),s=t.url,o=t.cb,l=t.payload,o||(o=function(){}),t.ungovernable||!e.Extras||!e.Extras.RequestLimiter||!e.Extras.RequestLimiter.hitRequestLimit(s)){if(!(c=new XMLHttpRequest))return!1;if(u=new Date,t.noEpoch||("&c","i","qran","dom=",-1==s.indexOf("?")?s+="?ciqrandom="+u.getTime():s+="&ciqrandom="+u.getTime()),d=t.method,p=t.headers,d||(d=l?"POST":"GET"),c.open(d,s,!0),t.contentType||(t.contentType="application/x-www-form-urlencoded"),l&&c.setRequestHeader("Content-Type",t.contentType),p)for(var m in p)c.setRequestHeader(m,p[m]);t.timeout&&(c.timeout=t.timeout),c.ontimeout=function(){o(408,null,{})},c.onload=function(){0===this.status?this.status="0":this.status||(this.status=200),o(this.status,this.responseText,function(e){var i,a,r,n;if(i={},!t.responseHeaders)return;g.F3x(),a=e.getAllResponseHeaders(),r=a.split("\n");for(var s=0;s<r.length;s++){for(n=r[s].split(":");n[1]&&" "==n[1].charAt(0);)n[1]=n[1].substring(1);""!==n[0]&&(i[n.shift()]=n.join(":"))}return i}(this))},c.onerror=function(){g.F3x(),o("0",null,{})};try{c.send(l)}catch(t){o("0",t,{})}return!0}h=2;for(var f=1;155340866!==g.j0V(f.toString(),f.toString().length,95885);f++)o(429,null,{}),h+=2;956465718!==g.A5b(h.toString(),h.toString().length,23160)&&o(171,1,{})},e.loadUI=function(t,i,a){var r,n,s,o,l=V;if('"',"]","fu","nction",i&&"function"!=typeof i||(a=i,i=document.body),r=i.ownerDocument,l.D19(38),s=function(){var t,r,n,s,o;t=null;try{-785441787,-1063422845,r=2;for(var h=1;-785441787!==l.j0V(h.toString(),h.toString().length,80926);h++)t=this.contentDocument,l.D19(21),r+=l.E8o(0,"2");-1063422845!==l.A5b(r.toString(),r.toString().length,98094)&&(t=this.contentDocument)}catch(t){return a(t)}if(t&&!t.title){n=t.body.innerHTML,s=document.createElement("div"),e.innerHTML(s,n);for(var c=0;c<s.children.length;c++)o=s.children[c].cloneNode(!0),i.appendChild(o);a(null)}else a(new Error("iFrame not found or document has a title"))},n=r.querySelector(l.b0A(t,'"]','iframe[original-url="'))){"c","ompl","e","te",o=null;try{o=n.contentDocument}catch(t){return a(t)}"complete"===o.readyState&&o.location&&"about:blank"!==o.location.href?s.call(n):n.addEventListener("load",s)}else{(n=document.createElement("iframe")).setAttribute("original-url",t),l.k73(50);var h=l.b0A(14,1,21,6);l.D19(24);var c=l.E8o(6078,20,6,14170);l.D19(2);var u=l.b0A(9,837,29);l.k73(6);l.E8o(717,5);l.D19(22);var d=l.b0A(7481,9,59829);l.k73(22);var p=l.b0A(46765,13,598592);l.D19(84);l.E8o(821,3,2463,2475,3);l.k73(19);var g=l.E8o(979,13);n.src=t+(t.indexOf("?")===h?"?":c==u||(d!==p?g>=9270?"L":"&":983.74))+e.uniqueID(),n.hidden=!0,n.addEventListener("load",s),r.body.appendChild(n)}},e.loadScript=function(t,i,a,r){var n,s,o,l,h;e.loadedScripts||(e.loadedScripts={}),e.loadedScripts[t]?i&&i():(n=r||document,V.D19(38),V.F3v(),(o=n.querySelector(V.E8o(t,"']","script[cq-name='")))||(s=!0,o=document.createElement("script"),a?(o.type="module",o.crossOrigin="use-credentials"):o.async=!0),o.cqCallbacks||(o.cqCallbacks=[]),i&&o.cqCallbacks.push(i),s&&(o.onload=()=>{for(e.loadedScripts[t]=!0;o.cqCallbacks.length;)o.cqCallbacks.shift()()},o.setAttribute("cq-name",t),l=-1==(l=t).indexOf("?")?l+"?"+Date.now():l+"&"+Date.now(),o.src=l,(h=n.getElementsByTagName("script")[0])?h.parentNode.insertBefore(o,h.nextSibling):n.body.append(o)))},e.loadStylesheet=function(t,i,a){var r,n,s,o,l,h=V;if("l","i","nk","l","ink[c","q-name",h.F3v(),"='",e.loadedStylesheets||(e.loadedStylesheets={}),e.loadedStylesheets[t])i&&i();else{if(r=a||document,h.D19(38),!(s=r.querySelector(h.E8o(t,"']","link[cq-name='")))){"c","q-","name","s","c","re","en","l","i","n","k",n=!0,(s=document.createElement("link")).rel="stylesheet",s.type="text/css",s.media="screen",h.D19(65);var c=h.E8o(7,16,5,0,116);h.k73(19);h.b0A(2444,15);h.D19(6);var u=h.E8o(8,7);h.D19(22);var d=h.E8o(116604,14,1625978);h.D19(6);h.b0A(2350,19);h.D19(101);var p=h.b0A(13,3,10,21,40);h.D19(6);var g=h.E8o(7314,9);h.D19(86);var m=h.E8o(16,3,1,7547);h.D19(6);var f=h.b0A(7,6);s.href=t+(t.indexOf("?")===c?10.21!="934.44"*u?"?":940.99!=d?4391:"Q":"5247"*p==437.63?g:m=="8769"*f?"e":"&")+Date.now(),s.setAttribute("cq-name",t)}s.cqCallbacks||(s.cqCallbacks=[]),i&&s.cqCallbacks.push(i),n&&(s.onload=()=>{if("stylesh",h.F3v(),"eet","lo","ad",!e.loadedStylesheets[t])for(e.loadedStylesheets[t]=!0,r.dispatchEvent(new CustomEvent("stylesheetload",{detail:{link:this}}));s.cqCallbacks.length;)s.cqCallbacks.shift()()},(l=(o=r.getElementsByTagName("link"))[o.length-1])?l.parentNode.insertBefore(s,l.nextSibling):r.head.append(s))}},e.loadWidget=function(t,i,a,r){var n,s=V;s.F3x(),i&&"function"!=typeof i||(a=i,i=document.body),n=i.ownerDocument,s.D19(19),e.loadStylesheet(s.E8o(t,".css"),(function(){s.F3x(),s.k73(19),e.loadUI(s.E8o(t,".html"),i,(function(i){i?a(i):(s.k73(19),e.loadScript(s.b0A(t,".js"),a,r,n))}))}),n)},V.F3x(),e.waitForPlugins=function(t,i,a){var r,n,s,o;if(r=0,n=t.length){for(var l=0;l<n;l++)"l","o","aded",s="cq-"+t[l],(o=(a||document).getElementsByTagName(s)[0])&&o.hasAttribute("loaded")&&r++;if(n!==r)return setTimeout((function(){V.F3x(),e.waitForPlugins(t,i,a)}),0);i()}else i()},e.addInternalStylesheet=function(t,e,i){var a;t&&(t.default&&(t=t.default),"string"==typeof t&&(e&&(i||document).querySelector('style[path="'+e+'"]')||((a=document.createElement("style")).setAttribute("type","text/css"),a.setAttribute("path",e||""),a.innerText=t,(i||document).head.appendChild(a))))}},S=t=>{var e;(e=t.CIQ).ChartEngine.prototype.registerHTMLElements=function(){var t,i,a,r,n,s,o,l=V;for(var h in(t=this.chart.container).setAttribute("interactable",""),e.ChartEngine.htmlControls)if(void 0===this.chart[h]&&void 0===this.controls[h]){if(!this.allowZoom&&"chartControls"==h)continue;if(l.D19(19),i=t.querySelector(l.E8o(".",h)))this.chart[h]=i,this.controls[h]=i;else{if("D","I","V",!(a=e.ChartEngine.htmlControls[h]))continue;(r=document.createElement("DIV")).innerHTML=a.replace(/[\t\n\r]/gm,""),i=r.firstChild,t.appendChild(i),this.chart[h]=i,this.controls[h]=i,i.classList.add(h)}}l.F3v();var c,u,d,{chartControls:p,home:g}=this.controls;p&&(".st","x-z","oom-out",".st","x","-zoom-in",n=p.querySelector(".stx-zoom-in"),s=p.querySelector(".stx-zoom-out"),e.safeClickTouch(n,(u=this,function(t){!u.allowZoom||u.activeDrawing&&!u.allowDrawingZoom||u.zoomIn(t),t.stopPropagation()})),e.safeClickTouch(s,(c=this,function(t){!c.allowZoom||c.activeDrawing&&!c.allowDrawingZoom||(l.F3v(),c.zoomOut(t)),t.stopPropagation()})),e.touchDevice||(this.makeModal(n),this.makeModal(s))),g&&(e.safeClickTouch(g,(d=this,function(t){var e,i;l.D19(45),e=l.b0A(0,"102361583"),i=2;for(var a=1;l.A5b(a.toString(),a.toString().length,39774)!==e;a++)t.stopPropagation(),i+=2;18152577!==l.A5b(i.toString(),i.toString().length,13908)&&t.stopPropagation(),l.F3x(),d.isHistoricalMode()?(delete d.layout.range,d.isHistoricalModeSet=!1,d.loadChart(d.chart.symbol,(function(){l.F3x(),d.home({animate:!1})}))):d.home({animate:!0})})),e.touchDevice||this.makeModal(g)),o=2;for(var m=1;1689724880!==l.A5b(m.toString(),m.toString().length,18782);m++)this.allowDragControls&&this.allowDragControls(),o+=2;1911891690!==l.A5b(o.toString(),o.toString().length,8221)&&this.allowDragControls&&this.allowDragControls()},e.ChartEngine.prototype.home=function(t){var e,i,a,r,n,s,o=V;function l(t){var e;for(var i in t.panels){e=t.panels[i].yaxisLHS.concat(t.panels[i].yaxisRHS);for(var a=0;a<e.length;a++)e[a].lockScale||t.calculateYAxisMargins(e[a])}}function h(t,e,i){return o.F3x(),function(){l(t),e.scroll=i,t.draw()}}if("ob","je","c","t",this.swipe.amplitude=0,e=this.layout,o.F3v(),"object"!=typeof t&&(t={maintainWhitespace:t}),void 0===t.maintainWhitespace&&(t.maintainWhitespace=!0),this.chart.draggingControls=null,this.cancelTouchSingleClick=!0,this.chart.dataSet&&this.chart.dataSet.length){for(var c in this.micropixels=0,i=Math.floor(this.chart.width/e.candleWidth),this.charts)if(a=this.charts[c],!t.chart||t.chart==a){for(r=0,t.maintainWhitespace&&this.preferences.whitespace>=0&&(r=this.preferences.whitespace),(t.whitespace||0===t.whitespace)&&(r=t.whitespace),(n=this.getLabelOffsetInPixels(a,e.chartType))>r&&(r=n),s=Math.min(i,a.dataSet.length),this.chart.allowScrollPast&&(s=i),this.micropixels=this.chart.width-s*e.candleWidth-r,this.preferences.whitespace=r;this.micropixels>e.candleWidth;)s++,this.micropixels-=e.candleWidth;for(;this.micropixels<0;)s--,this.micropixels+=e.candleWidth;if(this.micropixels-=e.candleWidth,s++,!this.mainSeriesRenderer.standaloneBars){o.k73(3);var u=o.b0A(17,291,17);this.micropixels+=e.candleWidth/u}t.animate?(this,this.scrollTo(a,s,h(this,a,s))):(a.scroll=s,l(this))}this.draw()}else this.draw()},e.ChartEngine.prototype.headsUpHR=function(){var t,i,a,r,n;function s(t){e.efficientDOMUpdate(a,"innerHTML",t)}V.F3x(),this.runPrepend("headsUpHR",arguments)||(t=this.currentPanel)&&(i=t.chart,this.updateFloatHRLabel(t),(a=this.controls.floatDate)&&!i.xAxis.noDraw&&(r=this.barFromPixel(this.cx),(n=i.xaxis[r])&&n.DT?s(e.displayableDate(this,i,n.DT)):n&&n.index?s(n.index):s("")),this.runAppend("headsUpHR",arguments))},e.ChartEngine.prototype.modalBegin=function(){this.openDialog="modal",V.F3v(),this.undisplayCrosshairs()},e.ChartEngine.prototype.modalEnd=function(){this.cancelTouchSingleClick=!0,this.openDialog="",this.doDisplayCrosshairs()},e.ChartEngine.prototype.makeModal=function(t){var e;e=this,t.onmouseover=function(t){e.modalBegin()},t.onmouseout=function(t){V.F3v(),e.modalEnd()}},e.ChartEngine.prototype.updateChartAccessories=function(){var t,i,a,r,n,s,o,l,h=V;if(null!==this.accessoryTimer&&clearTimeout(this.accessoryTimer),!e.ChartEngine.drawingLine&&e.touchDevice&&(new Date).getTime()-this.lastAccessoryUpdate<100)this.accessoryTimer=setTimeout((l=this,h.F3x(),function(){h.F3v(),l.updateChartAccessories()}),10);else if(this.chart.dataSet&&!this.runPrepend("updateChartAccessories",arguments)){if(this.accessoryTimer=null,this.lastAccessoryUpdate=(new Date).getTime(),(t=this.controls.floatDate)&&((i=this.currentPanel)||(i=this.chart.panel),i)){a="p",a+="x",r=i.chart,n=!0===this.xAxisAsFooter?0:this.chart.canvasHeight-i.chart.bottom,h.D19(51);var c=h.b0A(16,11,4,702);if(s=t.offsetWidth/c-.5,(o=this.pixelFromTick(this.crosshairTick,r)-s)<0)o=0;else if(o>this.width-2*s-1){h.k73(39);var u=h.b0A(14,0,2,26);o=this.width-u*s-1}e.efficientDOMUpdate(t.style,"left",o+a),e.efficientDOMUpdate(t.style,"bottom",n+"px")}this.positionCrosshairsAtPointer(),this.headsUpHR(),this.runAppend("updateChartAccessories",arguments)}},e.ChartEngine.prototype.positionSticky=function(t){var i,a,r,n=V;i=Math.max(this.cy-t.offsetHeight-60,0),a=Math.min(this.chart.canvasWidth-(this.cx-50),this.chart.canvasWidth-t.offsetWidth),r=t.style,n.D19(19),e.efficientDOMUpdate(r,"top",n.E8o(i,"px")),e.efficientDOMUpdate(r,"left","auto"),n.D19(19),e.efficientDOMUpdate(r,"right",n.E8o(a,"px"))},e.ChartEngine.prototype.displaySticky=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E=V;if(i=".mStickyI",i+="nterior",E.F3x(),(a=this.controls.mSticky)&&(r=a.querySelector(i))){n=a.querySelector(".overlayTrashCan"),s=a.querySelector(".overlayEdit"),o=a.querySelector(".overlayText"),l=a.querySelector(".mouseDeleteInstructions"),h=a.querySelector(".stickyLongPressText"),c=a.querySelector(".customInstructions"),l.classList.remove("no_edit"),t&&"object"==typeof t||(t={message:arguments[0],backgroundColor:arguments[1],forceShow:arguments[2],noDelete:arguments[3],type:arguments[4]});var{forceShow:I,noDelete:N,noEdit:O,type:H,noText:R}=t,{message:z,backgroundColor:j}=t;if(I||z){g="inl",g+="in",g+="e-b",g+="lock",z||(z="");var{defaultColor:U,highlightedDraggable:B}=this;if("auto"==j&&(j=U),I&&!z?(m="no",m+="n",m+="e",r.style.backgroundColor="",r.style.color="",r.style.display=m):j?(f="inline-b",f+="lock",r.style.backgroundColor=j,r.style.color=e.isTransparent(j)?U:e.chooseForegroundColor(j),r.style.display=f):(y="inline",y+="-bl",y+="ock",r.style.backgroundColor="",r.style.color="",r.style.display=y),r.innerHTML=z,(v=a.querySelector(".mStickyRightClick")).className="mStickyRightClick",H&&(E.k73(19),v.classList.add(E.b0A("rightclick_",H))),v.style.display="",a.style.display=g,(!B||B&&B.undraggable&&B.undraggable(this))&&(h.style.display="none"),N||!0===this.bypassRightClick||this.bypassRightClick[H]){b=-842552802,x=744663712,S=2;for(var W=1;E.j0V(W.toString(),W.toString().length,90267)!==b;W++)v.style.display="none",S+=2;E.j0V(S.toString(),S.toString().length,47199)!==x&&(v.style.display="")}else if(this.highlightViaTap||this.touches.length){C="hi",C+="d",C+="e",n&&(n.style.display="inline-block"),A=1507703789,D=1934457254,k=2;for(var Q=1;E.A5b(Q.toString(),Q.toString().length,90220)!==A;Q++)w="n",w+="one",s&&!O&&(s.style.display="inline-block"),o&&!R&&(o.style.display="inline-block"),l&&(l.style.display=w),h&&(h.style.display="none"),k+=2;E.A5b(k.toString(),k.toString().length,17438)!==D&&(M="inlin",M+="e-bl",M+="ock",T="inl",T+="ine-block",(s||+O)&&(s.style.display=T),(o||~R)&&(o.style.display="none"),l&&(l.style.display="inline-block"),h&&(h.style.display=M)),a.classList[""===z?"add":"remove"](C)}else F="no_e",F+="d",F+="it",O&&l.classList.add(F),l&&(l.style.display="block"),h&&(h.style.display="none",(P=this.preferences.dragging)&&!t.noDrag&&t.panel&&!t.panel.noDrag&&((!0!==P&&!P.study||"study"!=H)&&(!0!==P&&!P.series||"series"!=H)||(h.style.display="block")));c&&H&&(_=c.querySelector(`[type=${H}]`),c.style.display=_?"block":"none"),L=H||"default",a.setAttribute("cq-sticky-type",L),(t.positioner||this.positionSticky).call(this,a)}else u="n",u+="o",u+="n",u+="e",d="no",d+="n",d+="e",p="no",p+="n",p+="e",r.innerHTML="",a.style.display="none",n&&(n.style.display="none"),s&&(s.style.display=p),o&&(o.style.display=d),l&&(l.style.display="none"),h&&(h.style.display=u)}},e.ChartEngine.prototype.displayNotification=function(t,e,i={}){var a,r,n,s;if(this.controls.notificationTray){var{callback:o,dismissalListeners:l}=i;r=(a=this.controls.notificationTray).querySelector("template").content.cloneNode(!0),(n=r.firstElementChild).className=t,n.querySelector(".message").textContent=e,o&&("po","in","terup",s=window.PointerEvent?"pointerup":"touchend",n.handler=n.addEventListener(s,o)),l&&(n.listeners={},l.forEach((e=>{V.F3x(),n.listeners[t]=this.addEventListener(e.type,e.callback)}))),this.makeModal(n),a.appendChild(n)}},e.ChartEngine.prototype.removeNotification=function(t){var e,i;if(this.controls.notificationTray&&(i=(e=this.controls.notificationTray).querySelector(`.${t}`))){if(i.handler&&i.removeEventListener(i.handler),i.listeners)for(var a in i.listeners)this.removeEventListener(i.listeners[a]);this.modalEnd(),e.removeChild(i)}},e.ChartEngine.prototype.setMeasure=function(t,e,i,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A=V;if(s="set",s+="Measure",!this.runPrepend("setMeasure",arguments)){if(o=(this.drawingContainer||document).querySelector(".mMeasure"),l="",t||0===t){if(!1!==e){if(h=(h=Math.round(Math.abs(t-e)*this.chart.roundit)/this.chart.roundit).toFixed(this.chart.yAxis.printDecimalPlaces),this.internationalizer){c=-1259649678,u=-1798926928,d=2;for(var D=1;A.A5b(D.toString(),D.toString().length,65673)!==c;D++)l/=this.internationalizer.numbers.format(h),d+=2;A.j0V(d.toString(),d.toString().length,3850)!==u&&(l+=this.internationalizer.numbers.format(h))}else l+=h;if(t>0&&e>0){if(A.k73(31),p=A.b0A(t,t,e),Math.abs(p)>.1)A.k73(102),p=Math.round(A.E8o("100",p));else if(Math.abs(p)>.01)p=Math.round(1e3*p)/10;else{A.k73(50);var k=A.E8o(16,105,966,10);p=Math.round(1e4*p)/k}this.internationalizer?(A.k73(26),p=this.internationalizer.percent.format(A.E8o(p,100))):(A.k73(19),p=A.b0A(p,"%")),A.k73(38),l+=A.b0A(p,")"," (")}}if(!1!==a){A.k73(6),g=Math.abs(A.b0A(a,i)),A.D19(6);var w=A.E8o(15,14);g=Math.round(g)+w,m=this.translateIf("Bars"),A.D19(27),l+=A.b0A(m," "," ",g)}o&&(o.innerHTML=l)}else this.anyHighlighted||""!==this.currentVectorParameters.vectorType||this.clearMeasure();this.activeDrawing||((o=this.controls.mSticky)&&(f=".mSti",f+="ckyInterior",y=o.querySelector(f),r?(v="r",v+="em",v+="o",v+="ve",b="a",b+="d",b+="d",x="inl",x+="i",x+="ne-block",o.style.display=x,y&&(S="inline-b",S+="l",S+="ock",y.style.display=S,(t||0===t)&&(y.innerHTML=l)),o.classList[""===l?b:v]("hide"),this.positionSticky(o)):(C="no",C+="n",C+="e",o.style.display=C,y&&(y.innerHTML=""))),this.runAppend(s,arguments))}},e.ChartEngine.prototype.clearMeasure=function(){var t;(t=(this.drawingContainer||document).querySelector(".mMeasure"))&&(t.innerHTML="")},e.ChartEngine.prototype.zoomSet=function(t,i){var a,r,n,s,o,l=V;if(i||(i=this.chart),i.dataSet){if(t=this.constrainCandleWidth(t),"none"!=i.tempCanvas.style.display&&e.clearCanvas(i.tempCanvas,this),a=this.mainSeriesRenderer,l.F3x(),!a.params||!a.params.volume){if(r=this.preferences.zoomAtCurrentMousePosition&&this.zoomInitiatedByMouseWheel&&this.crosshairTick<i.dataSet.length?this.crosshairTick||this.tickFromPixel(this.cx,i):this.isHome()?i.dataSet.length-1:i.scroll>i.dataSet.length?0:"zoom-x"==this.grabMode?this.tickFromPixel(this.chart.width,i):this.tickFromPixel(this.chart.width/2,i),this.animations.zoom.hasCompleted){-1621014910,-1538830338,n=2;for(var h=1;-1621014910!==l.A5b(h.toString(),h.toString().length,23210);h++)this.zoomInitiatedByMouseWheel=!0,n+=2;-1538830338!==l.j0V(n.toString(),n.toString().length,42674)&&(this.zoomInitiatedByMouseWheel=!1)}l.D19(19);var c=l.E8o(0,1);s=i.dataSet.length-c-r,o=i.scroll,l.D19(49);var u=l.b0A(0,19,20);i.scroll=Math.round((this.pixelFromTick(r,i)-i.left)/t)+u+s,this.micropixels+=(o-s)*this.layout.candleWidth-(i.scroll-s)*t}this.setCandleWidth(t),i.spanLock=!1,this.draw(),this.doDisplayCrosshairs(),this.updateChartAccessories()}}},C=t=>{var e;(e=t.CIQ).ChartEngine.prototype.currentBaseline=null,e.ChartEngine.prototype.baselineHelper=null,e.ChartEngine.helpersToRegister.push((function(t){V.F3v(),t.baselineHelper=new Map})),e.ChartEngine.prototype.registerBaselineToHelper=function(t){var e,i;if(V.F3x(),t.params.baseline){var a,r,{baselineHelper:n}=this;if(e=this,!n.has(t)){var{name:s}=t.params;i=this.controls.baselineHandle,n.set(t,{styleCache:null,display:!1,handle:"_main_series"===s&&i?i:(a=s,a=a.replace(" ","_"),(r=document.createElement("cq-baseline-handle")).classList.add("stx-baseline-handle",a),e.container.append(r),V.F3v(),e.controls[`${a} cq-baseline-handle`]=r,r)})}}},e.ChartEngine.prototype.removeBaselineFromHelper=function(t){var e,i,a,r=V;e=2;for(var n=1;1476822605!==r.A5b(n.toString(),n.toString().length,28542);n++){var{baselineHelper:s}=this;e+=2}if(r.F3v(),-54447439!==r.j0V(e.toString(),e.toString().length,12093))var{baselineHelper:s}=this;s.has(t)&&("_main_series"!==(i=t.params.name.replace(" ","_"))&&(a=s.get(t).handle,r.k73(27),delete this.controls[`${i}${r.b0A("le"," cq-base","ne-hand","li")}`],this.container.removeChild(a)),s.delete(t))},e.ChartEngine.prototype.findBaselineHandle=function(t,e){for(var i of(V.F3x(),this.baselineHelper)){var[a,r]=i,{handle:n}=r;if(t.target===n||t.composedPath&&t.composedPath().includes(n))return e&&(this.repositioningBaseline={lastDraw:Date.now(),handle:n,renderer:a},n.classList.add("stx-grab")),this.currentBaseline=a,!0}return!1},e.ChartEngine.prototype.setBaselines=function(t){var e;t||(t=this.chart),e=this;var{baselineHelper:i}=this;i.forEach((function(a,r){var n,s,o,l,h,{baseline:c}=r.params;V.k73(77),(n=V.E8o(!0,c))&&(c=t.baseline);var{defaultLevel:u,userLevel:d}=c;V.F3x(),(s=r.getYAxis(e))&&(l=(o=e.getYAxisBaselineRenderer(s))&&o!=e.mainSeriesRenderer&&o.seriesParams.length&&o.seriesParams[0].id,c.actualLevel=d||0===d?d:u,c.actualLevel||0===c.actualLevel||null!==(h=function(i,a){var r,n,s,o,l,h,{dataSegment:c,dataSet:u,defaultPlotField:d}=t;if(r=d,a||(r=i),!(n=e.getFirstLastDataRecord(c,"tick")))return null;for(V.F3v(),s=n.tick;;){if(o=u[s])if(a&&"Close"==r){if(o.iqPrevClose||0===o.iqPrevClose)return o.iqPrevClose}else if(V.k73(6),(l=u[V.E8o(s,1)])&&(l[r]||0===l[r]))return"object"==typeof(h=l[r])?h[d]:h;if(--s<0)break}}(l,n))&&(c.actualLevel=h),a.display=o===r,i.set(r,a))}))},e.ChartEngine.prototype.setBaselineUserLevel=function(){var t,i,a,{chart:r,currentPanel:n}=this,{lastDraw:s,renderer:o}=this.repositioningBaseline;if(o.params.panel==n.name){var{baseline:l}=r;t="object"==typeof o.params.baseline?o.params.baseline:l,i=o.getYAxis(this),a=this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),n,i),t.userLevel=this.adjustIfNecessary(n,this.crosshairTick,a),Date.now()-s>100&&(this.draw(),this.repositioningBaseline.lastDraw=Date.now())}},e.ChartEngine.prototype.setBaselineMinMax=function(t,e){var i,a,r,n,{baselineHelper:s,chart:o,repositioningBaseline:l}=this,{baseline:h,seriesRenderers:c}=o;if(i=o.transformFunc&&e===o.panel.yAxis,!(a=e.renderers.find((t=>s.get(c[t])))))return t;var{baseline:u,type:d}=c[a].params;if("mountain"===d)return t;u="object"==typeof u?u:h;var{actualLevel:p}=u;if(p||0===p){i&&(p=o.transformFunc(this,o,p)),-1006449004,1697508344,r=2;for(var g=1;-1006449004!==V.A5b(g.toString(),g.toString().length,43190);g++)n=Math.max(p+t[4],t[2]/p),r+=2;1697508344!==V.j0V(r.toString(),r.toString().length,55132)&&(n=Math.max(p-t[0],t[1]-p)),t[0]=l?e.lowValue:p-n,t[1]=l?e.highValue:p+n}return t},e.ChartEngine.prototype.positionBaselineHandle=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f=V;if(this.manageTouchAndMouse){var{baselineHelper:y,chart:v,panels:b}=this,{baseline:x,panel:S}=t.params;i=t.params.yAxis||t.getYAxis(this);var{display:C,handle:A,styleCache:D}=y.get(t);if(!0===x&&(x=v.baseline),!1!==x.userLevel&&C){a=b[S],r=A.classList.contains("stx-grab"),n="b",n+="lock",s=x.actualLevel,i===v.yAxis&&v.transformFunc&&(s=v.transformFunc(this,v,s)),s>i.high?(s=i.high,r||(n="none")):s<i.low&&(s=i.low,r||(n="none")),i===v.yAxis&&v.untransformFunc&&(s=v.untransformFunc(this,v,s)),f.F3x(),o=this.pixelFromPrice(s,a,i),D||(D=getComputedStyle(A)),l=e.stripPX(D.width),f.D19(19);var k=f.E8o(0,2);h=o-e.stripPX(D.height)/k+"px",u=this.baselineHandleBuffer||2,f.k73(103);var w=f.b0A(12,46,16,9,10);if(d=a.yaxisRHS.indexOf(i)+"1"*w)p=1===d?u:u*d,c=v.right-l*d-p+"px";else{f.k73(104);var M=f.b0A(16,0,4,4,9);m=1===(g=a.yaxisLHS.slice(0).reverse().indexOf(i)+M)?u:u*g,f.k73(19),c=`${v.left+l*g+m-l}${f.E8o("p","x")}`}Object.assign(A.style,{display:n,top:h,left:c})}else A.style.display="none"}},e.ChartEngine.prototype.getYAxisBaselineRenderer=function(t){var e;if(!t.renderers.length)return null;var{baselineHelper:i,chart:a}=this;return(e=t.renderers.find((t=>i.get(a.seriesRenderers[t]))))?(V.F3v(),a.seriesRenderers[e]):null},e.ChartEngine.prototype.getYAxisBaseline=function(t){var e,{baseline:i}=this.chart;if(!(e=this.getYAxisBaselineRenderer(t)))return i;var{baseline:a}=e.params;return"object"==typeof a?a:i}},A=t=>{var e;(e=t.CIQ).ChartEngine.Chart=function(){this.xAxis=new e.ChartEngine.XAxis,this.yAxis=new e.ChartEngine.YAxis,this.symbolObject={symbol:null},this.series={},this.seriesRenderers={},V.F3x(),this.xaxis=[],this.state={},this.endPoints={},this.defaultChartStyleConfig={},this.baseline=e.clone(this.baseline),this.panel=void 0,this.currentMarketData={}},e.extend(e.ChartEngine.Chart.prototype,{symbol:null,symbolObject:{symbol:null},symbolDisplay:null,series:{},seriesRenderers:{},scroll:0,isComparison:!1,forcePercentComparison:!0,maxTicks:0,tension:null,currentMarketData:{},masterData:null,dataSet:null,scrubbed:null,dataSegment:null,segmentImage:null,baseline:{includeInDataSegment:!1,defaultLevel:null,userLevel:null,actualLevel:null},xAxis:null,xaxis:[],xaxisFactor:30,decimalPlaces:2,dynamicYAxis:!0,roundit:100,breakpoint:null,legendRenderer:e.drawLegend,customChart:null,yaxisPaddingRight:null,yaxisPaddingLeft:null,tickCache:{},yaxisMarginMultiplier:2.5,allowScrollPast:!0,allowScrollFuture:!0,whiteSpaceFutureTicks:0,hideDrawings:!1,defaultPlotField:"Close",defaultChartStyleConfig:{},lockScroll:!1,includeOverlaysInMinMax:!0,gaplines:null,lineStyle:null,lineApproximation:!0,highLowBars:!1,standaloneBars:!1,barsHaveWidth:!1,calculateTradingDecimalPlaces:e.calculateTradingDecimalPlaces,width:null,height:null,top:null,bottom:null,left:null,right:null,context:null,endPoints:null},!0)},D=t=>{var e;(e=t.CIQ).ChartEngine.prototype.resolveY=function(t){return V.F3v(),this.top+t},e.ChartEngine.prototype.resolveX=function(t){return V.F3v(),this.left+t},e.ChartEngine.prototype.backOutY=function(t){var e,i=V;i.k73(21),e=-i.E8o(0,"1233787203");for(var a=1;1437324122!==i.A5b(a.toString(),a.toString().length,46744);a++)return Math.max(5,Math.min(this.height,t+this.top));if(i.j0V(2..toString(),2..toString().length,70383)!==e)return Math.max(0,Math.min(this.height,t-this.top))},e.ChartEngine.prototype.backOutX=function(t){return Math.max(0,Math.min(this.width,t-this.left))},e.ChartEngine.prototype.dateFromTick=function(t,i,a,r="dataSet"){var n,s,o,l,h,c,u,d,p=V;if(i||(i=this.chart),n=i[r],p.F3v(),c=!1,0===(s=n.length)&&(n[0]={},n[0].DT=new Date,s=n.length,c=!0),t<0)o=(l=this.standardMarketIterator(n[0].DT))?l.previous(Math.abs(t)):n[0].DT;else if(t>=s)(l=this.standardMarketIterator(n[s-1].DT))?(p.D19(105),o=l.next(p.E8o(s,1,t))):o=n[s-1].DT;else{1759398806,-1855467749,u=2;for(var g=1;1759398806!==p.j0V(g.toString(),g.toString().length,81678);g++)o=n[t].DT,u+=2;-1855467749!==p.j0V(u.toString(),u.toString().length,91526)&&(o=n[t].DT)}if(h=a?new Date(o.getTime()):e.yyyymmddhhmmssmmm(o).substr(0,12),c){-679727831,743072818,d=2;for(var m=1;-679727831!==p.A5b(m.toString(),m.toString().length,34128);m++)n[5].DT,d+=2;743072818!==p.A5b(d.toString(),d.toString().length,53388)&&delete n[0].DT}return h},e.ChartEngine.prototype.tickFromDate=function(t,i,a,r,n="dataSet"){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S=V;if(i||(i=this.chart),!(s=i[n])||!s.length)return S.k73(29),S.b0A("0",0);if(a||(a=0),o=t.constructor==Date?t:e.strToDateTime(t),e.ChartEngine.isDailyInterval(this.layout.interval)||o.setMinutes(o.getMinutes()+a),l=o.getTime(),i.tickCache[n]||(i.tickCache[n]={}),(h=i.tickCache[n][l])||0===h)return r?Math.ceil(h):Math.floor(h);if(c=s[0].DT,u=s[s.length-1].DT,o>=c&&o<=u){for(d=0,p=s.length,g=0;++g<100;){if(S.D19(32),+(f=s[m=Math.floor(S.E8o(2,d,p))].DT)==+o)return i.tickCache[n][l]=m,m;if(f<o&&(d=m),f>o){if(s[m-1].DT<o)return S.D19(106),i.tickCache[n][l]=S.E8o("0.5",m),r?m:m-1;if(+s[m-1].DT==+o)return S.D19(6),i.tickCache[n][l]=S.E8o(m,1),S.D19(6),S.E8o(m,1);p=m}}if(g>=100)return"!!!W","arning:"," tickFromDate(",") did not find match.",console.log("!!!Warning: tickFromDate() did not find match."),s.length}return S.k73(80),v=(y=S.E8o(c,o))?c:u,x=(b=this.standardMarketIterator(v))?b.futureTick({end:o}):0,h=y?-1*x:s.length-1+x,i.tickCache[n][l]=h,h},e.ChartEngine.prototype.pixelFromBar=function(t,e){var i,a;e||(e=this.chart),i=0,i=(a=this.chart.segmentImage)&&a[t]&&"number"==typeof a[t].leftOffset?a[t].leftOffset:(t+.5)*this.layout.candleWidth,V.D19(22);var r=V.E8o(21,5,104);return i=e.panel.left+Math.floor(i+this.micropixels)-("1"|r)},e.ChartEngine.prototype.barFromPixel=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m=V;if(e||(e=this.chart),i=this.chart.segmentImage,a=this.micropixels,r=this.layout.candleWidth,i){n=t-e.panel.left-a,s=2,l=i.length,m.k73(26),h=Math.round(m.b0A(l,s)),m.D19(6);var f=m.E8o(19,18);m.k73(7);var y=m.E8o(18,11,12,18,14);m.k73(6);var v=m.E8o(7,5);if(n>(d=i[l-f].leftOffset+i[l-y].candleWidth/v))return l+Math.floor((t-d-e.panel.left-a)/r);for(var b=1;b<l&&(s*=2,o=i[h]);b++){c=o.leftOffset,m.D19(107);var x=m.E8o(49,6,11,19);if(u=o.candleWidth/x,m.D19(6),p=m.b0A(c,u),m.k73(19),g=m.E8o(c,u),0===h||n>=p&&n<g)break;n<p?h-=Math.max(1,Math.round(l/s)):h+=Math.max(1,Math.round(l/s)),h=Math.max(0,Math.min(l-1,h))}if(!i[h])for(b=0;b<l;b++)if(o=i[b]){c=o.leftOffset,m.k73(108);var S=m.b0A(3,16,254,9,15);if(n<c-(u=o.candleWidth/S))return m.k73(48),Math.max(m.E8o("0",0),m.b0A(b,1,m.D19(6)));if(n<c+u)return b;if(n>=c+u)return m.D19(19),m.b0A(b,1)}return h}return m.F3x(),Math.floor((t-e.panel.left-a)/r)},e.ChartEngine.prototype.tickFromPixel=function(t,e){var i;return V.F3x(),e||(e=this.chart),i=e.dataSet.length-e.scroll,e.segmentImage?i+=this.barFromPixel(t,e):i+=Math.floor((t-e.panel.left-this.micropixels)/this.layout.candleWidth),i},e.ChartEngine.prototype.pixelFromTick=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p=V;if("num","ber",p.F3v(),e||(e=this.chart),i=e.dataSegment,a=e.dataSet,r=e.segmentImage,n=this.micropixels,s=i?i.length:0,o=e.panel,l=e.scroll,h=t-a.length+l,c=s?i[h]:null,r&&(c=r[h]),c&&"number"==typeof c.leftOffset)return o.left+Math.floor(c.leftOffset+n);if(u=0,p.k73(48),d=p.E8o("0",0),c=s?i[s-1]:null,r&&(p.k73(6),c=r[p.b0A(s,1)]),c&&"number"==typeof c.leftOffset&&s<=t-a.length+l){p.k73(109);var g=p.E8o(10,3,3,8);u=c.leftOffset+c.candleWidth/g,d=s}return u+o.left+Math.floor((t-d-a.length+l+.5)*this.layout.candleWidth+n)},e.ChartEngine.prototype.pixelFromDate=function(t,e,i,a){return this.pixelFromTick(this.tickFromDate(t,e,i,a),e)},e.ChartEngine.prototype.transformedPriceFromPixel=function(t,e,i){var a,r,n;if(e||(e=this.chart.panel),t=(a=i||e.yAxis).bottom-t,a.semiLog)n=t*a.logShadow/a.height,a.flipped?n=a.logHigh-n:n+=a.logLow,r=Math.pow(10,n);else{if(!a.multiplier)return null;r=t/a.multiplier,a.flipped?r=a.high-r:r+=a.low}return r},e.ChartEngine.prototype.priceFromPixel=function(t,e,i){var a;return V.F3x(),e||(e=this.chart.panel),a=this.transformedPriceFromPixel(t,e,i),this.charts[e.name]&&e.chart.untransformFunc&&(i&&i!=e.yAxis||(a=e.chart.untransformFunc(this,e.chart,a,i))),a},e.ChartEngine.prototype.valueFromPixel=function(t,e,i){var a;return V.F3x(),e||(e=this.whichPanel(t)),e||(a=Object.values(this.panels))&&a.length&&(e=t<=0?a.shift():a.pop()),this.priceFromPixel(t,e,i)},e.ChartEngine.prototype.valueFromInterpolation=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b=V;return null===t||t<0||!i?null:(r||(r=this.chart.panel),n||(n=r.yAxis),a||(a=this.chart.defaultPlotField),(s=this.getPreviousBar(this.chart,i,t))?((l=e.existsInObjectChain(s,i))&&(o=l.obj[l.member]),"object"==typeof o&&(o=o[a]),(h=this.getRendererFromSeries(i))&&h.params.step||"step"===this.layout.chartType?o:(c=this.getNextBar(this.chart,i,t),(l=e.existsInObjectChain(c,i))&&(u=l.obj[l.member]),"object"==typeof u&&(u=u[a]),c?null==o||null==u?null:(d=this.pixelFromPrice(o,r,n),p=this.pixelFromPrice(u,r,n),g=s.tick,m=c.tick,b.D19(110),f=b.E8o(p,m,g,d),y=this.chart.dataSegment[t].tick,b.k73(111),v=b.E8o(f,g,d,y),this.priceFromPixel(v,r,n)):null)):null)},e.ChartEngine.prototype.pixelFromTransformedValue=function(t,e,i){var a,r,n,s,o;return e||(e=this.chart.panel),a=i||e.yAxis,V.F3v(),r=(a.high-t)*a.multiplier,a.semiLog&&(n=Math.max(t,0),s=Math.log(n)/Math.LN10,r=(o=a.height)-o*(s-a.logLow)/a.logShadow),r=a.flipped?a.bottom-r:a.top+r},e.ChartEngine.prototype.pixelFromPrice=function(t,e,i){return e||(e=this.chart.panel),this.charts[e.name]&&e.chart.transformFunc&&(i&&i!=e.yAxis||(t=e.chart.transformFunc(this,e.chart,t,i))),this.pixelFromTransformedValue(t,e,i)},e.ChartEngine.prototype.pixelFromValueAdjusted=function(t,e,i,a){var r,n;return this.layout.adj||!this.charts[t.name]?this.pixelFromPrice(i,t,a):(r=Math.round(e))>0&&r<t.chart.dataSet.length&&(n=t.chart.dataSet[r].ratio)?(V.k73(17),this.pixelFromPrice(V.E8o(n,i),t,a)):this.pixelFromPrice(i,t,a)},e.ChartEngine.prototype.adjustIfNecessary=function(t,e,i){var a,r;return this.layout.adj?i:t&&this.charts[t.name]&&(a=Math.round(e))>0&&a<t.chart.dataSet.length&&(r=t.chart.dataSet[a].ratio)?(V.D19(26),V.E8o(i,r)):i}},k=t=>{var e,i=V;(e=t.CIQ).ChartEngine.prototype.positionCrosshairsAtPointer=function(){var t,e,a,r,n,s,o,l,h,c;if(t="positionC",t+="rosshairsAtPointer",e="c",e+="h",e+="a",e+="rt",a="posit",a+="ionCrossh",a+="airsAtPointer",(r=this.currentPanel)&&this.manageTouchAndMouse&&!this.mainSeriesRenderer.nonInteractive&&!this.runPrepend(a,arguments)){n=r.chart,s=this.container.getBoundingClientRect(),this.top=s.top,this.left=s.left,this.right=this.left+this.width,this.bottom=this.top+this.height,o=this.crosshairTick=this.tickFromPixel(this.backOutX(this.crosshairX),n),i.D19(112);var u=i.E8o(17,9,17,17,2);(l=this.pixelFromTick(o,n)-u)>=r.right||l<=r.left?this.undisplayCrosshairs():(this.controls.crossX&&(i.D19(19),this.controls.crossX.style.left=i.E8o(l,"px")),h=r.name==e?this.preferences.horizontalCrosshairField:r.horizontalCrosshairField,c=n.dataSet,h&&c&&o<c.length&&o>-1&&(this.crossYActualPos=this.pixelFromPrice(c[o][h],r)),this.crossYActualPos>=r.yAxis.bottom&&this.crossYActualPos<=r.bottom?this.undisplayCrosshairs():(this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+"px"),this.runAppend(t,arguments)))}},i.F3x(),e.ChartEngine.prototype.doDisplayCrosshairs=function(){var t,a;if(i.F3v(),!this.runPrepend("doDisplayCrosshairs",arguments)){if(this.displayInitialized){var{floatCanvas:r,controls:n,layout:s}=this,{crossX:o,crossY:l,floatDate:h}=n,{vectorType:c}=this.currentVectorParameters;""===c||!s.crosshair&&!c||e.Drawing&&e.Drawing[c]&&(new e.Drawing[c]).dragToDraw||!this.insideChart&&!this.grabbingScreen||""!==this.openDialog?this.undisplayCrosshairs():(o&&""!==o.style.display&&(o.style.display="",l&&(l.style.display=""),this.magnetizedPrice&&c?(this.container.classList.remove("stx-crosshair-on"),this.chart.tempCanvas.style.display="block"):this.container.classList.add("stx-crosshair-on")),h&&!this.chart.xAxis.noDraw&&(h.style.visibility="",this.currentPanel&&this.updateFloatHRLabel(this.currentPanel)),r&&(t="bloc",t+="k",a="non",a+="e",r.style.display==a&&e.clearCanvas(r,this),r.style.display=t))}this.runAppend("doDisplayCrosshairs",arguments)}},e.ChartEngine.prototype.undisplayCrosshairs=function(){var t,a,r,n,s,o,l,h,c,u,d;if(i.F3v(),t="n",t+="o",t+="n",t+="e",!this.runPrepend("undisplayCrosshairs",arguments)){if(r=(a=this.controls).crossX,n=a.crossY,r&&(s="non",s+="e",r.style.display!=s)){o=-209577136,l=6752586,h=2;for(var p=1;i.A5b(p.toString(),p.toString().length,32168)!==o;p++)r.style.display="none",n&&(n.style.display="none"),h+=2;i.j0V(h.toString(),h.toString().length,63814)!==l&&(r.style.display="none",n&&(n.style.display="none"))}this.displayInitialized&&a.floatDate&&(a.floatDate.style.visibility="hidden"),this.container.classList.remove("stx-crosshair-on"),(c=this.floatCanvas)&&c.isDirty&&c.style.display!=t&&(u="n",u+="o",u+="n",u+="e",e.clearCanvas(c,this),"none"!=c.style.display&&(c.style.display=u)),this.activeDrawing||this.repositioningDrawing||this.editingAnnotation||(d=this.chart.tempCanvas)&&"none"!=d.style.display&&(d.style.display="none"),this.runAppend("undisplayCrosshairs",arguments)}},e.ChartEngine.prototype.hideCrosshairs=function(){i.F3x(),this.displayCrosshairs=!1},e.ChartEngine.prototype.showCrosshairs=function(){this.displayCrosshairs=!0}},w=t=>{var e,i;e=t.CIQ,i=t.timezoneJS,e.ChartEngine.prototype.loadChart=function(t,i,a){var r,n,s,o,l,h,c,u,d=V;a||"function"!=typeof i?Array.isArray(i)&&(i={masterData:i}):(a=i,i={}),i||(i={});var{chart:p,periodicity:g,range:m,span:f}=i,{layout:y,quoteDriver:v}=this;r={periodicity:y.periodicity,interval:y.interval,timeUnit:y.timeUnit},g&&(n=e.cleanPeriodicity(g.period?g.period:g.periodicity,g.interval,g.timeUnit),y.interval=n.interval,y.periodicity=n.period,y.timeUnit=n.timeUnit),p||(p=this.chart);var{dataSet:b,market:x,masterData:S,symbol:C,moreAvailable:A,upToDate:D}=p;function k(){d.F3x(),h.layout.symbols=h.getSymbols({"include-parameters":!0,"exclude-studies":!0}),h.dispatch(h.currentlyImporting?"symbolImport":"symbolChange",{stx:h,symbol:p.symbol,symbolObject:p.symbolObject,prevSymbol:C,prevSymbolObject:s,action:"master"}),g&&h.dispatch("periodicity",{stx:h,differentData:!0,prevPeriodicity:r}),v&&v.paused&&v.resume()}if(s=e.clone(p.symbolObject),p.dataSet=[],p.masterData=[],p.moreAvailable=null,p.upToDate=null,t?"object"==typeof t?("CIQI","N","FO",t.symbol.toUpperCase&&"CIQINFO"===t.symbol.toUpperCase()?e.logPackageInfo():(p.symbol=t.symbol,p.symbolObject=t)):("C","IQIN","F","O",t.toUpperCase&&"CIQINFO"===t.toUpperCase()?e.logPackageInfo():(p.symbol=t,p.symbolObject.symbol=t)):(p.symbol=null,p.symbolObject={symbol:null}),p.inflectionPoint=null,this.marketFactory&&(o=this.marketFactory(p.symbolObject),this.setMarket(o,p)),this.setMainSeriesRenderer(!0),m||f||!y)m&&f&&(f={});else{-863165828,281036983,d.k73(45),l=d.b0A(64,"2");for(var w=1;-863165828!==d.A5b(w.toString(),w.toString().length,84042);w++)f=~y.range?y.setSpan:{},l+=2;281036983!==d.A5b(l.toString(),l.toString().length,36774)&&(f=y.range?{}:y.setSpan),f=y.range?{}:y.setSpan,m=y.range||{}}this.clearCurrentMarketData(p),h=this,!i.masterData&&v?(c=function(t){t&&"orphaned"!=t&&(p.symbol=C,p.symbolObject=s,p.market=x,h.masterData=p.masterData=S,p.dataSet=b,p.moreAvailable=A,p.upToDate=D),k(),a&&a.call(h,t)},m&&Object.keys(m).length&&this.setRange?(delete i.span,delete y.setSpan,this.chart.masterData=null,this.displayInitialized=!1,g&&(m.periodicity=g),m.forceLoad=!0,this.setRange(m,c)):f&&f.base&&this.setSpan?(f.multiplier=f.multiplier||1,this.chart.masterData=null,this.displayInitialized=!1,g&&(f.maintainPeriodicity=!0),f.forceLoad=!0,this.setSpan(f,c)):v.newChart({symbol:p.symbol,symbolObject:p.symbolObject,chart:p,initializeChart:!0},(function(t){t||(h.adjustPanelPositions(),v.updateSubscriptions(),i.stretchToFillScreen&&h.fillScreen()),c.apply(h,arguments)}))):(i.masterData||console.log("Warning: No masterData specified and no QuoteFeed configured"),p.symbol||(p.symbol=""),this.initializeChart(),u=this.doCleanupGaps(i.masterData,p),this.setMasterData(u,p,{noCleanupDates:!0}),p.endPoints={},u&&u.length&&(p.endPoints={begin:u[0].DT,end:u[u.length-1].DT}),this.createDataSet(),m&&Object.keys(m).length&&this.setRange?this.setRange(m):f&&f.multiplier&&f.base&&this.setSpan?this.setSpan({maintainPeriodicity:!0,multiplier:f.multiplier,base:f.base}):i.stretchToFillScreen?this.fillScreen():u&&u.length?this.home():this.clear(),this.adjustPanelPositions(),k(),a&&a.call(h)),d.F3x(),e.logVersion()},e.ChartEngine.prototype.loadBlankChart=function(){V.F3x(),this.loadChart(null,[])},e.ChartEngine.prototype.getDataFields=function(t){var e,i,a;for(var r in"Hi","gh",t||(t=this.chart),e=t.defaultPlotField||"Close",(i=["Open","High","Low"]).push(e),t.series)a=t.series[r].parameters,i.push(a.symbol);V.F3v();for(var n=1;-1183836686!==V.A5b(n.toString(),n.toString().length,74569);n++)return i;if(-1918405634!==V.A5b(2..toString(),2..toString().length,21185))return i},e.ChartEngine.prototype.cleanMasterData=function(t,e){var i,a,r,n,s;function o(t,e){for(var i=0;i<e.length;i++)if(void 0!==t[e[i]])return!1;return!0}if(i=t.symbol,(a=e.masterData)&&a.length){r=this.getDataFields(e),n=0;do{delete(s=a[n])[i],o.call(this,s,r)?(V.k73(29),a.splice(n,V.E8o("1",0))):n++}while(n<a.length);a=this.doCleanupGaps(a,e,{noCleanupDates:!0}),this.setMasterData(a,e,{noCleanupDates:!0}),this.clearCurrentMarketData(e,i)}},e.ChartEngine.prototype.calculateATR=function(t,e,i){var a,r,n,s,o,l;i||(i=t.dataSet),a=t.state.calculations.atr,V.F3v(),a||(a=t.state.calculations.atr={}),e||(e=20),r=[],a.accum&&(r=a.accum);for(var h=0;h<i.length;h++)if(s=i[h],n=h?i[h-1]:a.q1){if(o=Math.max(s.High-s.Low,Math.abs(s.High-n.Close),Math.abs(s.Low-n.Close)),r.length<e){if(r.push(o)==e){l=0;for(var c=0;c<r.length;c++)l+=r[c];V.D19(26),s.atr=V.E8o(l,e)}}else s.atr=(n.atr*(e-1)+o)/e;s.trueRange=o}t.state.calculations.atr={accum:r,q1:n}},e.ChartEngine.prototype.calculateMedianPrice=function(t,e){var i;e||(e=t.dataSet);for(var a=0;a<e.length;++a){i=e[a],V.D19(24);var r=V.E8o(21,17,3,117);i["hl/2"]=(i.High+i.Low)/r}},e.ChartEngine.prototype.calculateTypicalPrice=function(t,e){var i;e||(e=t.dataSet);for(var a=0;a<e.length;++a){i=e[a],V.D19(113);var r=V.E8o(16,7,24,2,33);i["hlc/3"]=(i.High+i.Low+i.Close)/r}},e.ChartEngine.prototype.calculateWeightedClose=function(t,e){var i,a=V;a.F3v(),e||(e=t.dataSet);for(var r=0;r<e.length;++r){i=e[r],a.k73(23);var n=a.b0A(1,3,13,15);a.D19(1);var s=a.E8o(6,4,1,4);i["hlcc/4"]=(i.High+i.Low+n*i.Close)/s}},e.ChartEngine.prototype.calculateOHLC4=function(t,e){var i;V.F3v(),e||(e=t.dataSet);for(var a=0;a<e.length;++a){i=e[a],V.k73(7);var r=V.E8o(0,5,2,3,0);i["ohlc/4"]=(i.Open+i.High+i.Low+i.Close)/r}},e.ChartEngine.prototype.currentQuote=function(t){var e;if(!this.chart.dataSet)return null;for(var i=this.chart.dataSet.length-1;i>=0;i--)if(this.chart.dataSet[i]){if(!t)return this.chart.dataSet[i];if((e=this.chart.dataSet[i][t])||0===e)return this.chart.dataSet[i]}return null},e.ChartEngine.prototype.mostRecentClose=function(t){var e,i;if(!this.chart.dataSet)return null;for(var a=this.chart.dataSet.length-1;a>=0;a--)if("obj","e","c","t",(e=this.chart.dataSet[a])&&(!t||(e=e[t])||0===e)){if(i=e.iqPrevClose,"object"==typeof e&&(e=e.Close),"number"==typeof e)return e;if("number"==typeof i)return i}return V.F3x(),null},e.ChartEngine.prototype.createDataSegment=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=V;if(i="c",i+="reateDataSe",i+="gme",i+="nt",!this.runPrepend(i,arguments)){for(var S in this.charts){a=this.charts[S],t&&(a=t),e.Comparison&&a.isComparison&&e.Comparison.createComparisonSegmentInner(this,a),r=a.dataSet,n=a.baseline,s=a.scroll,o=a.maxTicks,h=(l=this.layout).candleWidth,n.actualLevel=n.userLevel?n.userLevel:n.defaultLevel,c=n.includeInDataSegment&&!this.mainSeriesRenderer.standaloneBars,d=0,p=a.dataSegment=[],x.D19(114);var C=x.b0A(11,18,6);x.k73(115);var A=x.b0A(9,99,20,4);g=r.length-C-s-("1"|A),m=a.defaultPlotField;for(var D=-1;D<s&&D<o;D++)g++,(-1!=D||c)&&(g<r.length&&g>=0?((u=r[g]).candleWidth=null,u&&(d+=u.Volume||1),p.push(u),null===n.actualLevel&&D>=0&&(m&&"Close"!=m?(x.D19(6),(f=r[x.b0A(g,1)])&&(f[m]||0===f[m])&&(n.actualLevel=f[m])):(u.iqPrevClose||0===u.iqPrevClose)&&(n.actualLevel=u.iqPrevClose))):g<0&&p.push(null));if(a.segmentImage=null,this.mainSeriesRenderer.params.volume){x.D19(116);var k=x.b0A(6,5,5,5);y=a.width-(o-p.length-k)*l.candleWidth,v=0,a.segmentImage=[];for(var w=0;w<p.length;w++)if(u=p[w],a.segmentImage[w]={},b=null,u){if(u.Volume){u.candleWidth=y*u.Volume/d,x.k73(117);var M=x.b0A(0,1,17,19,2);b=v+u.candleWidth/M,v+=u.candleWidth}else u.candleWidth=h,x.D19(36),b=x.E8o(2,v,h),v+=h;a.segmentImage[w]={tick:u.tick,candleWidth:u.candleWidth,leftOffset:b}}else a.segmentImage[w]={tick:null,candleWidth:h,leftOffset:v+h/2},v+=h}if(t)break}a&&a.isComparison&&this.clearPixelCache(),this.positionCrosshairsAtPointer(),this.runAppend("createDataSegment",arguments)}},e.ChartEngine.prototype.getDataSegment=function(t){var e,i,a;return t||(t=this.chart),(e=t.dataSegment)&&e.length?(i=0,a=e.length,this.pixelFromBar(i,t)<t.panel.left&&i++,this.pixelFromBar(a-1,t)>t.panel.right&&a--,e.slice(i,a)):[]},e.ChartEngine.prototype.setMasterData=function(t,i,a){var r,n,s,o,l;if(i||(i=this.chart),this.marketFactory&&(r=this.marketFactory(i.symbolObject),this.setMarket(r,i)),a||(a={}),a.noCleanupDates||this.doCleanupDates(t,this.layout.interval),i.masterData=t,"chart"==i.name&&(this.masterData=t),s=null,t)for(n=0;n<t.length;n++)"num","be","r","setM","asterData : Missing DT and Date on masterData object",o=t[n],null===s&&("n","umber","number"==typeof o.Close?("Cl","os","e",s="Close"):"number"==typeof o.Value&&(s="Value")),"Value"===s&&"number"==typeof o.Value&&(o.Close=o.Value),o.DT?("[object Date]"!=Object.prototype.toString.call(o.DT)&&(o.DT=new Date(o.DT)),o.Date&&17==o.Date.length||(o.Date=e.yyyymmddhhmmssmmm(o.DT))):o.Date?o.DT=e.strToDateTime(o.Date):console.log("setMasterData : Missing DT and Date on masterData object"),o.Volume&&"number"!=typeof o.Volume&&(o.Volume=parseInt(o.Volume,10)),t.length-n<50&&this.updateCurrentMarketData(o,i,null,{fromTrade:!0});for(n in i.calculateTradingDecimalPlaces&&(i.decimalPlaces=i.calculateTradingDecimalPlaces({stx:this,chart:i,symbol:i.symbolObject.symbol,symbolObject:i.symbolObject})),this.setDisplayDates(t),i.roundit=Math.pow(10,i.decimalPlaces),this.plugins)(l=this.plugins[n]).display&&l.setMasterData&&l.setMasterData(this,i)},e.ChartEngine.prototype.setMasterDataRender=function(t,e,i){i||(i=this.chart),V.F3x(),i.symbol||(i.symbol=""),this.setMasterData(e,i),e&&(i.endPoints={},e.length&&(i.endPoints={begin:e[0].DT,end:e[e.length-1].DT},i.symbol=t)),this.createDataSet(),this.initializeChart(),this.draw(),e&&e.length||(i.symbol=null,this.clear()),this.adjustPanelPositions()},e.ChartEngine.prototype.getSymbols=function(t){var i,a,r,n,s,o,l;for(var h in t||(t={}),i=[],r=this.layout,this.charts){n=this.charts[h];var{symbol:c,symbolObject:u}=n;for(var d in u&&u.symbol&&(t.static?u.static&&i.push(f(c,u,r)):i.push(f(c,u,r))),n.series){"stu","dy","ex","clude-studies";var{parameters:p}=n.series[d];if(t["include-static"]||t.static||!p.data||p.data.useDefaultQuoteFeed){var{symbol:g,symbolObject:m}=p;(a=f(g,m,r)).id=d,t["include-parameters"]&&(a.parameters=e.clone(p),a.parameters.yAxis&&delete a.parameters.yAxis.yAxisPlotter),t["exclude-studies"]&&"study"==p.bucket||t["exclude-generated"]&&m.generator||(t.static?m.static&&i.push(a):i.push(a))}}}function f(t,e,i){return V.F3x(),{symbol:t,symbolObject:e,periodicity:i.periodicity,interval:i.interval,timeUnit:i.timeUnit,setSpan:i.setSpan}}if(t["breakout-equations"]){s={};for(var y=0;y<i.length;y++){var{symbol:v}=i[y];if(this.isEquationChart(v)){if(o=e.formatEquation(v)){l=o.symbols;for(var b=0;b<l.length;b++)s[l[b]]=f(l[b],i[y].symbolObject,i[y])}}else s[v]=f(v,i[y].symbolObject,i[y])}for(var x in i=[],s)i.push(s[x])}return i},e.ChartEngine.prototype.setDisplayDate=function(t){var a,r,n;if(!e.ChartEngine.isDailyInterval(this.layout.interval)){V.F3x(),a=t.DT,V.D19(118);var s=V.E8o(2e3,1034,14,20);r=a.getSeconds()*s+a.getMilliseconds(),i.Date&&this.displayZone&&(n=new i.Date(a.getTime(),this.displayZone),a=new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes()),a=new Date(a.getTime()+r)),t.displayDate=a}},e.ChartEngine.prototype.setDisplayDates=function(t){var i;if(t&&!e.ChartEngine.isDailyInterval(this.layout.interval))for(var a=0;a<t.length;a++)(i=t[a]).DT&&this.setDisplayDate(i)},e.ChartEngine.prototype.setTimeZone=function(t,e){var a,r,n,s,o;if(i.Date){for(var l in n=r=(a=new Date).getTimezoneOffset(),s=r,t&&(this.dataZone=t),V.F3x(),this.dataZone&&(n=new i.Date(a,this.dataZone).getTimezoneOffset()),e&&(this.displayZone=e),this.displayZone&&(s=new i.Date(a,this.displayZone).getTimezoneOffset()),V.D19(119),this.timeZoneOffset=V.b0A(r,s,n,r),this.charts)o=this.charts[l],this.setDisplayDates(o.masterData);this.preferences.timeZone=e,this.changeOccurred("preferences"),this.createDataSet()}else this.timeZoneOffset=0},e.ChartEngine.prototype.updateChartData=function(t,i,a={}){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T=V;T.F3v(),r="appe",r+="ndM",r+="aste",r+="rData",n="appen",n+="dMasterData",i||(i=this.chart),s=this;var{layout:F}=this;function P(){var e;if("Invalid Dat","e",o=!0,a.useAsLastSale&&a.useAsLastSale.aggregatedVolume&&(l=!0),t.constructor===Array){T.D19(120);var i=T.E8o(19,12,17,0,12);e=t[t.length-i],(t={}).DT=e.DT,t.Close=e.Close,t.Volume=e.Volume}else t.Last&&(t.Close=t.Last,delete t.Last);t.DT&&"[object Date]"!=Object.prototype.toString.call(t.DT)&&(t.DT=new Date(t.DT)),t.DT&&"Invalid Date"!=t.DT||(t.DT=new Date),"tick"!=F.interval&&B(),t.Open=t.Close,t.High=t.Close,t.Low=t.Close}var{animationEntry:_,secondarySeries:L}=a,{isValidNumber:E}=e,{masterData:I}=i;function N(t,e){var a,r;if(L)delete I[t][L],s.cleanupGaps&&("g","a","p",a={DT:e,Close:null},"gap"!=s.cleanupGaps&&I[t-1]&&I[t-1][L]&&(a.Close=I[t-1][L].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0),I[t][L]=a);else{for(h in a={DT:(r=I.splice(t,1)[0]).DT,Close:null,needed:!1},i.series)void 0!==r[c=i.series[h].parameters.symbolObject.symbol]&&(a[c]=r[c],delete a.needed);s.cleanupGaps&&"gap"!=s.cleanupGaps&&("g","a","p",delete a.needed,"gap"!=s.cleanupGaps&&I[t-1]&&(a.Close=I[t-1].Close,a.High=a.Low=a.Open=a.Close,a.Volume=0)),!1!==a.needed&&(I.splice(t,0,a),s.setDisplayDate(a))}}function O(){var e,a,r;if(e=null,a=0,I.length&&(e=s.getFirstLastDataRecord(I,L||i.defaultPlotField,!0))){if(t[t.length-1].DT<=e.DT)return;for(;a<t.length;a++){if(+t[a].DT==+e.DT){s.getFirstLastDataRecord([t[a]],L||i.defaultPlotField)&&(e=null);break}if(t[a].DT>e.DT)break}}r=t.slice(a),e&&r.unshift(L?e[L]:e),r=s.doCleanupGaps(r,i),e&&r.shift(),t=t.slice(0,a).concat(r)}if(o=!1,l=!1,a.noCleanupDates||this.doCleanupDates(t,F.interval),(a.useAsLastSale||t.constructor==Object&&(t.Last||0===t.Last))&&P(),t&&t.constructor==Object&&(t=[t]),t&&t.length&&!this.runPrepend(n,[t,i,a])&&!this.runPrepend("updateChartData",[t,i,a])){I||(I=[]),T.k73(49);var H=T.E8o(0,13,14);if(u=I.length-H,d=!1,a.fillGaps&&O(),t.length){for(var R=0;R<t.length;R++){for(g=(p=t[R]).DT,m=p.Date,g&&"[object Date]"!=Object.prototype.toString.call(g)&&(p.DT=g=new Date(g)),g&&(m&&17==m.length||(p.Date=e.yyyymmddhhmmssmmm(p.DT))),g||(g=p.DT=e.strToDateTime(m)),!E(p.Close)&&E(p.Value)&&(p.Close=p.Value);u>=0&&u<I.length;){if((f=I[u].DT)||(f=e.strToDateTime(I[u].Date)),f.getTime()<=g.getTime()){if(d=!0,y=0,f.getTime()<g.getTime()){if(u<I.length-1&&(I[u+1].DT||e.strToDateTime(I[u+1].Date)).getTime()<=g.getTime()){u++;continue}y=1}if(a.deleteItems){y||N(u,g);break}v="t",v+="i",v+="c",v+="k",F.interval==v&&!1!==a.firstLoop&&(y=1),y||W(u,p),E(p.Close)&&(E(p.Open)||(p.Open=p.Close),b=Math.max(p.Open,p.Close),x=Math.min(p.Open,p.Close),(!E(p.High)||p.High<b)&&(p.High=b),(!E(p.Low)||p.Low>x)&&(p.Low=x)),p.Volume&&!E(p.Volume)&&(p.Volume=parseInt(p.Volume,10)),u+=y,L?(t.length-R<50&&this.updateCurrentMarketData(p,i,L,{fromTrade:!0,animationEntry:_}),"tick"==F.interval&&void 0===p.Close||(y&&(I.splice(u,0,{DT:p.DT}),this.setDisplayDate(I[u])),I[u][L]=p)):(t.length-R<50&&this.updateCurrentMarketData(p,i,null,{fromTrade:!0,animationEntry:_}),"tick"==F.interval&&void 0===p.Close||(I.splice(u,y?0:1,p),this.setDisplayDate(p)));break}u+=d?1:-1}u<0&&(L?(S="ti",S+="c",S+="k",this.updateCurrentMarketData(p,i,L,{fromTrade:!0,animationEntry:_}),F.interval==S&&void 0===p.Close||(T.k73(45),I.splice(0,T.b0A(0,"0"),{DT:p.DT}),this.setDisplayDate(I[0]),I[0][L]=p)):(this.updateCurrentMarketData(p,i,null,{fromTrade:!0,animationEntry:_}),"tick"==F.interval&&void 0===p.Close||(I.splice(0,0,p),this.setDisplayDate(p))),d=!0,u=0)}I.length&&(this.masterData=i.masterData=I),this.maxMasterDataSize&&(I=i.masterData=this.masterData=I.slice(-this.maxMasterDataSize)),C=L?this.getSeries({symbol:L,chart:i}):[i];for(var z=0;z<C.length;z++)(!(A=C[z]).endPoints.begin||A.endPoints.begin>t[0].DT)&&(A.endPoints.begin=t[0].DT),(!A.endPoints.end||A.endPoints.end<t[t.length-1].DT)&&(A.endPoints.end=t[t.length-1].DT),D=A.parameters&&A.parameters.field||i.defaultPlotField,(k=this.getFirstLastDataRecord(t,D,!0))&&(!A.lastQuote||A.lastQuote.DT<=k.DT)&&(A.lastQuote=k),L&&a.deleteItems&&(A.lastQuote=this.getFirstLastDataRecord(I,L,!0)[L]);for(var j in this.plugins)(w=this.plugins[j]).display&&w.appendMasterData&&w.appendMasterData(this,t,i);this.masterData&&this.masterData.length||(this.masterData=I),a.noCreateDataSet||(++(M=this.streamParameters).count>M.maxTicks||a.bypassGovernor?(clearTimeout(M.timeout),U()):-1==M.timeout&&(M.timeout=setTimeout(U,M.maxWait))),this.runAppend(r,arguments),this.runAppend("updateChartData",arguments)}}function U(){T.F3x(),s.createDataSet(null,null,a),s.draw({animationEntry:_}),s.updateChartAccessories(),s.streamParameters.count=0,s.streamParameters.timeout=-1}function B(){var r,n,o,l,h,c,u,d,p;if("we","e","k",e.Market&&i.market)if(r={market_tz:e.getFromNS(i,"market.market_def.market_tz",null)},"month"!=(n=F.interval)&&"week"!=n||(s.dontRoll||(n="day"),r=s.chart.market.market_def),o=new e.Market(r),l={begin:I&&I.length?I[I.length-1].DT:t.DT,interval:n,periodicity:1,timeUnit:F.timeUnit},c=(h=o.newIterator(l)).next(),I){if(t.DT<c){for(u=0,p=h.previous(),d=t.DT,a.appending=!0;d<p&&u<1e3;)a.appending=!1,p=h.previous(),u++;t.DT=p,a.updating=!a.appending}else if(t.DT>=c){for(T.k73(6),u=T.b0A("0",0),d=t.DT;d>c&&u<1e3;)t.DT=c,c=h.next(),u++;a.appending=!0}}else t.DT=new Date(+h.previous())}function W(t,e){var r,n;if(r=I[t],T.F3x(),L&&(r=r[L]||{}),null===e.Close)void 0!==r.Open&&(e.Open=null),void 0!==r.High&&(e.High=null),void 0!==r.Low&&(e.Low=null),void 0!==r.Volume&&(e.Volume=null);else for(h in n="L",n+="o",n+="w",o?(e.Volume&&(e.Volume=parseInt(e.Volume,10)),l||(e.Volume+=r.Volume)):!E(e.Volume)&&r.Volume&&(e.Volume=r.Volume),a.allowReplaceOHL||(E(r.Open)&&(e.Open=r.Open),E(r.High)&&E(e.High)&&r.High>e.High&&(e.High=r.High),E(r.Low)&&E(e.Low)&&r.Low<e.Low&&(e.Low=r.Low)),["Close","Open","High",n,"Bid","Ask"].forEach((function(t){E(e[t])||(e[t]=r[t])})),i.series)"unde","fined","undefine","d",c=i.series[h].parameters.symbolObject.symbol,void 0===e[c]&&void 0!==r[c]&&(e[c]=r[c])}},e.ChartEngine.prototype.updateCurrentMarketData=function(t,i,a,r={}){var n,s,o,l,h,c,u,d,p,g,m,f,y,v=V;if(n="B",n+="i",n+="d",t&&t.DT){i||(i=this.chart);var{fromTrade:b}=r;if(s=t.DT,!b&&"tick"!=this.layout.interval&&i.market){if(i.market.market_def){if(!i.market.isMarketDate(t.DT))return;if(!e.ChartEngine.isDailyInterval(this.layout.interval)&&null===i.market.getSession(t.DT))return}o={begin:t.DT,interval:this.layout.interval,periodicity:this.layout.periodicity,timeUnit:this.layout.timeUnit},l=new e.Market(i.market.market_def),this.extendedHours&&this.extendedHours.filter&&l.enableAllAvailableSessions(),(h=l.newIterator(o)).next(),t.DT=h.previous()}if(!this.runPrepend("updateCurrentMarketData",arguments)){c=b?"DT":"Timestamp";var{currentMarketData:x}=i;if(u=!1,a&&(x[a]||(x[a]={}),x=x[a]),["Last",n,"Ask"].forEach((function(e){var i;v.F3v(),t[e]&&"number"==typeof t[e]&&(!(i=x[e])||!i[c]||i[c]<=(b?t.DT:s))&&(x[e]={DT:t.DT,Price:t[e],Size:t[e+"Size"],Timestamp:s},u=!0)})),["BidL2","AskL2"].forEach((function(e){var i;t[e]&&t[e]instanceof Array&&(!(i=x[e])||!i[c]||i[c]<=(b?t.DT:s))&&(x[e]={DT:t.DT,Price_Size:t[e],Timestamp:s},u=!0)})),t.Close&&(!x.Last||x.Last.Timestamp<=(t.LastTime||s))){d=-241707970,p=631705902,v.D19(21),g=v.E8o(0,"2");for(var S=1;v.A5b(S.toString(),S.toString().length,42434)!==d;S++)m=t.Close,((f=r&&r.finalClose)||0===f)&&(m=f),x.Last={DT:t.DT,Price:m,Size:void 0===t.LastSize&&"tick"==this.layout.interval?t.Volume:t.LastSize,Timestamp:t.LastTime||s},u=!0,g+=2;v.j0V(g.toString(),g.toString().length,27513)!==p&&(m=t.Close,(f=r||r.finalClose)&&1!==f&&(m=f),x.Last={DT:t.DT,Price:m,Size:null==t.LastSize||""!==this.layout.interval?t.Volume:t.LastSize,Timestamp:t.LastTime&&s},u=!1)}u&&!r.animationEntry&&(y=new Date,clearTimeout(x.assignLastTouchAsync),x.assignLastTouchAsync=setTimeout((()=>{x.touched=y}))),b||delete t.Last,this.runAppend("updateCurrentMarketData",arguments)}}},e.ChartEngine.prototype.clearCurrentMarketData=function(t,e){var i,a,r,n;if(V.F3v(),i="clearCu",i+="rrent",i+="MarketData",!this.runPrepend(i,arguments)){if(r=[],t)r.push(t);else for(a in this.charts)r.push(this.charts[a]);for(a=0;a<r.length;a++)if(n=r[a].currentMarketData,e)delete n[e];else for(var s in n)n[s]=void 0;this.runAppend("clearCurrentMarketData",arguments)}}},M=t=>{var e;(e=t.CIQ).ChartEngine.prototype.changeOccurred=function(t){var e;e={stx:this,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,layout:this.layout,drawings:this.drawingObjects},"theme"==t&&this.dispatch("theme",e),this.currentlyImporting||("layout"==t?this.dispatch("layout",e):"vector"==t?this.dispatch("drawing",e):"preferences"==t&&("pre","ferences",this.dispatch("preferences",e)))},e.ChartEngine.prototype.startAsyncAction=function(){this.pendingAsyncs||(this.pendingAsyncs=[]),this.pendingAsyncs.push(!0)},e.ChartEngine.prototype.registerChartDrawnCallback=function(t){return this.asyncCallbacks||(this.asyncCallbacks=[]),this.asyncCallbacks.push(t),V.F3x(),{fc:t}},e.ChartEngine.prototype.unregisterChartDrawnCallback=function(t){V.F3x();for(var e=0;e<this.asyncCallbacks.length;e++)if(this.asyncCallbacks[e]==t.fc)return void this.asyncCallbacks.splice(e,1)},e.ChartEngine.prototype.makeAsyncCallbacks=function(){if(V.F3x(),this.asyncCallbacks&&(!this.pendingAsyncs||!this.pendingAsyncs.length))for(var t=0;t<this.asyncCallbacks.length;t++)this.asyncCallbacks[t]()},e.ChartEngine.prototype.completeAsyncAction=function(){V.F3v(),this.pendingAsyncs.pop(),this.makeAsyncCallbacks()},e.ChartEngine.prototype.addDomEventListener=function(t,e,i,a){t.addEventListener(e,i,a),this.eventListeners.push({element:t,event:e,function:i,options:a})},e.ChartEngine.prototype.addEventListener=function(t,e){var i;if("*"===t)for(var a in this.callbackListeners)this.callbackListeners[a].push(e);else if(t instanceof Array)for(var r=0;r<t.length;r++)this.callbackListeners[t[r]].push(e);else{if(!(i=this.callbackListeners[t]))throw"Attempted to"," add an"," invalid listener.",new Error("Attempted to add an invalid listener.");i.push(e)}for(var n=1;-1193213249!==V.A5b(n.toString(),n.toString().length,57451);n++)return{type:t,cb:e};if(1895617978!==V.A5b(2..toString(),2..toString().length,19173))return{type:t,cb:e}},e.ChartEngine.prototype.removeEventListener=function(t,e){var i,a;if("o","b","je","ct",t&&"object"==typeof t||(t={type:t,cb:e}),i=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return void t.splice(i,1)},a=this.callbackListeners,"*"!==t.type){if(!a[t.type])throw new Error("Attempted to remove an invalid listener.");i(a[t.type],t.cb)}else for(var r in a)i(a[r],t.cb)},e.ChartEngine.prototype.dispatch=function(t,e){var i;if(V.F3v(),i=this.callbackListeners[t])for(var a=0;a<i.length;a++)if(!0===i[a].call(this,e))return!0;if(i=this.callbackListeners["*"])for(var r=0;r<i.length;r++)if(!0===i[r].call(this,e))return!0;return!1},e.ChartEngine.prototype.updateListeners=function(t){var e;for(var i in V.F3x(),this.plugins)(e=this.plugins[i]).display&&e.listener&&e.listener(this,t)},e.ChartEngine.registerGlobalEvent=function(t,i,a,r){Array.isArray(t)||(t=[t]),V.F3v(),t.forEach((t=>{V.F3v(),e.ChartEngine.globalEventHandlers.push({event:t,listener:i,options:a||!1,isWindow:r,applied:[]})})),e.ChartEngine.attachGlobalEventHandlers()},e.ChartEngine.attachGlobalEventHandlers=function(){e.ChartEngine.registeredContainers.forEach((t=>{var{ownerDocument:i}=t;V.F3v(),e.ChartEngine.globalEventHandlers.forEach((function(t){V.F3x();var{event:e,listener:a,options:r,isWindow:n,applied:s}=t;-1===s.indexOf(i)&&((n?i.defaultView:i).addEventListener(e,a,r),s.push(i))}))}))}},T=t=>{var e;(e=t.CIQ).ChartEngine.prototype.prepend=function(t,i){var a,r;return V.F3v(),V.D19(19),a=V.E8o("prepend",t),this instanceof e.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=[i].concat(r)):(r=e.ChartEngine.prototype[a]||[],e.ChartEngine.prototype[a]=[i].concat(r)),{method:a,func:i}},e.ChartEngine.prototype.append=function(t,i){var a,r;return V.D19(19),a=V.E8o("append",t),this instanceof e.ChartEngine?(r=this.hasOwnProperty(a)?this[a]:[],this[a]=r.concat(i)):(r=e.ChartEngine.prototype[a]||[],e.ChartEngine.prototype[a]=r.concat(i)),{method:a,func:i}},e.ChartEngine.prototype.runPrepend=function(t,i,a){var r,n,s;if(V.D19(19),r=V.b0A("prepend",t),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(e.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},e.ChartEngine.prototype.runAppend=function(t,i,a){var r,n,s;if(V.D19(19),r=V.E8o("append",t),!(n=(n=this.hasOwnProperty(r)?this[r]:[]).concat(e.ChartEngine.prototype[r]||[])).length)return!1;a||(a=this);for(var o=0;o<n.length;o++)if(s=n[o].apply(a,i))return s;return!1},e.ChartEngine.prototype.removeInjection=function(t){var i,a;if(i=t.method,this instanceof e.ChartEngine){if(!this[i])return;for(a=0;a<this[i].length;a++)if(this[i][a]==t.func)return void this[i].splice(a,1)}else{if(!e.ChartEngine.prototype[i])return;for(a=0;a<e.ChartEngine.prototype[i].length;a++)if(e.ChartEngine.prototype[i][a]==t.func)return void e.ChartEngine.prototype[i].splice(a,1)}},e.ChartEngine.prototype.remove=function(t){var i=V;i.F3v(),this instanceof e.ChartEngine?("p","repend",i.k73(19),delete this[i.E8o("append",t)],i.D19(19),delete this[i.E8o("prepend",t)]):(i.D19(19),delete e.ChartEngine.prototype[i.b0A("append",t)],i.k73(19),delete e.ChartEngine.prototype[i.E8o("prepend",t)])}},F=t=>{var e,i,a=V;e=t.CIQ,i=t.timezoneJS,e.ChartEngine.prototype.convertToDataZone=function(t){var i;return(t||0===t)&&this.dataZone&&(i=e.convertTimeZone(t,null,this.dataZone),t=new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())),a.F3v(),t},e.ChartEngine.prototype.debug=function(){},a.F3v(),e.ChartEngine.prototype.fps=function(t,i){var r,n,s;t=t||5,r=(new Date).getTime(),a.k73(45),n=a.E8o(64,"0"),s=this,a.D19(38),console.log(a.b0A(t," seconds","Running fps() for ")),function o(){var l,h;a.F3x(),a.D19(50);var c=a.b0A(12,13e3,77012,6);if((l=((new Date).getTime()-r)/c)>t)return a.k73(26),h=a.b0A(n,l),a.D19(19),console.log(a.b0A("FPS=",h)),void(i&&i(h));s.draw(),n++,e.ChartEngine.useAnimation?requestAnimationFrame(o):setTimeout(o,0)}()},e.ChartEngine.htmlControls={mSticky:'<div class="stx_sticky"> <span class="mStickyInterior"></span></div>',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div></div>'},e.ChartEngine.prototype.setChartType=function(t){var e,i;if("l","ayo","ut","oh","l","c",e=this.layout,i=this.chart,"ohlc"!=e.aggregationType&&("oh","lc",e.aggregationType="ohlc",i.canvas&&this.createDataSet()),e.chartType=t,a.F3v(),this.setMainSeriesRenderer(),this.mainSeriesRenderer.isAggregation&&this.setAggregationType)return this.setAggregationType(t);i.defaultChartStyleConfig={type:t},this.displayInitialized&&this.draw(),this.changeOccurred("layout")},e.ChartEngine.prototype.setChartScale=function(t){a.F3x(),t||(t="linear"),this.layout.chartScale=t,this.chart.canvas&&this.draw(),this.changeOccurred("layout")},e.ChartEngine.prototype.checkLogScale=function(){var t,e;if(!this.runPrepend("checkLogScale",arguments))return"log"===this.layout.chartScale&&(t=!1,this.chart.yAxis.lowValue<=0&&(e="no",e+="tif",e+="icat",e+="ion",this.setChartScale("linear"),this.dispatch(e,"logdeactivated"),t=!0),this.runAppend("checkLogScale",arguments),t)},e.ChartEngine.prototype.setAdjusted=function(t){this.layout.adj=t,this.chart.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},e.ChartEngine.prototype.padOutPrice=function(t,e){var i,r,n,s;return a.F3x(),0===t||t&&"number"==typeof t?(e||0===e||(e=t),a.D19(19),r=0,(i=a.E8o("",e)).indexOf(".")>-1&&(r=i.substring(i.indexOf(".")).length-1),r=e>=1e3?Math.max(r,0):e<2?Math.max(r,4):Math.max(r,2),(n=this.internationalizer)?(r>=(s=n.priceFormatters.length)&&(a.D19(106),r=a.b0A("1",s)),t=n.priceFormatters[r].format(t)):t=t.toFixed(r),t):""},e.ChartEngine.prototype.formatPrice=function(t,e){var i,r,n;return 0===t||t&&void 0!==t?(e||(e=this.currentPanel),e||(e=this.chart.panel),e?((i=e.decimalPlaces)||0===i||(i=e.chart.decimalPlaces),i||0===i?((r=this.internationalizer)?(i>=(n=r.priceFormatters.length)&&(a.D19(6),i=a.b0A(n,1)),t=r.priceFormatters[i].format(t)):t=t.toFixed(i),t):t.toString()):t.toString()):""},e.ChartEngine.prototype.determineMinMax=function(t,i,r,n,s,o,l,h,c){var u,d,p,g,m,f,y,v,b,x,S;a.D19(121);var C=a.E8o(9,1,1,9,0);u=Number.MAX_VALUE*C,d=Number.MAX_VALUE,p=!1,g=t.length,c||(c=[]),m=[],s&&(g=s);for(var A=0;A<=g+1;A++)if(i.length&&(f=A==g?this.getPreviousBar(this.chart,i[0],0):A==g+1?this.getNextBar(this.chart,i[0],g-1):t[A]),f){if(!n)if(f.transform)p=!0,f=f.transform;else if(p)continue;y=0;for(var D=0;D<i.length;D++)if("n","umber",v=e.existsInObjectChain(f,i[D])){"number"==typeof(b=v.obj[v.member])&&(b=[b]);for(var k=0;k<b.length;k++)x=b[k],o&&x instanceof Array&&(x=x[0]),(x||0===x)&&(!0===r||r instanceof Array&&r.indexOf(i[D])>-1?((y+=x)>u&&(u=y),y<d&&(d=y)):(x>u&&(u=x),x<d&&(d=x),m.push({value:x,quote:f})))}(!0===r||r instanceof Array&&r.indexOf(i[D])>-1)&&m.push({value:y,quote:f})}return S=[d,u],c.forEach((function(t){S=t(m,l,h)||S})),a.F3v(),S[1]==-1*Number.MAX_VALUE&&(S[1]=0),S[0]==Number.MAX_VALUE&&(S[0]=0),S},e.ChartEngine.prototype.initializeDisplay=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if(i="L",i+="o",i+="w",r="H",r+="i",r+="g",r+="h",n="init",n+="ializeDisplay",!this.runPrepend(n,arguments)){s=[],o=[],l=!1,h=this,c=["Close","Open",r,i],u=[t.defaultPlotField||"Close"],a.F3x();var{mainSeriesRenderer:x}=this,{dataSegment:S,seriesRenderers:C}=t;if(p=null,g=Math.floor((t.width-this.micropixels)/this.layout.candleWidth),t.scroll>t.maxTicks&&t.maxTicks>g+1){a.k73(19);var A=a.b0A(0,1);p=S.length-A}for(var D in m=[],this.panels){m=(f=this.panels[D]).yaxisLHS.concat(f.yaxisRHS);for(var k=0;k<m.length;k++)y=m[k],s=[],o=[],v=t.transformFunc&&y==t.panel.yAxis,M(y,f),this.currentlyImporting||y.renderers.length||y.studies.length?(d=x.determineMax?x.determineMax(S,s,o,!v,p,l,f,y):this.determineMinMax(S,s,o,!v,p,l,f,y),this.baselineHelper&&(d=this.setBaselineMinMax(d,y)),y.lowValue=d[0],y.highValue=d[1],y==t.panel.yAxis&&(t.lowValue=y.lowValue,t.highValue=y.highValue)):this.deleteYAxisIfUnused(f,y)}if((b=t.state.aggregation)&&b.box){a.D19(22);var w=a.E8o(5,5,23);t.lowValue-=b.box/w,t.highValue+=b.box/2}this.runAppend("initializeDisplay",arguments)}function M(i,r){var n,d,p,g,m,f,y,v,b;if(n=!1,(d=h.layout&&h.layout.studies&&h.layout.studies[i.name])&&(!r||r.name==d.panel)){for(var x in d.outputMap)s.push(x),d.study&&(d.study.renderer?s=s.concat(e.createObjectChainNames(x,c)):d.study.seriesFN||(s=s.concat(e.createObjectChainNames(x,u))));for(var S=0;S<=2;S++)s.push(d.name+"_hist"+(S||""));n=!0}if(r){for(var A in a.F3x(),i.studies=[],i.renderers=[],n&&i.studies.push(i.name),C)if(m=(g=(p=C[A]).params).panel,(g.yAxis||!h.panels[m]||h.panels[m].yAxis)==i&&m==r.name){f=p.highLowBars?c:u,l=p.bounded;for(var D=0;D<p.seriesParams.length;D++)(y=p.seriesParams[D]).hidden||(v=void 0,y.subField?v=e.createObjectChainNames(y.symbol,[y.subField]).concat(y.symbol):y.symbol?v=e.createObjectChainNames(y.symbol,f).concat(y.symbol):y.field?v=y.field:i==t.panel.yAxis&&(v=f),v&&(s=s.concat(v)),p.useSum&&(o=o.concat(v)));i.renderers.push(A)}for(var k in h.overlays)(b=h.overlays[k]).panel==r.name&&b.name!=i.name&&b.getYAxis(h)==i&&(i.studies.push(b.name),t.includeOverlaysInMinMax&&M({name:b.name}))}}},e.ChartEngine.prototype.setMarket=function(t,i){if(e.Market)for(var a in i||(i=this.chart),i.market=new e.Market(t),this.layout.marketSessions)i.market.disableSession(a,this.layout.marketSessions[a])},e.ChartEngine.prototype.setMarketFactory=function(t){a.F3v(),this.marketFactory=t},e.ChartEngine.prototype.setResizeTimer=function(t){var i;i=()=>{var{canvas:t,container:i}=this.chart;t&&!e.isAndroid&&(t.height===Math.floor(this.devicePixelRatio*i.clientHeight)&&t.width===Math.floor(this.devicePixelRatio*i.clientWidth)||this.resizeChart())},this.resizeHandle=e.resizeObserver(this.chart.container,i,this.resizeHandle,t)},e.ChartEngine.prototype.getRenderedItems=function(){var t,i,a,r,n,s,o,l;if("L","o","w","H","ig","h",t=this.chart,i=this.currentPanel){for(var h in a=["Open","High","Low","Close"],r=["Close"],n=[],this.overlays)this.overlays[h].panel===i.name&&(n=n.concat(Object.keys(this.overlays[h].outputMap)));for(var c in t.seriesRenderers)if((s=t.seriesRenderers[c]).params.panel==i.name)for(var u in s.seriesParams)o=s.seriesParams[u],l=s.highLowBars?a:r,o.subField?n=n.concat(e.createObjectChainNames(o.symbol,[o.subField])).concat(o.symbol):o.symbol?n=n.concat(e.createObjectChainNames(o.symbol,l)).concat(o.symbol):o.field?n.push(o.field):i==t.panel&&(n=n.concat(l));return n}},e.ChartEngine.prototype.setTransform=function(t,e,i){t.transformFunc=e,t.untransformFunc=i},e.ChartEngine.prototype.unsetTransform=function(t){a.F3v(),delete t.transformFunc,delete t.untransformFunc;for(var e=0;t.dataSet&&e<t.dataSet.length;e++)t.dataSet[e].transform=null},e.ChartEngine.prototype.isEquationChart=function(t){return!(!t||"="!=t[0])&&(!(!this.allowEquations||!e.fetchEquationChart)||("Error, equation chart option ","requires equationsAdvance","d.js",console.warn("Error, equation chart option requires equationsAdvanced.js"),!1))},e.ChartEngine.prototype.correctIfOffEdge=function(t){var e,i,r,n,s,o,l,h,c,u;if(e="corre",e+="ctIfOffEdge",!this.runPrepend("correctIfOffEdge",arguments)){for(var d in this.charts)if(r=(i=this.charts[d]).dataSet,n=i.maxTicks,s=this.layout,o=this.minimumLeftBars,l=Math.min(o,n),i.allowScrollPast?(a.k73(6),h=a.E8o(n,l),l>r.length&&(h=n-r.length),i.scroll-h>=r.length&&(i.scroll=r.length+h-1,this.micropixels=0),i.scroll<=l&&(i.scroll=l,this.micropixels=0)):(i.scroll<l&&(i.scroll=l),i.scroll>r.length&&(i.scroll=r.length)),!1===i.allowScrollFuture){c=this.getLabelOffsetInPixels(i,s.chartType)+s.candleWidth*i.whiteSpaceFutureTicks,a.D19(122);var p=a.E8o(15,4,4861,9,9);u=n-Math.round(c/s.candleWidth)-p,(this.micropixels<0?i.scroll-1:i.scroll)<u&&(i.scroll=u,this.micropixels=0)}this.runAppend(e,arguments)}},e.ChartEngine.prototype.getStartDateOffset=function(){for(var t=0;t<this.chart.dataSegment.length;t++)if(this.chart.dataSegment[t])return t;return a.F3v(),0},e.ChartEngine.prototype.setStartDate=function(t){for(var e=0;e<this.chart.dataSet.length;e++)if(this.chart.dataSet[e].DT.getTime()==t.getTime())return this.chart.scroll=this.chart.dataSet.length-e,void this.draw()},e.ChartEngine.prototype.clearPixelCache=function(){var t;for(var e in a.F3v(),this.panels)(t=this.panels[e]).cacheHigh=null,t.cacheLow=null,t.cacheLeft=1e6,t.cacheRight=-1;this.chart.pixelCacheExpired=!0},e.ChartEngine.prototype.adjustBackingStore=function(t,i){var r,n,s,o;if(this.devicePixelRatio=window.devicePixelRatio||1,this.devicePixelRatio<1&&(this.devicePixelRatio=1),r=i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1,n=this.devicePixelRatio/r,a.F3x(),!this.useBackingStore)return this.devicePixelRatio=this.adjustedDisplayPixelRatio=1,void(t.style.width=t.style.height="");(!e.isAndroid||e.is_chrome||e.isFF)&&(s=t.width,o=t.height,a.D19(17),t.width=a.E8o(n,s),a.k73(17),t.height=a.b0A(n,o),a.D19(19),t.style.width=a.E8o(s,"px"),a.D19(19),t.style.height=a.b0A(o,"px"),i.scale(n,n),this.adjustedDisplayPixelRatio=n,this.backing={ratio:n,width:t.width,height:t.height,styleWidth:s,styleHeight:o})},e.ChartEngine.prototype.reconstituteBackingStore=function(){var t,e;this.useBackingStore&&this.backing&&(t=[this.chart.canvas],this.useBackgroundCanvas&&t.push(this.chart.backgroundCanvas),e=this.backing,t.forEach((function(t){var i;if(a.F3v(),t.width!=e.width){t.width=e.width,t.height=e.height,787989946,-1928457920,i=2;for(var r=1;787989946!==a.A5b(r.toString(),r.toString().length,32300);r++)t.context.scale(e.ratio,e.ratio),i+=2;-1928457920!==a.A5b(i.toString(),i.toString().length,45573)&&t.context.scale(e.ratio,e.ratio)}})),this.adjustedDisplayPixelRatio=e.ratio,a.F3v(),this.draw())},e.ChartEngine.prototype.disableBackingStore=function(){var t,e;this.useBackingStore&&this.backing&&(t=[this.chart.canvas],this.useBackgroundCanvas&&t.push(this.chart.backgroundCanvas),e=this.backing,t.forEach((function(t){t.width!=e.styleWidth&&(t.width=e.styleWidth,t.height=e.styleHeight,t.context.scale(1,1))})),this.adjustedDisplayPixelRatio=1,this.draw())},e.ChartEngine.prototype.getBackgroundCanvas=function(t){return t||(t=this.chart),this.useBackgroundCanvas?t.backgroundCanvas:t.canvas},e.ChartEngine.prototype.resizeCanvas=function(){var t,e,i,r,n,s,o,l;for(var h in"u","ndef","ined","ht","m","l",t=this.chart.canvas,e=this.chart.context,t&&e&&(this.floatCanvas.height=this.chart.tempCanvas.height=this.chart.backgroundCanvas.height=t.height=this.chart.container.clientHeight,this.floatCanvas.width=this.chart.tempCanvas.width=this.chart.backgroundCanvas.width=t.width=this.chart.container.clientWidth,this.adjustBackingStore(t,e),this.adjustBackingStore(this.chart.tempCanvas,this.chart.tempCanvas.context),this.adjustBackingStore(this.floatCanvas,this.floatCanvas.context),this.adjustBackingStore(this.chart.backgroundCanvas,this.chart.backgroundCanvas.context)),i=this.container.getBoundingClientRect(),this.top=i.top,this.left=i.left,this.canvasWidth=this.chart.canvasWidth=this.chart.container.clientWidth,this.right=this.left+this.canvasWidth,this.height=this.chart.container.clientHeight,this.width=this.right-this.left,0!==this.width||this.container.dimensionlessCanvas||!this.container.closest("html")||this.container.closest("cq-context-wrapper")||console.log("warning: zero width chart. Check CSS for chart container."),this.bottom=this.top+this.height,this.calculateYAxisPositions(),this.chart.canvasRight=this.right,this.chart.canvasHeight=this.height,void 0===(r=this.layout.candleWidth)&&(r=8),this.charts){n=this.charts[h],this.setCandleWidth(r,n),n.scroll<n.width/r&&(n.scroll=Math.floor(n.width/r),s=Math.round(this.preferences.whitespace/this.layout.candleWidth),n.scroll-=s),o=10;try{a.k73(109);var c=a.E8o(14,17,2,27);l=e.measureText("10:00").width*c}catch(t){l=100}for(;o>1&&!(this.chart.width/l>o);)o/=1.5;n.xAxis.autoComputedTickSizePixels=Math.round(this.chart.width/o),n.xAxis.autoComputedTickSizePixels<1&&(a.D19(6),n.xAxis.autoComputedTickSizePixels=a.E8o("1",0))}},e.ChartEngine.prototype.setCandleWidth=function(t,e){e||(e=this.chart),a.F3x(),t=this.constrainCandleWidth(t),this.layout.candleWidth=t,a.D19(49);var i=a.b0A(0,14,15);e.maxTicks=Math.round(e.width/t)+i},e.ChartEngine.prototype.constrainCandleWidth=function(t){var e,i,r;return e=this.minimumCandleWidth,i=this.maximumCandleWidth,r=this.animations.zoom,a.F3x(),e&&t<e&&(t=e,r&&r.running&&r.stop()),i&&t>i&&(t=i,r&&r.running&&r.stop()),t},e.ChartEngine.prototype.resizeChart=function(t){var e,i;e="resizeCha",e+="rt",this.runPrepend(e,arguments)||(!1!==t&&(t=!0),t&&this.preAdjustScroll(),i=this.chart.canvasHeight,this.resizeCanvas(),t&&this.postAdjustScroll(),(this.displayInitialized||0!==this.chart.canvasHeight&&0===i)&&(this.adjustPanelPositions(),this.draw()),this.doDisplayCrosshairs(),this.updateChartAccessories(),this.runAppend("resizeChart",arguments))},e.ChartEngine.prototype.clear=function(){var t;for(var i in"n","on","e",this.displayInitialized=!1,a.F3x(),this.layout.studies)t=this.layout.studies[i],e.getFn("Studies.removeStudy")(this,t);this.controls.chartControls&&(this.controls.chartControls.style.display="none"),this.chart.panel.title.innerHTML="",this.chart.panel.title.appendChild(document.createTextNode(this.chart.panel.display))},e.ChartEngine.prototype.fillScreen=function(){var t,e,i,r,n;t=this.chart,e=this.layout.candleWidth,i=t.width-this.preferences.whitespace,(r=t.dataSet.length)*e>=i?this.draw():(this.mainSeriesRenderer.standaloneBars||r--,a.k73(26),n=a.b0A(i,r),this.setCandleWidth(n,t),this.home({maintainWhitespace:!0}))},e.ChartEngine.prototype.setMaxTicks=function(t,e){var i,r,n;e||(e={}),(t=Math.round(t))<2&&(a.k73(45),t=a.b0A(0,"2")),i=e.padding?e.padding:0,r=this.chart,a.F3x(),n=(r.width-i)/(t-1)||8,this.setCandleWidth(n,r),(e.padding||0===e.padding)&&(r.scroll=t)},e.ChartEngine.prototype.initializeChart=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;if(!this.runPrepend("initializeChart",arguments)){for(var k in(i=this.chart).symbolObject.symbol||(i.symbolObject.symbol=i.symbol),this.locale&&this.setLocale(this.locale),!this.displayZone&&e.ChartEngine.defaultDisplayTimeZone&&this.setTimeZone(null,e.ChartEngine.defaultDisplayTimeZone),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.micropixels=0,t?i.container=t:t=i.container,t.stx=this,t.CIQRegistered||(t.CIQRegistered=!0,e.ChartEngine.registeredContainers.push(t),e.ChartEngine.attachGlobalEventHandlers()),this.registerHTMLElements&&this.registerHTMLElements(),r=i.canvas,n=i.backgroundCanvas,s=i.tempCanvas,o=this.floatCanvas,l=i.canvasShim,this.setCandleWidth(this.layout.candleWidth),i.backgroundCanvas||(h="ca",h+="nvas",n=i.backgroundCanvas=document.createElement(h),t.appendChild(n),P(n),(l=i.canvasShim=document.createElement("div")).className="stx-canvas-shim",t.appendChild(l),r=i.canvas=document.createElement("canvas"),t.appendChild(r),P(r),i.context=r.context,s=i.tempCanvas=document.createElement("canvas"),t.appendChild(s),P(s,!0),o=this.floatCanvas=document.createElement("canvas"),t.appendChild(o),P(o,!0)),this.resizeCanvas(),e.isAndroid&&(c=function(t){a.F3x(),t.preventDefault&&t.preventDefault()},s.addEventListener("touchstart",c,{passive:!1}),o.addEventListener("touchstart",c,{passive:!1})),u=this.panels,i.panel.display=i.symbol,a.F3v(),i.symbolDisplay&&(i.panel.display=i.symbolDisplay),this.adjustPanelPositions(),i.panel=u[i.name],u){d=u[k].yaxisLHS.concat(u[k].yaxisRHS);for(var w=0;w<d.length;w++)d[w].height=u[k].yAxis.height,this.calculateYAxisMargins(d[w])}var M;for(var T in this.initialWhitespace=this.preferences.whitespace,i.dataSet&&i.dataSet.length>0&&(i.scroll=Math.floor(i.width/this.layout.candleWidth),p=Math.round(this.preferences.whitespace/this.layout.candleWidth),i.scroll-=p),e.touchDevice&&(g=".ove",g+="rlayTrashCan",m=t.querySelector(".overlayEdit"),f=t.querySelector(".overlayText"),y=t.querySelector(g),v=t.querySelector(".vectorTrashCan"),b=function(t,e,i,r){return a.F3v(),function(a){t.deleteHighlighted(e,i,r)}},f&&e.safeClickTouch(f,b(this,!0,!1,!0)),m?(e.safeClickTouch(m,b(this,!0,!0,!1)),y&&e.safeClickTouch(y,b(this,!1))):y&&e.safeClickTouch(y,b(this,!0)),v&&e.safeClickTouch(v,b(this,!0))),this.manageTouchAndMouse&&this.registerTouchAndMouseEvents(),this.handleMouseOut&&(t.onmouseout=(M=this,function(t){M.handleMouseOut(t)}),e.smartHover(t.ownerDocument)),this.abortDrawings&&this.abortDrawings(),this.undoStamps=[],u)(x=u[T]).markerHolder&&(t.removeChild(x.markerHolder),x.markerHolder=null);for(var F in this.plugins)(S=this.plugins[F]).display&&S.initializeChart&&S.initializeChart(this);this.resizeListenerInitialized||(C="res",C+="i",C+="ze",A=this,this.resizeListenerInitialized=!0,D=function(){return a.F3x(),function(t){A.resizeChart()}},this.addDomEventListener(t.ownerDocument.defaultView,C,D(),!0)),i.baseline.userLevel&&(i.baseline.userLevel=null),this.setResizeTimer(),this.runAppend("initializeChart",arguments)}function P(t,e){var i;a.F3x(),t.context=t.getContext("2d"),t.context.lineWidth=1,(i=t.style).position="absolute",i.left="0px",e&&(i.display="none")}},e.ChartEngine.prototype.destroy=function(){var t,i,r;this.setResizeTimer(0),this.detachQuoteFeed&&this.detachQuoteFeed(),this.styles={};for(var n=0;n<this.eventListeners.length;n++)(t=this.eventListeners[n]).element.removeEventListener(t.event,t.function,t.options);this.touchAndMouseEventsRegistered=!1,this.eventListeners=[],this.streamParameters.timeout&&clearTimeout(this.streamParameters.timeout),r=(i=e.ChartEngine.registeredContainers).indexOf(this.chart.container),a.F3v(),r>-1&&i.splice(r,1),this.destroyed=!0,this.dispatch("destroy",{stx:this})},e.ChartEngine.registerGlobalEvent("unload",(function(){e.ChartEngine.registeredContainers.slice(0).forEach((t=>{if(t.ownerDocument===this.document)try{t.stx.destroy(),t.stx=null}catch(t){}})),a.F3x(),e.ChartEngine.globalEventHandlers.forEach((t=>{var e;if((e=t.applied.indexOf(this.document))>-1)try{t.applied.splice(e)}catch(t){}})),this.document.body.innerHTML=""}),!1,!0),e.ChartEngine.prototype.preAdjustScroll=function(t){a.F3x(),t||(t=this.chart),this.previousAdjust={chart:t,scroll:t.scroll,maxTicks:t.maxTicks}},e.ChartEngine.prototype.postAdjustScroll=function(){var t;this.previousAdjust&&((t=this.previousAdjust.chart).scroll=this.previousAdjust.scroll+(t.maxTicks-this.previousAdjust.maxTicks),this.displayInitialized&&this.draw())},e.ChartEngine.prototype.translateIf=function(t){return a.F3v(),this.translationCallback?this.translationCallback(t,this.preferences.language):t},e.ChartEngine.prototype.doCleanupDates=function(t,r){var n,s,o,l,h;if(t&&t.length)for(var c=0;c<t.length;c++)((s=(n=t[c]).DT)||n.Date)&&(n.DT&&"[object String]"==Object.prototype.toString.call(s)&&s.length<=10?(s=new Date(s)).setMinutes(s.getMinutes()+s.getTimezoneOffset()):(o=!0,n.DT||(s=e.strToDateTime(n.Date),n.Date.length<=10&&(o=!1)),"[object Date]"!=Object.prototype.toString.call(s)&&(s=new Date(s)),i.Date&&this.dataZone&&o&&(l=new i.Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),this.dataZone),h=1e3*s.getSeconds()+s.getMilliseconds(),s=new Date(l.getTime()+h)),e.ChartEngine.isDailyInterval(r)&&(a.k73(21),s.setHours(a.b0A(0,"0"),0,0,0))),n.DT||(n.Date=e.yyyymmddhhmmssmmm(s)),n.DT=s)},e.ChartEngine.prototype.doCleanupGaps=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y;if("g","a","p",!t||!t.length)return t;if(n=this.layout.interval,r=r||{},i||(i=this.chart),!e.Market||!i.market)return t;if(r.noCleanupDates||this.doCleanupDates(t,n),!1===(s=r.cleanupGaps))return t;if(s&&!0!==s||(s=this.cleanupGaps||s),a.D19(98),o=a.E8o("gap",s),!s)return t;function v(t,i){var n,s,l,u,d;for(void 0===(s=(n=r.field)?c[n]:c)&&(s={}),l=o?null:s[g],u=o?null:s.Adj_Close,a.F3v();+t<+i;)d={DT:t},n||(h.push(d),e.extend(d,{Open:l,High:l,Low:l,Close:l,Volume:0,Adj_Close:u})),t=p.next()}if("tick"==n)return t;if("month"==n||"week"==n){if(this.dontRoll)return t;n="day"}function b(t,i){var n,s,l;(n=r.field)?void 0!==t[n]&&void 0===i[n]&&(i[n]=o?null:t[n]):o||(s=t[g],a.F3v(),l=i[g],void 0!==s&&void 0===l&&e.ensureDefaults(i,{Close:s,Open:s,High:s,Low:s,Volume:0,Adj_Close:t.Adj_Close}))}l=function(t){if(t.DT)return"[object Dat","e]","[object Date]"!=Object.prototype.toString.call(t.DT)?new Date(t.DT):new Date(+t.DT);a.F3x();for(var i=1;-1738512624!==a.A5b(i.toString(),i.toString().length,12806);i++)return e.strToDateTime(t.Date);return-876831319!==a.A5b(2..toString(),2..toString().length,68188)?e.strToDateTime(t.Date):void 0},h=[],c=t[0],h.push(c),u={begin:l(c),interval:n,periodicity:1,timeUnit:this.layout.timeUnit},d=new e.Market(i.market.market_def),p=d.newIterator(u),this.extendedHours&&this.extendedHours.filter&&p.market.enableAllAvailableSessions(),g=i.defaultPlotField;for(var x=0;x<t.length&&void 0===t[x][g];x++)if(void 0!==t[x].Value){g="Value";break}for(var S=1;S<t.length;S++){for(f=t[S],(m=p.next())<(y=l(f))&&(v(m,y),m=p.market._convertFromMarketTZ(p.begin,p.outZone));y<m;){if(++S==t.length)return h;b(c,f),h.push(f),c=f,y=l(f=t[S])}m<y?(S--,m=p.previous()):(b(c,f),h.push(f),c=f)}return h},e.ChartEngine.prototype.getCreatingLibrary=function(){return t}},P=t=>{var e;(e=t.CIQ).ChartEngine.Panel=function(t,i){this.yAxis=i||new e.ChartEngine.YAxis,this.name=t,this.state={}},e.extend(e.ChartEngine.Panel.prototype,{name:null,display:null,chart:null,yAxis:null,shareChartXAxis:null,top:null,bottom:null,height:null,percent:null,displayEdgeIfPadded:!0,noDrag:!1,exportable:!0},!0),e.ChartEngine.prototype.whichPanel=function(t){var e;for(var i in this.panels)if(!(e=this.panels[i]).hidden&&t>=e.top&&t<e.bottom)return e;return null},e.ChartEngine.prototype.panelExists=function(t){for(var e in this.panels)if(this.panels[e].name==t)return!0;return!1},e.ChartEngine.prototype.storePanels=function(){var t,e,i;t=2;for(var a=1;-1012802378!==V.A5b(a.toString(),a.toString().length,72478);a++)+this.layout&&(this.layout={}),e=this.layout,t+=2;for(var r in-456794194!==V.A5b(t.toString(),t.toString().length,46713)&&(this.layout||(this.layout={}),e=this.layout),e.panels={},this.panels)i=this.panels[r],e.panels[i.name]={percent:i.percent,display:i.display,yAxis:i.yAxis}},e.ChartEngine.prototype.savePanels=function(t){var e;V.F3x(),e=2;for(var i=1;1957734915!==V.A5b(i.toString(),i.toString().length,16657);i++)this.storePanels(),e+=2;-475050123!==V.A5b(e.toString(),e.toString().length,67092)&&this.storePanels(),!1!==t&&this.changeOccurred("layout")},e.ChartEngine.prototype.privateDeletePanel=function(t){var e,i;for(var a in this.layout.studies)(e=this.layout.studies[a]).panel==t.name&&this.cleanupRemovedStudy(e);for(var r in delete this.panels[t.name],this.overlays)this.overlays[r].panel==t.name&&(this.layout.studies&&this.cleanupRemovedStudy(this.layout.studies[r]),delete this.overlays[r]);for(var n in this.chart.series)this.chart.series[n].parameters.panel==t.name&&this.removeSeries(this.chart.series[n],this.chart);if(t.holder&&(this.chart.container.removeChild(t.holder),this.getMarkerArray)){i=this.getMarkerArray("panelName",t.name);for(var s=0;s<i.length;s++)this.removeFromHolder(i[s])}t.handle&&t.handle.remove(),V.F3v(),this.currentPanel=null},e.ChartEngine.prototype.plotsInPanel=function(t){var e,i,a,r;for(var n in e=[],i=t,"object"==typeof t&&(i=t.name),this.layout.studies)i===(a=this.layout.studies[n]).panel&&e.push(a);for(var s in this.chart.seriesRenderers)i===(r=this.chart.seriesRenderers[s]).params.panel&&e.push(r);return e},e.ChartEngine.prototype.checkForEmptyPanel=function(t,e,i){var a,r;if(!t)return!1;if(a=t,"object"==typeof t&&(a=t.name),a===this.chart.name)return!1;i?i instanceof Array||(i=[i]):i=[],V.F3x(),r=this.plotsInPanel(t);for(var n=0;n<r.length;n++)if(-1==i.indexOf(r[n]))return!1;return e||this.panelClose(this.panels[a]),!0},e.ChartEngine.prototype.panelClose=function(t){var i,a;if(i="p",V.F3v(),i+="ane",i+="lClo",i+="se",t&&!this.runPrepend(i,arguments)){if(this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,t.soloing&&this.panelSolo(t),this.charts[t.name]){for(var r in this.panels)(a=this.panels[r]).chart.name==t.name&&this.privateDeletePanel(a);delete this.charts[t.name]}else this.privateDeletePanel(t);this.currentlyImporting||(this.showCrosshairs(),this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()),this.userPointerDown=this.grabbingScreen=!1,this.openDialog&&(this.openDialog=""),this.runAppend("panelClose",arguments)}},e.ChartEngine.prototype.deleteAllPanels=function(){var t,e,i=V;for(var a in this.panels)t=this.panels[a],this.privateDeletePanel(t);i.D19(48),e=i.b0A("2",0);for(var r=1;161573721!==i.j0V(r.toString(),r.toString().length,556);r++)this.layout.panels={},e+=2;1703993127!==i.A5b(e.toString(),e.toString().length,43111)&&(this.layout.panels={}),i.F3v(),this.panels={}},e.ChartEngine.prototype.panelUp=function(t){var i,a,r,n;for(r in this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==t.name)break;a++}if(a){for(r in n=0,this.panels)n==a-1&&(i[t.name]=t),r!=t.name&&(i[r]=this.panels[r],n++);this.panels=i,this.adjustPanelPositions(),this.draw(),V.F3x(),this.savePanels()}},e.ChartEngine.prototype.panelDown=function(t){var i,a,r,n,s;for(r in this.cancelTouchSingleClick=!0,e.ChartEngine.drawingLine=!1,this.showCrosshairs(),i={},a=0,this.panels){if(r==t.name)break;a++}for(r in n=0,this.panels)n++;if(a!=n-1){for(r in s=0,this.panels)r!=t.name?(i[r]=this.panels[r],s==a+1&&(i[t.name]=t),s++):s++;this.panels=i,this.adjustPanelPositions(),this.draw(),this.savePanels()}},e.ChartEngine.prototype.panelSolo=function(t){var i,a,r;if(this.cancelTouchSingleClick=!0,V.F3v(),e.ChartEngine.drawingLine=!1,this.showCrosshairs(),i=!0,t.soloing){if(i=!1,t.soloing=!1,t.solo.classList.remove("stx_solo_lit"),t.percent=t.oldPercent,"chart"!=t.name)if(this.soloPanelToFullScreen){if(1==t.percent)for(a in this.panels)(r=this.panels[a])!=t&&(t.percent-=r.percent)}else this.chart.panel.percent=this.chart.panel.oldPercent;this.soloPanelToFullScreen&&(this.xAxisAsFooter=this.chart.panel.oldXAxisAsFooter)}else if(t.soloing=!0,t.solo.classList.add("stx_solo_lit"),t.oldPercent=t.percent,this.chart.panel.oldXAxisAsFooter=this.xAxisAsFooter,"chart"!=t.name)if(this.soloPanelToFullScreen)this.xAxisAsFooter=!0;else{this.chart.panel.oldPercent=this.chart.panel.percent,V.k73(39);var n=V.E8o(18,15,15,494);t.percent=n-this.chart.panel.percent}for(a in this.panels)t!==this.panels[a]&&("chart"!==a||this.soloPanelToFullScreen)&&(this.panels[a].hidden=i);this.resetDynamicYAxis({noRecalculate:!0}),this.calculateYAxisPositions(),this.draw(),this.savePanels()},e.ChartEngine.prototype.calculatePanelPercent=function(t){var e;e=t.bottom-t.top,this.isPanelWithXAxis(t)&&(e-=this.xaxisHeight),t.percent=e/(this.chart.canvasHeight-this.xaxisHeight)},e.ChartEngine.prototype.resizePanels=function(){var t,i,a,r,n,s,o=V;if(e.ChartEngine.resizingPanel){for(var l in n=e.ChartEngine.crosshairY>this.resolveY(e.ChartEngine.resizingPanel.top),this.panels){if(this.panels[l]==e.ChartEngine.resizingPanel)break;this.panels[l].hidden||(t=this.panels[l])}if(s=this.backOutY(e.ChartEngine.crosshairY),n)for(a=e.ChartEngine.resizingPanel.yaxisLHS.concat(e.ChartEngine.resizingPanel.yaxisRHS),r=0;r<a.length;r++){o.D19(19);var h=o.E8o(1,9);i=a[r].initialMarginTop+a[r].initialMarginBottom+h,s>a[r].bottom-i&&(s=a[r].bottom-i)}else for(a=t.yaxisLHS.concat(t.yaxisRHS),r=0;r<a.length;r++){o.D19(123);var c=o.b0A(0,108,7,8,18);i=a[r].initialMarginTop+a[r].initialMarginBottom+c,s<a[r].top+i&&(s=a[r].top+i)}e.ChartEngine.crosshairY=this.resolveY(s),t.bottom=s,e.ChartEngine.resizingPanel.top=s,this.calculatePanelPercent(t),this.calculatePanelPercent(e.ChartEngine.resizingPanel),this.adjustPanelPositions(),o.F3x(),this.draw(),this.savePanels()}},e.ChartEngine.prototype.isPanelAboveChart=function(t){for(var e in this.panels){if("chart"==e)return!1;if(e==t.name)return!0}return!1},e.ChartEngine.prototype.isPanelWithXAxis=function(t){return V.F3x(),this.xAxisAsFooter&&t===Object.values(this.panels).filter((function(t){return!t.hidden})).pop()||!this.xAxisAsFooter&&t===this.chart.panel},e.ChartEngine.prototype.adjustPanelPositions=function(){var t,i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M=V,{chart:T,panels:F}=this;if(T.tempCanvas&&e.clearCanvas(T.tempCanvas,this),!this.runPrepend("adjustPanelPositions",arguments)){for(o in t=0,i=T.canvasHeight-this.xaxisHeight,a=!1,r=0,n=0,s=!1,F)l=F[o],(isNaN(l.percent)||l.percent<=0)&&(l.percent=.05),l.hidden||(r+=l.percent,n++,l.soloing&&(s=!0));for(o in F)if(h=0,(l=F[o]).hidden)l.markerHolder&&(l.markerHolder.style.display="none");else{if(this.manageTouchAndMouse&&(l.up&&(a?this.displayIconsUpDown&&l.up.classList.add("stx-show"):(a=!0,l.up.classList.remove("stx-show"))),l.solo&&(s?(c="stx-",c+="show",l.soloing&&this.displayIconsSolo?l.solo.classList.add("stx-show"):l.solo.classList.remove(c)):1==n?l.solo.classList.remove("stx-show"):2!=n||this.soloPanelToFullScreen?this.displayIconsSolo&&l.solo.classList.add("stx-show"):(u="stx-",u+="s",u+="ho",u+="w",l.solo.classList.remove(u))),l.down&&(1==n?l.down.classList.remove("stx-show"):this.displayIconsUpDown&&l.down.classList.add("stx-show")),l.edit&&(d="s",d+="t",d+="x-show",l.editFunction?l.edit.classList.add(d):l.edit.classList.remove("stx-show")),l.close&&(this.displayIconsClose?l.close.classList.add("stx-show"):l.close.classList.remove("stx-show"))),l.percent=l.percent/r,l.top=t,l.bottom=l.top+i*l.percent,this.isPanelWithXAxis(l)&&(l.bottom+=this.xaxisHeight),l.height=l.bottom-l.top,l.chart.name==l.name&&(l.chart.top=l.top,l.chart.bottom=l.bottom,l.chart.height=l.height),l.height<27?(p="stx-panel",p+="-is-min-height",l.holder.classList.add(p)):l.holder.classList.remove("stx-panel-is-min-height"),t=l.bottom,l.yaxisLHS){g=l.yaxisLHS.concat(l.yaxisRHS);for(var P=0;P<g.length;P++)(m=g[P]).zoom&&m.height>0&&(h=m.zoom/m.height),this.adjustYAxisHeightOffset(l,m),m.height=m.bottom-m.top,h&&(m.scroll*=h*m.height/m.zoom,m.zoom=h*m.height,m.zoom>=m.height&&(m.zoom=0,m.scroll=0)),m.high||0===m.high||(m.high=100,m.low=0,m.shadow=100),m.multiplier=m.height/m.shadow,"none"===m.position&&this.calculateYAxisMargins(m)}l.holder&&(f="0",f+="p",f+="x",y="p",y+="x",v="p",v+="x",b="0",b+="p",b+="x",x="0",x+="px",l.holder.style.right=x,l.holder.style.top=l.top+"px",l.holder.style.left=b,l.holder.style.height=l.height+"px",l.subholder.style.left=l.left+v,l.subholder.style.width=l.width+y,l.subholder.style.top=f,l.yAxis.height>=0&&(l.subholder.style.height=l.yAxis.height+"px"))}if(o&&F[o].down&&F[o].down.classList.remove("stx-show"),this.manageTouchAndMouse&&2==n&&!s&&T.panel.solo&&(S="stx-s",S+="how",T.panel.solo.classList.add(S)),T.panel){if(C="p",C+="x",s&&this.soloPanelToFullScreen){M.D19(49);var _=M.E8o(32,30,10);A=T.canvasHeight-l.yAxis.bottom+_}else{M.D19(88);var L=M.E8o(204,1,216);A=T.canvasHeight-T.panel.yAxis.bottom+L}D=this.controls;var{chartControls:E,home:I,notificationTray:N}=D;k=this.width-T.panel.right,E&&(M.k73(19),E.style.bottom=M.b0A(A,C)),I&&(w="p",w+="x",M.D19(19),I.style.bottom=M.E8o(A,"px"),M.k73(19),I.style.marginRight=M.b0A(k,w)),N&&(M.D19(19),N.style.bottom=M.E8o(A,"px"),M.D19(19),N.style.marginRight=M.E8o(k,"px"))}this.clearPixelCache(),this.drawingObjects.length&&this.adjustDrawings(),this.runAppend("adjustPanelPositions",arguments)}},e.ChartEngine.prototype.createPanel=function(t,e,i,a,r,n){var s,o,l,h,c,u=V;if(!this.runPrepend("createPanel",arguments)){for(var d in a||(a="chart"),u.F3v(),s=this.chart.canvasHeight,i||(u.k73(102),i=u.E8o("0.2",s)),i>s&&(u.k73(17),i=u.b0A(.5,s)),u.D19(26),o=u.b0A(i,s),u.D19(6),l=u.b0A(1,o),h=!1,this.panels)(c=this.panels[d]).percent*=l,c.soloing&&(h=!0);return this.stackPanel(t,e,o,a,r),this.panels[e].hidden=h,this.panels[e].exportable=!n,this.calculateYAxisMargins(this.panels[e].yAxis),this.adjustPanelPositions(),this.savePanels(!1),this.runAppend("createPanel",arguments),this.panels[e]}},e.ChartEngine.prototype.modifyPanel=function(t,i){var a,r,n,s,o,l,h,c;a=t.name;var{studies:u}=this.layout,{series:d}=this.chart,{name:p,display:g,yAxis:m}=i||{};for(var f in p||(p=e.uniqueID()),g||(g=p),m||((m=t.yAxis).name=p),r={},this.panels)f===t.name?((n=this.panels[f]).name=p,n.display=g,n.yAxis=m,t=r[p]=n,this.moveMarkers&&a!==p&&this.moveMarkers(a,p)):r[f]=this.panels[f];for(var y in this.panels=r,s=!1,u)(o=u[y]).panel===a&&(o.panel=p,o.parameters&&o.parameters.panelName&&(s=!0,o.parameters.panelName=p));for(var v in d)d[v].parameters.panel===a&&(s=!0,l={panel:p},d[v].parameters.yAxis&&d[v].parameters.yAxis.name===a&&(l.yAxis=m),this.modifySeries(v,l,!0));s&&this.changeOccurred("layout"),h=!1;for(var b=0;b<this.drawingObjects.length;b++)a===(c=this.drawingObjects[b]).panelName&&(c.panelName=p,h=!0);h&&this.changeOccurred("vector"),this.calculateYAxisPositions()},e.ChartEngine.prototype.setPanelHeight=function(t,e){var i,a,r,n,s=V;if(e){Object.values(this.panels).slice(-1)[0]===t&&(e+=this.xaxisHeight);var{canvasHeight:o}=this.chart,{percent:l}=t;i=e/(o-this.xaxisHeight),s.D19(6),a=s.b0A(1,l),s.F3x(),s.k73(124),r=s.E8o("1",i),s.D19(26),n=s.E8o(a,r),Object.values(this.panels).forEach((t=>{s.F3x(),t.percent/=n})),t.percent=i,this.adjustPanelPositions(),this.savePanels()}},e.ChartEngine.prototype.electNewPanelOwner=function(t,i){var a,r,n,s,o,l,h,c;if("string"==typeof t&&(t=this.panels[t]),r=t.yAxis,V.F3x(),t&&t!=this.chart.panel){if((s=(n=t.yAxis).studies[0])&&s!=r.name||(s=n.renderers[0]),s&&s!=r.name||(s=n.studies[1]),s||(s=n.renderers[1]),i)n=t.yAxis=i,a=i.name;else if(s)(n=this.addYAxis(t,new e.ChartEngine.YAxis({name:s,position:n.position}))).renderers=t.yAxis.renderers,n.studies=t.yAxis.studies,a=s;else if(t.yaxisLHS){l=(o=t.yaxisRHS.concat(t.yaxisLHS).filter((function(t){return t.name!=r.name})))[0];for(var u=0;u<o.length;u++)if(!o[u].position){l=o[u];break}l&&(n=t.yAxis=l,a=l.studies[0]||l.renderers[0])}a?(s=a,r.name!=t.name&&(s=t.name),(c=this.layout.studies)&&c[a]&&(h=c[a].inputs.display),this.modifyPanel(t,{name:s,display:h||a,yAxis:n}),this.deleteYAxisIfUnused(t,r),this.panels[s].yAxis.lockScale||this.calculateYAxisMargins(this.panels[s].yAxis)):this.checkForEmptyPanel(t)}return a},e.ChartEngine.prototype.configurePanelControls=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g;(".s","tx-ico-","close",".s","t","x-ico-down",".st","x-ico-focu","s","icons","T","e","mplate",i=t.icons)&&(a=t.name==t.chart.name,i.classList.add("stx-show"),i.classList.remove("iconsTemplate"),t.title=i.querySelector(".stx-panel-title"),t.up=i.querySelector(".stx-ico-up"),t.up&&(t.up=t.up.parentNode),t.solo=i.querySelector(".stx-ico-focus"),t.solo&&(t.solo=t.solo.parentNode),t.down=i.querySelector(".stx-ico-down"),t.down&&(t.down=t.down.parentNode),t.edit=i.querySelector(".stx-ico-edit"),t.edit&&(t.edit=t.edit.parentNode),t.close=i.querySelector(".stx-ico-close"),t.close&&(t.close=t.close.parentNode),t.title&&(t.title.innerHTML="",t.display&&t.title.appendChild(document.createTextNode(t.display)),a&&(t.title.classList.add("chart-title"),i.classList.add("stx-chart-panel"))),e.touchDevice&&!e.isSurface||this.makeModal(i),t.handle&&("touch","start",e.touchDevice&&!e.isSurface||(t.handle.onmouseover=(s=this,function(){V.F3x(),s.hideCrosshairs()})),e.touchDevice&&!e.isSurface||(t.handle.onmouseout=(n=this,V.F3x(),function(){n.showCrosshairs()})),r=function(t,i){return V.F3v(),function(a){V.F3v(),e.ChartEngine.resizingPanel||""!==t.openDialog||t.grabHandle(i)}},e.isSurface?t.handle.onpointerdown=r(this,t):t.handle.onmousedown=r(this,t),e.touchDevice&&t.handle.addEventListener("touchstart",r(this,t),{passive:!1})),t.up&&e.safeClickTouch(t.up,(o=this,l=t,function(){o.panelUp(l)})),t.down&&e.safeClickTouch(t.down,(h=this,c=t,V.F3v(),function(){V.F3x(),h.panelDown(c)})),t.solo&&e.safeClickTouch(t.solo,(u=this,d=t,V.F3v(),function(){u.panelSolo(d)})),t.close&&("c","h","a","rt","chart"==t.name?t.close.style.display="none":e.safeClickTouch(t.close,(p=this,g=t,V.F3v(),function(){V.F3v(),p.panelClose(g)}))))},e.ChartEngine.prototype.stackPanel=function(t,i,a,r,n){var s,o,l,h,c,u,d,p=V;s="d",s+="i",s+="v",o="st",o+="x-ho",o+="lder",l="di",l+="v",this.runPrepend("stackPanel",arguments)||(r||(r="chart"),h=this.charts[r],p.D19(98),(c=p.b0A(r,i))&&(t=h.symbol,h.symbolDisplay&&(t=h.symbolDisplay),n||(n=h.yAxis)),u=this.panels[i]=new e.ChartEngine.Panel(i,n),!c&&h.yAxis&&u.yAxis.position==h.yAxis.position&&(u.yAxis.width=h.yAxis.width),c&&!h.panel&&(h.panel=u),u.percent=a,u.chart=h,u.display=t,u.holder=e.newChild(this.container,l,o),u.subholder=e.newChild(u.holder,s,"stx-subholder"),p.D19(48),u.subholder.style.zIndex=p.b0A("1",1),u.holder.panel=u,d=c?"stx-panel-chart":"stx-panel-study",u.holder.classList.add(d),this.controls.handleTemplate&&this.manageTouchAndMouse&&(u.handle=this.controls.handleTemplate.cloneNode(!0),u.handle.classList.remove("handleTemplate"),this.container.appendChild(u.handle),u.handle.panel=u),this.controls.iconsTemplate&&(u.icons=this.controls.iconsTemplate.cloneNode(!0),u.subholder.appendChild(u.icons),this.configurePanelControls(u)),this.currentlyImporting||this.resizeCanvas(),this.runAppend("stackPanel",arguments))},e.ChartEngine.prototype.setPanelEdit=function(t,i){t.editFunction=i,t.edit&&e.safeClickTouch(t.edit,i),this.adjustPanelPositions()},e.ChartEngine.prototype.drawPanels=function(){var t,e,i,a,r,n,s,o,l,h,c,u,d,p,g;if(t="dr",t+="awPanels",!this.runPrepend(t,arguments)){for(var m in e=!1,this.panels)if((i=this.panels[m]).state={},a=this.translateIf(i.display),i.title&&i.title.textContent!=a&&(i.title.innerHTML="",i.title.appendChild(document.createTextNode(a))),i.icons&&i.icons.classList.add("stx-show"),i.hidden)r="n",r+="o",r+="n",r+="e",n="non",n+="e",i.icons&&i.icons.classList.remove("stx-show"),i.handle&&(i.handle.style.display=n),i.holder.style.display=r;else if(s="b",s+="l",s+="oc",s+="k","chart"!=i.name&&(o="n",o+="o",o+="n",o+="e",l="no",l+="n",l+="e",h=this.manageTouchAndMouse,i.up&&(i.up.style.display=this.displayIconsUpDown&&h?"":"none"),i.down&&(i.down.style.display=this.displayIconsUpDown&&h?"":"none"),i.solo&&(i.solo.style.display=this.displayIconsSolo&&h?"":"none"),i.close&&(i.close.style.display=this.displayIconsClose&&h?"":l),i.edit&&(i.edit.style.display=i.editFunction&&h?"":o)),i.holder.style.display=s,i.displayEdgeIfPadded&&(c=Math.round(i.left)+.5,u=i.yAxis.top-.5,d=i.yAxis.bottom+.5,i.yaxisCalculatedPaddingLeft&&!i.yaxisTotalWidthLeft&&this.plotLine(c,c,u,d,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1}),c=Math.round(i.right)+.5,i.yaxisCalculatedPaddingRight&&!i.yaxisTotalWidthRight&&this.plotLine(c,c,u,d,this.canvasStyle("stx_grid_border"),"segment",this.chart.context,!1,{lineWidth:1})),e){if(g=i.top,g=Math.round(g)+.5,this.plotLine(i.left-.5,i.right+.5,g,g,this.canvasStyle("stx_panel_border"),"segment",this.chart.context,!1,{}),i.handle){this.displayPanelResize?i.handle.style.display="":i.handle.style.display="none",V.k73(109);var f=V.E8o(7,18,13,10);i.handle.style.top=g-i.handle.offsetHeight/f+"px"}}else p="no",p+="n",p+="e",i.handle&&(i.handle.style.display=p),e=!0;this.runAppend("drawPanels",arguments)}}},_=t=>{var e;(e=t.CIQ).ChartEngine.isDailyInterval=function(t){return"d","a","y","day"==t||(V.F3v(),"week"==t||"month"==t)},e.ChartEngine.prototype.setPeriodicity=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b=V;if(a="f",a+="u",a+="nctio",a+="n",r="setPeriodic",r+="it",r+="y",!this.runPrepend(r,arguments)){if("object"!=typeof arguments[0]){t={period:arguments[0],interval:arguments[1],timeUnit:arguments[2]},b.D19(123);var x=b.E8o(6,266,11,8,19);i=arguments[arguments.length-x],3===arguments.length&&(t.timeUnit=void 0)}var{period:S,interval:C,timeUnit:A}=t;typeof i!==a&&(i=null),({period:S,interval:C,timeUnit:A}=e.cleanPeriodicity(S,C,A));var{layout:D}=this;D.setSpan={},D.range={},this.chart.inflectionPoint=null,n=!1,this.chart.symbol&&(n=this.needDifferentData({period:S,interval:C,timeUnit:A})),b.F3v();var{candleWidth:k,periodicity:w,interval:M,timeUnit:T}=D;if(s={prvPeriodicity:w,prvInterval:M,prvTimeUnit:T},D.periodicity=S,D.interval=C,D.timeUnit=A,l={stx:o=this,differentData:n,prevPeriodicity:s},n){if(this.changeOccurred("layout"),this.clearCurrentMarketData(),this.quoteDriver)for(var F in this.charts)(h=this.charts[F]).symbol&&(this.displayInitialized?this.quoteDriver.newChart({symbol:h.symbol,symbolObject:h.symbolObject,chart:h},H):this.loadChart(h.symbol,{chart:h},H));else this.dataCallback?(this.dataCallback(),H()):console.log("cannot change periodicity because neither dataCallback or quoteDriver are set");this.home()}else{for(var P in this.charts){c=this.charts[P];var{dataSegment:_,dataSet:L,maxTicks:E,scroll:I}=c;if(u=_?_.length:0,d=L?L.length:0,p=void 0,g=Math.round(c.maxTicks/2),this.setCandleWidth(k,c),m=!0,f=!1,I<=E?m=!1:_&&!_[g]&&(m=!1,b.D19(6),f=b.b0A(I,d)),m&&u>0&&(E<(Math.round(this.chart.width/k-.499)-1)/2&&(b.k73(6),g=b.E8o(u,1)),g>=u?(p=_[u-1].DT,b.D19(6),g=b.b0A(u,1)):p=_[g].DT),this.createDataSet(),m){if(u>0)for(var N=d-1;N>=0;N--)if(L[N].DT.getTime()<p.getTime()){b.D19(11),c.scroll=b.b0A(1,g,d,N);break}}else f?c.scroll=L.length+f:(y=Math.round(this.preferences.whitespace/k),b.k73(125),c.scroll=b.E8o(E,"1",y))}if(this.displayInitialized&&this.draw(),this.changeOccurred("layout"),this.quoteDriver)for(var O in this.charts)!(v=this.charts[O]).symbol||!v.moreAvailable&&v.upToDate||this.quoteDriver.checkLoadMore(v);H(),this.runAppend("setPeriodicity",arguments)}}function H(){o.dispatch("periodicity",l),i&&i(null)}},V.F3x(),e.ChartEngine.prototype.needDifferentData=function(t){var i,a,r,n;return"min","u","te",i=this.layout,a=e.ChartEngine.isDailyInterval(t.interval),r=e.ChartEngine.isDailyInterval(i.interval),n=!1,this.dontRoll||!r?i.interval!=t.interval&&(n=!0):a!=r&&(n=!0),a||t.timeUnit||(t.timeUnit="minute"),r||i.timeUnit||(i.timeUnit="minute"),t.timeUnit!=i.timeUnit&&(n=!0),this.masterData&&this.masterData.length||(n=!0),n},e.ChartEngine.prototype.getPeriodicity=function(){var t,e,i;return e=(t=this.layout).interval,(i=t.timeUnit)||(i=e,e=1),{period:t.periodicity,interval:e,timeUnit:i}}},V.F3x(),L=t=>{var e,i=V;(e=t.CIQ).ChartEngine.prototype.isHistoricalMode=function(){var t,i,a,r,n,s;return t=new Date,i=!0,a=this.masterData,!!this.isHistoricalModeSet&&(a.length&&("D","T",r=this.getFirstLastDataRecord(a,"DT",!0),(i=((n=this.standardMarketIterator(r.DT))?n.next():r.DT)<=t)&&e.ChartEngine.isDailyInterval(n.interval)&&(s=this.chart.market.getOpen())&&t<s&&(t.setHours(0,0,0,0),+t==+n.begin&&(i=!1))),i)},e.ChartEngine.prototype.isHome=function(){var t,e,a;e=(t=this.chart).dataSet,a=t.animatingHorizontalScroll,i.k73(126);var r=i.E8o(2,338,15,16,20);return this.pixelFromTick(e.length-(a?"2"|r:1),t)<t.width+t.panel.left},e.ChartEngine.prototype.getPreviousBar=function(t,e,a){return i.F3v(),this.getNextBarInternal(t,e,a,-1)},e.ChartEngine.prototype.getNextBar=function(t,e,a){for(var r=1;1649784510!==i.A5b(r.toString(),r.toString().length,7667);r++)return this.getNextBarInternal(t,e,a,8);return 1540268364!==i.j0V(2..toString(),2..toString().length,44756)?this.getNextBarInternal(t,e,a,8):this.getNextBarInternal(t,e,a,1)},e.ChartEngine.prototype.getNextBarInternal=function(t,a,r,n){var s,o,l,h;if(s=t.dataSegment&&t.dataSegment[r],i.F3x(),s)for(o=s.tick;o>0&&o<t.dataSet.length;)if(i.k73(19),o=i.E8o(o,n),(l=t.dataSet[o])&&(h=e.existsInObjectChain(l,a))&&h.obj[h.member])return l;return null},i.F3v(),e.ChartEngine.prototype.getFirstLastDataRecord=function(t,e,a){var r,n;if(t&&t.length)for(r=a?t.length-1:0;r>=0&&r<t.length;){if(t[r]&&void 0!==t[r][e])return t[r];a?r--:r++}i.k73(45),n=i.b0A(32,"2");for(var s=1;497363686!==i.A5b(s.toString(),s.toString().length,33671);s++)return null;if(1843039086!==i.A5b(n.toString(),n.toString().length,29733))return 1},e.ChartEngine.prototype.leftTick=function(){return i.F3v(),this.chart.dataSet.length-this.chart.scroll},e.ChartEngine.prototype.getNextInterval=function(t,e,a){var r;if(e||(e=1),!1!==a&&(a=!0),!(r=this.standardMarketIterator(t,a?this.dataZone:this.displayZone)))return t;if(e<1){-1557002835,1586245493,2;for(var n=1;-1557002835!==i.A5b(n.toString(),n.toString().length,25051);n++)return i.k73(127),r.previous(i.b0A(1,e));if(1586245493!==i.A5b(2..toString(),2..toString().length,4513))return i.k73(106),r.previous(i.E8o(3,e))}return i.F3x(),r.next(e)},e.ChartEngine.prototype.standardMarketIterator=function(t,e,i){var a,r;return(a=i||this.chart).market?(r={begin:t,interval:this.layout.interval,periodicity:"tick"==this.layout.interval?this.chart.xAxis.futureTicksInterval:this.layout.periodicity,timeUnit:this.layout.timeUnit,outZone:e},a.market.newIterator(r)):null}},E=t=>{var e,i,a=V;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,i=t.SplinePlotter,e.ChartEngine.prototype.draw=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m;if(i="over",i+="lay",r="Studies.displaySt",r+="udies",this.debug(),!this.destroyed&&(n=this.chart,s=this.layout,n.canvas&&n.dataSet&&n.canvasHeight)){a.k73(118);var f=a.b0A(0,16,6,12);if(this.offset=s.candleWidth*this.candleWidthPercent/f,e.clearCanvas(n.canvas,this),this.masterData&&!this.runPrepend("draw",arguments)){this.defaultColor||this.getDefaultColor(),this.vectorsShowing=!1,this.drawPanels(),this.yAxisLabels=[],this.correctIfOffEdge(),this.createDataSegment(),this.setBaselines(n),h=this.createXAxis(n),this.initializeDisplay(n),this.drawXAxis(n,h);try{this.renderYAxis(n)}catch(t){if(t&&"reboot draw"===t.message)return this.draw();throw t}for(o in this.currentHRParams=this.getCurrentHRParams(),this.drawCurrentPriceLine(),n.tmpWidth=Math.floor(s.candleWidth*this.candleWidthPercent),n.tmpWidth%2==0&&(a.k73(29),n.tmpWidth+=a.b0A("1",32),n.tmpWidth>s.candleWidth&&(n.tmpWidth-=2)),n.tmpWidth<.5&&(n.tmpWidth=.5),this.plugins)(l=this.plugins[o]).display&&l.drawUnder&&l.drawUnder(this,n);for(o in n.legend&&(n.legend.colorMap=null),this.controls.baselineHandle&&(this.controls.baselineHandle.style.display="none"),this.rendererAction(n,"underlay"),e.getFn("Studies.displayStudies")(this,n,!0),this.displayChart(n),e.getFn(r)(this,n,!1),this.rendererAction(n,i),n.legend&&n.legend.colorMap&&n.legendRenderer&&n.legendRenderer(this,{chart:n,legendColorMap:n.legend.colorMap,coordinates:{x:n.legend.x,y:n.legend.y+n.panel.yAxis.top}}),this.plugins)(l=this.plugins[o]).display&&l.drawOver&&l.drawOver(this,n);for(var y in this.panels)this.panels[y].hidden||this.plotYAxisText(this.panels[y]);for(var v=0;v<this.yAxisLabels.length;v++)c="s",c+="e",c+="r",c+="ies",(u=this.yAxisLabels[v]).src==c&&u.args[6]&&!1===u.args[6].drawSeriesPriceLabels||this.createYAxisLabel.apply(this,u.args);this.createCrosshairs&&this.createCrosshairs(),this.drawVectors&&this.drawVectors(),this.drawCurrentHR(),this.currentHRParams=null,this.displayInitialized=!0,(d=this.controls)&&(p="n",p+="o",p+="n",p+="e",g=this.manageTouchAndMouse&&!this.mainSeriesRenderer.nonInteractive,d.home&&(d.home.style.display=g&&!this.isHome()?"block":p),d.chartControls&&(m="h",m+="i",m+="dden",d.chartControls.style.display=this.manageTouchAndMouse&&d.chartControls.style.visibility!==m?"block":"none","block"===d.chartControls.style.display&&e.efficientDOMUpdate(d.chartControls.style,"left",n.left+n.width/2+"px"))),e.Marker&&this.positionMarkers(),this.quoteDriver&&this.animations.zoom.hasCompleted&&this.quoteDriver.checkLoadMore(n),this.runAppend("draw",arguments),this.makeAsyncCallbacks()}}},e.ChartEngine.prototype.setSeriesRenderer=function(t){var{baseline:e,name:i,panel:a,yAxis:r}=t.params;return this.chart.seriesRenderers[i]?this.chart.seriesRenderers[i]:(r&&(t.params.yAxis=this.addYAxis(this.panels[a],r),this.resizeChart()),t.stx=this,this.chart.seriesRenderers[i]=t,e&&this.registerBaselineToHelper(t),t)},a.F3v(),e.ChartEngine.prototype.setMainSeriesRenderer=function(t){var i,r,n;a.F3x();var{chartType:s,aggregationType:o}=this.layout,{chart:l}=this,{customChart:h}=l;i=this.mainSeriesRenderer,r=this.displayInitialized,t&&this.setMasterData(),this.displayInitialized=!1,i.removeAllSeries&&i.removeAllSeries(),this.removeSeriesRenderer(i),i=this.mainSeriesRenderer={params:{}},o&&"ohlc"!=o&&(s=o),h&&h.chartType&&(s=h.chartType),"none"!=s&&((n=e.Renderer.produce(s,{panel:l.panel.name,name:"_main_series",highlightable:!1,useChartLegend:!0}))&&(this.setSeriesRenderer(n).attachSeries(null,{display:l.symbol}),i=this.mainSeriesRenderer=n),this.displayInitialized=r,["highLowBars","standaloneBars","barsHaveWidth"].forEach(function(t){l[t]=this.mainSeriesRenderer[t]}.bind(this)))},e.ChartEngine.prototype.removeSeriesRenderer=function(t){var e;a.F3x();var{baseline:i,name:r}=t.params;e=this.controls[`${r} baseline-handle`],i&&(this.removeBaselineFromHelper(t),e&&(this.container.removeChild(e),delete this.controls[e])),delete this.chart.seriesRenderers[r]},e.ChartEngine.prototype.getSeriesRenderer=function(t){return this.chart.seriesRenderers[t]},e.ChartEngine.prototype.getRendererFromSeries=function(t){var e;for(var i in e=this.chart.seriesRenderers)for(var a in e[i].seriesParams)if(e[i].seriesParams[a].id==t)return e[i];return null},e.ChartEngine.prototype.startClip=function(t,e){var i,r,n,s,o;a.F3x(),t||(t=this.chart.panel.name),r=(i=this.panels[t]).yAxis,(n=this.chart).context.save(),n.context.beginPath(),s=i.left,o=i.width,e?(s=0,o=this.width):i.yaxisLHS&&i.yaxisLHS.length&&(s++,o--),n.context.rect(s,r.top,o,r.height),n.context.clip()},e.ChartEngine.prototype.endClip=function(){a.F3v(),this.chart.context.restore()},e.ChartEngine.prototype.setLineStyle=function(t,i){var r,n,s;if(r={},t&&"object"==typeof t){1401058206,-1116916073,n=2;for(var o=1;1401058206!==a.A5b(o.toString(),o.toString().length,20380);o++)r=t,n+=2;-1116916073!==a.j0V(n.toString(),n.toString().length,27381)&&(r=t),r=t}else r.color=t;r.color||r.pattern||r.width||r.baseColor||(r=null),i||(i=this.chart),s=1,r&&r.width&&(s=r.width),r&&r.pattern&&(r.pattern=e.borderPatternToArray(s,r.pattern)),a.F3x(),i.lineStyle=r},e.ChartEngine.prototype.setGapLines=function(t,i){var r;if(i||(i=this.chart),r={},t&&"object"==typeof t)r=t;else{if("boolean"==typeof t)return i.gaplines=t;r.color=t}r.color||r.pattern||r.fillMountain||(r=null),r&&r.pattern&&(r.pattern=e.borderPatternToArray(r.width,r.pattern)),r&&r.width<=0&&(r.width=null),a.F3v(),i.gaplines=r},e.ChartEngine.prototype.getGapColorFunction=function(t,e,i,r,n){return"object"!=typeof i&&(i={color:i}),a.F3v(),function(a,s,o){var l,h;return(l=n?n(a,s,o):i)||(l=i),l.color&&(l=l.color),(h=s[t])||0===h||(h=s[e]),o||!h&&0!==h?r?("object"!=typeof r&&(r="string"==typeof r?{color:r}:{}),{color:r.color||l,pattern:r.pattern||i.pattern,width:r.width||i.width}):null:{color:l,pattern:i.pattern,width:i.width}}},e.ChartEngine.prototype.drawLineChart=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,g,m;return"transpar","ent",s=(n=this.chart).context,o=n.lineStyle||{},l=this.canvasStyle(i),r||(r={}),this.startClip(t.name),(h=r.width||o.width||l.width)&&parseInt(h,10)<=25?s.lineWidth=Math.max(1,e.stripPX(h)):s.lineWidth=1,r.pattern=r.pattern||o.pattern||l.borderTopStyle,r.pattern=e.borderPatternToArray(s.lineWidth,r.pattern),this.canvasColor(i),(c=r.color||o.color)&&("a","u","t","o","auto"==c&&(c=this.defaultColor),r.opacity&&1!==r.opacity&&(c=e.hexToRgba(e.colorToHex(c),parseFloat(r.opacity))),s.strokeStyle=c),r.skipProjections=!0,u=r.field||n.defaultPlotField,d=r.subField||n.defaultPlotField||"Close",(p=r.gapDisplayStyle)||!1===p||(p=r.gaps),p||!1===p||(p=n.gaplines),p||(p="transparent"),r.gapDisplayStyle=p,g=this.getGapColorFunction(u,d,{color:s.strokeStyle,pattern:r.pattern,width:s.lineWidth},p,a),t.chart.tension&&(r.tension=t.chart.tension),(m=this.plotDataSegmentAsLine(u,t,r,g)).colors.length||m.colors.push(s.strokeStyle),s.lineWidth=1,this.endClip(),r.returnObject?m:m.colors},e.ChartEngine.prototype.drawChannelChart=function(t,i,r){var n,s,o,l,h,c,u,d,p,g;for("f","ie","l","d","L",a.F3v(),"o","w","s","u","bFie","ld",(n=Object.assign({},r)).color=r.color,s=this.drawLineChart(t,n.style,i,n),o=n.border_color_up||this.getCanvasColor("stx_channel_up"),l=n.border_color_down||this.getCanvasColor("stx_channel_down"),n[r.field?"subField":"field"]=n.field_high||"High",n.color=o,h=this.drawLineChart(t,n.style,i,n),n[r.field?"subField":"field"]=n.field_low||"Low",n.color=l,c=this.drawLineChart(t,n.style,i,n),n[r.field?"subField":"field"]=r.subField||this.chart.defaultPlotField||"Close",d=[],p=[],u=0;u<h.points.length;u+=2)d.push([h.points[u],h.points[u+1]]);for(u=0;u<c.points.length;u+=2)p.push([c.points[u],c.points[u+1]]);a.D19(11);var m=a.b0A(19,41,0,20);for(g=this.chart.context.lineWidth/m,u=s.points.length-2;u>=0;u-=2)d.push([s.points[u],s.points[u+1]-g]),p.push([s.points[u],s.points[u+1]+g]);return this.startClip(t.name),n.color=o,e.fillArea(this,d,n),n.color=l,e.fillArea(this,p,n),this.endClip(),s.colors=s.colors.concat(h.colors).concat(c.colors),r.returnObject?s:s.colors},e.ChartEngine.prototype.connectTheDots=function(t,i,r,n,s,o){var l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;if(o||(o={}),"none"!=o.pattern&&(!0===s&&(s=this.chart.panel),null==n&&(n=this.chart.context),!(t.length<4))){l=0,h=this.chart.canvasHeight,0,c=this.chart.width,s&&(h=s.yAxis.bottom,l=s.yAxis.top),n.lineWidth=1.1,"object"==typeof i?(n.strokeStyle=i.color,i.opacity?n.globalAlpha=i.opacity:(a.D19(45),n.globalAlpha=a.b0A(64,"1")),n.lineWidth=e.stripPX(i.width)):!i||"auto"==i||e.isTransparent(i)?n.strokeStyle=this.defaultColor:n.strokeStyle=i,o.opacity&&(n.globalAlpha=o.opacity),o.lineWidth&&(n.lineWidth=o.lineWidth),u=e.borderPatternToArray(n.lineWidth,o.pattern),n.beginPath();for(var M=0;M<t.length-2;M+=2){if(d=t[M],a.D19(128),p=t[a.b0A(M,"1")],a.k73(19),g=t[a.E8o(M,2)],a.D19(19),m=t[a.E8o(M,3)],isNaN(d)||isNaN(g)||isNaN(p)||isNaN(m))return;f=0,y=1,a.k73(6),v=a.E8o(g,d),a.k73(6),b=a.E8o(m,p);for(var T=0;T<4;T++){if(0===T&&(x=-v,a.D19(6),S=-a.b0A(0,d)),1==T&&(x=v,a.D19(6),S=a.b0A(c,d)),2==T&&(x=-b,a.k73(6),S=-a.E8o(l,p)),3==T&&(x=b,a.D19(6),S=a.E8o(h,p)),a.D19(26),C=a.b0A(S,x),(m||0===m)&&0===x&&S<0)return!1;if(x<0){if(C>y)return!1;C>f&&(f=C)}else if(x>0){if(C<f)return!1;C<y&&(y=C)}}a.k73(129),A=a.b0A(d,f,v),a.k73(129),D=a.b0A(p,f,b),a.k73(129),k=a.E8o(d,y,v),a.D19(129),w=a.b0A(p,y,b);try{n.setLineDash(u&&u.length?u:[]),n.moveTo(A,D),n.lineTo(k,w)}catch(t){}}n.stroke(),n.closePath(),n.globalAlpha=1,n.lineWidth=1}},e.ChartEngine.prototype.plotSpline=function(t,a,r,n,s,o,l){var h;l||(l={}),"none"!=l.pattern&&(!0===o&&(o=this.chart.panel),null==s&&(s=this.chart.context),s.save(),s.lineWidth=1.1,"object"==typeof r?(s.strokeStyle=r.color,r.opacity?s.globalAlpha=r.opacity:s.globalAlpha=1,s.lineWidth=e.stripPX(r.width)):!r||"auto"==r||e.isTransparent(r)?s.strokeStyle=this.defaultColor:s.strokeStyle=r,l.opacity&&(s.globalAlpha=l.opacity),l.lineWidth&&(s.lineWidth=l.lineWidth),h=e.borderPatternToArray(s.lineWidth,l.pattern),l.pattern&&s.setLineDash&&(s.setLineDash(h),s.lineDashOffset=0),s.beginPath(),i.plotSpline(t,a,s),s.stroke(),s.closePath(),s.restore())},e.ChartEngine.prototype.rawWatermark=function(t,e,i,r){a.F3x(),this.canvasFont("stx_watermark",t),t.fillStyle=this.defaultColor,t.globalAlpha=.5,this.chart.context.textBaseline="alphabetic",t.fillText(r,e,i),t.globalAlpha=1},e.ChartEngine.prototype.watermark=function(t,e){var i,r,n,s,o,l,h,c,u,d;if(i="stx_water",i+="mark",r="stx_waterma",r+="rk",n="t",n+="o",n+="p",e&&"object"!=typeof e&&(e={h:arguments[1],v:arguments[2],text:arguments[3]}),(s=(e={h:e.h||"left",v:e.v||"bottom",text:e.text||"",hOffset:0==e.hOffset?0:e.hOffset||10,vOffset:0==e.vOffset?0:e.vOffset||20,context:e.context||this.chart.context}).context)&&(o=this.panels[t])&&!o.hidden){if(l=o.yAxis.bottom-e.vOffset,e.v==n)l=o.top+e.vOffset;else if("middle"==e.v){a.D19(86);var p=a.E8o(4,3,19,19);l=(o.top+o.yAxis.bottom)/p}if(s.save(),this.canvasFont(r,s),this.canvasColor(i,s),s.textBaseline="alphabetic",h=o.left+e.hOffset,"right"==e.h)h=o.right-e.hOffset;else if("center"==e.h){a.k73(130);var g=a.E8o(12,2,5,5,16);h=(o.right+o.left-s.measureText(e.text).width)/g}s.globalAlpha=.5,c=511314212,u=-1121751264,d=2;for(var m=1;a.A5b(m.toString(),m.toString().length,27863)!==c;m++)this.highlightedDraggable&&(s.globalAlpha*=.3),s.fillText(e.text,h,l),d+=2;a.A5b(d.toString(),d.toString().length,6685)!==u&&(this.highlightedDraggable&&(s.globalAlpha-=676),s.fillText(e.text,h,l)),s.restore()}},e.ChartEngine.prototype.displayErrorAsWatermark=function(t,e){var i,r,n,s,o,l,h,c,u,d;e&&(t||(t="chart"),(i=this.panels[t])&&!i.hidden&&((r=i.state)||(i.state=r={}),(n=r.studyErrors)||(r.studyErrors=n=new Set),n.has(e)||(s=r.watermarkOffset||10,10,o=this.getCanvasFontSize("stx_watermark"),this.chart&&this.chart.chartControls&&(l=i.yAxis.bottom,h=this.chart.chartControls,a.D19(6),c=a.b0A(l,s),a.D19(6),u=a.E8o(c,o),(c>h.offsetTop&&c<h.offsetTop+h.offsetHeight||u>h.offsetTop&&u<h.offsetTop+h.offsetHeight)&&(s=l-h.offsetTop+10)),a.F3x(),n.add(e),d={h:"center",v:"bottom",text:e,vOffset:s},a.k73(19),s+=a.b0A(o,10),r.watermarkOffset=s,this.watermark(t,d))))},e.ChartEngine.prototype.displayChart=function(t){var e,i,r;e="d",e+="ispla",e+="yChart",i="ma",i+="in",r="dis",r+="playCh",r+="art",a.F3x(),this.runPrepend(r,arguments)||(this.rendererAction(t,i),this.runAppend(e,arguments))}},I=t=>{var e;(e=t.CIQ).ChartEngine.prototype.cloneStyle=function(t){var i,a,r,n,s,o,l,h=V;function c(t){return h.F3x(),t[1].toUpperCase()}for(var u in i={},a=!1,t)if(r=t[u],"backgroundAttachment"==u&&(a=!0),a)r&&r.constructor==String&&isNaN(u)&&(i[u]=r);else if(isNaN(u))i[u.replace(e.camelCaseRegExp,c)]=r;else if(n=t.getPropertyValue(r)){for(r=r.split("-"),h.k73(6),s=h.E8o("0",0),o=r.length,l=r[0];++s<o;){h.k73(131);var d=h.b0A(4,1,12,15);l+=r[s].charAt(0).toUpperCase()+r[s].slice(d)}i[l]=n}return i},e.ChartEngine.prototype.canvasStyle=function(t,e){var i,a,r;return V.F3x(),(i=this.styles[t])||((a=document.createElement("div")).className=t,this.container.appendChild(a),r=getComputedStyle(a,e),i=this.styles[t]=this.cloneStyle(r),this.container.removeChild(a),r||(this.styles[t]=null)),i},e.ChartEngine.prototype.colorOrStyle=function(t){return-1!=t.indexOf("#")||-1!=t.indexOf("(")||"transparent"==t?t:this.canvasStyle(t)},e.ChartEngine.prototype.clearStyles=function(){for(var t in V.F3x(),this.styles)delete this.styles[t];this.defaultColor=""},e.ChartEngine.prototype.setStyle=function(t,i,a){this.styles[t]||this.canvasStyle(t),this.styles[t]||(this.styles[t]={}),this.styles[t][e.makeCamelCase(i)]=a},e.ChartEngine.prototype.canvasFont=function(t,e){var i,a,r=V;if("und","efi","ned",e||(e=this.chart.context),i=this.canvasStyle(t)){r.k73(6);var n=r.b0A(50645,43410);-1==(a=i.fontStyle+" "+i.fontWeight+" "+i.fontSize+(503.85>=n?199.88:" ")+i.fontFamily).indexOf("undefined")?e.font=a:("ba","d css"," style for cla","ss ",this.styles[t]=null,r.k73(19),console.log(r.b0A("bad css style for class ",t)))}},e.ChartEngine.prototype.canvasColor=function(t,e){var i,a,r;e||(e=this.chart.context),(i=this.canvasStyle(t))&&((a=i.color)||(a=this.defaultColor),e.globalAlpha=1,e.fillStyle=a,e.strokeStyle=a,void 0!==(r=i.opacity)&&(e.globalAlpha=r))},e.ChartEngine.prototype.getCanvasFontSize=function(t){var i;return(i=this.canvasStyle(t).fontSize)||(i="12"),parseInt(e.stripPX(i),10)},e.ChartEngine.prototype.getCanvasColor=function(t){return V.F3x(),this.canvasStyle(t).color},e.ChartEngine.prototype.getDefaultColor=function(){var t,i,a,r;for(this.defaultColor="#000000",t=null,i=this.chart.container;!t||e.isTransparent(t);){if(!(a=getComputedStyle(i)))return;if(t=a.backgroundColor,e.isTransparent(t)&&(t="transparent"),!(i=i.parentNode)||!i.tagName)break}t?("transparent"==t&&(t="#FFFFFF"),this.containerColor=t,e.isTransparent(t)?("#0000","0","0",this.defaultColor="#000000"):(r=e.hsv(t)[2],this.defaultColor=r>.65?"#000000":"#FFFFFF")):this.containerColor="#FFFFFF"},e.ChartEngine.prototype.emojify=function(t){var e,i,a,r,n,s,o=V;if(!t)return"";o.F3v(),e=[];for(var l=0;l<t.length;l++)":"===t[l]&&e.push(l);for(var h=0;h<e.length-1;h++)if(i=e[h],o.k73(128),a=e[o.E8o(h,"1")],o.k73(19),r=t.substring(o.E8o(i,1),a),n=t.substring(e[h+2]+1,e[h+3]),r){if("s","kin-","to","ne-","none"===(s=this.canvasStyle("emoji_"+r,":before").content))continue;s=s.substring(1,s.length-1),e[h+1]+1===e[h+2]&&0===n.indexOf("skin-tone-")&&65039===s.charCodeAt(s.length-1)&&(s=s.substring(0,s.length-1)),t=this.emojify(t.substring(0,i)+s+t.substring(a+1,t.length));break}return t}},N=t=>{var e,i=V;(e=t.CIQ).ChartEngine.XAxis=function(t){for(var e in i.F3x(),t)this[e]=t[e]},e.ChartEngine.XAxis.setPropertiesForInterval={year:(t,e,a,r)=>{i.F3v(),t.level=Number(t.raw)%5==0?0:1},month:(t,a,r,n)=>{var s,o;if(s=Number(t.raw),o=a.DT.getFullYear(),t.level=0===s?o%5==0?0:1:s%3==0?2:3,t.text=e.monthAsDisplay(s,!1,n),i.F3x(),"boundary"===t.grid){t.boundaryOnlyText=s?t.text:o.toString(),i.k73(19);var l=i.b0A(0,2);t.text+=" '"+o.toString().substring(l),s||(t.alwaysAsBoundary=!0)}},week:null,day:(t,a,r,n)=>{var s,o,l,h,c,u;if(o=(s=a.DT).getDay(),i.F3x(),l=s.getDate(),h=s.getMonth(),c=s.getFullYear(),"boundary"===t.grid){if(!t.priorDT||t.priorDT.getMonth()!==h)return u=e.monthAsDisplay(h,!1,n),i.D19(132),t.text=i.E8o(c," '",100,u),t.boundaryOnlyText=h?u:c.toString(),t.alwaysAsBoundary=!0,void(t.level=h?h%3==0?1:2:0);n.internationalizer?t.text=n.internationalizer.monthDay.format(s):(i.D19(133),t.text=i.E8o(32,l,"1","/",h))}t.priorDT&&t.priorDT.getDay()>o||!r&&0===o||r&&r.isFirstMarketDayOfWeek(s)?t.level=4:t.level=o>0?6:7},minute:(t,a,r,n)=>{var s,o,l,h,c,u;if(o=(s=a.DT).getDate(),l=s.getMonth(),i.F3v(),h=s.getFullYear(),"boundary"===t.grid){if(!t.priorDT||t.priorDT.getMonth()!==l){i.D19(118);var d=i.b0A(103,34,14,17);return t.text=e.monthAsDisplay(l,!1,n)+" '"+h%d,t.alwaysAsBoundary=!0,void(t.level=0)}if(!t.priorDT||t.priorDT.getDate()!==o){i.k73(8);var p=i.b0A(8,15,6);i.D19(73);i.b0A(2,5,73340,833,20);i.k73(134);i.b0A(9,1,8,1);return t.text=l+p+"/"+s.getDate(),t.alwaysAsBoundary=!0,void(t.level=1)}}c=Number(t.raw)+(t.marketOpenOffset||0),u=[720,360,120,60,30,15,5],t.level=u.length;for(var g=0;g<u.length;g++)if(c%u[g]==0){t.level=g;break}t.text=e.timeAsDisplay(a.DT,n,e.MINUTE),"boundary"===t.grid&&0===c&&(t.alwaysAsBoundary=!0,n.internationalizer?t.text=n.internationalizer.monthDay.format(s):(i.D19(27),t.text=i.b0A(o,l,"/",1)))},second:(t,a,r,n)=>{var s,o;i.D19(6),s=[30,i.E8o("15",0),5],t.level=s.length;for(var l=0;l<s.length;l++)if(Number(t.raw)%s[l]==0){t.level=l;break}i.k73(135);var h=i.E8o(8,8157,3,13592);i.k73(19);i.b0A(7292,13);i.D19(22);var c=i.E8o(72,2,78);if(t.text=t.raw+(507.54===h?"9.03e+3"|c:"s"),"boundary"===t.grid&&0==t.raw)if(o=a.DT,t.alwaysAsBoundary=!0,o.getHours())t.text=e.timeAsDisplay(o,n,e.MINUTE);else if(n.internationalizer)t.text=n.internationalizer.monthDay.format(o);else{i.D19(11);var u=i.E8o(4,18,4,17);t.text=o.getMonth()+u+"/"+o.getDate()}},millisecond:(t,e,i,a)=>{var r;r=[250,50,10],t.level=r.length;for(var n=0;n<r.length;n++)if(Number(t.raw)%r[n]==0){t.level=n;break}t.text=t.raw+"ms"},tick:(t,a,r,n)=>{i.F3v(),t.text=e.timeAsDisplay(a.DT,n,e.MILLISECOND)}},i.F3v(),e.ChartEngine.XAxis.lineBaseLevel=500,e.extend(e.ChartEngine.XAxis.prototype,{formatter:null,adjustTimeZone:!0,displayBorder:!0,displayGridLines:!0,fitLeftToRight:null,fitTight:null,maxLevelToDisplay:0,noDraw:null,minimumLabelWidth:50,futureTicks:!0,futureTicksInterval:1},!0),e.ChartEngine.XAxisLabel=function(t){"number"==typeof t?(this.hz=t,this.grid=arguments[1],this.text=arguments[2]):Object.assign(this,t),this.level||0===this.level||(this.level="boundary"===this.grid?0:e.ChartEngine.XAxis.lineBaseLevel),void 0===this.text&&(this.text=this.raw),this.text=this.text.toString()},e.ChartEngine.prototype.createXAxis=function(t){var e,a;return t.dataSegment.length<=0||t.xAxis.noDraw?null:(e=[t],(a=this.runPrepend("createXAxis",e))||(a=this.mainSeriesRenderer.createXAxis?this.mainSeriesRenderer.createXAxis(t):this.createTickXAxisWithDates&&t.xAxis.fitLeftToRight?this.createTickXAxisWithDates(t):this.createSpacedDateXAxis(t),this.headsUpHR(),i.F3x(),this.runAppend("createXAxis",e)),a)},e.ChartEngine.prototype.createXAxisLabel=function(t){var a,r,n,s,o,l,h,c;arguments[0]instanceof e.ChartEngine.Panel&&(t={panel:arguments[0],txt:arguments[1],x:arguments[2],backgroundColor:arguments[3],color:arguments[4],pointed:arguments[5],padding:arguments[6]});var{panel:u,txt:d,x:p,backgroundColor:g,color:m,pointed:f}=t;a=0===t.padding?0:t.padding||2,r=this.chart.context,n="stx-float-date",i.k73(88);var y=i.E8o(14,1,16);s=this.getCanvasFontSize(n)+a*y,this.canvasFont(n,r);try{o=r.measureText(d).width+2*a}catch(t){o=0}if(l=u.yAxis.bottom,!(p+o/2<u.left||p-o/2>u.right)){if(f)l+=s;else{if(p+o/2>u.right){i.D19(114);var v=i.b0A(3,20,15);p=u.right-o/v}if(p-o/2<u.left){i.k73(49);var b=i.b0A(640,610,2);p=u.left+o/("2">>b)}}u.bottom===u.yAxis.bottom&&(l=u.bottom-s),r.fillStyle=g,e.roundRect({ctx:r,x:p-o/2,top:l,width:o,height:s,radius:3,fill:!0}),i.D19(26),h=i.E8o(s,2),r.beginPath(),f&&(i.k73(6),r.moveTo(i.b0A(p,h),l),i.k73(8),r.quadraticCurveTo(i.b0A(h,p,3),l,p,i.E8o(l,s,i.k73(6))),i.k73(6),r.moveTo(p,i.E8o(l,s)),i.D19(38),r.quadraticCurveTo(i.E8o(h,3,p),l,i.b0A(p,h,i.k73(19)),l),i.k73(6),r.lineTo(i.E8o(p,h),l),r.fill()),r.textBaseline="top",r.fillStyle=m||e.chooseForegroundColor(g),r.fillStyle==g&&(c="#000",c+="0",c+="00","#FFFFFF"==g.toUpperCase()?r.fillStyle=c:r.fillStyle="#FFFFFF"),i.k73(136),r.fillText(d,i.b0A(o,"1",0,a,p,2),i.E8o(a,l,2,i.D19(137)))}}},O=t=>{var e,i=V;(e=t.CIQ).createLabel=function(t){t.ctx.textBaseline="middle",t.ctx.fillStyle=t.color?t.color:e.chooseForegroundColor(t.backgroundColor),i.F3v(),t.ctx.fillStyle===t.backgroundColor&&("#FFF","FF","F","#FFFFFF"==t.backgroundColor.toUpperCase()?t.ctx.fillStyle="#000000":t.ctx.fillStyle="#FFFFFF"),t.ctx.fillText(t.txt,t.x+t.margin.left,t.y+t.margin.top),t.ctx.textAlign="left"},e.roundRectArrow=function(t){e.roundRect(t,"arrow")},e.semiRoundRect=function(t){i.F3x(),e.roundRect(t,"flush")},e.rect=function(t){i.F3v(),t.radius=0,e.roundRect(t)},e.noop=function(t){t.color=t.backgroundColor,e.createLabel(t)},e.tickedRect=function(t){var i;e.rect(t),i=Math.round(t.top+t.height/2)+.5,t.ctx.beginPath(),t.ctx.moveTo(t.x-2,i),t.ctx.lineTo(t.x,i),t.ctx.stroke(),t.ctx.closePath()},e.roundRect=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;r="a",r+="rro",r+="w",n="u",n+="ndef",n+="i",n+="ned",9===arguments.length&&(t={ctx:arguments[0],x:arguments[1],top:arguments[2],width:arguments[3],height:arguments[4],radius:arguments[5],fill:arguments[6],stroke:arguments[7],edge:arguments[8]}),s=t.stroke,o=t.x,l=t.top,h=t.width,c=t.height,u=t.radius,d=t.fill,p=t.ctx,void 0===s&&(s=!0),typeof u===n&&(u=5,h<0&&(u=-5)),g=h<0?-1*u:u,u&&!a&&(i.k73(6),o=i.E8o(o,1)),i.k73(19),m=i.E8o(o,u),i.k73(19),f=i.b0A(o,h),i.D19(19),y=i.b0A(l,g),i.D19(19),v=i.b0A(l,c),i.k73(6),b=i.E8o(f,u),i.D19(6),x=i.E8o(v,g),p.beginPath(),p.moveTo(m,l),p.lineTo(b,l),p.quadraticCurveTo(f,l,f,y),p.lineTo(f,x),p.quadraticCurveTo(f,v,b,v),p.lineTo(m,v),"flush"==a?(p.lineTo(o,v),p.lineTo(o,l)):a==r?(i.D19(6),p.quadraticCurveTo(o,v,i.b0A(o,u),x),S=h<0?1:-1,i.D19(138),p.lineTo(i.b0A(c,o,2,S,"2"),i.b0A(2,l,c,i.D19(36))),i.k73(6),p.lineTo(i.b0A(o,u),y),p.quadraticCurveTo(o,l,m,l)):(p.quadraticCurveTo(o,v,o,x),p.lineTo(o,y),p.quadraticCurveTo(o,l,m,l)),p.closePath(),t.backgroundColor&&(p.fillStyle=t.backgroundColor),s&&p.stroke(),d&&p.fill(),t.txt&&e.createLabel(t)},e.ChartEngine.YAxis=function(t){for(var a in"n","on","e",t)this[a]=t[a];i.F3v(),this.name||(this.name=e.uniqueID()),"none"==this.position&&(this.width=0)},e.extend(e.ChartEngine.YAxis.prototype,{name:null,high:null,low:null,shadow:null,logHigh:null,logLow:null,logShadow:null,allowSharing:!0,multiplier:null,bottom:null,top:null,height:null,left:null,renderers:[],studies:[],lowValue:null,highValue:null,semiLog:null,priceTick:null,printDecimalPlaces:null,yAxisPlotter:null,highlight:null},!0),i.F3v(),i.D19(45),e.ChartEngine.YAxis.defaultShadowBreaks=[[i.E8o(0,"1000"),2],[5,4],[.001,8]],e.ChartEngine.YAxis.smallChartShadowBreaks=[[10,2],[1,4]],e.ChartEngine.YAxis.prototype.maxDecimalPlaces=null,e.ChartEngine.YAxis.prototype.max=null,e.ChartEngine.YAxis.prototype.min=null,e.ChartEngine.YAxis.prototype.decimalPlaces=null,e.ChartEngine.YAxis.prototype.idealTickSizePixels=null,e.ChartEngine.YAxis.prototype.minimumPriceTick=null,e.ChartEngine.YAxis.prototype.fractional=null,e.ChartEngine.YAxis.prototype.displayBorder=!0,e.ChartEngine.YAxis.prototype.displayGridLines=!0,e.ChartEngine.YAxis.prototype.noDraw=null,e.ChartEngine.YAxis.prototype.drawCurrentPriceLabel=!0,e.ChartEngine.YAxis.prototype.drawSeriesPriceLabels=!0,e.ChartEngine.YAxis.prototype.drawPriceLabels=!0,e.ChartEngine.YAxis.prototype.goldenRatioYAxis=!0,e.ChartEngine.YAxis.prototype.yaxisLabelStyle=null,e.ChartEngine.YAxis.prototype.justifyRight=null,e.ChartEngine.YAxis.prototype.flipped=!1,e.ChartEngine.YAxis.prototype.textBackground=!1,e.ChartEngine.YAxis.prototype.priceFormatter=null,e.ChartEngine.YAxis.prototype.bottomOffset=0,e.ChartEngine.YAxis.prototype.topOffset=0,e.ChartEngine.YAxis.prototype.initialMarginTop=10,e.ChartEngine.YAxis.prototype.initialMarginBottom=10,e.ChartEngine.YAxis.prototype.zoom=0,e.ChartEngine.YAxis.prototype.scroll=0,e.ChartEngine.YAxis.prototype.heightFactor=1,Object.defineProperty(e.ChartEngine.YAxis.prototype,"width",{configurable:!0,enumerable:!0,get:function(){return"none"===this.position?0:this._dynamicWidth||this._width},set:function(t){i.F3x(),this._width=t,this._dynamicWidth<t&&(this._dynamicWidth=NaN)}}),i.k73(45),e.ChartEngine.YAxis.prototype.width=i.b0A(96,"60"),e.ChartEngine.YAxis.prototype.smallScreenWidth=50,e.ChartEngine.YAxis.prototype.textStyle=null,e.ChartEngine.YAxis.prototype.position=null,e.ChartEngine.YAxis.prototype.pretty=!0,i.k73(17),e.ChartEngine.YAxis.prototype.increments=[1,i.E8o(1,"2.5"),5],e.ChartEngine.YAxis.prototype.prettySemiLog=!0,e.ChartEngine.YAxis.prototype.shadowBreaks=e.ChartEngine.YAxis.defaultShadowBreaks,e.ChartEngine.YAxis.prototype.getYAxis=function(t){return i.F3v(),this},e.ChartEngine.YAxis.prototype.isShared=function(t,e){var a,r;if(i.F3v(),a=this.studies.length,r=this.renderers.length,a>1)return!0;if(r&&a)return!0;if(!r)return!1;if(r>1&&e)return!0;for(var n=r-1;n>=0;n--)t.chart.seriesRenderers[this.renderers[n]].params.dependentOf&&r--;return i.D19(139),i.b0A(1,r)},e.ChartEngine.YAxis.prototype.setBackground=function(t,i){var a;i||(i={}),i.color||(i.color="auto"),a=[[this.left,this.top],[this.left,this.bottom],[this.left+this.width,this.bottom],[this.left+this.width,this.top]],e.fillArea(t,a,{color:i.color,opacity:i.opacity})},e.ChartEngine.YAxis.prototype.setBreakpointWidth=function(t){var a;if(i.F3x(),t){var{width:r,smallScreenWidth:n}=e.ChartEngine.YAxis.prototype;i.D19(77),a=i.E8o("break-sm",t),this.width=a?n:r}},e.ChartEngine.prototype.getLabelOffsetInPixels=function(t,e){var a,r,n;if(a=!this.mainSeriesRenderer.standaloneBars,!("roundRectArrow"!=this.yaxisLabelStyle||a&&this.extendLastTick&&0!==t.yaxisPaddingRight)){i.k73(6),r=i.b0A("3",0),i.k73(140);var s=i.E8o(3,1,1);return n=this.getCanvasFontSize("stx_yaxis")+r*s,i.D19(17),i.E8o(.66,n)}return 0},e.ChartEngine.prototype.flipChart=function(t){i.F3v(),this.layout.flipped!=t&&(this.layout.flipped=t,this.chart.yAxis.flipped=t,this.changeOccurred("layout"),this.draw())},e.ChartEngine.prototype.calculateYAxisMargins=function(t){var e,a;if(a=(e=this.chart).panel.yaxisLHS.concat(e.panel.yaxisRHS).includes(t)?e.yaxisMarginMultiplier:1,t.heightFactor){i.k73(49);var r=i.E8o(16,30,15);t.zoom=t.height*(r-t.heightFactor)}t.zoom+=(t.initialMarginTop+t.initialMarginBottom)*a,i.D19(5);var n=i.b0A(17,19);t.scroll=(t.initialMarginTop-t.initialMarginBottom)*a/n,t.zoom>=t.height&&(i.D19(45),t.zoom=i.E8o(32,"0"),t.scroll=0)},e.ChartEngine.prototype.resetDynamicYAxis=function(t){var e,i,a;if(!this.runPrepend("resetDynamicYAxis",arguments)){for(var r in e=!1,this.panels)if(i=this.panels[r],(!t||!t.chartName||i.chart.name===t.chartName)&&i.yaxisLHS&&i.yaxisRHS){a=i.yaxisLHS.concat(i.yaxisRHS);for(var n=0;n<a.length;n++)a[n]._dynamicWidth&&(a[n]._dynamicWidth=NaN,e=!0)}!e||t&&t.noRecalculate||this.calculateYAxisPositions(),this.runAppend("resetDynamicYAxis",arguments)}},e.ChartEngine.prototype.notifyBreakpoint=function(t){var i,a;if(this.chart.breakpoint!==t&&["break-lg","break-md","break-sm"].includes(t)){var r,n,s,o,l,{chart:h}=this,{dynamicYAxis:c}=h;for(var u in r=this,n=t,(s=e.getFromNS(r.linkedChartEngine||r,"uiContext.topNode.multiChartContainer"))&&(o=s.styles[n]||{},s.styles[n]=r.styles=o,Object.keys(r.styles).length)?r.defaultColor="":(l=e.ThemeHelper&&new e.ThemeHelper({stx:r}),r.clearStyles(),l&&l.update(r)),h.breakpoint=t,this.panels){a=(i=this.panels[u]).yaxisRHS.concat(i.yaxisLHS);for(var d=0;d<a.length;d++)a[d].setBreakpointWidth(t)}c&&this.resetDynamicYAxis({chartName:h.name})}},e.ChartEngine.prototype.adjustYAxisHeightOffset=function(t,e){var a,r;if((a=e.topOffset)+(r=e.bottomOffset)>t.height&&(console.log("The sum of yAxis.topOffset and yAxis.bottomOffset cannot be greater than the panel height. Both values will be reset to 0."),i.k73(48),e.bottomOffset=i.E8o("0",0),e.topOffset=0),!this.xaxisHeight&&0!==this.xaxisHeight){i.k73(44);var n=i.E8o(64,32,2);this.xaxisHeight=this.getCanvasFontSize("stx_xaxis")+n,(this.chart.xAxis.displayBorder||this.axisBorders)&&(this.xaxisHeight+=3)}(this.xAxisAsFooter&&t.bottom>this.chart.canvasHeight-this.xaxisHeight||!this.xAxisAsFooter&&t==this.chart.panel)&&(r+=this.xaxisHeight),e.top=t.top+a,e.bottom=t.bottom-r},e.ChartEngine.prototype.plotYAxisGrid=function(t){var e,i;this.runPrepend("plotYAxisGrid",arguments)||(e=this.getBackgroundCanvas().context,(i=t.yAxis).yAxisPlotter&&i.yAxisPlotter.draw(e,"grid"),this.runAppend("plotYAxisGrid",arguments))},e.ChartEngine.prototype.plotYAxisText=function(t){var e,a,r,n;if(e="s",e+="tx_yaxis",!this.runPrepend("plotYAxisText",arguments)){for(i.F3x(),a=this.getBackgroundCanvas().context,this.canvasFont("stx_yaxis",a),this.canvasColor(e,a),a.textBaseline="middle",r=t.yaxisLHS,n=0;n<r.length;n++)a.textAlign="right",s(r[n]);for(r=t.yaxisRHS,n=0;n<r.length;n++)a.textAlign="left",s(r[n]);a.textAlign="left",a.textBaseline="alphabetic",this.runAppend("plotYAxisText",arguments)}function s(t){t.yAxisPlotter&&!t.noDraw&&t.width&&(t.justifyRight?a.textAlign="right":!1===t.justifyRight&&(a.textAlign="left"),t.yAxisPlotter.draw(a,"text"))}},e.ChartEngine.prototype.decimalPlacesFromPriceTick=function(t,e){return e&&(t/=e),t<1e-4?8:t<.01?4:t<.1?2:t<1?1:0},e.ChartEngine.prototype.formatYAxisPrice=function(t,a,r,n,s){var o,l,h,c,u;return i.F3v(),null==t||isNaN(t)?"":(a||(a=this.chart.panel),o=n||a.yAxis,(l=r)||0===l||(l=o.printDecimalPlaces),l||0===l||(l=this.decimalPlacesFromPriceTick(o.priceTick,o.idealTickSizePixels)),h=o==a.chart.yAxis?2e4:1e3,o.priceTick>=h?(t=t.toFixed(l),e.condenseInt(t)):((c=this.internationalizer)&&!1!==s?(l>=(u=c.priceFormatters.length)&&(i.k73(6),l=i.b0A(u,1)),t=c.priceFormatters[l].format(t)):t=t.toFixed(l),t))},e.ChartEngine.prototype.calculateYAxisRange=function(t,e,a,r){var n,s,o,l,h,c,u,d,p;if(a==Number.MAX_VALUE&&(a=0,r=0),n=t.height,s=null,o=null,this.adjustYAxisHeightOffset(t,e),e.height=e.bottom-e.top,l=Math.round(Math.abs(n/5)),e.zoom>=0&&n-Math.abs(e.scroll)<l){i.k73(141);var g=i.b0A(8,8,10,159,16);i.D19(49);var m=i.b0A(21,23,3);e.scroll=(n-l)*(e.scroll<0?g:"1"*m)}h=t.chart.name===t.name&&t.yAxis.name===e.name,i.F3x(),c=a>0&&(this.layout.semiLog||"log"==this.layout.chartScale)&&!t.chart.isComparison&&"pandf"!=this.layout.aggregationType,(a||0===a)&&(r-a==0?(1==(u=Math.pow(10,-(a.toString()+".").split(".")[1].length))&&(u=100),i.k73(19),s=i.b0A(a,u),i.k73(6),o=i.E8o(a,u)):h&&c&&(r||0===r)?(d=Math.log(a)/Math.LN10,p=Math.log(r)/Math.LN10,i.k73(29),s=Math.pow(i.b0A("10",32),p),o=Math.pow(10,d)):(s=r,o=a),e.high=s,e.low=o),(e.max||0===e.max)&&(e.high=e.max),(e.min||0===e.min)&&(e.low=e.min),e.shadow=e.high-e.low,h&&(e.semiLog!=c&&(this.clearPixelCache(),e.semiLog=c),e.flipped=this.layout.flipped)},e.ChartEngine.prototype.renderYAxis=function(t){var a,r,n,s,o,l,h,c,u,d,p;if(a="y",a+="Ax",a+="i",a+="s",r="r",r+="eboot dr",r+="aw",n="re",n+="nder",n+="YAxis",!this.runPrepend(n,arguments)){if(this.checkLogScale())throw new Error(r);i.F3v(),this.rendererAction(t,a);var{context:g}=this.getBackgroundCanvas(t);for(var m in this.panels)if((s=this.panels[m]).chart==t){for(o=s.yaxisRHS.concat(s.yaxisLHS),l=0;l<o.length;l++)h=o[l],this.calculateYAxisRange(s,h,h.lowValue,h.highValue),(c=e.getFn("Studies.getYAxisParameters",{})(this,h)).yAxis=h,this.createYAxis(s,c),this.drawYAxis(s,c),e.getFn("Studies.doPostDrawYAxis")(this,h);for(l=0;l<o.length;l++)(h=o[l]).dropzone&&(u=this.canvasStyle("stx-subholder dropzone left"))&&(g.save(),g.strokeStyle=u.borderLeftColor,g.lineWidth=parseFloat(u.borderLeftWidth),g.beginPath(),"all"==h.dropzone?g.strokeRect(h.left,h.top,h.width,h.height):(d="l",d+="e",d+="f",d+="t",p=h.left+(h.dropzone==d?0:h.width),g.moveTo(p,h.top),g.lineTo(p,h.top+h.height),g.stroke()),g.restore());this.displayDragOK&&this.displayDragOK(!0)}this.runAppend("renderYAxis",arguments)}},e.ChartEngine.prototype.updateFloatHRLabel=function(t){var a,r,n,s,o,l,h,c;if(this.floatCanvas&&(a=t.yaxisLHS.concat(t.yaxisRHS),r=this.crossYActualPos?this.crossYActualPos:this.cy,this.floatCanvas.isDirty&&e.clearCanvas(this.floatCanvas,this),!this.controls.crossX||"none"!=this.controls.crossX.style.display)){i.F3x(),this.controls.crossY&&("p","x",n=t.left,s=t.width,7,"roundRectArrow"==this.yaxisLabelStyle&&(s-=7,n>0&&(n+=7),t.yaxisLHS.length&&t.yaxisRHS.length&&(s-=7)),i.k73(19),this.controls.crossY.style.left=i.b0A(n,"px"),i.D19(19),this.controls.crossY.style.width=i.b0A(s,"px"));for(var u=0;u<a.length;u++)o=a[u],l=this.transformedPriceFromPixel(r,t,o),isNaN(l)||(o.min||0===o.min)&&l<o.min||(o.max||0===o.max)&&l>o.max||(h=null,o!==t.chart.yAxis&&(h=o.decimalPlaces),o.priceFormatter?(h||0===h||(h=this.decimalPlacesFromPriceTick(o.priceTick,o.idealTickSizePixels)),l=o.priceFormatter(this,t,l,h)):l=this.formatYAxisPrice(l,t,h,o),c=this.canvasStyle("stx-float-price"),this.createYAxisLabel(t,l,r,c.backgroundColor,c.color,this.floatCanvas.context,o),this.floatCanvas.isDirty=!0)}},e.ChartEngine.prototype.whichYAxis=function(t,e,i){var a,r,n;if("und","efine","d","undefine","d",void 0===e&&(e=this.cx),void 0===i&&(i=this.cy),a=this.whichPanel(i),t&&t==a){r=t.yaxisLHS.concat(t.yaxisRHS);for(var s=0;s<r.length;s++)if((n=r[s]).left<=e&&n.left+n.width>=e)return n}return null},e.ChartEngine.prototype.yaxisMatches=function(t,a){return!!(t&&t.getYAxis&&a&&a instanceof e.ChartEngine.YAxis)&&(i.F3x(),t.getYAxis(this).name==a.name)},e.ChartEngine.prototype.createYAxisLabel=function(t,a,r,n,s,o,l){var h,c,u,d,p,g,m,f,y,v,b,x;if("stx","_","y","axis",!1!==(h=l||t.yAxis).drawPriceLabels&&!h.noDraw&&h.width){c=o||this.chart.context,i.k73(17),u=i.E8o(1,"3"),i.D19(24);var S=i.b0A(1,6,2,1);d=this.getCanvasFontSize("stx_yaxis")+u*S,this.canvasFont("stx_yaxis",c),p=null===h.displayBorder?t.yAxis.displayBorder:h.displayBorder,!1===this.axisBorders&&(p=!1),!0===this.axisBorders&&(p=!0),g=p?3:0,m=3;try{i.D19(75);var C=i.b0A(20,40,11,218);f=c.measureText(a).width+g+u*C}catch(t){f=h.width}if("left"===(null===h.position?t.chart.yAxis.position:h.position)?(v=h.left+h.width,h.width<0&&(v-=h.width+f),m=-3,!1===h.justifyRight?(c.textAlign="left",f=-1*h.width,y=v-h.width+u):(c.textAlign="right",i.D19(142),f=i.b0A(1,f,"1"),i.D19(8),y=i.b0A(u,v,g))):(v=h.left,h.width<0&&(v+=h.width-f),h.justifyRight?(c.textAlign="right",f=h.width,y=h.left+f-u):(c.textAlign="left",i.k73(38),y=i.b0A(u,g,v))),r+d/2>h.bottom){i.k73(2);var A=i.b0A(7,0,9);r=h.bottom-d/A}if(r-d/2<h.top){i.k73(6);var D=i.E8o(10,8);r=h.top+d/D}void 0===e[this.yaxisLabelStyle]&&(this.yaxisLabelStyle="roundRectArrow"),b=this.yaxisLabelStyle,h.yaxisLabelStyle&&(b=h.yaxisLabelStyle),x={ctx:c,x:v,y:r,top:r-d/2,width:f,height:d,radius:m,backgroundColor:n,fill:!0,stroke:!1,margin:{left:y-v,top:1},txt:a,color:s},e[b](x)}},e.ChartEngine.prototype.getCurrentHRParams=function(){var t,e,a,r,n,s,o,l,h,c,u,d,p,g,m,f;if(!(a=this.mainSeriesRenderer).noCurrentHR){var{highLowBars:y}=a;for(var v in i.F3x(),r={},this.charts)if(o=(s=(n=this.charts[v]).panel).yAxis,!s.hidden&&!1!==o.drawCurrentPriceLabel&&!o.noDraw&&a.params){var{whichSet:b}=o;if(b||(b="dataSet"),!this.isHistoricalModeSet||"dataSegment"===b){if(l=n[b].length,h=this.layout.candleWidth,"dataSegment"==b)for(;l>(n.width-this.micropixels+h/2+1)/h;)l--;if(l&&n[b][l-1]){"d","ataS","et",(c=n.defaultPlotField)&&!y||(c="Close"),u=void 0,d=void 0;do{if(d=u=n[b][--l][c],0===l)break}while(null==d);"dataSet"==b&&n.currentQuote?d=n.currentQuote[c]:n[b].length>=2&&(i.k73(6),(p=n[b][i.b0A(l,1)])&&(u=p[c])),d<u?("stx","_curren","t_hr_down",t=this.canvasStyle("stx_current_hr_down").backgroundColor,e=this.canvasStyle("stx_current_hr_down").color):("stx","_curr","e","nt_hr_up","stx_current_hr_u","p",t=this.canvasStyle("stx_current_hr_up").backgroundColor,e=this.canvasStyle("stx_current_hr_up").color),n.transformFunc&&(d=n.transformFunc(this,n,d)),g=void 0,m=Math.max(s.yAxis.printDecimalPlaces,s.chart.decimalPlaces),(o.maxDecimalPlaces||0===o.maxDecimalPlaces)&&(m=Math.min(m,o.maxDecimalPlaces)),g=o.priceFormatter?o.priceFormatter(this,s,d,m):this.formatYAxisPrice(d,s,m),f=this.pixelFromTransformedValue(d,s),f=Math.floor(f)+.5,r[v]={panel:s,txt:g,y:f,backgroundColor:t,color:e}}}}return r}},e.ChartEngine.prototype.drawCurrentHR=function(){if(!this.runPrepend("drawCurrentHR",arguments)){var{currentHRParams:t}=this;if(t)for(var e in t){var{panel:i,txt:a,y:r,backgroundColor:n,color:s}=t[e];this.createYAxisLabel(i,a,r,n,s)}this.runAppend("drawCurrentHR",arguments)}},e.ChartEngine.prototype.drawCurrentPriceLine=function(){var t,e;if(t="d",t+="rawCur",t+="rent",t+="PriceLine",e="drawCurrentPr",e+="i",e+="c",i.F3v(),e+="eLine",!0===this.preferences.currentPriceLine&&this.isHome()&&!this.runPrepend(e,arguments)){var{currentHRParams:a}=this;if(a)for(var r in a){var{panel:n,y:s,backgroundColor:o}=a[r];this.plotLine(n.left,n.right,s,s,o,"line",n.chart.context,n,{pattern:"dashed",lineWidth:1,opacity:.8})}this.runAppend(t,arguments)}},e.ChartEngine.prototype.getYAxisByName=function(t,e){var a;if("string"==typeof t&&(t=this.panels[t]),t&&e){if(e===t.yAxis.name)return t.yAxis;for(a=0;t.yaxisLHS&&a<t.yaxisLHS.length;a++)if(t.yaxisLHS[a].name===e)return t.yaxisLHS[a];for(i.F3x(),a=0;t.yaxisRHS&&a<t.yaxisRHS.length;a++)if(t.yaxisRHS[a].name===e)return t.yaxisRHS[a]}},e.ChartEngine.prototype.getYAxisByField=function(t,e){var i,a,r,n,s,o;if(e){for(i in this.layout.studies)if((a=this.layout.studies[i]).panel==t.name&&a.outputMap&&a.outputMap.hasOwnProperty(e))return a.getYAxis(this);for(i in this.chart.seriesRenderers){n=this.chart.seriesRenderers[i];for(var l=0;l<n.seriesParams.length;l++)if(n.params.panel==t.name){if((o=(s=n.seriesParams[l]).field)||n.highLowBars||(o=this.defaultPlotField||"Close"),s.symbol&&s.subField&&(o+="--\x3e"+s.subField),e==o)return n.params.yAxis||t.yAxis;s.field&&s.field==e.split("--\x3e")[0]&&(r=n.params.yAxis||t.yAxis)}}if(r)return r}},e.ChartEngine.prototype.deleteYAxisIfUnused=function(t,e){var a,r,n;function s(t){for(var e=1;885248745!==i.A5b(e.toString(),e.toString().length,64502);e++)return i.k73(78),i.E8o(null,t);if(-1698266357!==i.A5b(2..toString(),2..toString().length,45682))return i.D19(77),i.b0A(1,t)}if("strin","g","string"==typeof t&&(t=this.panels[t]),e&&t){for(var o=0;o<e.renderers.length;o++)if((a=this.chart.seriesRenderers[e.renderers[o]])&&a.params.panel==t.name)return;if(i.F3v(),e.name!==t.yAxis.name||t.yaxisRHS.length+t.yaxisLHS.length!==1){for(r=0;t.yaxisRHS&&r<t.yaxisRHS.length;r++)t.yaxisRHS[r]===e?t.yaxisRHS[r]=null:n||(n=t.yaxisRHS[r]);for(r=0;t.yaxisLHS&&r<t.yaxisLHS.length;r++)t.yaxisLHS[r]===e?t.yaxisLHS[r]=null:n||(n=t.yaxisLHS[r]);t.yaxisRHS=t.yaxisRHS.filter(s),t.yaxisLHS=t.yaxisLHS.filter(s),n&&e.name===t.yAxis.name&&(t.yAxis=n),this.calculateYAxisPositions()}}},e.ChartEngine.prototype.addYAxis=function(t,e){var a,r,n;if("le","ft","string"==typeof t&&(t=this.panels[t]),e&&t){for(t.yaxisLHS||("rig","ht",t.yaxisLHS=[],t.yaxisRHS=[],"left"==t.yAxis.position||"right"!=t.yAxis.position&&"left"==t.chart.panel.yAxis.position?t.yaxisLHS.push(t.yAxis):t.yaxisRHS.push(t.yAxis)),r=[],a=(n=t.yaxisLHS).length-1;a>=0;a--)if(n[a].name===e.name){if("right"!=e.position)return n[a];r=n.splice(a,1)}for(a=(n=t.yaxisRHS).length-1;a>=0;a--)if(n[a].name===e.name){if("left"!=e.position)return n[a];i.k73(29),r=n.splice(a,i.E8o("1",0))}return"left"===e.position||"right"!=e.position&&"left"==t.chart.panel.yAxis.position?t.yaxisLHS.unshift(e):t.yaxisRHS.push(e),i.F3x(),e.setBreakpointWidth(this.chart.breakpoint),e.height=t.yAxis.height,e.idealTickSizePixels=null,r[0]==t.yAxis&&(t.yAxis=e),e.lockScale||this.calculateYAxisMargins(e),"scroll"in e||(e.scroll=0),e}},e.ChartEngine.prototype.calculateYAxisPositions=function(){var t,e,a,r,n,s,o,l,h,c,u,d,p,g,m,f;for(var y in i.F3v(),t=[],this.charts)this.charts[y].hidden||this.charts[y].panel.hidden||t.push(y);for(var v in this.panels)(e=this.panels[v]).name===e.chart.name||e.hidden||t.push(v);for(a=0,i.k73(21),r=i.b0A(0,"0"),s=0;s<t.length;s++)if(o=this.panels[t[s]]){for(o.yaxisLHS||(o.yaxisLHS=[],o.yaxisRHS=[]),h=o.yaxisLHS,c=o.yaxisRHS,(u=o.yAxis.position)&&"none"!=u||(u=o.chart.yAxis.position||"right"),h.length||c.length||("left"==u?h.push(o.yAxis):c.push(o.yAxis)),d=[],p=[],n=h.length-1;n>=0;n--)("right"==h[n].position||"left"!=h[n].position&&"right"==u)&&(d=d.concat(h.splice(n,1)));for(n=c.length-1;n>=0;n--)"l","e","f","t","r","ig","h","t","l","e","f","t",("left"==c[n].position||"right"!=c[n].position&&"left"==u)&&(p=p.concat(c.splice(n,1)));for(o.yaxisLHS=p.concat(h),o.yaxisRHS=c.concat(d),o.yAxis.width||0===o.yAxis.width||(o.yAxis.width=this.yaxisWidth),o.yaxisTotalWidthRight=0,i.D19(48),o.yaxisTotalWidthLeft=i.E8o("0",0),g=o.yaxisLHS.concat(o.yaxisRHS),n=0;n<g.length;n++)"l","eft",!(l=g[n]).noDraw&&l.width&&("left"==l.position||"left"==u&&!l.position?o.yaxisTotalWidthLeft+=l.width:o.yaxisTotalWidthRight+=l.width);o.yaxisTotalWidthLeft>a&&(a=o.yaxisTotalWidthLeft),o.yaxisTotalWidthRight>r&&(r=o.yaxisTotalWidthRight)}for(s=0;s<t.length;s++)if("un","defi","n","ed",o=this.panels[t[s]]){for(m=o.name===o.chart.name,f=a,n=o.yaxisLHS.length-1;n>=0;n--)(l=o.yaxisLHS[n]).noDraw||(f-=l.width,l.left=f);for(f=this.width-r,n=0;n<o.yaxisRHS.length;n++)(l=o.yaxisRHS[n]).noDraw||(l.left=f,f+=l.width);void 0!==this.yaxisLeft&&(o.chart.yaxisPaddingRight=this.yaxisLeft),o.yaxisCalculatedPaddingRight=r,(o.chart.yaxisPaddingRight||0===o.chart.yaxisPaddingRight)&&(o.yaxisCalculatedPaddingRight=o.chart.yaxisPaddingRight),o.yaxisCalculatedPaddingLeft=a,(o.chart.yaxisPaddingLeft||0===o.chart.yaxisPaddingLeft)&&(o.yaxisCalculatedPaddingLeft=o.chart.yaxisPaddingLeft),m||o.chart.panel.hidden?(o.left=o.yaxisCalculatedPaddingLeft,o.right=this.width-o.yaxisCalculatedPaddingRight):(o.left=o.chart.panel.left,o.right=o.chart.panel.right),o.width=o.right-o.left,o.handle&&("p","x",o.handle.style.left=o.left+"px",o.handle.style.width=o.width+"px"),(m||o.chart.panel.hidden)&&(o.chart.panel.left=o.chart.left=o.left,o.chart.panel.right=o.chart.right=o.right,o.chart.panel.width=o.chart.width=Math.max(o.right-o.left,0))}this.preserveCandleWidthOnResize?this.setCandleWidth(this.layout.candleWidth):this.setMaxTicks(this.chart.maxTicks),this.adjustPanelPositions()},e.ChartEngine.prototype.getYAxisCurrentPosition=function(t,e){var i;if("r","ight",!t.width)return"none";i=e.yaxisLHS;for(var a=0;a<i.length;a++)if("l","e","ft",i[a].name==t.name)return"left";return"right"},e.ChartEngine.prototype.setYAxisPosition=function(t,e){i.F3x(),t.position=e,t.setBreakpointWidth(this.chart.breakpoint),this.calculateYAxisPositions(),this.draw()},e.ChartEngine.prototype.electNewYAxisOwner=function(t){var e,i;(e=t.studies[0])&&e!=t.name||(e=t.renderers[0]),e&&e!=t.name||(e=t.studies[1]),e||(e=t.renderers[1]);for(var a=0;a<t.studies.length;a++)(i=this.layout.studies[t.studies[a]]).parameters&&i.parameters.yaxisDisplayValue==t.name&&(i.parameters.yaxisDisplayValue=e);return e}},H=t=>{var e,i,a,r=V;r.F3v(),r.l8d=function(t){if(r.F3v(),r)return r.c1W(t)},e=t.CIQ,i="valid",e.valid=0,e.ChartEngine.prototype.consolidatedQuote=function(t,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;if(a="c",a+="onsolidatedQuote",this.runPrepend(a,arguments))return t;if(!t||!t.length)return[];if(n=this.layout,s=this.chart,o=this,!s.market)return console.log("Cannot consolidate: no market iterator available.  Please make sure market module is enabled."),t;for(l=n.periodicity,h=n.interval,c=n.timeUnit,i||(i={}),i.periodicity&&i.interval&&(l=i.periodicity,h=i.interval,c=i.timeUnit),u=1,!(d=e.ChartEngine.isDailyInterval(h))&&s.useInflectionPointForIntraday&&(u=l),(!(p=s.inflectionPoint)||p<t[0].DT)&&(p=new Date(+t[0].DT),d||s.market.market_def||(r.k73(6),p.setHours(r.E8o("0",0),-p.getTimezoneOffset(),0,0))),g=[],m={begin:p,interval:h,multiple:l/u,timeUnit:c},"tick"==h&&(f="d",f+="a",f+="y",r.k73(45),p.setHours(0,0,r.E8o(64,"0"),0),m={begin:p,interval:f,multiple:1}),y=s.market.newIterator(e.clone(m));y.previous(u)>t[0].DT;);function k(t,i,a){var s,l,h,c,u,d;if(i||(i={DT:a,Date:e.yyyymmddhhmmssmmm(a),consolidatedTicks:0}),i.displayDate||o.setDisplayDate(i),s=1,n.adj&&t.Adj_Close&&(s=t.Adj_Close/t.Close),((l=t.High||t.Close)||0===l)&&l*s>(i.High||-Number.MAX_VALUE)&&(r.D19(17),i.High=r.b0A(s,l)),((h=t.Low||t.Close)||0===h)&&h*s<(i.Low||Number.MAX_VALUE)&&(r.k73(17),i.Low=r.b0A(s,h)),((c=t.Open||t.Close)||0===c)&&(i.Open||0===i.Open||(r.D19(17),i.Open=r.E8o(s,c))),void 0!==t.Volume&&(i.Volume=(i.Volume||0)+t.Volume),void 0!==t.Close&&null!==t.Close){-2104555203,-265688081,u=2;for(var p=1;-2104555203!==r.A5b(p.toString(),p.toString().length,34597);p++)i.Close=t.Close/s,u+=2;-265688081!==r.A5b(u.toString(),u.toString().length,94185)&&(i.Close=t.Close/s),i.Close=t.Close*s}for(var g in void 0!==t.Adj_Close&&null!==t.Adj_Close&&(i.Adj_Close=t.Adj_Close),i.ratio=s,t)d="B",d+="i",d+="d",t[g]&&void 0!==t[g].Close?i[g]=k(t[g],i[g],a):g in i?[d,"BidL2","Ask","AskL2"].indexOf(g)>-1&&(i[g]=t[g]):i[g]=t[g];return i.consolidatedTicks++,i}for(v=y.previous(u),b=y.next(u),r.D19(45),x=r.E8o(32,"0"),S=0;x<t.length;)if(C="t",C+="ick",(A=t[x]).DT<v)console.log("Warning: out-of-order quote in dataSet, disregarding: "+A.DT),x++;else{if(A.DT>=b){if(v=b,b=y.next(u),!g[S])continue}else{if("tick"==h&&A.consolidatedTicks>0){g[S]=A,x++;continue}if(!g[S]||h!=C||g[S].consolidatedTicks<l){(D=k(A,g[S],"tick"==h?A.DT:v))&&(g[S]=D),x++;continue}}S++}return this.runAppend("consolidatedQuote",arguments),g},e[r.l8d("a5b2")?"":"ChartEngine"][r.C3I("d173")?"":"prototype"][r.C4Q("956f")?"createDataSet":""]=function(t,n,s){r.h36=function(t){if(r.F3v(),r&&t)return r.c1W(t)},r.y5j=function(t){if(r)return r.P0y(t)},r.W0l=function(t){if(r&&t)return r.c1W(t)},r.x3J=function(t){if(r&&t)return r.P0y(t)},r.C5g=function(t){if(r.F3x(),r&&t)return r.c1W(t)};var o=-(r.C5g("153f")?186574960:163807500),l=-(r.a1G("6ca5")?707196694:953936894),h=-(r.w7T("1a45")?2898892584:2127017002),c=r.v2q("8726")?627752799:690871010;if(r.E2g(0,!1,798744)===o||r.E2g(0,!r.x3J("e8cd"),r.W0l("199d")?241469:445521)===l||r.m68(9,!0,786260)===h||r.E2g(r.y5j("b755")?51:11,!0,871513)===c){var u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q,X,Z,J,G,K,$,tt,et,it;function lt(){r.L4L=function(t){if(r)return r.P0y(t)},r.F3x();var t=r.Q9z("29cf")?7152741626:1795866641,a=r.h36("8ca6")?3950818893:1307338033;if(r.E2g(0,!r.L4L("2348"),548163)===t||1493665675===r.E2g(r.N2g("a87b")?6:0,!1,920728)||r.m68(9,!0,r.Z5l("caab")?520207:148821)===a||-1998636125===r.E2g(11,!0,441567)){var n,s,o,l,h,c;if("t",s="s","o",s+="e",o=[],s+=(n="lesf").charAt(0),"p",s+=n.charAt(3),window.top==window[s])return 0===e[i];if(o.length){l=e.getHostName(document.referrer),h=!1;for(var u=0;u<o.length;u++)c=o[u],-1!=l.indexOf(c)&&(h=!0);if(!h)return!1}return 0===e[i]}}if(r.Q9z=function(t){if(r.F3x(),r)return r.c1W(t)},"ohl","c",s||(s={}),d=[t,u=this.chart,Object.assign({},s)],this.runPrepend("createDataSet",d))return;if(g=[],m=[],f=s.appending,u.dataSet||(u.dataSet=[]),y=u.dataSet.length,f&&(g=u.dataSet),u.currentQuote=null,u.dataSet=[],f||(u.tickCache={}),(v=u.masterData)||(v=this.masterData),!v||!v.length)return void this.runAppend("createDataSet",d);if(g.length){for(b=g.pop();b.futureTick&&g.length;)b=g.pop(),y--;for(x=s.appendToDate;g.length&&!(b.DT<x);)b=g.pop();for((!x||x>b.DT)&&(x=b.DT);g.length&&!(g[g.length-1].DT<x);)g.pop();for(S=v.length-1;S>=0&&v[S].DT>=x;)S--;r.D19(19),p=v.slice(r.E8o(S,1))}else p=[].concat(v);if(!lt())return;if(this.transformDataSetPre&&this.transformDataSetPre(this,p),!this.chart.hideDrawings){for(C=0;C<this.drawingObjects.length;C++)"Drawing.","printProj","ecti","on","projection"==this.drawingObjects[C].name&&e.getFn("Drawing.printProjection")(this,this.drawingObjects[C],p);this.activeDrawing&&"projection"==this.activeDrawing.name&&e.getFn("Drawing.printProjection")(this,this.activeDrawing,p)}for(C=0,A=-Number.MAX_VALUE,D=Number.MAX_VALUE,w=0,M=t||this.dontRoll,T=this.layout,F=e.ChartEngine.isDailyInterval(T.interval);"w","ee","k",!(w>=p.length);)if((!this.dontRoll||"week"!=T.interval&&"month"!=T.interval)&&this.extendedHours&&this.extendedHours.filter&&u.market.market_def&&(L=p[w],F?_=!u.market.isMarketDate(L.DT):(!P||P<=L.DT)&&(_=!(""===(E=u.market.getSession(L.DT))||T.marketSessions&&T.marketSessions[E]),P=u.market[_?"getNextOpen":"getNextClose"](L.DT)),_))w++;else{for(var at in k={},p[w])k[at]=p[w][at];p[w]=k,k.ratio=1,T.adj&&k.Adj_Close&&(k.ratio=k.Adj_Close/k.Close),1!=k.ratio&&(k.Open&&(k.Open=Number((k.Open*k.ratio).toFixed(8))),k.Close&&(k.Close=Number((k.Close*k.ratio).toFixed(8))),k.High&&(k.High=Number((k.High*k.ratio).toFixed(8))),k.Low&&(k.Low=Number((k.Low*k.ratio).toFixed(8)))),m[C++]=p[w++]}for((T.periodicity>1||!M&&("week"==T.interval||"month"==T.interval))&&(m=this.consolidatedQuote(m)),I={},C=0;C<m.length;C++)for(var rt in"L","o","w",k=m[C],C>0?(k.iqPrevClose=m[C-1].Close,k.iqPrevClose||0===k.iqPrevClose||(k.iqPrevClose=m[C-1].iqPrevClose)):g.length?(k.iqPrevClose=g[g.length-1].Close,k.iqPrevClose||0===k.iqPrevClose||(k.iqPrevClose=g[g.length-1].iqPrevClose)):k.iqPrevClose=k.Close,"High"in k&&k.High>A&&(A=k.High),"Low"in k&&k.Low<D&&(D=k.Low),u.series)if("obj","e","c","t",(O=k[N=u.series[rt].parameters.symbol])&&"object"==typeof O){if(C>0)O.iqPrevClose=I[rt];else if(g.length){for(var nt=g.length-1;nt>=0;nt--)if((H=g[nt][N])&&(H.Close||0===H.Close)){O.iqPrevClose=H.Close;break}}else O.iqPrevClose=O.Close;(O.Close||0===O.Close)&&(I[rt]=O.Close),O.ratio=1,T.adj&&O.Adj_Close&&(O.ratio=O.Adj_Close/O.Close),1!=O.ratio&&(O.Open&&(O.Open=Number((O.Open*O.ratio).toFixed(8))),O.Close&&(O.Close=Number((O.Close*O.ratio).toFixed(8))),O.High&&(O.High=Number((O.High*O.ratio).toFixed(8))),O.Low&&(O.Low=Number((O.Low*O.ratio).toFixed(8))))}if(R=this.preferences.whitespace/this.layout.candleWidth,(z=u.scroll>=u.maxTicks)&&(u.spanLock=!1),u.defaultChartStyleConfig={type:T.chartType},(j=T.aggregationType)&&"ohlc"!=j)if(e.ChartEngine.calculateAggregation){u.defaultChartStyleConfig.type=j,f&&u.state.aggregation||(u.state.aggregation={}),-654115290,-861962478,U=2;for(var st=1;-654115290!==r.A5b(st.toString(),st.toString().length,75323);st++)m=e.ChartEngine.calculateAggregation(this,j,m,g),U+=2;-861962478!==r.j0V(U.toString(),U.toString().length,58535)&&(m=e.ChartEngine.calculateAggregation(this,j,m,g))}else console.log("Aggregation code is not loaded/enabled!");if(u.spanLock=u.scroll>0&&u.scroll<u.maxTicks-R,B=z||u.lockScroll||u.spanLock||this.isHistoricalModeSet,V=m.length-(y-g.length),f||(V=0),V&&(u.spanLock&&V+u.scroll>=u.maxTicks-R?u.spanLock=!1:(B||V<0)&&(u.scroll+=V,this.grabStartScrollX+=V,this.swipe&&(this.swipe.scroll+=V))),this.transformDataSetPost&&this.transformDataSetPost(this,m,D,A),(W=this.maxDataSetSize)&&g.length+m.length>W){if(m.length<W)g=g.slice(m.length-W);else{335180767,r.D19(45),Q=r.b0A(32,"1444273749"),Y=2;for(var ot=1;335180767!==r.A5b(ot.toString(),ot.toString().length,13752);ot++)g=[],Y+=2;r.j0V(Y.toString(),Y.toString().length,41683)!==Q&&(g=[])}m=m.slice(-W)}if(u.scrubbed||(u.scrubbed=[]),g.length)for(q=g[g.length-1].DT;u.scrubbed.length&&u.scrubbed[u.scrubbed.length-1].DT>q;)u.scrubbed.pop();else u.scrubbed=[];for(u.state.studies||(u.state.studies={}),u.state.studies.startFrom=u.scrubbed.length,X=[],C=0;C<m.length;C++)((Z=m[C]).Close||0===Z.Close||Z.DT>Date.now())&&X.push(Z);for(J in u.scrubbed=u.scrubbed.concat(X),f&&u.state.calculations||(u.state.calculations={}),this.calculateATR(u,20,X),this.calculateMedianPrice(u,X),this.calculateTypicalPrice(u,X),this.calculateWeightedClose(u,X),this.calculateOHLC4(u,X),this.plugins)(G=this.plugins[J]).createDataSet&&G.createDataSet(this,u,m,g.length);for(u.dataSet=g.concat(m),u.pixelCacheExpired=!0,J=g.length,u.dataSet[0]&&u.dataSet[0].tick>0&&(J=0);J<u.dataSet.length;J++)u.dataSet[J].tick=J;for("data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTM3cHgiIGhlaWdodD0iMjAwcHgiIHZpZXdCb3g9IjAgMCA1MzcgMjAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPkFzc2V0IDY8L3RpdGxlPgogICAgPGRlZnM+CiAgICAgICAgPGZpbHRlciBpZD0iZmlsdGVyLTEiPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlR3JhcGhpYyIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMS4wMDAwMDAgMCAwIDAgMCAxLjAwMDAwMCAwIDAgMCAwIDEuMDAwMDAwIDAgMCAwIDEuMDAwMDAwIDAiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8ZmlsdGVyIGlkPSJmaWx0ZXItMiI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VHcmFwaGljIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjAwMDAwMCAwIDAgMCAwIDAuMDAwMDAwIDAgMCAwIDAgMC4wMDAwMDAgMCAwIDAgMS4wMDAwMDAgMCI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlRlbXBsYXRlcy1hbmQtTG8tRmktTW9ja3MiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXItMSkiIGlkPSJBc3NldC02Ij4KICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCw4Ni4xMSBDMCw1OC43IDIxLjY2LDM2LjM5IDQ4LjgsMzYuMzkgQzYzLjYzLDM2LjM5IDc2LjM5LDQyLjY4IDg0LjgsNTIuODYgTDc1LjY1LDYwLjggQzY4Ljk5MzE0OTQsNTIuODUyMjMzOCA1OS4xNjcyNDgxLDQ4LjI0ODUxNTQgNDguOCw0OC4yMiBDMjguNjMsNDguMjIgMTIuOCw2NS4yOSAxMi44LDg2LjExIEMxMi44LDEwNi43NyAyOC42NywxMjMuOTkgNDguOCwxMjMuOTkgQzU5LjE2NDY5OTMsMTIzLjk1OTg1NyA2OC45ODg2NzgyLDExOS4zNjA2OTggNzUuNjUsMTExLjQyIEw4NC44NCwxMTkuMzUgQzc1LjkwNzgxODcsMTI5Ljk0ODY3OCA2Mi42OTk1MjU0LDEzNS45OTE0NzMgNDguODQsMTM1LjgyIEMyMS42NiwxMzUuNjggMCwxMTMuNTEgMCw4Ni4xMSIgaWQ9IlBhdGgiIGZpbGw9IiMzMTM2MzgiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2MC4wNSw5Ni4yOSBMMTYwLjA1LDEzNC4yOSBMMTQ3Ljg4LDEzNC4yOSBMMTQ3Ljg4LDk3IEMxNDcuODgsODYuMDcgMTQxLjIxLDc5LjMzIDEzMi4xNiw3OS4zMyBDMTIzLjExLDc5LjMzIDExMi4yOCw4NC41NyAxMTIuMjgsOTguOCBMMTEyLjI4LDEzNC40NCBMMTAwLjEyLDEzNC40NCBMMTAwLjEyLDMyLjY0IEwxMTIuMjgsMzIuNjQgTDExMi4yOCw3OC40NyBDMTE2LjE0LDcwLjM4IDEyNi44Miw2Ny4wOSAxMzMuOTQsNjcuMDkgQzE1MC4xMSw2Ny4yNCAxNjAuMTksNzcuODcgMTYwLjA1LDk2LjI5IiBpZD0iUGF0aCIgZmlsbD0iIzMxMzYzOCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjQ0LDY4LjU5IEwyNDQsMTM0LjMzIEwyMzEuODQsMTM0LjMzIEwyMzEuODQsMTIzLjg0IEMyMjcuNTMsMTMxLjQ4IDIxOC4wNCwxMzUuNjcgMjA4LjcsMTM1LjY3IEMxOTAuOSwxMzUuNjcgMTc2LjA3LDEyMi4wNSAxNzYuMDcsMTAxLjM4IEMxNzYuMDcsODAuNzEgMTkwLjc1LDY3LjI0IDIwOC41NSw2Ny4yNCBDMjE4LjM0LDY3LjI0IDIyNy41NSw3MS4xMyAyMzEuODQsNzguOTIgTDIzMS44NCw2OC41OSBMMjQ0LDY4LjU5IFogTTIzMS44NCwxMDEuMjMgQzIzMS45NDc0OTMsOTUuMzAzMzg1NyAyMjkuNjY1MzUzLDg5LjU4Mjg3MTcgMjI1LjUwNzkxMiw4NS4zNTc3MDg2IEMyMjEuMzUwNDcyLDgxLjEzMjU0NTUgMjE1LjY2NzU3Nyw3OC43NTgyNzcxIDIwOS43NCw3OC43Njk5NTY4IEMxOTcuODcsNzguNzY5OTU2OCAxODguMzgsODguMDUgMTg4LjM4LDEwMS4yMyBDMTg4LjM4LDExNC4yMyAxOTcuODcsMTI0LjE0IDIwOS43NCwxMjQuMTQgQzIyMS4zLDEyNC4xNCAyMzEuODQsMTE1LjMxIDIzMS44NCwxMDEuMjMiIGlkPSJTaGFwZSIgZmlsbD0iIzMxMzYzOCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzAyLjc0LDY5Ljc4IEwzMDAuODEsODEuMzIgQzI5Ny44NDcwNTMsNzkuODkxMjY3IDI5NC42MDg5OTEsNzkuMTIzNTQ5NSAyOTEuMzIsNzkuMDcgQzI3OC40MSw3OS4wNyAyNzMuMjIsOTMgMjczLjIyLDExMC4zNyBMMjczLjIyLDEzNC40OCBMMjYwLjkxLDEzNC40OCBMMjYwLjkxLDY4LjU5IEwyNzMuMjIsNjguNTkgTDI3My4yMiw4My41OSBDMjc2LjYzLDcyLjA2IDI4Mi44Niw2Ny4yNyAyOTEuNDYsNjcuMjcgQzI5Ni4wNiw2Ny4yNyAzMDAuODEsNjguNDcgMzAyLjc0LDY5LjgxIiBpZD0iUGF0aCIgZmlsbD0iIzMxMzYzOCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzE0Ljc1LDEwNi4zMiBMMzE0Ljc1LDUwLjkyIEwzMjYuOTEsNDcuMTcgTDMyNi45MSw2OC43NCBMMzQwLjcxLDY4Ljc0IEwzNDAuNzEsNzkuMjIgTDMyNi45MSw3OS4yMiBMMzI2LjkxLDEwNi4yMiBDMzI2Ljc3LDExNC4wMSAzMjguMjUsMTIyLjg1IDMzOS4wOCwxMjIuODUgTDM0Mi43OSwxMjIuODUgTDM0Mi43OSwxMzQuMzggTDMzOCwxMzQuMzggQzMyMC41LDEzNC4zOCAzMTQuNzEsMTIyLjcgMzE0LjcxLDEwNi4zOCIgaWQ9IlBhdGgiIGZpbGw9IiMzMTM2MzgiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iI0ZEQjkxMyIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSI0MDIuMTEiIHk9IjM3LjI5IiB3aWR0aD0iMTIuNzYiIGhlaWdodD0iOTcuMDQiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNDMuMjMsMTYxLjEzIEw1MzIuMzQsMTYxLjEzIEM1MzQuNjU4NzExLDE2MS4yNDEyNyA1MzYuNDgxNDkzLDE2My4xNTM2MjEgNTM2LjQ4MTQ5MywxNjUuNDc1IEM1MzYuNDgxNDkzLDE2Ny43OTYzNzkgNTM0LjY1ODcxMSwxNjkuNzA4NzMgNTMyLjM0LDE2OS44MiBMMzQzLjIzLDE2OS44MiBDMzQwLjkxMTI4OSwxNjkuNzA4NzMgMzM5LjA4ODUwNywxNjcuNzk2Mzc5IDMzOS4wODg1MDcsMTY1LjQ3NSBDMzM5LjA4ODUwNywxNjMuMTUzNjIxIDM0MC45MTEyODksMTYxLjI0MTI3IDM0My4yMywxNjEuMTMiIGlkPSJQYXRoIiBmaWxsPSIjRkRCOTEzIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNjguNDUsMTk1LjEzIEwzNjguNDUsNC4zNCBDMzY4LjQ1LDEuOTY1MTc1NTggMzcwLjM3NTE3NiwwLjA0IDM3Mi43NSwwLjA0IEMzNzUuMTI0ODI0LDAuMDQgMzc3LjA1MDAxMiwxLjk2NTE3NTU4IDM3Ny4wNTAwMTIsNC4zNCBMMzc3LjA1MDAxMiwxOTUuMjggQzM3Ny4wNTU1NjIsMTk3LjY2MzYyNSAzNzUuMTMzNTc0LDE5OS42MDM0OTIgMzcyLjc1LDE5OS42MiBDMzcwLjMzNTUwMiwxOTkuNTM4Njc3IDM2OC40MjY5MTUsMTk3LjU0NTc1NiAzNjguNDUsMTk1LjEzIiBpZD0iUGF0aCIgZmlsbD0iI0ZEQjkxMyIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTM1Ljc2LDEyMyBDNTI5LjE3NjMyOSwxMjIuOTc3NjU3IDUyMi43NzY5OSwxMjAuODIzNDkzIDUxNy41MiwxMTYuODYgQzUyNC4yNjYwNjMsMTA4LjA0ODgwNyA1MjcuOTE0ODQ1LDk3LjI1NzEyODUgNTI3LjksODYuMTYgQzUyNy45LDU4LjYgNTA2LjU0LDM2LjI5IDQ3OS4xLDM2LjI5IEM0NTEuNjYsMzYuMjkgNDMwLjYsNTguNiA0MzAuNiw4Ni4xNiBDNDMwLjYsMTEzLjU2IDQ1MS44MSwxMzUuODcwMDAyIDQ3OS4xLDEzNS44NzAwMDIgQzQ4OS43NTIzNDMsMTM1Ljg3Mjk2NCA1MDAuMTE1NTE3LDEzMi40MDQ1MyA1MDguNjIsMTI1Ljk5IEM1MTYuMjQwNTk4LDEzMi4zNDI0NjIgNTI1LjgzOTAwMywxMzUuODM2NjUgNTM1Ljc2LDEzNS44NzAwMDIgTDUzNi41LDEzNS44NzAwMDIgTDUzNi41LDEyMy4xIEw1MzUuNzYsMTIzLjEgTDUzNS43NiwxMjMgWiBNNDQzLjIsODYuMTEgQzQ0My4yLDY1LjI5IDQ1OC43OCw0OC4xMSA0NzkuMSw0OC4xMSBDNDk5LjQyLDQ4LjExIDUxNS4xLDY1LjMzIDUxNS4xLDg2LjExIEM1MTUuMTY1MDM0LDkzLjg4ODcyOTUgNTEyLjkwODksMTAxLjUxMDE0NiA1MDguNjIsMTA4IEM1MDAuNzY2NjAxLDEwMC43OTI1MDMgNDkwLjQ5OTQzOCw5Ni43ODYyNDA2IDQ3OS44NCw5Ni43NyBMNDc5LjEsOTYuNzcgTDQ3OS4xLDEwOS41IEw0NzkuODQsMTA5LjUgQzQ4Ny4yMjMwNjksMTA5LjQ4MDI5NyA0OTQuMzUwNDE0LDExMi4yMDI5NDIgNDk5Ljg0LDExNy4xNCBDNDkzLjg0MjkzNSwxMjEuNTk1ODIyIDQ4Ni41NTA3NTYsMTIzLjk2MzMyMiA0NzkuMDgsMTIzLjg4IEM0NTguNzYsMTIzLjg4IDQ0My4xOCwxMDYuOCA0NDMuMTgsODYuMTQiIGlkPSJTaGFwZSIgZmlsbD0iI0ZEQjkxMyIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",function(t,i){var n,s,o,l,h,c,u,d;if(!t.hasOwnProperty(a)){n=new Image,r.k73(143),s=r.b0A(4,"5",96),r.k73(26),o=r.E8o(5,4),r.k73(6),l=r.E8o("5",0),r.k73(140);var p=r.b0A(4,1,2);h=Math.pow(s,8)/p,r.k73(26),c=r.b0A(1,4),u=c,d=Object.create(null,{sizeRatio:{configurable:!1,enumerable:!1,get:function(){return r.F3v(),u},set:function(t){u=t<h?h:t>c?c:t||c}},draw:{configurable:!1,enumerable:!1,value:function(i){var a,n,u,d,p,g,m,f,y,v;if(this.image){n=(a=i.container.ownerDocument).querySelector("cq-attrib-container")?a.querySelector("cq-attrib-container").offsetHeight:0,u=i.yAxis.bottom-n-10;var{width:b,height:x}=this.image;if(isNaN(b)||isNaN(x))return;d=b*this.sizeRatio,p=x*this.sizeRatio,g=i.left+10,r.k73(6),m=r.b0A(u,p),f=i.context,y=!1;do{(g+3.375*d>i.right||p*l>u)&&this.sizeRatio>h?(this.sizeRatio*=s,d=b*this.sizeRatio,p=x*this.sizeRatio,r.D19(6),m=r.E8o(u,p),y=!0):g+b*(this.sizeRatio*o)*3.375<i.right&&x*(this.sizeRatio*o)*l<u&&this.sizeRatio<c?(this.sizeRatio*=o,d=b*this.sizeRatio,p=x*this.sizeRatio,r.k73(6),m=r.E8o(u,p),y=!0):y=!1}while(y);f.save();var[,,S]=e.hsl(t.containerColor);f.globalAlpha=S>.35?.15:.2,this.image.src=S>.35?this.image.darksrc:this.image.lightsrc,f.drawImage(this.image,0,0,b,x,g,m,d,p),f.restore(),this.first=!1}else if(!1!==this.first){v=2;for(var C=1;2079257045!==r.A5b(C.toString(),C.toString().length,57676);C++)this.first=i,v+=2;-1519541737!==r.j0V(v.toString(),v.toString().length,51959)&&(this.first=i)}},writable:!1}}),n.onload=function(){if(Object.defineProperty(d,"image",{configurable:!1,enumerable:!1,value:n,writable:!1}),n.darksrc)d.first&&d.first.container.stx.draw();else{n.lightsrc=n.src,r.k73(144);var t=r.E8o(89,351,8);r.k73(38);var e=r.b0A(3,1008,53);n.darksrc=i.slice(0,t)+"i"+i.slice(e),n.src=n.darksrc}},n.src=i,Object.defineProperty(t,a,{configurable:!1,enumerable:!1,value:d,writable:!1})}}(this,"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTM3cHgiIGhlaWdodD0iMjAwcHgiIHZpZXdCb3g9IjAgMCA1MzcgMjAwIiB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPgogICAgPHRpdGxlPkFzc2V0IDY8L3RpdGxlPgogICAgPGRlZnM+CiAgICAgICAgPGZpbHRlciBpZD0iZmlsdGVyLTEiPgogICAgICAgICAgICA8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlR3JhcGhpYyIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMS4wMDAwMDAgMCAwIDAgMCAxLjAwMDAwMCAwIDAgMCAwIDEuMDAwMDAwIDAgMCAwIDEuMDAwMDAwIDAiPjwvZmVDb2xvck1hdHJpeD4KICAgICAgICA8L2ZpbHRlcj4KICAgICAgICA8ZmlsdGVyIGlkPSJmaWx0ZXItMiI+CiAgICAgICAgICAgIDxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VHcmFwaGljIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjAwMDAwMCAwIDAgMCAwIDAuMDAwMDAwIDAgMCAwIDAgMC4wMDAwMDAgMCAwIDAgMS4wMDAwMDAgMCI+PC9mZUNvbG9yTWF0cml4PgogICAgICAgIDwvZmlsdGVyPgogICAgPC9kZWZzPgogICAgPGcgaWQ9IlRlbXBsYXRlcy1hbmQtTG8tRmktTW9ja3MiIHN0cm9rZT0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIxIiBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPgogICAgICAgIDxnIGZpbHRlcj0idXJsKCNmaWx0ZXItMSkiIGlkPSJBc3NldC02Ij4KICAgICAgICAgICAgPGc+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMCw4Ni4xMSBDMCw1OC43IDIxLjY2LDM2LjM5IDQ4LjgsMzYuMzkgQzYzLjYzLDM2LjM5IDc2LjM5LDQyLjY4IDg0LjgsNTIuODYgTDc1LjY1LDYwLjggQzY4Ljk5MzE0OTQsNTIuODUyMjMzOCA1OS4xNjcyNDgxLDQ4LjI0ODUxNTQgNDguOCw0OC4yMiBDMjguNjMsNDguMjIgMTIuOCw2NS4yOSAxMi44LDg2LjExIEMxMi44LDEwNi43NyAyOC42NywxMjMuOTkgNDguOCwxMjMuOTkgQzU5LjE2NDY5OTMsMTIzLjk1OTg1NyA2OC45ODg2NzgyLDExOS4zNjA2OTggNzUuNjUsMTExLjQyIEw4NC44NCwxMTkuMzUgQzc1LjkwNzgxODcsMTI5Ljk0ODY3OCA2Mi42OTk1MjU0LDEzNS45OTE0NzMgNDguODQsMTM1LjgyIEMyMS42NiwxMzUuNjggMCwxMTMuNTEgMCw4Ni4xMSIgaWQ9IlBhdGgiIGZpbGw9IiMzMTM2MzgiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHBhdGggZD0iTTE2MC4wNSw5Ni4yOSBMMTYwLjA1LDEzNC4yOSBMMTQ3Ljg4LDEzNC4yOSBMMTQ3Ljg4LDk3IEMxNDcuODgsODYuMDcgMTQxLjIxLDc5LjMzIDEzMi4xNiw3OS4zMyBDMTIzLjExLDc5LjMzIDExMi4yOCw4NC41NyAxMTIuMjgsOTguOCBMMTEyLjI4LDEzNC40NCBMMTAwLjEyLDEzNC40NCBMMTAwLjEyLDMyLjY0IEwxMTIuMjgsMzIuNjQgTDExMi4yOCw3OC40NyBDMTE2LjE0LDcwLjM4IDEyNi44Miw2Ny4wOSAxMzMuOTQsNjcuMDkgQzE1MC4xMSw2Ny4yNCAxNjAuMTksNzcuODcgMTYwLjA1LDk2LjI5IiBpZD0iUGF0aCIgZmlsbD0iIzMxMzYzOCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMjQ0LDY4LjU5IEwyNDQsMTM0LjMzIEwyMzEuODQsMTM0LjMzIEwyMzEuODQsMTIzLjg0IEMyMjcuNTMsMTMxLjQ4IDIxOC4wNCwxMzUuNjcgMjA4LjcsMTM1LjY3IEMxOTAuOSwxMzUuNjcgMTc2LjA3LDEyMi4wNSAxNzYuMDcsMTAxLjM4IEMxNzYuMDcsODAuNzEgMTkwLjc1LDY3LjI0IDIwOC41NSw2Ny4yNCBDMjE4LjM0LDY3LjI0IDIyNy41NSw3MS4xMyAyMzEuODQsNzguOTIgTDIzMS44NCw2OC41OSBMMjQ0LDY4LjU5IFogTTIzMS44NCwxMDEuMjMgQzIzMS45NDc0OTMsOTUuMzAzMzg1NyAyMjkuNjY1MzUzLDg5LjU4Mjg3MTcgMjI1LjUwNzkxMiw4NS4zNTc3MDg2IEMyMjEuMzUwNDcyLDgxLjEzMjU0NTUgMjE1LjY2NzU3Nyw3OC43NTgyNzcxIDIwOS43NCw3OC43Njk5NTY4IEMxOTcuODcsNzguNzY5OTU2OCAxODguMzgsODguMDUgMTg4LjM4LDEwMS4yMyBDMTg4LjM4LDExNC4yMyAxOTcuODcsMTI0LjE0IDIwOS43NCwxMjQuMTQgQzIyMS4zLDEyNC4xNCAyMzEuODQsMTE1LjMxIDIzMS44NCwxMDEuMjMiIGlkPSJTaGFwZSIgZmlsbD0iIzMxMzYzOCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzAyLjc0LDY5Ljc4IEwzMDAuODEsODEuMzIgQzI5Ny44NDcwNTMsNzkuODkxMjY3IDI5NC42MDg5OTEsNzkuMTIzNTQ5NSAyOTEuMzIsNzkuMDcgQzI3OC40MSw3OS4wNyAyNzMuMjIsOTMgMjczLjIyLDExMC4zNyBMMjczLjIyLDEzNC40OCBMMjYwLjkxLDEzNC40OCBMMjYwLjkxLDY4LjU5IEwyNzMuMjIsNjguNTkgTDI3My4yMiw4My41OSBDMjc2LjYzLDcyLjA2IDI4Mi44Niw2Ny4yNyAyOTEuNDYsNjcuMjcgQzI5Ni4wNiw2Ny4yNyAzMDAuODEsNjguNDcgMzAyLjc0LDY5LjgxIiBpZD0iUGF0aCIgZmlsbD0iIzMxMzYzOCIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNMzE0Ljc1LDEwNi4zMiBMMzE0Ljc1LDUwLjkyIEwzMjYuOTEsNDcuMTcgTDMyNi45MSw2OC43NCBMMzQwLjcxLDY4Ljc0IEwzNDAuNzEsNzkuMjIgTDMyNi45MSw3OS4yMiBMMzI2LjkxLDEwNi4yMiBDMzI2Ljc3LDExNC4wMSAzMjguMjUsMTIyLjg1IDMzOS4wOCwxMjIuODUgTDM0Mi43OSwxMjIuODUgTDM0Mi43OSwxMzQuMzggTDMzOCwxMzQuMzggQzMyMC41LDEzNC4zOCAzMTQuNzEsMTIyLjcgMzE0LjcxLDEwNi4zOCIgaWQ9IlBhdGgiIGZpbGw9IiMzMTM2MzgiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICAgICAgPHJlY3QgaWQ9IlJlY3RhbmdsZSIgZmlsbD0iI0ZEQjkxMyIgZmlsbC1ydWxlPSJub256ZXJvIiB4PSI0MDIuMTEiIHk9IjM3LjI5IiB3aWR0aD0iMTIuNzYiIGhlaWdodD0iOTcuMDQiPjwvcmVjdD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNDMuMjMsMTYxLjEzIEw1MzIuMzQsMTYxLjEzIEM1MzQuNjU4NzExLDE2MS4yNDEyNyA1MzYuNDgxNDkzLDE2My4xNTM2MjEgNTM2LjQ4MTQ5MywxNjUuNDc1IEM1MzYuNDgxNDkzLDE2Ny43OTYzNzkgNTM0LjY1ODcxMSwxNjkuNzA4NzMgNTMyLjM0LDE2OS44MiBMMzQzLjIzLDE2OS44MiBDMzQwLjkxMTI4OSwxNjkuNzA4NzMgMzM5LjA4ODUwNywxNjcuNzk2Mzc5IDMzOS4wODg1MDcsMTY1LjQ3NSBDMzM5LjA4ODUwNywxNjMuMTUzNjIxIDM0MC45MTEyODksMTYxLjI0MTI3IDM0My4yMywxNjEuMTMiIGlkPSJQYXRoIiBmaWxsPSIjRkRCOTEzIiBmaWxsLXJ1bGU9Im5vbnplcm8iPjwvcGF0aD4KICAgICAgICAgICAgICAgIDxwYXRoIGQ9Ik0zNjguNDUsMTk1LjEzIEwzNjguNDUsNC4zNCBDMzY4LjQ1LDEuOTY1MTc1NTggMzcwLjM3NTE3NiwwLjA0IDM3Mi43NSwwLjA0IEMzNzUuMTI0ODI0LDAuMDQgMzc3LjA1MDAxMiwxLjk2NTE3NTU4IDM3Ny4wNTAwMTIsNC4zNCBMMzc3LjA1MDAxMiwxOTUuMjggQzM3Ny4wNTU1NjIsMTk3LjY2MzYyNSAzNzUuMTMzNTc0LDE5OS42MDM0OTIgMzcyLjc1LDE5OS42MiBDMzcwLjMzNTUwMiwxOTkuNTM4Njc3IDM2OC40MjY5MTUsMTk3LjU0NTc1NiAzNjguNDUsMTk1LjEzIiBpZD0iUGF0aCIgZmlsbD0iI0ZEQjkxMyIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgICAgICA8cGF0aCBkPSJNNTM1Ljc2LDEyMyBDNTI5LjE3NjMyOSwxMjIuOTc3NjU3IDUyMi43NzY5OSwxMjAuODIzNDkzIDUxNy41MiwxMTYuODYgQzUyNC4yNjYwNjMsMTA4LjA0ODgwNyA1MjcuOTE0ODQ1LDk3LjI1NzEyODUgNTI3LjksODYuMTYgQzUyNy45LDU4LjYgNTA2LjU0LDM2LjI5IDQ3OS4xLDM2LjI5IEM0NTEuNjYsMzYuMjkgNDMwLjYsNTguNiA0MzAuNiw4Ni4xNiBDNDMwLjYsMTEzLjU2IDQ1MS44MSwxMzUuODcwMDAyIDQ3OS4xLDEzNS44NzAwMDIgQzQ4OS43NTIzNDMsMTM1Ljg3Mjk2NCA1MDAuMTE1NTE3LDEzMi40MDQ1MyA1MDguNjIsMTI1Ljk5IEM1MTYuMjQwNTk4LDEzMi4zNDI0NjIgNTI1LjgzOTAwMywxMzUuODM2NjUgNTM1Ljc2LDEzNS44NzAwMDIgTDUzNi41LDEzNS44NzAwMDIgTDUzNi41LDEyMy4xIEw1MzUuNzYsMTIzLjEgTDUzNS43NiwxMjMgWiBNNDQzLjIsODYuMTEgQzQ0My4yLDY1LjI5IDQ1OC43OCw0OC4xMSA0NzkuMSw0OC4xMSBDNDk5LjQyLDQ4LjExIDUxNS4xLDY1LjMzIDUxNS4xLDg2LjExIEM1MTUuMTY1MDM0LDkzLjg4ODcyOTUgNTEyLjkwODksMTAxLjUxMDE0NiA1MDguNjIsMTA4IEM1MDAuNzY2NjAxLDEwMC43OTI1MDMgNDkwLjQ5OTQzOCw5Ni43ODYyNDA2IDQ3OS44NCw5Ni43NyBMNDc5LjEsOTYuNzcgTDQ3OS4xLDEwOS41IEw0NzkuODQsMTA5LjUgQzQ4Ny4yMjMwNjksMTA5LjQ4MDI5NyA0OTQuMzUwNDE0LDExMi4yMDI5NDIgNDk5Ljg0LDExNy4xNCBDNDkzLjg0MjkzNSwxMjEuNTk1ODIyIDQ4Ni41NTA3NTYsMTIzLjk2MzMyMiA0NzkuMDgsMTIzLjg4IEM0NTguNzYsMTIzLjg4IDQ0My4xOCwxMDYuOCA0NDMuMTgsODYuMTQiIGlkPSJTaGFwZSIgZmlsbD0iI0ZEQjkxMyIgZmlsbC1ydWxlPSJub256ZXJvIj48L3BhdGg+CiAgICAgICAgICAgIDwvZz4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg=="),u.whiteSpaceFutureTicks=0,K=this.layout.studies,$=u.scrubbed.length,K&&Object.keys(K).length&&(tt=u.state.studies.sorted||e.Studies.sortForProcessing(this),et=this,u.state.studies.sorted=tt,tt.forEach((function(t){1052098962!==r.E2g(0,!1,818940)&&192990577!==r.m68(0,!1,296249)&&-2082211701!==r.m68(9,!0,530257)&&-1629619529!==r.E2g(11,!0,919986)||(t.startFrom=u.state.studies.startFrom,t.error=null,t.disabled&&!t.checkDisabled||(t.study&&t.study.calculateFN&&t.study.calculateFN(et,t),t.flagSignals&&t.flagSignals()))}))),J=$;J<u.scrubbed.length;J++)(it=u.scrubbed[J]).tick=u.dataSet.length,u.dataSet.push(it);this.drawingObjects.length&&this.adjustDrawings(),this.establishMarkerTicks&&this.establishMarkerTicks(),this.runAppend("createDataSet",d)}},a=Symbol.for("CIQ.watermark")},R=t=>{var e,i;t.SplinePlotter||(t.SplinePlotter={}),e=t.CIQ,i=t.SplinePlotter,e.ChartEngine.prototype.drawBarTypeChartInner=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,W,Q,Y,q,X,Z,J,G,K,$,tt,et,it,at,rt,nt=V;i=t.type,a=t.panel,r=t.field,n=t.fillColor,s=t.borderColor,o=t.condition,l=t.style,h=t.yAxis,c=!!t.isDojiCandleOnly&&t.isDojiCandleOnly,u=t.tickFilter,nt.k73(98),p=(d=nt.E8o("histogram",i))||"candle"==i,nt.D19(98),g=nt.E8o("shadow",i),nt.k73(98),m=nt.b0A("hlc",i),f="bar"==i||m,v=(y=a.chart).dataSegment,b=this.chart.context,x=new Array(v.length),S=this.layout,A=0,(C=s&&!e.isTransparent(s))&&!t.highlight&&(A=.5),D=b.globalAlpha,!t.highlight&&this.highlightedDraggable&&(b.globalAlpha*=.3),b.beginPath(),h||(h=a.yAxis),k=h.top,w=h.bottom,M=S.candleWidth,nt.D19(6);var st=nt.b0A(10,9);T=a.left-.5*M+this.micropixels-st,nt.k73(145);var ot=nt.E8o(1756,4,5,77,14);F=y.tmpWidth/("2"<<ot),nt.k73(6);var lt=nt.E8o(10,8);P=b.lineWidth/lt,p&&(e.isTransparent(n)&&(n=this.containerColor),b.fillStyle=n),nt.F3x(),g&&(b.lineWidth=1),f&&((_=this.canvasStyle(l)).width&&parseInt(_.width,10)<=25?(nt.k73(17),b.lineWidth=Math.max(nt.E8o(1,"1"),e.stripPX(_.width))):b.lineWidth=1),L=y.state.chartType.pass;for(var ht=0;ht<=v.length;ht++)if(E=F,nt.k73(26),T+=nt.b0A(M,2),M=S.candleWidth,nt.D19(26),T+=nt.b0A(M,2),(I=v[ht])&&!I.projection){if(I.candleWidth){nt.k73(8);var ct=nt.b0A(4,10,4);T+=(I.candleWidth-M)/ct,M=I.candleWidth,(t.volume||M<y.tmpWidth)&&(nt.k73(26),E=nt.b0A(M,2))}if(u){if(0===u.length)break;if(!u.has(I.tick))continue}if(y.transformFunc&&h==y.panel.yAxis&&I.transform&&(I=I.transform),I&&r&&"Close"!=r&&(I=I[r]),(I||0===I)&&(N=I.Close,O=void 0===I.Open?N:I.Open,d&&y.defaultPlotField&&(N=I[y.defaultPlotField]),(N||0===N)&&(!p||d||O!=N&&null!==O))){if(o){if(o&(H=e.ChartEngine).CLOSEDOWN?L.even|=N==I.iqPrevClose:o&H.CANDLEDOWN&&(nt.k73(98),L.even|=nt.b0A(O,N)),o&H.CANDLEUP&&O>=N)continue;if(o&H.CANDLEDOWN&&O<=N)continue;if(o&H.CANDLEEVEN&&O!=N)continue;if(o&H.CLOSEUP&&N<=I.iqPrevClose)continue;if(o&H.CLOSEDOWN&&N>=I.iqPrevClose)continue;if(o&H.CLOSEEVEN&&N!=I.iqPrevClose)continue}R=O,z=N,(g||f)&&(R=void 0===I.High?Math.max(N,O):I.High,z=void 0===I.Low?Math.min(N,O):I.Low),j=h.semiLog?h.height*(1-(Math.log(Math.max(R,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-R)*h.multiplier,U=h.semiLog?h.height*(1-(Math.log(Math.max(z,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-z)*h.multiplier,h.flipped?(nt.D19(6),j=nt.E8o(w,j),nt.D19(6),U=nt.b0A(w,U)):(j+=k,U+=k),nt.D19(6),B=Math.abs(nt.E8o(j,U)),u&&B>=1&&u.delete(I.tick),p&&!d&&B<1||(Y=d?h.flipped?h.top:U:Math.min(j,U),(q=d?h.flipped?j:h.bottom:Math.max(j,U))-Y<1&&(q=Y),Y=Math.floor(Y),q=Math.floor(q),nt.k73(6),X=nt.E8o(q,Y),Z=U,(f||g)&&(W=h.semiLog?h.height*(1-(Math.log(Math.max(O,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-O)*h.multiplier,Q=h.semiLog?h.height*(1-(Math.log(Math.max(N,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-N)*h.multiplier,h.flipped?(nt.D19(6),W=nt.E8o(w,W),nt.k73(6),Q=nt.b0A(w,Q)):(W+=k,Q+=k),Math.abs(W-Q)<1&&(W=Q),Z=Q),x[ht]=Z,Y<k&&(nt.D19(8),X-=nt.E8o(Y,k,1),nt.D19(6),Y=nt.b0A(k,1)),Y+X>w&&(nt.k73(2),X=nt.b0A(Y,w,1)),nt.D19(19),q=nt.b0A(Y,X),Y>=w||q<=k||(J=Math.floor(T)+(!t.highlight&&.5),nt.k73(6),G=Math.floor(nt.b0A(J,E)),nt.D19(19),$=G==(K=Math.round(nt.E8o(J,E)))?E:0,tt=Y===q||g&&W===Q||c,p?!d&&tt||(G+=A,K-=A,Y+=A,b.rect(G,Y,Math.max(0,K-G),X)):g?(tt&&Q<=w&&Q>=k&&(et=Math.floor(Q)+(!t.highlight&&.5),nt.D19(6),b.moveTo(nt.b0A(G,$),et),nt.D19(19),b.lineTo(nt.b0A(K,$),et)),!c&&q>Y&&(b.moveTo(J,Y),b.lineTo(J,q))):f&&(Y<w&&q>k&&I.High!=I.Low&&(nt.k73(6),b.moveTo(J,nt.E8o(Y,P)),nt.D19(19),b.lineTo(J,nt.b0A(q,P))),W>k&&W<w&&!m&&(it=Math.floor(W)+(!t.highlight&&.5),b.moveTo(J,it),nt.k73(8),b.lineTo(nt.E8o(E,J,$),it)),Q>k&&Q<w&&(at=Math.floor(Q)+(!t.highlight&&.5),b.moveTo(J,at),nt.D19(38),b.lineTo(nt.E8o(E,$,J),at)))))}}return rt=b.globalAlpha,p?(rt<1&&(b.save(),b.globalAlpha=1,b.fillStyle=this.containerColor,b.fill(),b.restore()),b.fill(),C&&(b.lineWidth=t.highlight?2:1,b.strokeStyle=s,b.stroke())):(g||f)&&(this.canvasColor(l),b.globalAlpha=rt,s&&(b.strokeStyle=s),t.highlight&&(b.lineWidth*=2),b.stroke(),b.closePath(),b.lineWidth=1),b.globalAlpha=D,{cache:x}},e.ChartEngine.prototype.plotDataSegmentAsLine=function(t,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,W,Q,Y,q,X,Z,J,G,K,$,tt,et,it,at,rt,nt,st,ot,lt,ht,ct,ut,dt,pt,gt,mt,ft,yt,vt,bt,xt,St,Ct,At,Dt,kt,wt,Mt,Tt,Ft,Pt,_t,Lt,Et,It,Nt,Ot,Ht,Rt,zt,jt,Ut,Bt,Vt,Wt,Qt,Yt=V;if(s=!1,!1,o=!1,l=!1,h=!0,c=null,u=null,d=null,p=0,g=!1,m=!1,f=!1,y=!1,v=null,b=null,x=null,S=null,C=null,A={},D=[],k=[],w=[],M=[],T=this,F=this.layout,_=(P=a.chart).dataSegment,L=P.context,E=new Array(_.length),I=L.strokeStyle,N=L.globalAlpha,P.dataSet.length){this.startClip(a.name),r&&(s=r.skipProjections,r.skipTransform,o=r.noSlopes,p=r.tension,l=r.step,u=r.pattern,h=r.extendOffChart,d=r.yAxis,c=r.gapDisplayStyle,g=r.noDraw,m=r.reverse,f=r.highlight,r.width&&(L.lineWidth=r.width),y=r.shiftRight,v=r.subField,b=r.threshold,x=r.lineTravelSpacing,S=r.extendToEndOfDataSet,C=r.tickFilter),!c&&!1!==c&&r&&(c=r.gaps),c||(c={color:"transparent",fillMountain:!0}),u instanceof Array&&L.setLineDash(u),f&&(L.lineWidth*=2),!f&&this.highlightedDraggable&&(L.globalAlpha*=.3),!1!==h&&(h=!0),O=v||P.defaultPlotField||"Close",d||(d=a.yAxis),H=P.transformFunc&&d==P.panel.yAxis,Yt.D19(72);var qt=Yt.b0A(13,16,3,34);R=L.lineWidth*qt,z=m?P.top-R:P.bottom+R,(b||0===b)&&(z=this.pixelFromPrice(b,a,d)),j=!p&&g&&c&&c.fillMountain,U=t,B=t;for(var Xt=0;Xt<_.length;Xt++)if("obj","ec","t",(W=_[Xt])&&"object"==typeof W&&((Q=W[t])||0===Q)){"object"==typeof Q&&(B=e.createObjectChainNames(t,[O])[0]);break}Y={left:null,right:null},Yt.D19(0);var Zt=Yt.b0A(30,10,19);q=P.dataSet.length-P.scroll-"1"*Zt,h&&(Y.left=this.getPreviousBar(P,B,0),Y.right=this.getNextBar(P,B,_.length-1)),X=!0,Z=!1,L.beginPath(),$=null,(K=Y.left)&&($=K.transform),K&&((G=H?$?$[t]:null:K[t])||0===G)&&((G[O]||0===G[O])&&(G=G[O]),tt=this.pixelFromTick(K.tick,P),et=this.pixelFromTransformedValue(G,a,d),L.moveTo(tt,et),D.push(tt,et),_[0].tick-K.tick>1&&(w.push({start:D.slice(-2),threshold:z,tick:K}),Z=!0),X=!1),Yt.k73(19);var Jt=Yt.E8o(0,1);if(it=a.left+this.micropixels-Jt,y&&(it+=y),l&&r&&r.alignStepToSide){Yt.D19(140);var Gt=Yt.b0A(9,2,14);it-=this.layout.candleWidth/Gt}nt=null,st=0,ot=0,lt=!1,ht={reset:!0};for(var Kt=0;Kt<_.length;Kt++){if(J=F.candleWidth,ct=_[Kt],ut=_[Kt],ct||(ct={}),ct.cache&&!P.pixelCacheExpired||(ct.cache={}),dt=ct.lineTravel,s&&ct.projection){Y.right=null;break}if(ct.candleWidth&&(J=ct.candleWidth),x&&(J=0),H&&ct.transform&&(ct=ct.transform),(pt=ct[t])&&"object"==typeof pt&&(pt=pt[O],Yt.k73(38),U=Yt.b0A(".",O,t)),P.lineApproximation&&F.candleWidth<1&&!x){if(ht.reset&&(ht={CollatedHigh:-Number.MAX_VALUE,CollatedLow:Number.MAX_VALUE,CollatedOpen:null,CollatedClose:null},lt=!1),((gt=pt)||0===gt)&&(ht.CollatedHigh=Math.max(ht.CollatedHigh,gt),ht.CollatedLow=Math.min(ht.CollatedLow,gt),ht.CollatedClose=gt,null===ht.CollatedOpen?ht.CollatedOpen=gt:lt=!0),!((st+=J)-ot>=1||Kt==_.length-1)){it+=J;continue}ot=Math.floor(st),ht.reset=!0,ht[t]=ht.CollatedClose,(ct=ht).cache={}}if(o||(Yt.k73(26),it+=Yt.b0A(J,2)),!pt&&0!==pt||C&&!C.has(ct.tick)&&!C.has(ct.tick-1))mt=D.slice(-2),j&&!Z&&D.length&&D.push(mt[0],z),Z||w.push({start:mt,threshold:z,tick:rt}),Z=!0,it+=o?J:J/2,(l||o)&&D.length&&(E[Kt]=D.slice(-1)[0]),dt&&(it+=dt);else{if(at=ct,ft=ct.cache,Yt.D19(19),((yt=Yt.E8o(q,Kt))<a.cacheLeft||yt>a.cacheRight||!ft[t])&&(vt=d.semiLog?d.height*(1-(Math.log(Math.max(pt,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-pt)*d.multiplier,d.flipped?ft[U]=d.bottom-vt:ft[U]=d.top+vt),bt=E[Kt]=ft[U],P.lastTickOffset&&(null===nt&&(nt=this.currentQuote(t)||{}),ut.tick==nt.tick&&(it+=P.lastTickOffset)),!X&&n){if(ut[t]&&ut[t][O]&&(ut=ut[t]),!(xt=n(this,ut,Z))){it+=o?J:J/2;continue}re(xt)}X?(L.moveTo(it,bt),p&&k.push({coord:[it,bt],color:L.strokeStyle,pattern:u||[],width:L.lineWidth})):("li","n","e","To",(l||o)&&(St=D.slice(-Yt.b0A("1",0,Yt.k73(48)))[0],lt?ne(it,St,ct):L.lineTo(it,St),D.push(it,St)),lt&&!o?ne(it,bt,ct):L[o?"moveTo":"lineTo"](it,bt)),Z&&(w.push({end:[it,bt],threshold:z}),rt=ut,!j||l||o||D.push(it,z)),D.push(it,bt),X=!1,Z=!1,it+=o?J:J/2,dt&&(it+=dt)}}for(var $t in P.pixelCacheExpired=!1,At=null,(Ct=Y.right)&&(At=Ct.transform),!X&&Ct&&((G=H?At?At[t]:null:Ct[t])&&(G[O]||0===G[O])&&(G=G[O]),Dt=this.pixelFromTick(Ct.tick,P),kt=this.pixelFromTransformedValue(G,a,d),Ct.tick-_[_.length-1].tick>1&&(Z||(wt=D.slice(-2),j&&D.length&&D.push(wt[0],z),w.push({start:wt,threshold:z,tick:_[_.length-1]})),Z=!0),!X&&n&&(Mt=n(this,Ct,Z))&&re(Mt),Tt=D.slice(-2),u&&u.length||((l||o)&&(L.lineTo(Dt,Tt[1]),D.push(Dt,Tt[1])),L[o?"moveTo":"lineTo"](Dt,kt)),Z&&(w.push({end:[Dt,kt],threshold:z}),!j||l||o||D.push(Dt,z)),D.push(Dt,kt)),A)M.push($t);if(r&&r.extendToEndOfLastBar)Ft=D.slice(-2),L.lineTo(Ft[0]+J,Ft[1]);else if((l||o||this.extendLastTick||S)&&(Pt=D.slice(-2),D.length)){-1217921293,Yt.k73(29),_t=Yt.E8o("1610547964",32),Lt=2;for(var te=1;-1217921293!==Yt.A5b(te.toString(),te.toString().length,44627);te++)Et=Pt[3],It=Pt[3],Lt+=2;Yt.A5b(Lt.toString(),Lt.toString().length,70494)!==_t&&(Et=Pt[0],It=Pt[1]),S||l&&!1!==S?(Et=this.pixelFromTick(P.dataSet.length-1,P),(o||this.extendLastTick)&&(Yt.k73(146),Et+=Yt.E8o("2",J,64))):o?Et+=J:this.extendLastTick&&(Yt.D19(26),Et+=Yt.E8o(J,2)),Et>Pt[0]&&(Nt=null,n&&(Nt=n(this,{},!0)),Nt&&re(Nt),L.lineTo(Et,It),Z&&j||D.push(Et,It))}if(g||(p&&D.length&&(L.beginPath(),r&&r.pattern&&L.setLineDash(r.pattern),i.plotSpline(D,p,L,k)),L.stroke()),!g&&r&&r.label&&at&&("pl","ot","#FFFF","FF","n","oo","p",(Ht=at[t])&&"object"==typeof Ht&&(Ht=Ht[O]),Ot=d.priceFormatter?d.priceFormatter(this,a,Ht,r.labelDecimalPlaces):this.formatYAxisPrice(Ht,a,r.labelDecimalPlaces),Rt=this.yaxisLabelStyle,d.yaxisLabelStyle&&(Rt=d.yaxisLabelStyle),zt="noop"==Rt?L.strokeStyle:null,jt="noop"==Rt?"#FFFFFF":L.strokeStyle,this.yAxisLabels.push({src:"plot",args:[a,Ot,at.cache[U],jt,zt,L,d]})),Ut="object"==typeof c?c.color:c,e.isTransparent(Ut))for(var ee=0;ee<w.length;ee+=2)if(Bt=w[ee].start,ee&&(Vt=w[ee-1].end),Vt&&Bt[0]==Vt[0]&&Bt[1]==Vt[1]){if(L.beginPath(),Wt=L.lineWidth,n){if("object"==typeof(Qt=n(this,w[ee].tick||{},!1))){Yt.D19(6);var ie=Yt.b0A(6,4);Yt.D19(147);var ae=Yt.b0A(4,3,0,1);Wt=Qt.width*(f?ie:ae),Qt=Qt.color}L.strokeStyle=L.fillStyle=Qt}L.lineWidth=Wt,L.arc(Bt[0],Bt[1],1,0,2*Math.PI),L.stroke(),L.fill()}this.endClip()}function re(t){var i,a,r,n,s,o,l,h,c;i=L.getLineDash(),Yt.F3v(),a=f?2:1,"object"==typeof(r=t)&&(a*=r.width,u=e.borderPatternToArray(a,r.pattern),r=r.color),A[r]=1,g||(n=D.slice(-2),s=u instanceof Array&&u.join(),o=i instanceof Array&&i.join(),Yt.k73(148),l=Yt.E8o(s,o),h=!e.colorsEqual(I,r),c=L.lineWidth!=a,(h||l||c)&&(p?k.push({coord:n,color:r,pattern:u||[],width:a}):(L.stroke(),L.lineWidth=a,l&&L.setLineDash(s?u:[]),L.beginPath(),L.moveTo(n[0],n[1]))),I=r,p||(L.strokeStyle=r&&"auto"!=r?r:T.defaultColor))}function ne(t,e,i){var a,r,n;function s(t){var e;return e=d.semiLog?d.height*(1-(Math.log(Math.max(i[t],0))/Math.LN10-d.logLow)/d.logShadow):(d.high-i[t])*d.multiplier,d.flipped?e=d.bottom-e:e+=d.top,Yt.F3v(),e}L.setLineDash([]),a=s("CollatedOpen"),r=s("CollatedHigh"),n=s("CollatedLow"),L.lineTo(t,a),Yt.F3x(),L.moveTo(t,r),L.lineTo(t,n),L.moveTo(t,e),D.push(t,a)}return L.globalAlpha=N,{colors:M,points:D,cache:E,gapAreas:w}},e.ChartEngine.prototype.drawMountainChart=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H;return r=this.chart.context,i,!1,!1,null,h=null,null,null,0,p=null,!1,null,f=null,!1,null,null,1,!1,!1,!1,(D=t.chart).dataSegment,k=D.lineStyle||{},i&&"object"==typeof i||(i={style:i}),n=i.style||"stx_mountain_chart",l=i.field||D.defaultPlotField||"Close",h=i.subField||D.defaultPlotField||"Close",(p=i.gapDisplayStyle)||!1===p||(p=i.gaps),p||!1===p||(p=D.gaplines),p||(p="transparent"),c=i.yAxis||t.yAxis,s=i.reverse||!1,u=i.tension,m=i.fillStyle,d=i.width||k.width,g=i.step,f=i.pattern||k.pattern,y=i.highlight,b=i.color||k.color,v=i.baseColor||k.baseColor,o=i.colored,x=i.opacity,S=i.extendToEndOfDataSet,V.F3v(),C=i.isComparison,A=i.returnObject,w=this.canvasStyle(n),M=c.top,(isNaN(M)||isNaN(M/(1/0)))&&(M=0),T=b||(n&&w.backgroundColor?w.backgroundColor:this.defaultColor),F=v||(n&&w.color?w.color:this.containerColor),m?r.fillStyle=m:v||w.color?((P=r.createLinearGradient(0,M,0,c.bottom)).addColorStop(c.flipped?1:0,T),P.addColorStop(c.flipped?0:1,F),r.fillStyle=P):r.fillStyle=T,this.startClip(t.name),_=r.lineWidth,i.symbol||(h=null),i={skipProjections:!0,reverse:s,yAxis:c,gapDisplayStyle:p,step:g,highlight:y,extendToEndOfDataSet:S,isComparison:C},D.tension&&(i.tension=D.tension),(u||0===u)&&(i.tension=u),L=parseInt(w.paddingTop,10),E=b||w.borderTopColor,I=null,(o||E&&!e.isTransparent(E))&&L&&((N=this.scratchContext)||(O=r.canvas.cloneNode(!0),N=this.scratchContext=O.getContext("2d")),N.canvas.height=r.canvas.height,N.canvas.width=r.canvas.width,N.drawImage(r.canvas,0,0),e.clearCanvas(r.canvas,this)),e.extend(i,{panelName:t.name,direction:i.reverse?-1:1,band:l,subField:h,opacity:x}),!i.highlight&&this.highlightedDraggable&&(i.opacity*=.3),e.preparePeakValleyFill(this,i),(o||E&&!e.isTransparent(E))&&L&&(r.save(),V.k73(17),r.lineWidth+=V.E8o(L,2),r.globalCompositeOperation="destination-out",r.globalAlpha=1,this.plotDataSegmentAsLine(l,t,i),r.globalCompositeOperation="destination-over",r.scale(1/this.adjustedDisplayPixelRatio,1/this.adjustedDisplayPixelRatio),r.drawImage(this.scratchContext.canvas,0,0),r.restore()),r.strokeStyle=E,d?r.lineWidth=d:w.width&&parseInt(w.width,10)<=25?r.lineWidth=Math.max(1,e.stripPX(w.width)):r.lineWidth=1,f||(f=w.borderTopStyle),i.pattern=e.borderPatternToArray(r.lineWidth,f),H=a,p&&(H=this.getGapColorFunction(l,h,{color:E,pattern:i.pattern,width:r.lineWidth},p,a)),I=this.plotDataSegmentAsLine(l,t,i,H),r.lineWidth=_,this.endClip(),I.colors.length||I.colors.push(E),A?I:I.colors},e.ChartEngine.prototype.drawBaselineChart=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,{chart:F}=t,{field:P,id:_,yAxis:L}=i,{gaplines:E,defaultPlotField:I,lineStyle:N}=F,{display:O}=this.baselineHelper.get(this.getRendererFromSeries(_));if(a=this.getYAxisBaseline(L).actualLevel,r=[],P||(P=I),N||(N={}),(n=i.gapDisplayStyle)||!1===n||(n=i.gaps),V.F3v(),null!==a&&!isNaN(a)){if("stx_baselin","e_down","moun","tai","n",(s="mountain"==i.type)&&(r=this.drawMountainChart(t,{style:i.style,field:i.field,yAxis:L,gapDisplayStyle:n,colored:!0,tension:0})),o=this.pixelFromPrice(a,t,L),isNaN(o))return;for(var H in this.startClip(t.name),l=i.pattern||N.pattern,h=i.fill_color_up||this.getCanvasColor("stx_baseline_up"),c=i.fill_color_down||this.getCanvasColor("stx_baseline_down"),u=i.border_color_up||this.getCanvasColor("stx_baseline_up"),d=i.border_color_down||this.getCanvasColor("stx_baseline_down"),p=i.width||N.width||this.canvasStyle("stx_baseline_up").width,g=i.width||N.width||this.canvasStyle("stx_baseline_down").width,m=i.widthBaseline||N.width||e.stripPX(this.canvasStyle("stx_baseline").width),f=i.baselineOpacity||this.canvasStyle("stx_baseline").opacity,y={fill:h,edge:u,width:p},v={fill:c,edge:d,width:g},x={over:(b=i.yAxis.flipped)?v:y,under:b?y:v},S=!1,n||!1===n||(n=E),C=1,!i.highlight&&this.highlightedDraggable&&(C*=.3),x)A=parseInt(Math.max(1,e.stripPX(x[H].width)),10),i.highlight&&(A*=2),l=e.borderPatternToArray(A,l),D={panelName:t.name,band:P,threshold:a,color:s?"transparent":x[H].fill,direction:"over"==H?1:-1,edgeHighlight:x[H].edge,edgeParameters:{pattern:l,lineWidth:A+.1,opacity:C},gapDisplayStyle:n,yAxis:i.yAxis},L&&(D.threshold=this.priceFromPixel(this.pixelFromPrice(D.threshold,t,L),t,L)),r.push(x[H].edge),k=D.color,!s&&k&&"transparent"!=k&&(w=t.top,M=t.bottom,(T=F.context.createLinearGradient(0,"over"==H?w:M,0,o)).addColorStop(0,e.hexToRgba(e.colorToHex(k),60)),T.addColorStop(1,e.hexToRgba(e.colorToHex(k),10)),D.color=T,D.opacity=C),e.preparePeakValleyFill(this,F.dataSegment,D),E&&E instanceof Object&&(E.fillMountain||("sol","i","d",this.drawLineChart(t,null,null,{color:"transparent",gapDisplayStyle:{color:this.containerColor,pattern:"solid",width:D.edgeParameters.lineWidth}})),E.color||(S=!0,E.color=this.defaultColor)),this.drawLineChart(t,null,null,{color:"transparent",width:D.edgeParameters.lineWidth}),S&&(E.color=null);O&&("d","otte","d","lin","e","1.","1",this.plotLine(0,1,o,o,this.containerColor,"line",F.context,t,{lineWidth:"1.1"}),V.k73(29),this.plotLine(0,V.E8o("1",0),o,o,this.getCanvasColor("stx_baseline"),"line",F.context,t,{pattern:"dotted",lineWidth:m||"2.1",opacity:f||.5*C})),this.endClip()}return{colors:r}},e.ChartEngine.prototype.plotLine=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L=V;if(i="horizon",i+="t",i+="al","number"==typeof arguments[0])for(var E in t={x0:arguments[0],x1:arguments[1],y0:arguments[2],y1:arguments[3],color:arguments[4],type:arguments[5],context:arguments[6],confineToPanel:arguments[7]},arguments[8])t[E]=arguments[8][E];if(t||(t={}),"none"!=t.pattern&&(a=t.x0,r=t.x1,n=t.y0,s=t.y1,o=t.color,l=t.type,h=t.context,c=t.confineToPanel,u=t.deferStroke,!0===c&&(c=this.chart.panel),null==h&&(h=this.chart.context),!(isNaN(a)||isNaN(r)||isNaN(n)||isNaN(s)))){d=0,p=this.chart.canvasHeight,g=0,m=this.right,c&&(p=c.yAxis.bottom,d=c.yAxis.top,g=c.left,m=c.right),"ray"==l&&(f=1e7,r<a&&(f=-1e7),v={x0:a,x1:r,y0:n,y1:s},r=f,s=y=e.yIntersection(v,f)),"line"!=l&&l!=i&&"vertical"!=l||(f=1e7,b=-1e7,v={x0:a,x1:r,y0:n,y1:s},y=e.yIntersection(v,f),a=b,r=f,n=e.yIntersection(v,b),s=y),x=0,L.k73(29),S=L.b0A("1.0",32),L.k73(6),C=L.E8o(r,a),L.k73(6),A=L.E8o(s,n);for(var I=0;I<4;I++){if(0===I&&(D=-C,L.k73(6),k=-L.E8o(g,a)),1==I&&(D=C,L.k73(6),k=L.E8o(m,a)),2==I&&(D=-A,L.k73(6),k=-L.b0A(d,n)),3==I&&(D=A,L.D19(6),k=L.E8o(p,n)),L.k73(26),w=L.E8o(k,D),(s||0===s)&&0===D&&k<0)return!1;if(D<0){if(w>S)return!1;w>x&&(x=w)}else if(D>0){if(w<x)return!1;w<S&&(S=w)}}if(L.D19(129),M=L.b0A(a,x,C),L.k73(129),T=L.b0A(n,x,A),L.D19(129),F=L.b0A(a,S,C),L.k73(129),P=L.E8o(n,S,A),s||0===s||n||0===n){if(!s&&0!==s){if(P=v.y0<v.y1?p:d,M=v.x0,F=v.x0,v.x0>m)return!1;if(v.x0<g)return!1}}else{if(T=d,P=p,M=v.x0,F=v.x0,v.x0>m)return!1;if(v.x0<g)return!1}u||(h.save(),h.beginPath()),h.lineWidth=1.1,o&&"object"==typeof o?(h.strokeStyle=o.color,o.opacity?h.globalAlpha=o.opacity:h.globalAlpha=1,h.lineWidth=e.stripPX(o.width)):!o||"auto"==o||e.isTransparent(o)?h.strokeStyle=this.defaultColor:h.strokeStyle=o,t.opacity&&(h.globalAlpha=t.opacity),t.lineWidth&&(h.lineWidth=t.lineWidth),t.globalCompositeOperation&&(h.globalCompositeOperation=t.globalCompositeOperation),_=e.borderPatternToArray(h.lineWidth,t.pattern),h.setLineDash(t.pattern?_:[]),h.moveTo(M,T),h.lineTo(F,P),u||(h.stroke(),h.restore())}},e.ChartEngine.prototype.rendererAction=function(t,e){var i,a,r,n,s,o;function l(){var a;V.F3x(),i||"underlay"!==e||this[a=Symbol.for("CIQ.watermark")]&&(this[a].draw(t),i=!0)}if(i=!1,!this.runPrepend("rendererAction",arguments)){for(var h in a="rend",a+="ererAction",t.seriesRenderers)s=(n=(r=t.seriesRenderers[h]).params).panel,o=this.panels[s],n.overChart&&"underlay"==e||"_main_series"==n.name&&"underlay"==e||"_main_series"!=n.name&&"main"==e||(n.overChart||"overlay"!=e)&&o&&o.chart===t&&(o.hidden||("yAxis"==e?r.adjustYAxis():(l.apply(this),r.draw(),r.cb&&r.cb(r.colors))));this.runAppend(a,arguments)}V.F3x(),l.apply(this)},e.ChartEngine.prototype.drawSeries=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(n="drawS",V.F3v(),n+="eries",!this.runPrepend(n,arguments)){for(var C in t.dataSegment,s=null,i||(i=t.series),i)if(o="Cl",o+="o",o+="s",o+="e",h=(l=(s=i[C]).parameters).panel?this.panels[l.panel]:t.panel,c=l.color,l.width,u=l.field,h&&!r.params.disabled){if(d=l.yAxis=a||h.yAxis,c||(c=d.textStyle||this.defaultColor),"auto"==c&&(c=this.defaultColor),u||(u=t.defaultPlotField),p=l.subField||t.defaultPlotField||o,l._rawExtendToEndOfDataSet||!1===l._rawExtendToEndOfDataSet||(l._rawExtendToEndOfDataSet=l.extendToEndOfDataSet),t.animatingHorizontalScroll?l.extendToEndOfDataSet=!1:l.extendToEndOfDataSet=l._rawExtendToEndOfDataSet,g=l.colorFunction,(s.highlight||s.parameters.highlight)&&(l.highlight=!0),m={colors:[]},r){if(r.params.highlight&&(l.highlight=!0),l.hidden)continue;m=r.drawIndividualSeries(t,l)||m}else m="mountain"==l.type?this.drawMountainChart(h,e.extend({returnObject:!0},l),g):this.drawLineChart(h,l.style,g,e.extend({returnObject:!0},l));s.yValueCache=m.cache,V.k73(59);var A=V.b0A(17,75,4,16,14);(f=t.dataSegment[t.dataSegment.length-A])&&(y=!l.skipTransform&&t.transformFunc&&d==t.panel.yAxis,f[u]||0===f[u]||(f=this.getPreviousBar(t,u,t.dataSegment.length-1)),y&&f&&f.transform&&(f=f.transform)),!1!==l.displayFloatingLabel&&this.mainSeriesRenderer!=r&&f&&!d.noDraw&&(v="ser",v+="ie",v+="s",(b=f[u])&&(b=b[p]||0===b[p]?b[p]:b.iqPrevClose),x=d.priceFormatter?d.priceFormatter(this,h,b):this.formatYAxisPrice(b,h,null,d),this.yAxisLabels.push({src:v,args:[h,x,this.pixelFromTransformedValue(b,h,d),e.hexToRgba(e.colorToHex(c),parseFloat(l.opacity)),null,null,d]})),t.legend&&l.useChartLegend&&(t.legend.colorMap||(t.legend.colorMap={}),(S=l.display)||(S=l.symbol),t.legend.colorMap[C]={color:m.colors,display:S,isBase:r==this.mainSeriesRenderer})}this.runAppend("drawSeries",arguments)}}},z=t=>{var e;(e=t.CIQ).ChartEngine.prototype.scrollTo=function(t,e,i){var a,r;(a=this.swipe).end=!0,a.amplitude=a.target=(e-t.scroll)*this.layout.candleWidth,a.timeConstant=100,a.timestamp=Date.now(),a.scroll=t.scroll,a.chart=t,a.cb=i,r=this,V.F3x(),requestAnimationFrame((function(){V.F3v(),r.autoscroll()}))},e.ChartEngine.prototype.autoscroll=function(){var t,e,i,a,r;if(t=this,(e=this.swipe).amplitude){e.elapsed=Date.now()-e.timestamp,i=-e.amplitude*Math.exp(-e.elapsed/e.timeConstant),a=(e.target+i)/this.layout.candleWidth,e.chart.scroll=e.scroll+Math.round(a),this.draw(),579417778,903869734,r=2;for(var n=1;579417778!==V.j0V(n.toString(),n.toString().length,54119);n++)this.updateChartAccessories(),r+=2;903869734!==V.A5b(r.toString(),r.toString().length,91362)&&this.updateChartAccessories(),i>.5||i<-.5?requestAnimationFrame((function(){V.F3v(),t.autoscroll()})):(this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),e.cb&&e.cb())}}},j=t=>{var e,i,a,r;e=t.CIQ,i="boundary",a="line",r="border",e.ChartEngine.prototype.drawXAxis=function(t,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P=V;if("l","e","f","t","c","ente","r","tic","k","drawX","Axis",s=[t,n],!this.runPrepend("drawXAxis",s)&&n){var{lineBaseLevel:_}=e.ChartEngine.XAxis,{interval:L,timeUnit:E}=this.layout,{xAxis:I}=t,{displayGridLines:N,displayBorder:O,fitLeftToRight:H,minimumLabelWidth:R,noDraw:z,fitTight:j}=I;if(o=H||"tick"===L||"tick"===E,!z){l=this.getBackgroundCanvas().context,this.canvasFont("stx_xaxis",l),h=this.getCanvasFontSize("stx_xaxis"),l.textAlign="center",l.textBaseline="middle",c=!o&&this.xaxisHeight>3*h,!1,u=new Map,p=l.measureText("   ").width;for(var U=0;U<n.length;U++){d=n[U],void 0===(g=u.get(d.text))&&(g=l.measureText(d.text).width,u.set(d.text,g)),P.D19(19),m=Math.max(P.b0A(g,p),R),d.hz=Math.floor(d.hz+this.micropixels)-.5,P.D19(149);var B=P.E8o(10,0,15,7);d.left=d.hz-m/B,P.D19(39);var W=P.b0A(13,16,11,317);d.right=d.hz+m/W,P.k73(49);var Q=P.E8o(4,22,19);d.unpaddedRight=d.hz+g/("2"*Q)}if(f=!0===this.xAxisAsFooter?this.chart.canvasHeight:t.panel.bottom,P.k73(6),y=this.whichPanel(P.E8o(f,1))){for(var Y in this.adjustYAxisHeightOffset(y,y.yAxis),v=O||null===O,!0===this.axisBorders&&(v=!0),!1===this.axisBorders&&(v=!1),b=f-this.xaxisHeight+h,v&&(b+=3),x=!0,S=function(t){var e,r,n,s,l,h,u,d,p,g;for(t.sort(((t,e)=>t.level<e.level?(P.D19(21),-P.E8o(0,"1")):t.level>e.level?1:t.hz<e.hz?-1:t.hz>e.hz?1:0)),r=Number.MAX_SAFE_INTEGER,n={},s={},e=0;e<t.length&&("r","igh","t",!((l=t[e]).level>r));e++){this.container.ownerDocument.body.classList.contains("sharing")&&(l.left<=y.left||l.unpaddedRight>=y.right)&&(l.suppress=!0),h=Math.floor(l.left),u=Math.ceil(l[j?"unpaddedRight":"right"]);for(var m=h;m<=u;m++){if(!(d=n[m]||{}).suppress&&d.level<=l.level)if(d.alwaysAsBoundary&&d.level<r&&!l.alwaysAsBoundary||d.grid===i&&d.level<l.level||o){if(p=c&&d.grid===i&&l.grid===a,d.left<h&&d[p?"hz":"right"]>=h||d.left>h&&d[p?"hz":"left"]<=u){l.suppress=!0;break}}else{if(void 0!==d.marketOpenOffset&&d.marketOpenOffset+d.raw===0){l.suppress=!0;break}if(l.level){P.k73(150);var f=P.E8o(6,31,2,3);r=l.level-("1">>f),delete s[l.level];break}}n[m]=l,m===u&&(s[l.level]||(s[l.level]=0),s[l.level]++)}}(g=Object.entries(s).reverse()).length>1&&!o&&g[0][0]>=_&&g[1][0]<_&&1===g[0][1]&&(g[1][1]>1||g.length>2)&&g.shift();g.length&&(r=Number(g[0][0]));return r}.call(this,n),t.xAxis.maxLevelToDisplay=S,P.k73(151),C=P.E8o(_,S),this.panels)if("st","x","_grid_border","stx","_g","rid","st","r","ok","e",!(A=this.panels[Y]).hidden&&!1!==A.shareChartXAxis&&(P.D19(98),D=P.E8o(y,A),k=A.yAxis)){l.save(),l.beginPath(),l.rect(A.left,A.top+(x?0:1),A.width,A.height-1),l.clip(),x=!1,(w=new e.Plotter).newSeries(a,"stroke",this.canvasStyle("stx_grid")),w.newSeries(i,"stroke",this.canvasStyle("stx_grid_dark")),w.newSeries(r,"stroke",this.canvasStyle("stx_grid_border"));for(var q=0;q<n.length&&!((d=n[q]).level>S);q++)d.suppress||Math.floor(d.left)<=A.right&&(M=c&&d.grid===i&&(d.alwaysAsBoundary&&d.level<S||C),Math.floor(d.hz)>A.left&&(N&&(w.moveTo(d.grid,d.hz,k.top),w.lineTo(d.grid,d.hz,k.bottom)),D&&v&&(w.moveTo(r,d.hz,k.bottom+.5),w.lineTo(r,d.hz,k.bottom+6),M&&w.dashedLineTo(r,d.hz,k.bottom+6+h+3,[1,3]))),D&&d.right>A.left&&("stx_xax","is","stx_","xax","i","s_dark",this.canvasColor(d.grid==i&&C||d.alwaysAsBoundary&&d.level<S?"stx_xaxis_dark":"stx_xaxis",l),!C&&d.boundaryOnlyText&&(d.text=d.boundaryOnlyText),l.fillText(d.text,d.hz,b+(M?h+3:0))));if(v){P.D19(8);var X=P.E8o(2,16,13);T=Math.round(k.bottom)+"0.5"*X,P.k73(22);var Z=P.b0A(9,11,98);F=Math.round(A.right)+"0.5"*Z,w.moveTo(r,A.left,T),w.lineTo(r,F,T)}w.draw(l),l.restore()}l.textAlign="left",this.runAppend("drawXAxis",s)}}}},e.ChartEngine.prototype.createSpacedDateXAxis=function(t){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b=V;t||(t=this.chart);var{lineBaseLevel:x}=e.ChartEngine.XAxis,{dataSegment:S,lineApproximation:C,market:A,maxTicks:D,xaxis:k,xAxis:w}=t,{candleWidth:M,interval:T,timeUnit:F}=this.layout;k.length=0;for(var P=0;P<D;P++){if((n=S[P])&&P&&!k.length){A&&(r=this.standardMarketIterator(n.DT,w.adjustTimeZone?this.displayZone:null));for(var _=P;_>0;_--)s={},!r||C&&M<1||(s.DT=r.previous()),k.unshift(s);r=null}if(n||P&&k.length){if(o=n&&n.DT,n&&n.displayDate&&w.adjustTimeZone&&(o=n.displayDate),!o){if(!A)continue;if("tick"==T&&!w.futureTicksInterval)break;if(C&&M<1)break;if(!w.futureTicks)break;r||(r=this.standardMarketIterator(S[P-1].DT,w.adjustTimeZone?this.displayZone:null)),o=r.next()}l={DT:o,data:null},P<S.length&&(l.data=n),k.push(l)}}h=[],t.tzOffsetCache||(t.tzOffsetCache=new Map),t.tzOffsetCache.size>2e4&&t.tzOffsetCache.clear(),c=t.tzOffsetCache,d=((u=A&&A.market_def||{}).normal_daily_open||"00:00").split(":"),b.k73(22);var L=b.b0A(69,6,350);if(p=Number(d[0])*("60">>L),u.hour_aligned||(p+=Number(d[1])),g=r=>{var n,s,o,l,u,d,g;b.F3v(),n="year"===r||T!==r&&F!==r?i:a,s=e.ChartEngine.XAxis.setPropertiesForInterval[r],o=t.left,k.forEach(((t,i)=>{var m,f,y,v,S,C;if(m=t.data&&t.data.candleWidth||M,f=t.DT)switch("t","i","c","k","da","y","m","onth","ye","a","r",r){case"year":y=f.getFullYear();break;case"month":y=f.getMonth();break;case"week":case"day":y=f.getDate();break;case"minute":y=60*f.getHours()+f.getMinutes();break;case"second":y=f.getSeconds();break;case"millisecond":case"tick":y=f.getMilliseconds()}n===a&&(b.D19(26),o+=b.E8o(m,2)),void 0===y||n!==a&&l===y||(v=new e.ChartEngine.XAxisLabel({hz:o,grid:n,raw:y}),"minute"===r&&(u&&u.getDate()===f.getDate()||(u=f,S=`${+f}|${A&&A.market_tz}|${this.displayZone}`,void 0===(d=c.get(S))&&(C=t.data&&t.data.DT||new Date(e.convertTimeZone(f,this.displayZone)),b.D19(152),d=b.b0A(C,"60000",f),c.set(S,d))),b.D19(6),v.marketOpenOffset=b.b0A(d,p)),v.priorDT=g,s&&s(v,t,A,this),v.grid==a&&v.level<x&&(v.level+=x),(i||n===a)&&h.push(v),l=y),n===a?(b.D19(153),o+=b.E8o("2",0,m)):o+=m,g=f}))},(y=(f=["year","month","week","month","day","minute","second","millisecond","tick"]).indexOf(m=F||T))>0){-1660641390,1227350504,v=2;for(var E=1;-1660641390!==b.A5b(E.toString(),E.toString().length,73717);E++)""!=m&&g(f[y/0]),g(f[y]),v+=2;1227350504!==b.A5b(v.toString(),v.toString().length,51785)&&("tick"!==m&&g(f[y-1]),g(f[y]))}return h}},U=t=>{var e;(e=t.CIQ).ChartEngine.prototype.createYAxis=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M=V;if(a="crea",a+="teYAxi",a+="s",r="cre",r+="ateYA",r+="xis",!this.runPrepend(r,arguments)){if(n=t.chart,s=t.name==n.name,i||(i={}),i.noChange=!1,o=i.yAxis?i.yAxis:t.yAxis,e.ChartEngine.enableCaching&&o.high==t.cacheHigh&&o.low==t.cacheLow){l=n.dataSet.length-n.scroll-1,M.D19(6);var T=M.E8o(17,16);h=l+n.maxTicks+T,t.cacheLeft=l,t.cacheRight=h,c=-1708988785,u=559450093,M.k73(29),d=M.b0A("2",32);for(var F=1;M.j0V(F.toString(),F.toString().length,53408)!==c;F++)i.noChange=!1,d+=2;M.j0V(d.toString(),d.toString().length,47707)!==u&&(i.noChange=!0)}else t.cacheLeft=1e6,t.cacheRight=-1,t.cacheHigh=o.high,t.cacheLow=o.low;if(p=n.xAxis.idealTickSizePixels||n.xAxis.autoComputedTickSizePixels,o.goldenRatioYAxis&&o.idealTickSizePixels!=p/1.618&&(i.noChange=!1),!i.noChange){if(this.adjustYAxisHeightOffset(t,o),m=o.height=o.bottom-o.top,f=(o.high-o.low)/(m-o.zoom),!o.semiLog)if(i.ground)o.high=o.high+o.zoom*f;else{M.k73(14);var P=M.b0A(4,8,2,13,210);o.high=o.high+(o.zoom/P+o.scroll)*f,M.k73(154);var _=M.E8o(4,12,3,12,55);o.low=o.low-(o.zoom/_-o.scroll)*f}(o.min||0===o.min)&&(o.low=o.min),(o.max||0===o.max)&&(o.high=o.max),o.shadow=o.high-o.low,!o.semiLog||this.activeDrawing&&"projection"==this.activeDrawing.name||(y=function(){var t;o.logHigh=Math.log(o.high)/Math.LN10,t=Math.max(o.low,1e-9),M.F3x(),o.logLow=Math.log(t)/Math.LN10,o.low<=0&&(o.logLow=0),o.logShadow=o.logHigh-o.logLow},o.semiLog&&y(),v=o.height/(o.height-o.zoom),o.flipped?(o.high=this.transformedPriceFromPixel(o.bottom+v*(o.zoom/2+o.scroll),t,o),o.low=this.transformedPriceFromPixel(o.top-v*(o.zoom/2-o.scroll),t,o)):(o.high=this.transformedPriceFromPixel(o.top-v*(o.zoom/2+o.scroll),t,o),o.low=this.transformedPriceFromPixel(o.bottom+v*(o.zoom/2-o.scroll),t,o)),o.shadow=o.high-o.low,o.semiLog&&y()),o.goldenRatioYAxis&&s&&o==t.yAxis?(M.D19(26),o.idealTickSizePixels=M.E8o(p,1.618),0===o.idealTickSizePixels&&(b=this.getCanvasFontSize("stx_yaxis"),M.D19(17),o.idealTickSizePixels=M.E8o(5,b))):o.idealTickSizePixels||(x="s",x+="tx_",x+="yaxis",b=this.getCanvasFontSize(x),s?(M.k73(17),o.idealTickSizePixels=M.E8o(5,b)):(M.D19(17),o.idealTickSizePixels=M.b0A(2,b))),S=Math.round(m/o.idealTickSizePixels),g=i.range?i.range[1]-i.range[0]:o.shadow,M.D19(26),o.priceTick=Math.floor(M.E8o(g,S)),C=1;for(var L=0;L<10&&!(o.priceTick>0);L++)C*=10,o.priceTick=Math.floor(g/S*C)/C;if(10==L&&(o.priceTick=1e-8),o.priceTick=Math.round(g/S*C)/C,A=Math.round(g/o.priceTick),i.range&&A<g&&!o.noEvenDivisorTicks){for(;A>=1&&g%A!=0;)A--;M.D19(26),o.priceTick=M.b0A(g,A)}if(o.minimumPriceTick){D=o.minimumPriceTick,b=this.getCanvasFontSize("stx_yaxis");for(var E=0;E<100&&(M.k73(26),m/M.b0A(g,D)<2*b);E++)D+=o.minimumPriceTick;E<100&&(o.priceTick=D)}}if(M.F3v(),(o.priceTick<=0||o.priceTick===1/0)&&(o.priceTick=1),o.multiplier=o.height/o.shadow,o.multiplier==1/0&&(o.multiplier=0),o.decimalPlaces||0===o.decimalPlaces)o.printDecimalPlaces=o.decimalPlaces;else if(s){k=0;for(var I=0;I<t.yAxis.shadowBreaks.length;I++)w=t.yAxis.shadowBreaks[I],t.yAxis.shadow<w[0]&&(k=w[1]);o.printDecimalPlaces=k}else o.printDecimalPlaces=null;this.runAppend(a,arguments)}},e.ChartEngine.prototype.drawYAxis=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,W,Q,Y,q,X,Z,J=V;if(a="dr",a+="awYAxi",a+="s",i||(i={}),r=i.yAxis?i.yAxis:t.yAxis,J.F3v(),!t.hidden&&!r.noDraw&&r.width){if(e.Comparison&&r.priceFormatter==e.Comparison.priceFormat||((n=r.fractional)?(r.originalPriceFormatter||(r.originalPriceFormatter={func:r.priceFormatter}),n.resolution||(n.resolution=r.minimumPrice),n.formatter||(n.formatter="'"),r.priceFormatter||(r.priceFormatter=function(t,e,i){var a,r,s,o;if(n){J.F3v(),a="",i<0&&(a="-",i=Math.abs(i)),r=Math.floor(Math.round(i/n.resolution)*n.resolution),s=Math.round((i-r)/n.resolution),o=Math.floor(s),J.D19(22);var l=J.b0A(26,15,380);J.D19(155);var h=J.b0A(1,78880,6,1099396,14);J.k73(156);J.b0A(8507,8510,8492,1,15);return a+r+n.formatter+(o<l?"0":"")+o+(s-o>=.5?296.22==h||"+":"")}})):r.originalPriceFormatter&&(r.priceFormatter=r.originalPriceFormatter.func,r.originalPriceFormatter=null)),s=this.colorOrStyle(r.textStyle||"stx_yaxis"),l=0,(o=this.highlightedDraggable)&&this.yaxisMatches(o,r)?(J.D19(6),l=J.b0A("0.15",0)):r.highlight&&(l=.1),l&&(h=s.constructor==String?s:s.color,r.setBackground(this,{color:h,opacity:l})),r.pretty)return this.drawYAxisPretty(t,i);if(!this.runPrepend("drawYAxis",arguments)){if(!i.noDraw&&!r.noDraw){if(!(c=r.yAxisPlotter)||!i.noChange){if(u="stx_",u+="y",u+="a",u+="xis",d="st",d+="x_grid_bo",d+="rder",p="borde",p+="r",g="fil",g+="l",m="stx_gr",m+="id",f="st",f+="r",f+="ok",f+="e",y="gri",y+="d",c=r.yAxisPlotter=new e.Plotter,v=t.chart,b=t.name==v.name&&r.name===t.yAxis.name,!r.priceTick)return;if(x=r.shadow,(S=i.range)&&(x=S[1]-S[0]),C=x/r.priceTick,C=Math.round(C),r.semiLog&&(A=Math.log(this.valueFromPixel(r.flipped?r.top:r.bottom,t))/Math.LN10,D=(r.logHigh-r.logLow)/C),c.newSeries(y,f,this.canvasStyle(m)),c.newSeries("text",g,s),c.newSeries(p,"stroke",this.canvasStyle(d)),k=0,w=S?S[1]:r.high,M=S?S[0]:r.low,T=null===r.displayBorder?v.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(T=!1),!0===this.axisBorders&&(T=!0),_=(P=v.dynamicYAxis)?r.width:NaN,"left"==(L=this.getYAxisCurrentPosition(r,t))){E=323822473,J.D19(29),I=J.b0A("1216589755",32),N=2;for(var G=1;J.A5b(G.toString(),G.toString().length,19929)!==E;G++)F=r.left-r.width,N+=2;J.j0V(N.toString(),N.toString().length,71441)!==I&&(F=r.left+r.width)}else F=r.left;if(O=Math.round(F)+.5,H=T?3:0,"left"==L&&(H=T?-3:0),b)if(r.shadow<1){J.k73(75);var K=J.E8o(16,60,19,826);J.D19(13);var $=J.b0A(4,5,14,5,56);k=(parseInt(M/r.priceTick,K)+$)*r.priceTick-M}else k=r.priceTick-Math.round(M%r.priceTick*t.chart.roundit)/t.chart.roundit;else k=w%r.priceTick;R=this.getCanvasFontSize(u);for(var tt=0;tt<C;tt++)r.semiLog?(J.k73(129),j=J.E8o(A,tt,D),z=Math.pow(10,j)):z=b?M+tt*r.priceTick+k:w-tt*r.priceTick-k,U=this.pixelFromTransformedValue(z,t,r),(B=Math.floor(U)+.5)+R/2>t.bottom||B-R/2<t.top||Math.abs(B-r.bottom)<1||(r.flipped&&(B=r.top+r.bottom-B),r.displayGridLines&&(W="g",W+="r",W+="i",W+="d",c.moveTo("grid",t.left+1,B),c.lineTo(W,t.right-1,B)),T&&(J.k73(157),c.moveTo("border",J.E8o("0.5",O,1),B),J.k73(19),c.lineTo("border",J.E8o(O,H),B)),z=r.priceFormatter?r.priceFormatter(this,t,z):this.formatYAxisPrice(z,t,null,r),Q=r.textBackground?this.containerColor:null,Y=3,J.k73(38),q=J.E8o(H,Y,F),"left"==L?(q=r.left+Y,!1!==r.justifyRight&&(q=r.left+r.width+H-Y)):r.justifyRight&&(q=F+r.width),c.addText("text",z,q,B,Q,null,R),P&&(_=Math.max(_,v.context.measureText(z).width+Math.abs(H)+Y)));if(T&&(X="b",X+="or",X+="de",X+="r",Z=Math.round(r.bottom)+.5,c.moveTo(X,O,r.top),c.lineTo("border",O,Z),c.draw(this.getBackgroundCanvas(v).context,"border")),P&&_>r.width)throw r._dynamicWidth=_,this.calculateYAxisPositions(),new Error("reboot draw");if(!P&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:v.name}),new Error("reboot draw")}r==t.yAxis&&this.plotYAxisGrid(t)}this.runAppend(a,arguments)}}},e.ChartEngine.prototype.drawYAxisPretty=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,W,Q,Y,q,X,Z,J,G,K,$,tt,et,it,at,rt=V;if(a="d",a+="ra",a+="wY",a+="Axis",!this.runPrepend(a,arguments)&&(i||(i={}),r=i.yAxis||t.yAxis,!t.hidden&&!r.noDraw&&r.width)){if(rt.F3x(),!i.noDraw){if(!(n=r.yAxisPlotter)||!i.noChange){if(s="s",s+="t",s+="x_",s+="yaxis",o="bor",o+="d",o+="er",l="t",l+="e",l+="xt",h="g",h+="r",h+="i",h+="d",c="stx",c+="_y",c+="a",c+="xis",n=r.yAxisPlotter=new e.Plotter,u=t.chart,!r.priceTick)return;if(isNaN(r.high)||isNaN(r.low))return;if(d=r.shadow,i.range){rt.k73(2);var nt=rt.b0A(16,35,13);d=i.range["1"<<nt]-i.range[0]}p=(r.height-(i.range?r.zoom:0))/r.idealTickSizePixels,p=Math.round(p),g=r.textStyle||c,n.newSeries(h,"stroke",this.canvasStyle("stx_grid")),n.newSeries(l,"fill",this.colorOrStyle(g)),n.newSeries(o,"stroke",this.canvasStyle("stx_grid_border")),f=(m=i.range)?m[1]:r.high,y=m?m[0]:r.low,v=null===r.displayBorder?u.panel.yAxis.displayBorder:r.displayBorder,!1===this.axisBorders&&(v=!1),!0===this.axisBorders&&(v=!0),S=(x=u.dynamicYAxis)?r.width:NaN,b="left"==(C=this.getYAxisCurrentPosition(r,t))?r.left+r.width:r.left,A=Math.round(b)+.5,D=v?3:0,"left"==C&&(D=v?-3:0),k=this.getCanvasFontSize(s),M=(w=r.increments).length,T=0,F=1,P=0,_=0,L=0,E=Number.MAX_VALUE;for(var st=0;st<100;st++){rt.k73(19);var ot=rt.b0A(1,9);if(P=w[T]*Math.pow(ot,L),rt.D19(26),F=Math.floor(rt.b0A(d,P)),rt.D19(6),(I=Math.abs(rt.b0A(p,F)))>E)break;if(E=I,F==p){_=P;break}F>p?++T>=M&&(T=0,L++):--T<0&&(rt.D19(157),T=rt.E8o("1",M,1),L--),_=P}if(N=Math.ceil(y/_)*_,O=0,r.bottom-this.pixelFromTransformedValue(N,t,r)>r.idealTickSizePixels&&r.semiLog&&r.prettySemiLog&&f-y>10){for(H=Math.ceil(y),R=0;N-H>=1e4&&R<=15;)N/=10,rt.D19(48),H/=rt.E8o("10",8),R++;for(N=Math.ceil(N),H=Math.ceil(H);H<N&&N%H!=0;++H);N*=Math.pow(10,R),(H*=Math.pow(10,R))<N&&(N===_&&(_=H,O=H),N=H)}if(r.height>r.zoom){rt.D19(17),z=rt.E8o(1,"0"),j=Number.MAX_VALUE,u.context.save(),this.canvasFont("stx_yaxis",u.context),U=r.shadow/_+2;for(var lt=0;lt<U&&(rt.k73(129),!((B=rt.E8o(N,z,_))>f));lt++)if(_+=O,z++,j-(W=this.pixelFromTransformedValue(B,t,r))<k+1&&O>0){j=Number.MAX_VALUE,_=O,O*=2,lt=z=0,rt.D19(2);var ht=rt.E8o(12,0,13);U=r.shadow/_+ht,n.reset()}else j=W,(Q=Math.floor(W)+.5)+k/2>r.bottom||Q-k/2<r.top||Math.abs(Q-r.bottom)<1||(r.displayGridLines&&(Y="g",Y+="r",Y+="i",Y+="d",n.moveTo("grid",t.left+1,Q),n.lineTo(Y,t.right-1,Q)),v&&(q="bord",q+="er",rt.k73(6),n.moveTo(q,rt.b0A(A,.5),Q),rt.k73(19),n.lineTo("border",rt.b0A(A,D),Q)),B=r.priceFormatter?r.priceFormatter(this,t,B):this.formatYAxisPrice(B,t,null,r),X=r.textBackground?this.containerColor:null,Z=J=3,rt.D19(38),G=rt.b0A(D,Z,b),"left"==C?(G=r.left+3,!1!==r.justifyRight&&(G=r.left+r.width+D-Z)):r.justifyRight&&(G=b+r.width-J),n.addText("text",B,G,Q,X,null,k),x&&(rt.D19(19),K=rt.E8o(B,""),S=Math.max(S,u.context.measureText(K).width+Math.abs(D)+Z)));u.context.restore(),lt>=U&&($="drawYAxisPretty: assertion error. zz re",$+="ached ",rt.D19(19),console.log(rt.b0A($,U)))}if(v&&(tt="b",tt+="o",tt+="rder",et="bor",et+="d",et+="er",it=Math.round(r.bottom)+.5,n.moveTo(et,A,r.top),n.lineTo(tt,A,it),n.draw(this.getBackgroundCanvas(u).context,"border")),x&&S>r.width)throw at="reboot",at+=" draw",r._dynamicWidth=S,this.calculateYAxisPositions(),new Error(at);if(!x&&r._dynamicWidth)throw this.resetDynamicYAxis({chartName:u.name}),new Error("reboot draw")}r==t.yAxis&&this.plotYAxisGrid(t)}this.runAppend("drawYAxis",arguments)}}},n(B={}),s(),o(B),l(B),h(B),c(B),u(B),d(B),p(B),g(B),m(B),f(B),y(B),v(B),b(B),x(B),S(B),C(B),A(B),D(B),k(B),w(B),M(B),T(B),F(B),P(B),_(B),L(B),E(B),I(B),N(B),O(B),H(B),R(B),z(B),j(B),U(B);var{CIQ:W,SplinePlotter:Q,timezoneJS:Y,$$:q,$$$:X}=B},266:(t,e,i)=>{"use strict";i.d(e,{$$:()=>L.$$,$I:()=>L.$I,$L:()=>S,BN:()=>v,Dg:()=>D,Fq:()=>k,H:()=>h,KY:()=>P,Kn:()=>f,PP:()=>d,Pz:()=>L.Pz,TO:()=>_,Tl:()=>u,VO:()=>o,aN:()=>w,ac:()=>y,ag:()=>c,e4:()=>M,hA:()=>m,hM:()=>L.hM,i3:()=>l,l0:()=>C,mD:()=>p,qe:()=>F,r:()=>n,rS:()=>A,rt:()=>s,rx:()=>L.rx,tO:()=>x,tb:()=>g,yN:()=>T,yP:()=>b});var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L=i(73);function E(){}E[589718]=function(){for(var t=2;9!==t;)switch(t){case 5:var e;try{for(var i=2;6!==i;)switch(i){case 4:i="undefined"==typeof P6uHc?3:9;break;case 5:e.P6uHc=e,i=4;break;case 2:Object.defineProperty(Object.prototype,"tXEUk",{get:function(){for(;;)return this},configurable:!0}),e=tXEUk,i=5;break;case 3:throw"";case 9:delete e.P6uHc,delete Object.prototype.tXEUk,i=6}}catch(t){e=window}return e;case 1:return globalThis;case 2:t="object"==typeof globalThis?1:5}}(),function(t){function e(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0]}}function i(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].Function}}for(var a=2;124!==a;)switch(a){case 129:n(e,r[15],r[89],r[36]),a=128;break;case 105:n(h,"charCodeAt",r[41],r[73]),a=135;break;case 10:r[5]="",r[7]="d",r[8]="L",r[5]="3",a=17;break;case 40:r[44]="_Nm",r[98]="",r[87]="U",r[82]="abs",a=36;break;case 104:r[15]=r[50],r[15]+=r[82],r[15]+=r[65],r[67]=r[84],r[67]+=r[58],a=99;break;case 131:n(l,"map",r[41],r[38]),a=130;break;case 85:r[74]+=r[17],r[74]+=r[81],r[42]=r[90],r[42]+=r[62],a=81;break;case 58:r[59]="C",r[11]="o",r[31]="__op",r[53]="bS",a=77;break;case 117:r[70]+=r[8],r[70]+=r[4],r[55]=r[1],r[55]+=r[52],a=113;break;case 73:r[41]=6,r[41]=1,r[89]=0,r[78]=r[11],r[78]+=r[60],r[78]+=r[77],a=67;break;case 77:r[72]="c$c",r[77]="8o",r[41]=4,r[60]="_nG",a=73;break;case 62:r[94]="ej",r[59]="",r[99]="d2",r[59]="",a=58;break;case 134:n(h,"fromCharCode",r[89],r[55]),a=133;break;case 67:r[26]=r[72],r[26]+=r[59],r[26]+=r[53],r[45]=r[32],r[45]+=r[94],r[45]+=r[99],r[74]=r[31],a=85;break;case 99:r[67]+=r[80],r[83]=r[40],r[83]+=r[71],r[83]+=r[27],r[38]=r[87],r[38]+=r[44],r[38]+=r[48],a=92;break;case 33:r[52]="$c",r[84]="r",r[97]="",r[58]="0",r[97]="_i",r[50]="__",a=44;break;case 107:r[73]+=r[79],a=106;break;case 3:r[6]="",r[6]="",r[6]="q",r[3]="",r[3]="$_D",a=14;break;case 44:r[65]="tract",r[10]="Pte",r[80]="RUtM",r[86]="Q7",a=40;break;case 133:n(h,"substring",r[41],r[70]),a=132;break;case 127:n(e,r[74],r[89],r[45]),a=126;break;case 51:r[90]="",r[90]="b8u",r[81]="",r[85]="W",a=47;break;case 130:n(e,r[83],r[89],r[67]),a=129;break;case 14:r[4]="",r[4]="",r[4]="yp",r[1]="m",a=10;break;case 36:r[98]="",r[98]="bQ",r[62]="",r[62]="f",a=51;break;case 113:r[55]+=r[13],r[69]=r[11],r[69]+=r[3],r[69]+=r[2],r[73]=r[6],r[73]+=r[9],a=107;break;case 2:var r=[arguments];r[9]="",r[9]="",r[9]="7k",a=3;break;case 135:n(e,"String",r[89],r[69]),a=134;break;case 47:r[81]="",r[81]="ze",r[17]="",r[17]="timi",r[32]="",r[32]="Y3",a=62;break;case 17:r[2]="s",r[30]="",r[13]="lD",r[30]="m2Ml",r[79]="Xk",r[71]="",a=24;break;case 106:var n=function(t,e,i,a){for(var n=2;5!==n;)if(2===n){var s=[arguments];o(r[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};a=105;break;case 92:r[12]=r[30],r[12]+=r[5],r[12]+=r[7],r[70]=r[86],a=117;break;case 81:r[42]+=r[98],r[36]=r[85],r[36]+=r[97],r[36]+=r[10],a=104;break;case 125:n(i,"apply",r[41],r[78]),a=124;break;case 128:n(s,"test",r[41],r[42]),a=127;break;case 24:r[71]="i",r[40]="",r[40]="__res",r[27]="dual",r[48]="Uz",r[84]="",a=33;break;case 132:n(h,"replace",r[41],r[12]),a=131;break;case 126:n(l,"push",r[41],r[26]),a=125}function s(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].RegExp}}function o(t,e,i,a,r){for(var n=2;7!==n;)switch(n){case 2:var s=[arguments];s[9]="",s[1]="Property",s[9]="e",s[5]=!1,s[7]="defin",n=8;break;case 8:try{for(var o=2;13!==o;)switch(o){case 6:s[3].enumerable=s[5];try{for(var l=2;3!==l;)if(2===l)s[6]=s[7],s[6]+=s[9],s[6]+=s[1],s[0][0].Object[s[6]](s[8],s[0][4],s[3]),l=3}catch(t){}o=13;break;case 9:s[8][s[0][4]]=s[8][s[0][2]],s[3].set=function(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];s[8][s[0][2]]=i[0][0],e=5}},s[3].get=function(){for(var t=2;12!==t;)switch(t){case 2:var e=[arguments];e[6]="",e[6]="ed",e[9]="",t=3;break;case 3:e[9]="efin",e[8]="",e[8]="und",e[4]=e[8],t=6;break;case 6:return e[4]+=e[9],e[4]+=e[6],typeof s[8][s[0][2]]==e[4]?void 0:s[8][s[0][2]]}},o=6;break;case 3:return;case 4:o=s[8].hasOwnProperty(s[0][4])&&s[8][s[0][4]]===s[8][s[0][2]]?3:9;break;case 2:s[3]={},s[4]=(0,s[0][1])(s[0][0]),s[8]=[s[4],s[4].prototype][s[0][3]],o=4}}catch(t){}n=7}}function l(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].Array}}function h(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].String}}}(E[589718]),E.W7m=function(){return"function"==typeof E[395775].r6zAdqy?E[395775].r6zAdqy.apply(E[395775],arguments):E[395775].r6zAdqy},E[395775]=function(){for(var t=2;4!==t;)switch(t){case 5:return{P2MqkE7:function(t,e,i,a){for(;;)return n(t,e,i,a)},r6zAdqy:function(t,e,i,a){for(;;)return n(t,e,i,a,!0)}};case 2:var e,i,a=E[589718];t=5}function r(t){for(var e=2;7!==e;)switch(e){case 9:r++,e=4;break;case 3:a+=o$_Ds.m$clD(t[r]-i+107),e=9;break;case 8:return a;case 2:var i=6,a="";e=5;break;case 4:e=r<t.length?3:8;break;case 5:var r=0;e=4}}function n(t,n,s,o,l){for(var h=2;15!==h;)switch(h){case 6:case 16:return E.c0F(u,d,s);case 19:h=null===t||t<=0?18:14;break;case 14:var c=p.length-t;h=13;break;case 13:h=n&&c>0&&46!==p.q7kXk(c-1)?12:11;break;case 11:return d=(u=p.Q7Lyp(c,p.length)).length,E.c0F(u,d,s);case 8:d=(u=p.Q7Lyp(t,o)).length,h=6;break;case 9:h=o>0?8:19;break;case 5:!e&&(e=void 0!==g?g[r([3,10,14,15,9,-4,8,0])]||" ":""),!i&&(i=void 0!==g?g[r([3,13,0,1])]:""),p=l?i:e,h=9;break;case 12:return!1;case 18:d=(u=p.Q7Lyp(0,p.length)).length,h=16;break;case 2:var u,d,p,g;g=a[r([7,10,-2,-4,15,4,10,9])],h=5}}}(),E.Q7y=function(){return"function"==typeof E[306616].A7y3mUZ?E[306616].A7y3mUZ.apply(E[306616],arguments):E[306616].A7y3mUZ},E[591592]=124,E[120247]=(a=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0},{c2sk5jt:function(t,e,i){for(var r=3432918353,n=461845907,s=i,o=-4&e,l=0;l<o;l+=4){var h=255&t.q7kXk(l)|(255&t.q7kXk(l+1))<<8|(255&t.q7kXk(l+2))<<16|(255&t.q7kXk(l+3))<<24;h=a(h,r),s=5*(s=(524287&(s^=h=a(h=(131071&h)<<15|h>>>17,n)))<<13|s>>>19)+3864292196|0}switch(h=0,e%4){case 3:h=(255&t.q7kXk(o+2))<<16;case 2:h|=(255&t.q7kXk(o+1))<<8;case 1:h|=255&t.q7kXk(o),h=a(h,r),s^=h=a(h=(131071&h)<<15|h>>>17,n)}return s^=e,s=a(s^=s>>>16,2246822507),s=a(s^=s>>>13,3266489909),s^=s>>>16}}),E.o0j=function(){return"function"==typeof E[120247].c2sk5jt?E[120247].c2sk5jt.apply(E[120247],arguments):E[120247].c2sk5jt},E.F3j=function(){return"function"==typeof E[359843].a4Ya$z6?E[359843].a4Ya$z6.apply(E[359843],arguments):E[359843].a4Ya$z6},E.e86=function(){return"function"==typeof E[395775].P2MqkE7?E[395775].P2MqkE7.apply(E[395775],arguments):E[395775].P2MqkE7},E[433530]=891,E[359843]=function(){for(var t=2;9!==t;)switch(t){case 2:var e=[arguments];e[9]=void 0,t=5;break;case 5:return e[8]={},e[8].a4Ya$z6=function(){for(var t=2;90!==t;)switch(t){case 30:i[87]={},i[87].h7N=["u0F"],i[87].s09=function(){return"function"==typeof Y3ejd2},i[97]=i[87],t=43;break;case 2:var i=[arguments];t=1;break;case 47:i[8].c$cCbS(i[35]),i[8].c$cCbS(i[4]),i[8].c$cCbS(i[3]),t=65;break;case 39:i[85]={},t=38;break;case 75:i[77]={},i[77][i[73]]=i[44][i[56]][i[50]],i[77][i[72]]=i[75],t=72;break;case 4:i[8]=[],i[7]={},i[7].h7N=["u0F"],i[7].s09=function(){return"function"==typeof r0RUtM},i[4]=i[7],i[2]={},t=14;break;case 69:t=function(t){for(var e=2;22!==e;)switch(e){case 2:var a=[arguments];e=1;break;case 1:e=0===a[0][0].length?5:4;break;case 8:a[2]=0,e=7;break;case 12:a[7].c$cCbS(a[1][i[73]]),e=11;break;case 16:e=a[2]<a[7].length?15:23;break;case 14:e=void 0===a[8][a[1][i[73]]]?13:11;break;case 17:a[2]=0,e=16;break;case 26:e=a[6]>=.5?25:24;break;case 13:a[8][a[1][i[73]]]=function(){for(var t=2;9!==t;)switch(t){case 2:var e=[arguments];e[8]={},e[8].h=0,e[8].t=0,t=3;break;case 3:return e[8]}}.o_nG8o(this,arguments),e=12;break;case 5:return;case 4:a[8]={},a[7]=[],a[2]=0,e=8;break;case 6:a[1]=a[0][0][a[2]],e=14;break;case 24:a[2]++,e=16;break;case 18:a[4]=!1,e=17;break;case 11:a[8][a[1][i[73]]].t+=!0,e=10;break;case 25:a[4]=!0,e=24;break;case 7:e=a[2]<a[0][0].length?6:18;break;case 15:a[5]=a[7][a[2]],a[6]=a[8][a[5]].h/a[8][a[5]].t,e=26;break;case 10:e=a[1][i[72]]===i[12]?20:19;break;case 20:a[8][a[1][i[73]]].h+=!0,e=19;break;case 19:a[2]++,e=7;break;case 23:return a[4]}}(i[93])?68:67;break;case 77:i[50]=0,t=76;break;case 65:i[93]=[],i[12]="P8I",i[90]="n5F",i[56]="h7N",i[72]="w3h",i[79]="s09",i[73]="W36",t=58;break;case 43:i[46]={},i[46].h7N=["T0q"],i[46].s09=function(){return/\x74\x72\u0075\x65/.b8ufbQ(function(){return"A".normalize("NFC")==="".normalize("NFC")}+[])},i[35]=i[46],t=39;break;case 67:return e[9]=72,52;case 14:i[2].h7N=["u0F"],i[2].s09=function(){return"function"==typeof W_iPte},i[3]=i[2],t=11;break;case 70:i[68]++,t=57;break;case 71:i[50]++,t=76;break;case 38:i[85].h7N=["u0F"],i[85].s09=function(){var t=!1,e=[];try{for(var i in console)e.c$cCbS(i);t=0===e.length}catch(t){}return t},t=36;break;case 35:i[58]=i[28],i[52]={},i[52].h7N=["T0q"],i[52].s09=function(){return/\x39\u0037/.b8ufbQ(function(){return"aa".charCodeAt(1)}+[])},i[89]=i[52],t=30;break;case 36:i[17]=i[85],i[8].c$cCbS(i[17]),i[8].c$cCbS(i[58]),i[8].c$cCbS(i[97]),t=51;break;case 72:i[93].c$cCbS(i[77]),t=71;break;case 51:i[8].c$cCbS(i[5]),i[8].c$cCbS(i[89]),i[8].c$cCbS(i[1]),i[8].c$cCbS(i[34]),t=47;break;case 57:t=i[68]<i[8].length?56:69;break;case 68:t=68;break;case 1:t=e[9]?5:4;break;case 58:i[68]=0,t=57;break;case 5:return 63;case 27:i[18]={},i[18].h7N=["T0q"],i[18].s09=function(){return/\x74\u0072\u0075\x65/.b8ufbQ(function(){return"x".startsWith("x")}+[])},t=24;break;case 24:i[34]=i[18],i[28]={},i[28].h7N=["T0q"],i[28].s09=function(){return/\x74\u0072\x75\u0065/.b8ufbQ(function(){return"aaa".includes("a")}+[])},t=35;break;case 18:i[6]={},i[6].h7N=["T0q"],i[6].s09=function(){return!/\x61/.b8ufbQ(function(){return"ab".charAt(1)}+[])},i[1]=i[6],t=27;break;case 11:i[9]={},i[9].h7N=["T0q"],i[9].s09=function(){return!/(\u005b|\x5d)/.b8ufbQ(function(){return["a","a"].join()}+[])},i[5]=i[9],t=18;break;case 56:i[44]=i[8][i[68]];try{i[75]=i[44][i[79]]()?i[12]:i[90]}catch(t){i[75]=i[90]}t=77;break;case 76:t=i[50]<i[44][i[56]].length?75:70}},e[8]}}(),E.c0F=function(){return"function"==typeof E[120247].c2sk5jt?E[120247].c2sk5jt.apply(E[120247],arguments):E[120247].c2sk5jt},E.o1b=function(){return"function"==typeof E[306616].G6w99Zc?E[306616].G6w99Zc.apply(E[306616],arguments):E[306616].G6w99Zc},E[589718].r944=E,E.y_C=function(){return"function"==typeof E[441074].y4dYYDl?E[441074].y4dYYDl.apply(E[441074],arguments):E[441074].y4dYYDl},E.m92=function(){return"function"==typeof E[306616].G6w99Zc?E[306616].G6w99Zc.apply(E[306616],arguments):E[306616].G6w99Zc},E.W$G=function(){return"function"==typeof E[441074].y4dYYDl?E[441074].y4dYYDl.apply(E[441074],arguments):E[441074].y4dYYDl},E[441074]=function(t){function e(e){for(var i=2;15!==i;)switch(i){case 19:return a;case 1:i=c--?4:5;break;case 20:a=e-h>r&&s-e>r,i=19;break;case 4:i=c--?9:3;break;case 10:i=h>=0&&s>=0?20:18;break;case 13:l=t[7],i=12;break;case 6:s=n&&u(n,r),i=14;break;case 9:i=c--?7:8;break;case 2:var a,r,n,s,l,h,u;i=1;break;case 16:a=s-e>r,i=19;break;case 11:h=(l||0===l)&&u(l,r),i=10;break;case 18:i=h>=0?17:16;break;case 5:u=o[t[4]],i=4;break;case 3:r=26,i=9;break;case 8:n=t[6],i=7;break;case 7:i=c--?14:6;break;case 12:i=c--?10:11;break;case 14:i=c--?12:13;break;case 17:a=e-h>r,i=19}}for(var i=2;10!==i;)switch(i){case 3:i=c--?8:9;break;case 4:var a="fromCharCode",r="RegExp";i=3;break;case 9:l=typeof a,i=8;break;case 12:var n,s=0;i=11;break;case 14:t=t.U_NmUz((function(t){for(var e=2;13!==e;)switch(e){case 8:r++,e=3;break;case 2:var i;e=1;break;case 14:return i;case 7:e=i?14:6;break;case 4:var r=0;e=3;break;case 9:i+=o[h][a](t[r]+98),e=8;break;case 5:i="",e=4;break;case 1:e=c--?4:5;break;case 6:return;case 3:e=r<t.length?9:7}})),i=13;break;case 5:o=E[589718],i=4;break;case 6:i=c--?13:14;break;case 13:i=c--?11:12;break;case 1:i=c--?4:5;break;case 11:return{y4dYYDl:function(i){for(var a=2;6!==a;)switch(a){case 5:a=c--?3:4;break;case 3:a=c--?8:9;break;case 4:n=e(r),a=3;break;case 2:var r=(new o[t[0]])[t[1]]();a=1;break;case 1:a=r>s?5:8;break;case 8:return function(e,a){for(var r=2;10!==r;)switch(r){case 8:var n=o[a[4]](e[a[2]](h),16)[a[3]](2),s=n[a[2]](n[a[5]]-1);r=6;break;case 2:r=void 0===e&&void 0!==i?1:5;break;case 1:e=i,r=5;break;case 12:l^=s,r=13;break;case 13:h++,r=9;break;case 5:r=void 0===a&&void 0!==t?4:3;break;case 3:var l,h=0;r=9;break;case 4:a=t,r=3;break;case 9:r=h<e[a[5]]?8:11;break;case 11:return l;case 14:l=s,r=13;break;case 6:r=0===h?14:12}}(void 0,void 0)?n:!n;case 9:s=r+6e4,a=8}}};case 2:var o,l,h,c;i=1;break;case 7:h=l.m2Ml3d(new o[r]("^['-|]"),"S"),i=6;break;case 8:i=c--?6:7}}([[-30,-1,18,3],[5,3,18,-14,7,11,3],[1,6,-1,16,-33,18],[18,13,-15,18,16,7,12,5],[14,-1,16,17,3,-25,12,18],[10,3,12,5,18,6],[-42,-47,10,4,13,13,6,-43,-44],[]]),E[86001]="SEx",E.P$E=function(){return"function"==typeof E[395775].r6zAdqy?E[395775].r6zAdqy.apply(E[395775],arguments):E[395775].r6zAdqy},E.J4P=function(){return"function"==typeof E[306616].A7y3mUZ?E[306616].A7y3mUZ.apply(E[306616],arguments):E[306616].A7y3mUZ},E.Q7V=function(){return"function"==typeof E[395775].P2MqkE7?E[395775].P2MqkE7.apply(E[395775],arguments):E[395775].P2MqkE7},E[306616]={G6w99Zc:function(){var t,e=arguments;switch(r){case 48:t=e[2]-e[1]/e[0];break;case 1:t=e[1]+e[0];break;case 112:t=e[0]*e[1]/e[2];break;case 152:t=e[2]*(e[4]/e[0]-e[1])+e[3];break;case 115:t=e[1]/(e[2]|e[0]);break;case 91:t=e[1]%e[0];break;case 122:t=e[0]*+e[2]/e[1];break;case 17:t=e[2]-e[1]+e[0];break;case 28:t=e[1]-e[4]+e[3]+e[2]+e[0];break;case 150:t=(e[7]-e[2])*(e[0]-e[1])+(e[4]-e[6])*(e[5]-e[3]);break;case 20:t=(e[3]/e[0]-e[1])*e[4]-e[2];break;case 147:t=(e[2]+e[3])*e[4]/e[1]-e[0];break;case 46:t=e[0]-e[3]/e[1]-e[2];break;case 149:t=(e[1]|e[2])*e[0];break;case 75:t=e[1]==e[0];break;case 7:t=e[1]-e[0];break;case 133:t=(-e[2]+e[1])/e[0]-e[3];break;case 125:t=(e[2]*e[1]-e[3])/e[0]-e[4];break;case 33:t=e[2]+(e[4]+e[3]*e[0])*e[1];break;case 106:t=e[4]*e[0]/e[3]/e[2]-e[1];break;case 103:t=e[1]+e[2]+e[3]+e[4]-e[0];break;case 60:t=(-e[1]-e[2])/e[0]+e[3];break;case 127:t=(e[1]-e[3])*e[0]*e[4]-e[2];break;case 34:t=e[0]<<e[1];break;case 35:t=e[1]|e[0];break;case 81:t=e[0]>=e[1];break;case 151:t=(e[0]-e[2])*e[3]-e[1];break;case 64:t=e[2]+e[0]-e[3]+e[1];break;case 108:t=e[1]*e[3]/e[0]+e[2]-e[4];break;case 99:t=e[1]-(e[2]-e[0]);break;case 92:t=e[1]!=e[0];break;case 4:t=e[3]-e[0]/e[1]+e[2];break;case 85:t=e[0]<<e[2]<<e[1];break;case 50:t=e[4]+e[1]+(e[0]<<e[3])+e[2];break;case 16:t=e[1]-e[2]-e[0];break;case 100:t=-e[0]*e[3]+e[2]+e[1];break;case 40:t=e[2]+e[0]*e[1];break;case 8:t=-e[1]+e[0];break;case 83:t=e[0]<=e[1];break;case 63:t=e[0]*e[2]+e[1]-e[3];break;case 132:t=e[0]/(e[1]+e[2]);break;case 142:t=(e[3]<<e[0])*((e[5]-e[2])/e[1]+e[4]);break;case 131:t=e[4]*e[2]*e[1]/e[0]+e[3];break;case 145:t=(e[3]-e[4])/e[2]+e[1]+e[0];break;case 14:t=(-e[1]+e[2])/e[4]/e[3]+e[0];break;case 87:t=+e[0]<<e[1];break;case 57:t=e[1]-+e[0];break;case 9:t=(e[0]+e[2])*e[3]-e[1];break;case 78:t=e[2]/(e[6]-e[4])*e[3]*e[5]*e[0]+e[1];break;case 96:t=-e[1]/e[2]+e[0];break;case 42:t=e[1]>>e[0];break;case 155:t=((e[3]<<e[1])-e[2]/e[4])*e[0];break;case 128:t=(e[3]-e[2])/e[1]-e[4]+e[0];break;case 105:t=(e[1]+e[3]-e[4])/e[2]+e[0];break;case 114:t=e[1]*(e[0]/e[2]);break;case 30:t=(e[2]+e[1])/e[3]+e[0];break;case 111:t=e[3]*(e[0]-e[4]+e[1]/e[2]);break;case 13:t=-e[3]+e[0]-e[1]+e[4]+e[2];break;case 38:t=e[1]-(e[0]>>e[2]);break;case 113:t=-e[0]/e[1]*e[2]+e[3];break;case 5:t=e[0]+e[2]/e[1]-e[3];break;case 11:t=(e[0]+e[2])/e[1];break;case 117:t=-e[1]+e[0]-e[2];break;case 10:t=e[1]/e[0];break;case 3:t=e[1]+e[2]-e[0];break;case 116:t=(e[2]+e[1])/e[3]-e[0];break;case 36:t=e[1]*e[3]*e[2]+e[0]-e[4];break;case 126:t=(e[3]-e[1])/e[0]*e[4]-e[2];break;case 129:t=e[0]/e[1]/e[4]-e[3]+e[2];break;case 23:t=e[2]/(e[1]^e[0]);break;case 156:t=(e[3]+e[0]/e[2])*e[1];break;case 44:t=e[0]+e[2]/+e[1];break;case 98:t=e[1]===e[0];break;case 72:t=(e[1]+e[4]-e[3])/e[2]-e[0];break;case 21:t=(e[2]/e[3]+e[4])/e[0]-e[1];break;case 136:t=(-e[4]*e[2]+e[1])*e[0]+e[3];break;case 41:t=-e[3]+e[1]+e[2]+e[4]-e[0];break;case 25:t=e[0]-e[2]+e[3]*e[1];break;case 2:case 97:t=e[0]*e[1];break;case 82:t=e[0]<e[1];break;case 56:t=e[0]/e[2]*e[1]+e[3]-e[4];break;case 29:t=e[1]+e[0]-e[3]-e[2];break;case 55:t=e[0]*e[1]-e[2];break;case 26:t=e[0]/e[2]+e[3]-e[1];break;case 47:t=e[0]+(e[2]|e[3])*e[1];break;case 138:t=e[0]*e[3]*e[2]-e[1];break;case 73:t=e[1]/e[0]-e[2];break;case 62:t=(-e[4]-e[1]-e[2])/e[0]+e[3];break;case 65:t=(e[1]+e[0])/e[2]*e[3]-e[4];break;case 120:t=e[1]/e[0]*e[2]/e[3]+e[4];break;case 18:t=e[0]-e[1]+e[2]-e[3]+e[4];break;case 84:t=e[0]+e[3]+e[4]+e[2]+e[1];break;case 110:t=e[0]/e[1]-e[3]-e[2];break;case 94:t=e[1]|e[0]|e[2];break;case 118:t=(e[4]-e[1])/e[3]/e[2]+e[0];break;case 61:t=(e[0]-e[3])*e[1]+e[2];break;case 154:t=e[2]-e[1]*e[0];break;case 86:t=e[1]<<+e[0];break;case 89:t=e[1]>e[0];break;case 70:t=-e[0]-e[3]+e[1]+e[2];break;case 148:t=-e[4]*e[3]/e[1]/e[0]+e[2];break;case 137:t=e[4]*e[2]*e[1]*e[0]-e[3];break;case 141:t=e[1]*e[2]+e[0];break;case 124:t=e[1]/e[0]+e[2];break;case 22:t=e[0]/(e[1]*e[2]);break;case 54:t=(e[2]*e[3]-e[4])*e[0]-e[1];break;case 79:t=e[6]/e[3]*(e[0]*e[5]*e[2]+e[4])+e[1];break;case 53:t=(-e[3]-e[0])*e[1]*e[4]+e[2];break;case 146:t=e[1]/e[0]/e[2];break;case 90:t=e[1]<<(e[0]^e[2]);break;case 27:t=-e[1]-e[2]+e[0];break;case 69:t=e[0]*e[1]-e[3]-e[2];break;case 0:t=e[2]+e[0]+e[3]+e[1];break;case 66:t=(e[1]-e[3])/e[0]+e[2];break;case 67:t=(-e[1]+e[2]+e[0])/e[3]+e[4];break;case 109:t=e[0]/e[1]/e[2]-e[3];break;case 71:t=-(e[0]-e[3])*e[2]+e[1];break;case 76:t=e[4]/e[2]*e[3]*e[0]+e[1];break;case 144:t=e[2]%(e[0]*e[1]);break;case 39:t=e[0]-+e[1]-e[2];break;case 139:t=e[2]-e[1]/(e[0]>>e[3]);break;case 93:t=e[1]|e[0]|e[2]|e[3];break;case 77:t=-e[2]/e[1]*(e[7]*(e[6]-e[4])-(e[5]^e[3]))+e[0];break;case 37:t=+e[1]+e[0];break;case 101:t=e[2]+e[0]+e[3]-e[1];break;case 130:t=(e[0]-e[1])/e[2]*e[3]+e[4];break;case 58:t=(e[1]-e[0])/(e[3]-e[2]);break;case 88:t=(e[2]|e[0])<<e[1];break;case 95:t=e[4]|e[3]|e[1]|e[2]|e[0];break;case 119:t=e[4]-(e[2]-e[1])-(e[0]|e[3]);break;case 31:t=(-e[1]-e[3])*e[2]+e[0];break;case 24:t=-e[2]*e[1]+e[0];break;case 45:t=e[0]+e[1]/e[2];break;case 143:t=e[0]/e[2]+e[3]+e[4]+e[1];break;case 121:t=e[2]/e[3]-e[0]+e[1];break;case 153:t=e[1]*e[0]*e[2];break;case 107:t=(e[3]<<e[0])*e[2]/(e[1]+e[4]);break;case 51:t=e[0]-e[1]-e[2]-e[3];break;case 134:t=e[3]*e[6]*e[1]+(e[4]-e[0]*e[2])*e[5];break;case 52:t=e[1]-e[3]+e[2]-e[0];break;case 59:t=(e[3]+e[0])*e[1]/e[4]+e[2];break;case 68:t=e[2]/e[0]/e[1]+e[3];break;case 74:t=e[4]+(e[5]-e[1])/(e[6]-e[0])*(e[2]-e[3]);break;case 49:t=(e[1]-e[3])*e[2]-e[4]+e[0];break;case 12:t=e[0]^e[1];break;case 6:t=e[0]+ +e[1];break;case 135:t=(-e[0]+e[2])/e[1]+e[3]-e[4];break;case 102:t=(e[1]*e[3]+e[0])*e[2]-e[4];break;case 80:t=e[2]*(e[3]*e[4]*e[1]+ +e[5])+e[0];break;case 43:t=e[0]*e[3]+e[2]*e[1];break;case 32:t=(e[2]-e[1])*e[0];break;case 15:t=e[0]+e[2]+e[1];break;case 140:t=e[0]*(e[4]|e[2])*e[3]*e[1];break;case 123:t=(e[4]+e[1])/e[2]*e[3]+e[0];break;case 19:t=e[1]-e[2]-(e[0]^e[3]);break;case 104:t=(e[3]+e[1])/e[2]-e[0]+e[4]}return t},A7y3mUZ:function(t){r=t}},E.X8U=function(){return"function"==typeof E[359843].a4Ya$z6?E[359843].a4Ya$z6.apply(E[359843],arguments):E[359843].a4Ya$z6},E.l1J=function(t){if(E.F3j(),E)return E.y_C(t)},E.r7C=function(t){if(E.X8U(),E&&t)return E.W$G(t)},E.k7m=function(t){if(E.F3j(),E)return E.W$G(t)},E.y2x=function(t){if(E.F3j(),E)return E.y_C(t)},E.u5F=function(t){if(E.X8U(),E)return E.W$G(t)},E.a5Q=function(t){if(E.F3j(),E&&t)return E.y_C(t)},n=t=>{var e,i,a,r=E;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i=class{get(t,e){e("no storage defined")}set(t,e){}remove(t){}},e.ChartEngine.create=function({container:t,config:n,deferLoad:s}={}){var o,l,h;t||(t=document.querySelector(".chartContainer")||document.body),n||(n={}),o=Object.assign({container:t},n.chartEngineParams),l=new this(o);var{quoteFeeds:c,marketFactory:u,addOns:d,chartId:p,multiChartId:g,onEngineReady:m,onChartReady:f}=n;function y(){f&&setTimeout((()=>f(l)))}function v(){r.F3j(),l.loadChart(n.initialSymbol,{masterData:n.initialData},y),l.draw()}for(var b in c&&l.attachQuoteFeed&&c.forEach((({quoteFeed:t,behavior:e,filter:i})=>{r.F3j(),l.attachQuoteFeed(t,e,i)})),u&&l.setMarketFactory(u),d&&Object.entries(d).filter((([,t])=>(r.X8U(),!!t))).forEach((([t,i])=>{var a;if(n.enabledAddOns[t])if(r.F3j(),a=i.moduleName||e.capitalize(t),e[a]){var{cssRequired:s}=new e[a](Object.assign({stx:l},i,{config:n}));s&&e.UI&&e.UI.activatePluginUI(l,a)}else e.debug&&(r.Q7y(0),console.log(`${a}${r.o1b("available ",":"," not ","for addons with params")}`,i))})),h=e.ensureDefaults(n.callbacks||{},{layout:this.getSaveLayout(n),symbolChange:this.getSaveLayout(n),drawing:this.getSaveDrawings(n),preferences:this.getSavePreferences(n),newChart:this.getRetoggleEvents(n)}))h[b]&&l.addEventListener(b,h[b]);return a=new(a=n.nameValueStore||e.NameValueStore||i),s||(m&&m(l),n.restore?(this.restorePreferences(l,p,g),this.restoreLayout(l,(t=>{!l.chart.symbol&&n.initialSymbol?v():y()}),p,n)):v()),l},e.ChartEngine.getSaveLayout=function(t){return function({stx:e}){var i;r.X8U(),t.restore&&e.exportLayout&&(i=JSON.stringify(e.exportLayout(!0)),a.set("myChartLayout"+(t.chartId||""),i))}},e.ChartEngine.restoreLayout=function(t,e,i,n){r.X8U();var{restoreDrawings:s}=this;function o(){r.X8U(),s(t,t.chart.symbol,i),e&&e()}i||(i=""),r.J4P(1),a.get(r.m92(i,"myChartLayout"),(function(e,i){var a,r;if(!e){try{i=JSON.parse(i)}catch(t){}a=n&&n.restore&&!1===n.restore.symbol,i&&i.symbols&&a&&(r=null!=n.initialSymbol&&n.initialSymbol.symbol?n.initialSymbol:{symbol:n.initialSymbol},i.symbols[0]=i.symbols[0]||{},Object.assign(i.symbols[0],{symbol:r.symbol,symbolObject:r}),i.symbols=i.symbols.filter((({symbol:t},e)=>!e||t!==r.symbol))),t.importLayout&&t.importLayout(i,{managePeriodicity:!0,cb:o}),t.crossSection&&t.setCandleWidth(1)}}))},r.X8U(),e.ChartEngine.getSaveDrawings=function(t){return function({stx:e,symbol:i}){var n,s,o;t.restore&&e.exportDrawings&&(n=e.exportDrawings(),s=t.chartId?t.chartId+"~"+i:i,r.Q7y(0),o=`${t.chartId||""}${r.m92("aw","ngs","_dr","i")}`,a.get(o,((t,e)=>{var i;i=e||{},0===n.length?(a.remove(s),delete i[s]):(a.set(s,JSON.stringify(n)),i[s]=n.length),a.set(o,i)})))}},e.ChartEngine.restoreDrawings=function(t,i,n){var s;e.Drawing&&(r.F3j(),s=n?n+"~"+i:i,a.get(s,(function(e,i){if(r.F3j(),!e){try{i=JSON.parse(i)}catch(t){}i&&(t.importDrawings(i),t.draw())}})))},e.ChartEngine.getSavePreferences=function(t){return r.F3j(),function({stx:e}){var i;t.restore&&e.exportPreferences&&(i=JSON.stringify(e.exportPreferences()),a.set("myChartPreferences"+(t.multiChartId||t.chartId||""),i))}},e.ChartEngine.restorePreferences=function(t,e,i){var n;r.X8U(),n=i||e||"",r.Q7y(1),a.get(r.m92(n,"myChartPreferences"),(function(e,i){if(!e){try{i=JSON.parse(i)}catch(t){}i&&t.importPreferences&&t.importPreferences(i)}}))},e.ChartEngine.getRetoggleEvents=function(t){return function({stx:i}){var a;r.F3j(),(a=t.chartId&&document.getElementById(t.chartId))||(a=(e.getFn("UI.getMyContext")(i.container)||{}).topNode),a||(a=document),a.querySelectorAll(`${t.selector.markersMenuItem}.ciq-active:not(.span-event)`).forEach((function(t){t.querySelector(".ciq-switch, .ciq-checkbox, .ciq-radio").dispatchEvent(new Event("stxtap"))}))}}},E.X8U(),s=t=>{var e,i=E;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.drawHeatmap=function(t,e){var a,r,n,s,o,l,h,c,u,d,p,g,m,f;if("D","a","t","a",e&&e.length&&((a=t.panel)||(a="chart"),r=this.panels[a])){n=t.yAxis?t.yAxis:r.yAxis,s=this.chart.dataSegment,t.name||(t.name="Data"),t.widthFactor||(i.J4P(12),t.widthFactor=i.o1b("1",0)),t.height||(t.height=Math.pow(10,1-(r.decimalPlaces||r.chart.decimalPlaces))),o="stx-float-date",l=this.chart.context,this.canvasFont(o,l),h=this.getCanvasFontSize(o),c=1,!t.highlight&&this.highlightedDraggable&&(c=.3),u=.5,r.chart.tmpWidth<=1&&(u=0),d=null,p=null,g=this,m=null,this.startClip(a),l.globalAlpha=c;for(var y=0;y<e.length;y++)v((f=e[y]).field,f.color,f.opacity,null,t.widthFactor,f.height,f.border_color?u:-u/4,f.subField),f.border_color&&this.layout.candleWidth>=2&&v(f.field,f.border_color,f.opacity,!0,t.widthFactor,f.height,u,f.subField);l.lineWidth=1,l.globalAlpha=1,this.endClip()}function v(e,a,o,u,f,y,v,b){var x,S,C,A,D,k,w,M,T,F,P,_,L,E;l.beginPath(),l.fillStyle=a,l.strokeStyle=a,l.textAlign="center",x=g.layout.candleWidth*f,S=Math.floor(g.pixelFromBar(0,r.chart)-g.layout.candleWidth),"number"==typeof o&&(i.Q7y(2),l.globalAlpha=i.m92(o,c)),i.X8U(),"object"==typeof o&&(D={minOpacity:o.min||0,maxOpacity:o.max||1});for(var I=0;I<s.length;I++){if((k=s[I])&&k.candleWidth){if(0===I)S+=g.layout.candleWidth;else{i.J4P(3);var N=i.o1b(16,0,18);S+=(k.candleWidth+x/f)/N}x=k.candleWidth*f}else S+=g.layout.candleWidth;if(i.Q7y(4),C=i.o1b(x,2,v,S),i.Q7y(5),(A=i.m92(S,2,x,v))-C<2&&(i.Q7y(6),A=i.m92(C,"1")),k&&(w=k[e])){w[b]&&(w=w[b]),"number"==typeof w&&(w=[w]);for(var O=0;O<w.length;O++){if(T=0,(M=w[O])instanceof Array){if(D){i.J4P(7);var H=i.m92(4,6);i.J4P(8);var R=i.o1b(15,14);i.Q7y(9);var z=i.m92(22,818,19,20);l.globalAlpha=c*(M[H]*D.maxOpacity+(R-M[z])*D.minOpacity)}T=M[1],M=M[0]}F=g.pixelFromPrice(M,r,n),m||(y||(y=t.height),P=g.pixelFromPrice(M+y*(n.flipped?1:-1),r,n),l.lineWidth=1,i.J4P(7),d=i.m92(F,P),i.J4P(10),p=i.o1b(2,d),m=l.lineWidth),u?(i.J4P(7),_=i.o1b(p,F),i.Q7y(1),L=i.m92(p,F),i.Q7y(7),l.rect(C,_,i.m92(C,A),i.o1b(_,L))):(i.Q7y(7),l.fillRect(C,i.m92(p,F),i.o1b(C,A),d),t.showSize&&T&&h<=d-2&&(E=l.globalAlpha,l.fillStyle=g.defaultColor,i.J4P(2),l.globalAlpha=i.o1b(.5,c),i.Q7y(11),l.fillText(T,i.m92(A,2,C),F),l.fillStyle=a,i.J4P(2),l.globalAlpha=i.o1b(E,c))),D&&M instanceof Array&&(l.globalAlpha=0)}}}u&&l.stroke(),l.globalAlpha=c,l.closePath()}},e.ChartEngine.prototype.drawCandles=function(t,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V;(n=t.chart)||(n=t,t=t.chart),s=!1,o=!1,l=null,h=t.yAxis,r&&"object"==typeof r?(s=r.isOutline,o=r.isHistogram,l=r.field,h=r.yAxis):(s=r,o=arguments[3]),c=n.dataSegment,u=n.context,d=h.top,p=h.bottom,y=new Array(c.length),v="transparent",b="transparent",x=0,i.J4P(13);var W=i.m92(12,14,6,14,11);S=n.dataSet.length-n.scroll-W,C={},A=n.tmpWidth/2,D=this.layout.candleWidth,i.J4P(14);var Q=i.o1b(2,19,2,1,17);k=t.left-.5*D+this.micropixels-Q;for(var Y=0;Y<=c.length;Y++)if(w="ou",w+="tlin",w+="e",M="cl",M+="o",M+="s",M+="e",T=A,i.Q7y(10),k+=i.m92(2,D),D=this.layout.candleWidth,i.Q7y(10),k+=i.m92(2,D),(F=c[Y])&&(F.cache&&!n.pixelCacheExpired||(F.cache={}),!F.projection)){if(F.candleWidth){i.Q7y(7);var q=i.m92(19,21);k+=(F.candleWidth-D)/q,D=F.candleWidth,(r.isVolume||D<n.tmpWidth)&&(i.J4P(10),T=i.m92(2,D))}if(n.transformFunc&&h==n.panel.yAxis&&F.transform&&(F=Object.assign({},F,F.transform)),P=F.cache,F&&l&&(F=F[l]),(F||0===F)&&(_="open",L=M,l&&(i.J4P(15),_=i.m92(l,_,"."),i.J4P(15),L=i.o1b(l,L,".")),E=F.Close,I=void 0===F.Open?E:F.Open,o&&n.defaultPlotField&&(E=F[n.defaultPlotField]),(E||0===E)&&(o||I!=E&&null!==I)&&(N=a(this,F,s?w:"solid")))){if(s?v=N:b=N,C[b]=1,(O=v&&!e.isTransparent(v))&&!r.highlight&&(x=.5),u.beginPath(),u.fillStyle=b,i.J4P(1),(H=i.o1b(Y,S))<t.cacheLeft||H>t.cacheRight||!P[_]){if(R=h.semiLog?h.height*(1-(Math.log(Math.max(I,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-I)*h.multiplier,z=h.semiLog?h.height*(1-(Math.log(Math.max(E,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-E)*h.multiplier,Math.abs(R-z)<1&&(R=z),h.flipped?(i.J4P(7),R=i.m92(R,p),i.J4P(7),z=i.o1b(z,p)):(R+=d,z+=d),y[Y]=z,g=o?z:Math.min(R,z),m=o?h.bottom:Math.max(R,z),g=Math.floor(g),m=Math.floor(m),i.J4P(7),f=i.m92(g,m),g<d){if(g+f<d){P[_]=g,P[L]=g;continue}i.J4P(16),f-=i.o1b(1,d,g),i.Q7y(7),g=i.m92(1,d)}g+f>p&&(i.J4P(17),f=i.o1b(1,g,p)),P[_]=g,i.J4P(1),P[L]=i.o1b(f,g)}P[_]>=p||P[L]<=d||(j=Math.floor(k)+(!r.highlight&&.5),U=Math.floor(j-T)+x,B=Math.round(j+T)-x,u.rect(U,P[_]+x,Math.max(0,B-U),Math.max(0,P[L]-P[_])),!r.highlight&&this.highlightedDraggable&&(u.globalAlpha*=.3),"transparent"!=b&&u.fill(),O&&(u.lineWidth=1,r.highlight&&(u.lineWidth*=2),u.strokeStyle=v,u.stroke()))}}for(var X in n.pixelCacheExpired=!1,V={colors:[],cache:y},C)r.hollow&&e.equals(X,this.containerColor)||V.colors.push(X);return V},e.ChartEngine.prototype.drawShadows=function(t,e,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L;(r=t.chart)||(r=t,t=t.chart),n=r.dataSegment,(s=this.chart.context).lineWidth=1,a.highlight&&(s.lineWidth*=2),!a.highlight&&this.highlightedDraggable&&(i.Q7y(7),s.globalAlpha*=i.m92(0,"0.3")),i.X8U(),o=a.isHistogram,l=a.field,c=(h=a.yAxis||t.yAxis).top,u=h.bottom,i.Q7y(18);var E=i.m92(0,15,13,12,15);d=r.dataSet.length-r.scroll-E,p=this.layout.candleWidth,i.J4P(7);var I=i.m92(9,10);g=t.left-.5*p+this.micropixels-I;for(var N=0;N<=n.length;N++)if(i.J4P(10),g+=i.o1b(2,p),p=this.layout.candleWidth,i.J4P(10),g+=i.m92(2,p),(m=n[N])&&(m.cache&&!r.pixelCacheExpired||(m.cache={}),!m.projection&&(m.candleWidth&&(g+=(m.candleWidth-p)/2,p=m.candleWidth),(f=e(this,m,"shadow"))&&(r.transformFunc&&h==r.panel.yAxis&&m.transform&&(m=m.transform),y=m.cache,m&&l&&(m=m[l]),(m||0===m)&&(v="top",b="bottom",l&&(i.Q7y(15),v=i.o1b(l,v,"."),i.Q7y(15),b=i.o1b(l,b,".")),x=m.Close,S=void 0===m.Open?x:m.Open,C=void 0===m.High?Math.max(x,S):m.High,A=void 0===m.Low?Math.min(x,S):m.Low,x||0===x))))){if(i.J4P(1),(D=i.o1b(N,d))<t.cacheLeft||D>t.cacheRight||!y[v]){if(k=h.semiLog?h.height*(1-(Math.log(Math.max(C,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C)*h.multiplier,w=h.semiLog?h.height*(1-(Math.log(Math.max(A,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-A)*h.multiplier,Math.abs(w-k)<1&&(w=k),k=Math.floor(k),w=Math.floor(w),i.Q7y(7),M=i.o1b(k,w),h.flipped?(i.Q7y(7),k=i.m92(k,u),i.J4P(7),w=i.o1b(w,u)):(k+=c,w+=c),k<c){if(k+M<c){y[v]=k,y[b]=k;continue}i.J4P(19),M-=i.o1b("1",c,k,0),i.Q7y(7),k=i.m92(1,c)}k+M>u&&(i.J4P(17),M=i.o1b(1,k,u)),y[v]=k,y[b]=y[v]+M}y[v]>=u||y[b]<=c||(T=Math.floor(g)+(!a.highlight&&.5),s.beginPath(),o||x!=S||(F=this.offset,a.isVolume&&(i.J4P(10),F=i.m92(2,p)),i.J4P(7),P=i.m92(F,T),i.J4P(1),_=i.m92(F,T),L=h.semiLog?h.height*(1-(Math.log(Math.max(x,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-x)*h.multiplier,L=Math.floor(L)+(!a.highlight&&.5),h.flipped?(i.Q7y(7),L=i.m92(L,u)):L+=c,L<=u&&L>=c&&(s.moveTo(P,L),s.lineTo(_,L))),C!=A&&(s.moveTo(T,y[v]),s.lineTo(T,y[b])),s.strokeStyle=f,s.stroke())}r.pixelCacheExpired=!1},i.F3j(),e.ChartEngine.prototype.drawBarChart=function(t,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B;(s=t.chart)||(s=t,t=t.chart),o=s.dataSegment,l=new Array(o.length),h=s.context,(c=this.canvasStyle(a)).width&&parseInt(c.width,10)<=25?h.lineWidth=Math.max(1,e.stripPX(c.width)):h.lineWidth=1,n.highlight&&(h.lineWidth*=2),!n.highlight&&this.highlightedDraggable&&(h.globalAlpha*=.3),u=n.field,p=(d=n.yAxis||t.yAxis).top,g=d.bottom,i.J4P(20),i.F3j();var V=i.m92(1,11,23,13,12);f=s.dataSet.length-s.scroll-V,y={},v=s.tmpWidth/2,b=h.lineWidth/2,x=this.layout.candleWidth,i.Q7y(21);var W=i.o1b(1,7,13,13,7);S=t.left-.5*x+this.micropixels-W;for(var Q=0;Q<=o.length;Q++)if("b","ott","om","to","p",i.J4P(22),S+=i.o1b(x,"2",1),x=this.layout.candleWidth,i.J4P(23),S+=i.m92(0,"2",x),(C=o[Q])&&(C.cache&&!s.pixelCacheExpired||(C.cache={}),!C.projection)){if(C.candleWidth){i.J4P(24);var Y=i.m92(10,2,4);S+=(C.candleWidth-x)/Y,x=C.candleWidth}if((A=r(this,C))&&(y[A]=1,h.strokeStyle=A,h.beginPath(),s.transformFunc&&d==s.panel.yAxis&&C.transform&&(C=C.transform),D=C.cache,C&&u&&(C=C[u]),(C||0===C)&&(k="top",w="bottom",M="open",T="close",u&&(i.Q7y(15),k=i.m92(u,k,"."),i.Q7y(15),w=i.m92(u,w,"."),i.J4P(15),M=i.o1b(u,M,"."),i.Q7y(15),T=i.m92(u,T,".")),F=C.Close,P=void 0===C.Open?F:C.Open,_=void 0===C.High?Math.max(F,P):C.High,L=void 0===C.Low?Math.min(F,P):C.Low,F||0===F))){if(i.Q7y(1),(E=i.m92(Q,f))<t.cacheLeft||E>t.cacheRight||!D[k]){if(I=this.pixelFromTransformedValue(_,t,d),N=this.pixelFromTransformedValue(L,t,d),I=Math.floor(I),N=Math.floor(N),i.Q7y(7),m=i.o1b(I,N),D[M]=d.semiLog?d.height*(1-(Math.log(Math.max(P,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-P)*d.multiplier,D[T]=d.semiLog?d.height*(1-(Math.log(Math.max(F,0))/Math.LN10-d.logLow)/d.logShadow):(d.high-F)*d.multiplier,Math.abs(D[T]-D[M])<1&&(D[T]=D[M]),D[M]=Math.floor(D[M]),D[T]=Math.floor(D[T]),d.flipped?(D[M]=d.bottom-D[M],D[T]=d.bottom-D[T]):(D[M]+=d.top,D[T]+=d.top),l[Q]=D[T],I<p){if(I+m<p){D[k]=I,D[w]=I;continue}i.J4P(16),m-=i.o1b(1,p,I),i.Q7y(7),I=i.o1b(1,p)}I+m>g&&(i.J4P(25),m=i.o1b(g,1,I,"1")),D[k]=I,i.J4P(1),D[w]=i.o1b(m,I)}O=!n.highlight&&.5,H=Math.floor(S)+O,R=D[M]+O,z=D[T]+O,j=D[k]+O,U=D[w]+O,j<g&&U>p&&C.High!=C.Low&&(i.Q7y(7),h.moveTo(H,i.m92(b,j)),i.J4P(1),h.lineTo(H,i.o1b(b,U))),"hlc"!=n.type&&R>p&&R<g&&(h.moveTo(H,R),i.J4P(7),h.lineTo(i.o1b(v,H),R)),z>p&&z<g&&(h.moveTo(H,z),i.Q7y(1),h.lineTo(i.o1b(v,H),z)),h.stroke()}}for(var q in h.lineWidth=1,s.pixelCacheExpired=!1,B={colors:[],cache:l},y)e.equals(q,this.containerColor)||B.colors.push(q);return B},e.ChartEngine.prototype.drawWaveChart=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;function M(e){return i.X8U(),g.pixelFromTransformedValue(e,t,l)}n=(r=t.chart).dataSegment,s=new Array(n.length),o=r.context,a||(a={}),l=a.yAxis||t.yAxis,this.startClip(t.name),o.beginPath(),h=!1,c=!1,u=t.yAxis.top,d=t.yAxis.bottom,p=t.left+Math.floor(-.5*this.layout.candleWidth+this.micropixels),g=this;for(var T=0;T<=n.length;T++)if(p+=this.layout.candleWidth,m=n[T]){if(m.projection)break;if(r.transformFunc&&l==r.panel.yAxis&&m.transform&&(m=m.transform),m&&a.field&&(m=m[a.field]),(m||0===m)&&(f=m.Close,y=void 0===m.Open?f:m.Open,v=void 0===m.High?Math.max(f,y):m.High,b=void 0===m.Low?Math.min(f,y):m.Low,f||0===f)){i.J4P(7);var F=i.o1b(3,6);i.Q7y(26);var P=i.m92(13,21,1,16);if(x=p-F*this.layout.candleWidth/P,(S=M(y))<u){if(S=u,c){o.moveTo(x,S);continue}c=!0}else if(S>d){if(S=d,c){o.moveTo(x,S);continue}c=!0}else c=!1;if(h)o.lineTo(x,S);else{h=!0,i.Q7y(27);var _=i.m92(35,18,16);(C=r.dataSet.length-r.scroll-_)<0?o.moveTo(x,S):C>=0&&((A=r.dataSet[C]).transform&&(A=A.transform),D=M(D=A.Close),D=Math.min(Math.max(D,u),d),o.moveTo(t.left+(T-1)*this.layout.candleWidth+this.micropixels,D),o.lineTo(x,S)),o.moveTo(x,S)}i.J4P(28);var L=i.m92(4,0,12,5,17);if(x+=this.layout.candleWidth/L,y<f){(S=M(b))<u&&(S=u),S>d&&(S=d),o.lineTo(x,S),i.J4P(29);var E=i.o1b(19,80,85,10);x+=this.layout.candleWidth/E,(S=M(v))<u&&(S=u),S>d&&(S=d),o.lineTo(x,S)}else{(S=M(v))<u&&(S=u),S>d&&(S=d),o.lineTo(x,S),i.Q7y(30);var I=i.o1b(3,19,0,19);x+=this.layout.candleWidth/I,(S=M(b))<u&&(S=u),S>d&&(S=d),o.lineTo(x,S)}i.J4P(31);var N=i.m92(251,13,13,6);x+=this.layout.candleWidth/N,S=M(f),s[T]=S,S<u&&(S=u),S>d&&(S=d),o.lineTo(x,S)}}return(k=this.canvasStyle("stx_line_chart")).width&&parseInt(k.width,10)<=25?o.lineWidth=Math.max(1,e.stripPX(k.width)):(i.Q7y(7),o.lineWidth=i.o1b(0,"1")),a.highlight&&(o.lineWidth*=2),this.canvasColor("stx_line_chart"),a.color&&(o.strokeStyle=a.color),!a.highlight&&this.highlightedDraggable&&(o.globalAlpha*=.3),o.stroke(),o.closePath(),w={colors:[o.strokeStyle],cache:s},this.endClip(),o.lineWidth=1,w},e.ChartEngine.prototype.drawHistogram=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I;if("D","ata",a&&a.length&&((r=t.panel)||(r="chart"),n=this.panels[r])){for(s=t.yAxis?t.yAxis:n.yAxis,o=t.type,l=this.chart.dataSegment,h=!1,c=1,u=1,p=0;p<a.length;p++)h|=a[p].border_color_up&&!e.isTransparent(a[p].border_color_up),h|=a[p].border_color_down&&!e.isTransparent(a[p].border_color_down),c=a[p].opacity_up,u=a[p].opacity_down,!t.highlight&&this.highlightedDraggable&&(c*=.3,u*=.3);!1===t.borders&&(h=!1),t.name||(t.name="Data"),g=s.multiplier,t.heightPercentage||(t.heightPercentage=.7),t.widthFactor||(t.widthFactor=.8),i.J4P(7),m=i.m92(0,"0"),f=0;for(var N=0;N<this.chart.maxTicks;N++)if(y=l[N])for(v=0,p=0;p<a.length;p++)((b=y[a[p].field])||0===b)&&(d=a[p].subField||this.chart.defaultPlotField||"Close","object"==typeof b&&b[d]&&(b=b[d]),"stacked"==o?v+=b:v=b,v>m&&(m=v),v<f&&(f=v));if(0===m&&0===f)return" N","ot ","Avai","lable",void this.displayErrorAsWatermark(r,this.translateIf(t.name+" Not Available"));if(S=!1,t.bindToYAxis){s.baseline&&(f=s.baseline.value,S=!0),i.J4P(9);var O=i.m92(0,71,8,9);x=Math.floor(this.pixelFromPrice(f,n,s))+(s.flipped?-.5*O:.5)}else s.flipped?(x=Math.floor(s.top)-.5,C=Math.floor(s.bottom)-.5):(x=Math.floor(s.bottom)+.5,C=Math.floor(s.top)+.5),g=Math.abs(x-C)*t.heightPercentage/(m-f);for(this.startClip(r),A=this.layout.candleWidth<=1||!h?0:.5,D=this.chart.context,s.flipped&&(D.translate(0,2*s.top),D.scale(1,-1)),k=Math.max(0,(1-t.widthFactor)*this.layout.candleWidth/2),w=new Array(l.length),M=[],T=this,F=1,p=0;p<a.length;p++){if("func","t","i","on",P=a[p],F=this.layout.candleWidth*t.widthFactor,k&&this.layout.candleWidth-F<=2&&(h=!1),_=0,"clustered"==o&&(_=p,F/=a.length),d=P.subField||this.chart.defaultPlotField||"Close","function"==typeof P.color_function){E={};for(var H=0;H<l.length;H++)l[H]&&("string"==typeof(L=P.color_function(l[H]))&&(L={fill_color:L,border_color:L}),L.hasOwnProperty("border_opacity")||(L.border_opacity=L.opacity),(I=L.fill_color+","+L.border_color)in E?E[I].positions.push(H):(L.positions=[H],E[I]=L));for(I in E)L=E[I],R(P.field,d,L.fill_color,L.opacity,null,null,_,F,L.positions),R(P.field,d,L.border_color,L.border_opacity,!0,null,_,F,L.positions)}else R(P.field,d,P.fill_color_up,c,null,!0,_,F),R(P.field,d,P.fill_color_down,u,null,null,_,F),this.layout.candleWidth>=2&&h&&(R(P.field,d,P.border_color_up,c,!0,!0,_,F),R(P.field,d,P.border_color_down,u,!0,null,_,F));"stacked"==o&&(M=e.shallowClone(w))}D.globalAlpha=1,this.endClip()}function R(t,e,a,r,s,h,c,u,d){var p,m,y,v,b,C,F,P,_,L,E,I,N;r||(r=1),D.globalAlpha=r,D.beginPath(),i.J4P(1),p=i.o1b(.5,x),m=Math.floor(T.pixelFromBar(0,n.chart)-T.layout.candleWidth/2);for(var O=0;O<l.length;O++)"c","l","ustere","d",y=M[O]||x,0===O&&(p=y),l[O]&&l[O][t]?("object"==typeof(b=(v=l[O])[t])&&b[e]&&(b=b[e]),i.J4P(32),C=i.m92(g,f,b),isNaN(C)||(F=T.layout.candleWidth,v.candleWidth&&(F=v.candleWidth,0===O&&(m=Math.floor(T.pixelFromBar(0,n.chart)-v.candleWidth/2))),(P=Math.floor(y-C)+.5)>y&&!S&&(P=y),d&&-1==d.indexOf(O)||!d&&(h&&v.Close<v.iqPrevClose||!h&&v.Close>=v.iqPrevClose)?(p=P,m+=F):(_=F/T.layout.candleWidth,k?(i.J4P(33),L=Math.round(i.o1b(u,_,m,c,k)),i.Q7y(1),E=i.m92(s?0:A,L),I=L+Math.round(u*_)-(s?0:A)):(i.Q7y(33),L=i.o1b(u,_,m,c,k),E=Math.round(L)+(s?0:A),I=Math.round(L+u*_)-(s?0:A)),I-E<2&&(i.Q7y(1),I=i.m92(1,E)),E%1==(N=s?0:.5)&&(E+=.5),I%1==N&&(I+=.5),D.moveTo(I,y),x!=y&&s&&!k&&M[O+1]&&D.moveTo(I,Math.max(P,Math.min(y,M[O+1]))),D.lineTo(I,P),D.lineTo(E,P),s&&c?(w[O]>P||0===O)&&D.lineTo(E,Math.min(y,w[O])):s&&!k&&"clustered"==o?O>0&&w[O-1]&&w[O-1]>P&&D.lineTo(E,Math.min(y,w[O-1])):s&&!k?(p>P||0===O)&&D.lineTo(E,Math.min(y,p)):D.lineTo(E,y),p=P,m+=F,("clustered"!=o||s)&&(w[O]=P)))):(p=y,m+=T.layout.candleWidth);s?(D.strokeStyle=a&&"auto"!=a?a:T.defaultColor,D.stroke()):(D.fillStyle=a&&"auto"!=a?a:T.defaultColor,D.fill()),D.closePath()}},e.ChartEngine.prototype.scatter=function(t,e){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;r=(a=t.chart).dataSegment,n=new Array(r.length),i.X8U(),s=this.chart.context,this.canvasColor("stx_scatter_chart"),e||(e={}),o=e.field||a.defaultPlotField,l=e.yAxis||t.yAxis,h=e.subField||a.defaultPlotField||"Close",this.startClip(t.name),s.beginPath(),s.lineWidth=e.lineWidth||4,e.highlight&&(s.lineWidth*=2),!e.highlight&&this.highlightedDraggable&&(s.globalAlpha*=.3),e.color&&(s.strokeStyle=e.color),c=l.top,u=l.bottom,d=this.layout.candleWidth,i.Q7y(24);var S=i.m92(85,14,6);p=t.left-.5*d+this.micropixels-S;for(var{tickFilter:C}=e,A=0;A<=r.length;A++)if(i.J4P(10),p+=i.o1b(2,d),d=this.layout.candleWidth,i.Q7y(10),p+=i.m92(2,d),g=r[A]){if(g.candleWidth&&(p+=(g.candleWidth-d)/2,d=g.candleWidth),C){if(0===C.length)break;if(!C.has(g.tick))continue;C.delete(g.tick)}if(!g.projection){a.transformFunc&&l==a.panel.yAxis&&g.transform&&(g=g.transform),(m=g[o])&&void 0!==m[h]&&(m=m[h]),m instanceof Array||(m=[m]),"Scatter"in g&&(m=g.Scatter);for(var D=0;D<m.length;D++)(m[D]||0===m[D])&&(f=m[D],y=0,m[D]instanceof Array&&(f=m[D][0],y=m[D][2]),v=l.semiLog?l.height*(1-(Math.log(Math.max(f,0))/Math.LN10-l.logLow)/l.logShadow):(l.high-f)*l.multiplier,l.flipped?(i.J4P(7),v=i.o1b(v,u)):v+=c,v<c||v>u||(b=2,y&&(i.J4P(2),b=i.o1b(d,y)),i.Q7y(7),s.moveTo(i.m92(b,p),v),i.J4P(1),s.lineTo(i.m92(b,p),v),n[A]=v))}}return s.stroke(),s.closePath(),x={colors:[s.strokeStyle],cache:n},this.endClip(),s.lineWidth=1,x}},o=t=>{var e,i,a=E;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,e.ChartEngine.drawingTools={},e.ChartEngine.currentVectorParameters={vectorType:null,pattern:"solid",lineWidth:1,fillColor:"#7DA6F5",currentColor:"auto",axisLabel:!0,showCallout:!1,alwaysMagnetize:!1,spanPanels:!1,fibonacci:{trend:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},fibs:[{level:-.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:-.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:-.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:0,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.5,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:.786,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1,color:"auto",parameters:{pattern:"solid",lineWidth:1},display:!0},{level:1.272,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:1.382,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:1.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1},display:!0},{level:2.618,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},{level:4.236,color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}],extendLeft:!1,printLevels:!0,printValues:!1,timezone:{color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}}},volumeProfile:{priceBuckets:30},annotation:{font:{style:null,size:null,weight:null,family:null}},measurementline:{calloutOnHover:!1,displayGroups:{bars:!0,delta:!0,annpercent:!1,totreturn:!1,volume:!1,studies:!1}}},e.ChartEngine.registerDrawingTool=function(t,i){e.ChartEngine.drawingTools[t]=i},e.ChartEngine.completeDrawing=function(t){var e;t&&t.activeDrawing&&(e=t.activeDrawing,t.keepDrawingToolSelected||(t.drawingContainer&&t.drawingContainer.tool?t.drawingContainer.tool({node:null},"notool"):t.changeVectorType("")),t.dispatch("drawingComplete",{stx:t,drawing:e}))},e.ChartEngine.prototype.keepDrawingToolSelected=!1,e.ChartEngine.prototype.setDrawingContainer=function(t){a.X8U(),this.drawingContainer=t},e.ChartEngine.prototype.exportDrawings=function(){var t;t=[];for(var e=0;e<this.drawingObjects.length;e++)t.push(this.drawingObjects[e].serialize());return t},e.ChartEngine.prototype.abortDrawings=function(t){var e;!1!==t&&(t=!0);for(var i=this.drawingObjects.length-1;i>=0;i--)(e=this.drawingObjects[i]).abort(!0),!t&&e.permanent||this.drawingObjects.splice(i,1)},e.ChartEngine.prototype.importDrawings=function(t){var i,a,r;if(e.Drawing)for(var n=0;n<t.length;n++)"fibonac","c","i","fibonacci"==(i=t[n]).name&&(i.name="retracement"),(a=e.ChartEngine.drawingTools[i.name])||e.Drawing[i.name]&&(a=e.Drawing[i.name],e.ChartEngine.registerDrawingTool(i.name,a)),a&&((r=new a).reconstruct(this,i),this.drawingObjects.push(r))},e.ChartEngine.prototype.clearDrawings=function(t,i){var a,r;!1!==i&&(i=!0),a=this.exportDrawings(),this.abortDrawings(i),t?this.undoStamps=[]:this.undoStamp(a,this.exportDrawings()),this.changeOccurred("vector"),this.cancelTouchSingleClick=!0,e.clearCanvas(this.chart.tempCanvas,this),this.draw(),(r=this.controls.mSticky)&&(r.style.display="none",r.children[0].innerHTML="")},e.ChartEngine.prototype.createDrawing=function(t,i){var r,n;if(e.Drawing){for(var s in(r=new e.Drawing[t]).reconstruct(this,i),(n=new e.Drawing[t]).stx=this,n.copyConfig(),a.X8U(),n)r[s]=r[s]||n[s];return this.drawingObjects.push(r),this.draw(),r}},e.ChartEngine.prototype.removeDrawing=function(t){a.F3j();for(var e=0;e<this.drawingObjects.length;e++)if(this.drawingObjects[e]==t)return a.Q7y(34),this.drawingObjects.splice(e,a.m92("1",64)),this.changeOccurred("vector"),void this.draw()},e.ChartEngine.prototype.undo=function(){var t;this.runPrepend("undo",arguments)||(a.F3j(),this.activeDrawing&&(t="stx_crossha",t+="ir",this.activeDrawing.abort(),this.activeDrawing.hidden=!1,this.drawingSnapshot=null,this.activateDrawing(null),e.clearCanvas(this.chart.tempCanvas,this),this.draw(),this.controls.crossX.classList.replace("stx_crosshair_drawing",t),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair"),e.ChartEngine.drawingLine=!1),this.runAppend("undo",arguments))},e.ChartEngine.prototype.undoStamp=function(t,e){a.F3j(),this.undoStamps.push(t),this.dispatch("undoStamp",{before:t,after:e,stx:this})},e.ChartEngine.prototype.undoLast=function(){this.activeDrawing?this.undo():this.undoStamps.length&&(this.drawingObjects=[],this.importDrawings(this.undoStamps.pop()),this.changeOccurred("vector"),this.draw())},e.ChartEngine.prototype.addDrawing=function(t){var e;e=this.exportDrawings(),this.drawingObjects.push(t),this.undoStamp(e,this.exportDrawings())},e.ChartEngine.prototype.repositionDrawing=function(t,i){var a,r,n;(this.currentPanel.name==t.panelName||t.spanPanels)&&(a=this.panels[t.panelName],r=this.adjustIfNecessary(a,this.crosshairTick,t.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),a,this.getYAxisByField(a,t.field))),n=this.chart.tempCanvas,e.clearCanvas(n,this),i?(this.drawingSnapshot=this.exportDrawings(),t.render(n.context)):(t.reposition(n.context,t.repositioner,this.crosshairTick,r),this.drawingSnapshot&&this.undoStamp(e.shallowClone(this.drawingSnapshot),this.exportDrawings()),this.drawingSnapshot=null),t.measure&&t.measure())},e.ChartEngine.prototype.activateRepositioning=function(t){this.repositioningDrawing=t,t&&(this.draw(),this.repositionDrawing(t,!0)),this.chart.tempCanvas.style.display=t?"block":"none"},e.ChartEngine.prototype.activateDrawing=function(t,i){var r;if(i||(i=this.currentPanel),this.drawingSnapshot=null,!t)return"no","ne",this.activeDrawing=null,this.chart.tempCanvas.style.display="none",n(this),!1;if(a.X8U(),(r=e.ChartEngine.drawingTools[t])||e.Drawing[t]&&(r=e.Drawing[t],e.ChartEngine.registerDrawingTool(t,r)),r&&(this.activeDrawing=new r,this.activeDrawing.construct(this,i),!this.charts[i.name]&&this.activeDrawing.chartsOnly))return this.activeDrawing=null,n(this),!1;function n(t){var e;t.layout.studies&&(a.F3j(),(e=t.layout.studies[i.name])&&!e.overlay&&delete t.overlays[e.name])}return this.chart.tempCanvas.style.display="block",this.controls.drawOk&&(this.controls.drawOk.style.display="none"),n(this),!0},e.ChartEngine.prototype.drawingClick=function(t,i,r){var n,s,o,l,h,c,u;if(e.Drawing&&(a.F3j(),t&&""===this.openDialog&&(this.activeDrawing||this.activateDrawing(this.currentVectorParameters.vectorType,t)))){if(this.activeDrawing){if(this.userPointerDown&&!this.activeDrawing.dragToDraw)return void(e.ChartEngine.drawingLine||this.activateDrawing(null));if(!this.activeDrawing.p0){if(n="H",n+="i",n+="g",n+="h",s=this.highlightedDataSetField,null!==this.magnetizedPrice&&(t!==this.chart.panel||["Open",n,"Low","Close"].indexOf(this.magneticHold)<0)&&(s=e.getObjectChainRoot(this.magneticHold)),!s&&t!=this.chart.panel){for(var d in this.chart.seriesRenderers)if((o=this.chart.seriesRenderers[d]).params.panel==t.name){s=o.seriesParams[0].field;break}for(var p in this.layout.studies)if((l=this.layout.studies[p]).panel==t.name){s=Object.keys(l.outputMap)[0];break}}this.activeDrawing.field=s}return h=this.tickFromPixel(i,t.chart),c=this.panels[this.activeDrawing.panelName],u=this.magnetizedPrice||0===this.magnetizedPrice?this.adjustIfNecessary(c,h,this.magnetizedPrice):this.adjustIfNecessary(c,h,this.activeDrawing.valueFromPixel(r,c,this.getYAxisByField(c,this.activeDrawing.field))),this.activeDrawing.click(this.chart.tempCanvas.context,h,u)?this.activeDrawing&&("st","x_crossha","ir_drawing",e.ChartEngine.drawingLine=!1,e.clearCanvas(this.chart.tempCanvas,this),this.addDrawing(this.activeDrawing),e.ChartEngine.completeDrawing(this),this.activateDrawing(null),this.adjustDrawings(),this.draw(),this.changeOccurred("vector"),this.controls.crossX.classList.replace("stx_crosshair_drawing","stx_crosshair"),this.controls.crossY.classList.replace("stx_crosshair_drawing","stx_crosshair")):("stx_crosshai","r",this.changeOccurred("drawing"),e.ChartEngine.drawingLine=!0,this.controls.crossX.classList.replace("stx_crosshair","stx_crosshair_drawing"),this.controls.crossY.classList.replace("stx_crosshair","stx_crosshair_drawing")),!0}return!1}},e.ChartEngine.prototype.rightClickDrawing=function(t,e,i){var a,r,n,s;a="rightC",a+="lickDr",a+="awing",r="rightClickD",r+="ra",r+="wing",this.runPrepend(r,arguments)||t.permanent||(this.callbackListeners.drawingEdit.length?(n="drawi",n+="ngEdit",this.dispatch(n,{stx:this,drawing:t,forceEdit:e,forceText:i})):(t.abort()||(s=this.exportDrawings(),this.removeDrawing(t),this.undoStamp(s,this.exportDrawings())),this.changeOccurred("vector")),this.runAppend(a,arguments))},e.ChartEngine.prototype.magnetize=function(){var t,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P;if(t="stx",t+="-d",t+="ragg",t+="able",i="#39",i+="8dff",r="#",r+="398dff",n="L",n+="o",n+="w",s="H",s+="i",s+="g",s+="h",a.F3j(),o="fr",o+="e",o+="efor",o+="m",l=this,this.magnetizedPrice=null,(this.preferences.magnet||this.currentVectorParameters.alwaysMagnetize)&&!this.runPrepend("magnetize",arguments)&&!this.repositioningDrawing&&(h=this.currentVectorParameters.vectorType)&&"projection"!=h&&h!=o&&("annotation"!=h&&"callout"!=h||!e.ChartEngine.drawingLine)&&(c=this.activeDrawing?this.panels[this.activeDrawing.panelName]:this.currentPanel,u=c.chart,!((d=this.crosshairTick)>u.dataSet.length)&&(p=u.dataSet[d]))){if(m=this.getRenderedItems(),f=["Open",s,n,"Close"],this.activeDrawing&&this.activeDrawing.penDown){if(!this.magneticHold)return;y=183004659,v=-1826696386,a.Q7y(35),b=a.o1b(2,"2");for(var _=1;a.c0F(_.toString(),_.toString().length,82399)!==y;_++)m=6==f.indexOf(this.magneticHold)||!1!==m.indexOf("")?f:[this.magneticHold],b+=2;a.o0j(b.toString(),b.toString().length,77231)!==v&&(m=-1!=f.indexOf(this.magneticHold)&&-1!=m.indexOf("High")?f:[this.magneticHold])}else this.magneticHold=null;x=1e9,S=parseFloat(this.preferences.magnet),"measurementline"==h&&(S=!1);for(var L=0;L<m.length;L++)if(C=this.getYAxisByField(c,m[L])||c.yAxis,(A=u.transformFunc&&C===u.yAxis)&&p.transform&&(p=p.transform),D=p[m[L]],(k=e.existsInObjectChain(p,m[L]))&&(D=k.obj[k.member]),(D||0===D)&&(w=this.pixelFromTransformedValue(D,c,C),Math.abs(this.cy-w)<x)){if(x=Math.abs(this.cy-w),S&&S<=x)continue;this.magnetizedPrice=D,A&&function(){var t,i;t=u.untransformFunc,i=e.getObjectChainRoot(m[L]),t&&u.series[i]&&(u.untransformFunc=(e,a,r,n)=>t(e,a,r,n,i)),l.magnetizedPrice=l.valueFromPixel(w,c),u.untransformFunc=t}(),g=w,this.magneticHold=m[L]}M=this.pixelFromTick(d,u),T=g,e.clearCanvas(u.tempCanvas,this),(F=u.tempCanvas.context).beginPath(),F.lineWidth=1,a.Q7y(3);var E=a.m92(246,240,18);a.J4P(7);var I=a.m92(33,36);P=Math.max(this.layout.candleWidth,E)/I,F.arc(M,T,Math.min(P,8),0,2*Math.PI,!1),F.fillStyle=r,F.strokeStyle=i,F.fill(),F.stroke(),F.closePath(),u.tempCanvas.style.display="block",this.anyHighlighted&&this.container.classList.remove(t),this.activeDrawing&&this.activeDrawing.move(F,this.crosshairTick,this.activeDrawing.valueFromPixel(T,c,this.getYAxisByField(c,this.activeDrawing.field))),this.runAppend("magnetize",arguments)}},e.ChartEngine.prototype.changeVectorType=function(t){var i,r,n;if("s","tx-crosshair-o","n","cq-","cont","ext-wrap","per.active",this.currentVectorParameters.vectorType=t,this.currentVectorParameters.alwaysMagnetize=!1,e.Drawing&&e.Drawing.initializeSettings(this,t),e.ChartEngine.drawingLine&&this.undo(),i=!this.uiContext||!this.uiContext.topNode.multiChartContainer||this.uiContext.topNode.closest("cq-context-wrapper.active"),!this.container.classList.contains("stx-crosshair-on")&&t&&i){var{chart:s,left:o,top:l}=this;r=s.width/2+o+s.left,a.Q7y(36);var h=a.m92(13,22,7,14,2167);n=s.height/h+l+s.top,this.mousemoveinner(r,n)}this.doDisplayCrosshairs()},e.ChartEngine.prototype.changeVectorParameter=function(t,e){var i;return"p","x","axi","sLabe","l","axisLabel"==t?e="true"===e.toString()||Number(e):"lineWidth"==t?e=Number(e):"fontSize"==t&&(e=parseInt(e,10)+"px"),(void 0!==(i=this.currentVectorParameters)[t]||"font"==t.substr(0,4)&&("family"==(t=t.substr(4).toLowerCase())&&"default"==e.toLowerCase()&&(e=null),void 0!==(i=i.annotation.font)[t]))&&(i[t]=e,!0)},e.ChartEngine.prototype.drawVectors=function(){var t,e,i,r,n;if(a.X8U(),!this.vectorsShowing&&!this.runPrepend("drawVectors",arguments)){if(this.vectorsShowing=!0,!this.chart.hideDrawings&&!this.highlightedDraggable){for(t={},i=0;i<this.drawingObjects.length;i++)if(!(r=this.drawingObjects[i]).hidden&&this.repositioningDrawing!==r&&(e=r.panelName,this.panels[r.panelName]&&!this.panels[r.panelName].hidden))for(var s in this.panels)t[s]||(t[s]=[]),(r.spanPanels||s==e)&&(r.originPanelName=r.panelName,t[s].push(r));for(e in t){for(this.startClip(e),n=t[e],i=0;i<n.length;i++)n[i].spanPanels?(n[i].panelName=e,n[i].render(this.chart.context),n[i].panelName=n[i].originPanelName):n[i].render(this.chart.context);this.endClip()}}this.runAppend("drawVectors",arguments)}},e.ChartEngine.prototype.adjustDrawings=function(){for(var t,e=0;e<this.drawingObjects.length;e++)t=this.drawingObjects[e],this.panels[t.panelName]&&t.adjust()},e.Drawing=e.Drawing||function(){a.F3j(),this.chartsOnly=!1,this.penDown=!1},e.Drawing.getDrawingParameters=function(t,i){var r,n,s,o;a.F3j();try{r=new e.Drawing[i]}catch(t){}if(!r)return null;r.stx=t,r.copyConfig(!0),n={},s=r.configs;for(var l=0;l<s.length;l++)n[s[l]]=r[s[l]];return(o=t.canvasStyle("stx_annotation"))&&n.font&&(n.font.size=o.fontSize,n.font.family=o.fontFamily,n.font.style=o.fontStyle,n.font.weight=o.fontWeight),n},e.Drawing.saveConfig=function(t,i){var r,n;i&&((r=t.preferences).drawings||(r.drawings={}),r.drawings[i]={},n=new e.Drawing[i],a.X8U(),n.stx=t,e.Drawing.copyConfig(n),n.configs.forEach((function(t){r.drawings[i][t]=n[t]})),t.changeOccurred("preferences"))},e.Drawing.restoreDefaultConfig=function(t,i,a){a?t.preferences.drawings=null:t.preferences.drawings[i]=null,t.changeOccurred("preferences"),t.currentVectorParameters=e.clone(e.ChartEngine.currentVectorParameters),t.currentVectorParameters.vectorType=i},e.Drawing.initializeSettings=function(t,i){var r,n;a.F3j(),(r=e.Drawing[i])&&(n=new r).initializeSettings&&n.initializeSettings(t)},e.Drawing.updateSource=function(t,e,i,a){var r,n;if(e){for(var s in r=!1,t.drawingObjects)(n=t.drawingObjects[s]).field&&(i?n.field==e?(n.field=i,r=!0):n.field.indexOf(e)>-1&&-1==n.field.indexOf(e+"-")&&(n.field=n.field.replace(e,i),r=!0):n.field.split("--\x3e")[0]!=e&&n.panelName!=e||(n.panelName=a,r=!0));r&&t.changeOccurred("vector")}},e.Drawing.prototype.copyConfig=function(t){e.Drawing.copyConfig(this,t)},e.Drawing.copyConfig=function(t,i){var a,r,n,s,o;for(a=t.stx.currentVectorParameters,r=t.configs,n=0;n<r.length;n++)"f","o","n","t","c","ol","o","r","color"==(s=r[n])?t.color=a.currentColor:"parameters"==s?t.parameters=e.clone(a.fibonacci):"font"==s?t.font=e.clone(a.annotation.font):t[s]=a[s];if(i&&(o=t.stx.preferences)&&o.drawings)for(e.extend(t,o.drawings[a.vectorType]),n=0;n<r.length;n++)"color"==(s=r[n])?a.currentColor=t.color:"parameters"==s?a.fibonacci=e.clone(t.parameters):"font"==s?a.annotation.font=e.clone(t.font):a[s]=t[s]},e.Drawing.prototype.dragToDraw=!1,e.Drawing.prototype.permanent=!1,e.Drawing.prototype.chartsOnly=!1,e.Drawing.prototype.abort=function(t){},e.Drawing.prototype.measure=function(){},e.Drawing.prototype.construct=function(t,e){this.stx=t,this.panelName=e.name},e.Drawing.prototype.isAllowed=function(t,e){return a.X8U(),!0},e.Drawing.prototype.render=function(t){console.warn("must implement render function!")},e.Drawing.prototype.click=function(t,e,i){var r;a.F3j(),r=2;for(var n=1;-1113355055!==a.c0F(n.toString(),n.toString().length,46074);n++)"must implement click fun","ction!",console.warn("must implement click function!"),r+=2;-157793253!==a.o0j(r.toString(),r.toString().length,10212)&&console.warn("")},e.Drawing.prototype.move=function(t,e,i){a.X8U(),console.warn("must implement move function!")},e.Drawing.prototype.reposition=function(t,e,i,a){},e.Drawing.prototype.intersected=function(t,e,i){console.warn("must implement intersected function!")},e.Drawing.prototype.reconstruct=function(t,e){console.warn("must implement reconstruct function!")},e.Drawing.prototype.serialize=function(){a.F3j(),console.warn("must implement serialize function!")},e.Drawing.prototype.adjust=function(){a.X8U(),console.warn("must implement adjust function!")},e.Drawing.prototype.highlight=function(t){return(t&&!this.highlighted||!t&&this.highlighted)&&(this.highlighted=t),this.highlighted},e.Drawing.prototype.littleCircleRadius=function(){return 6,6},e.Drawing.prototype.littleCircle=function(t,i,a,r){var n,s;this.permanent||(n=this.stx.defaultColor,s=e.chooseForegroundColor(n),t.beginPath(),t.lineWidth=1,t.arc(i,a,this.littleCircleRadius(),0,2*Math.PI,!1),t.fillStyle=r?n:s,t.strokeStyle=n,t.setLineDash([]),t.fill(),t.stroke(),t.closePath())},e.Drawing.prototype.rotator=function(t,e,i,r){var n,s,o;this.permanent||(n=this.littleCircleRadius(),s=this.stx.defaultColor,t.beginPath(),t.lineWidth=2,r||(t.globalAlpha=.5),a.Q7y(37),o=a.o1b(n,"4"),t.arc(e,i,o,0,3*Math.PI/2,!1),a.Q7y(15),t.moveTo(a.o1b(e,o,2),a.m92(2,i,a.J4P(1))),a.J4P(1),t.lineTo(a.m92(o,e),i),a.Q7y(17),t.lineTo(a.m92(o,2,e),a.m92(2,i,a.J4P(1))),a.Q7y(7),t.moveTo(a.m92(2,e),a.m92(o,i,2,a.J4P(3))),a.Q7y(7),t.lineTo(e,a.o1b(o,i)),a.Q7y(38),t.lineTo(a.m92("2",e,32),a.o1b(i,"2",o,a.Q7y(39))),t.strokeStyle=s,t.stroke(),t.closePath(),t.globalAlpha=1)},e.Drawing.prototype.mover=function(t,e,i,r){var n,s,o;if(!this.permanent){n=this.littleCircleRadius(),s=this.stx.defaultColor,5,a.X8U(),a.Q7y(40),o=a.o1b("1",1,n),t.save(),t.lineWidth=2,t.strokeStyle=s,t.translate(e,i),r||(t.globalAlpha=.5);for(var l=0;l<4;l++)t.rotate(Math.PI/2),t.beginPath(),t.moveTo(0,o),a.Q7y(34),t.lineTo(a.o1b("0",32),a.o1b(5,o,a.J4P(1))),a.Q7y(3),t.moveTo(-2,a.o1b(2,o,5)),a.Q7y(1),t.lineTo(0,a.o1b(5,o)),a.J4P(3),t.lineTo(2,a.m92(2,o,5)),t.closePath(),t.stroke();t.globalAlpha=1,t.restore()}},e.Drawing.prototype.resizer=function(t,e,i,r){var n,s,o,l;if(!this.permanent){n=this.littleCircleRadius(),s=this.stx.defaultColor,a.J4P(41);var h=a.o1b(40,20,17,4,12);a.J4P(7);var c=a.m92(18,20);o=h*Math.sqrt(c),a.J4P(1),l=a.o1b(1,n),t.save(),t.lineWidth=2,t.strokeStyle=s,t.translate(e,i),t.rotate(-e*i/Math.abs(e*i)*Math.PI/4),r||(t.globalAlpha=.5);for(var u=0;u<2;u++)t.rotate(Math.PI),t.beginPath(),t.moveTo(0,l),a.Q7y(1),t.lineTo(0,a.m92(o,l)),a.J4P(3),t.moveTo(-2,a.m92(2,l,o)),a.Q7y(42),t.lineTo(a.m92(64,"0"),a.o1b(o,l,a.Q7y(1))),a.J4P(3),t.lineTo(2,a.o1b(2,l,o)),t.closePath(),t.stroke();a.J4P(34),t.globalAlpha=a.m92("1",32),t.restore()}},e.Drawing.prototype.pointIntersection=function(t,e,i,r){var n,s;if(!(s=(n=this.stx).panels[this.panelName]))return!1;if(this.field&&!r&&(e=this.pixelFromValue(s,t,e,n.getYAxisByField(s,this.field)),t=n.pixelFromTick(t,s.chart),r=!0),a.X8U(),r){if(t>=i.cx0&&t<=i.cx1&&e>=i.cy0&&e<=i.cy1)return!0}else if(t>=i.x0&&t<=i.x1&&e>=Math.min(i.y0,i.y1)&&e<=Math.max(i.y0,i.y1))return!0;return!1},e.Drawing.prototype.setPoint=function(t,i,r,n){var s,o,l,h,c,u,d,p,{stx:g}=this,{maxTicks:m=100,dataSet:f=[]}=n||g.chart||{};s=-m,o=f.length-1+m,l=null,a.F3j(),h=null,"number"==typeof i?l=i:i.length>=8?h=i:l=Number(i),(r||0===r)&&(a.J4P(1),this[a.m92(t,"v")]=r),null!==l?(l=Math.max(l,s),l=Math.min(l,o),c=g.dateFromTick(l,n,!0),a.Q7y(1),this[a.o1b(t,"tzo")]=c.getTimezoneOffset(),a.Q7y(1),this[a.m92(t,"d")]=e.yyyymmddhhmmssmmm(c),a.Q7y(1),this[a.m92(t,"p")]=[l,r]):null!==h&&("t","z","o",u=e.strToDateTime(h),this["tzo"+t]||0===this["tzo"+t]||(a.J4P(1),this[a.m92(t,"tzo")]=u.getTimezoneOffset()),a.Q7y(1),this[a.o1b(t,"d")]=h,d=this["tzo"+t]-u.getTimezoneOffset(),u.setMinutes(u.getMinutes()+d),p=!1,"freeform"==this.name||e.ChartEngine.isDailyInterval(g.layout.interval)||u.getHours()||u.getMinutes()||u.getSeconds()||u.getMilliseconds()||(p=!0),a.J4P(1),this[a.m92(t,"p")]=[g.tickFromDate(e.yyyymmddhhmmssmmm(u),n,null,p),r])},e.Drawing.prototype.getLineColor=function(t,i){var a,r,n,s,o,l,h,c,u;if(t||(t=this.color),a=this.stx,r=t,!i&&this.highlighted)"st","x_highlight_ve","ct","or",r=a.getCanvasColor("stx_highlight_vector");else if(e.isTransparent(r))r=a.defaultColor;else if("auto"==r&&(r=a.defaultColor,this.field)){for(n in a.layout.studies)if(o=(s=a.layout.studies[n]).outputs[s.outputMap[this.field]]){r=o.color||o;break}for(n in a.chart.seriesRenderers){h=a.chart.seriesRenderers[n];for(var d=0;d<h.seriesParams.length;d++){if("-","->","Clo","s","e",(u=(c=h.seriesParams[d]).field)||h.highLowBars||(u=this.defaultPlotField||"Close"),c.symbol&&c.subField&&(u+="--\x3e"+c.subField),this.field==u){r=c.color;break}c.field&&c.field==this.field.split("--\x3e")[0]&&(l=c.color)}}l&&(r=l)}return"auto"==r&&(r=a.defaultColor),r},e.Drawing.prototype.valueFromPixel=function(t,e,i){var r,n,s;return r=e.chart.untransformFunc,n=this.field,r&&e.chart.series[n]&&(e.chart.untransformFunc=(t,e,i,s)=>(a.F3j(),r(t,e,i,s,n))),s=this.stx.valueFromPixel(t,e,i),e.chart.untransformFunc=r,s},e.Drawing.prototype.pixelFromValue=function(t,e,i,a){var r,n,s;return r=t.chart.transformFunc,n=this.field,r&&t.chart.series[n]&&(t.chart.transformFunc=(t,e,i,a)=>r(t,e,i,a,n)),s=this.stx.pixelFromValueAdjusted(t,e,i,a),t.chart.transformFunc=r,s},e.Drawing.prototype.boxToPixels=function(t,i,r,n){var s,o,l,h;return s=t.panels[i],o=s.chart.transformFunc,l=this.field,o&&s.chart.series[l]&&(s.chart.transformFunc=(t,e,i,r)=>(a.F3j(),o(t,e,i,r,l))),h=e.convertBoxToPixels(t,i,r,n),s.chart.transformFunc=o,h},e.Drawing.BaseTwoPoint=function(){this.p0=null,this.p1=null,this.color=""},e.inheritsFrom(e.Drawing.BaseTwoPoint,e.Drawing),e.Drawing.BaseTwoPoint.prototype.configs=[],e.Drawing.BaseTwoPoint.prototype.lineIntersection=function(t,i,r,n,s,o,l){var h,c;return s||(s=this.p0),o||(o=this.p1),h=this.stx,!(!s||!o)&&(void 0!==r.cx0&&(c={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},l||(c=this.boxToPixels(h,this.panelName,c,h.getYAxisByField(h.panels[this.panelName],this.field))),a.F3j(),e.boxIntersects(r.cx0,r.cy0,r.cx1,r.cy1,c.x0,c.y0,c.x1,c.y1,n)))},e.Drawing.BaseTwoPoint.prototype.boxIntersection=function(t,e,i){var a,r;if(!this.p0||!this.p1)return!1;var{x0:n,x1:s,y0:o,y1:l,cy0:h,cy1:c}=i;if(n>Math.max(this.p0[0],this.p1[0])||s<Math.min(this.p0[0],this.p1[0]))return!1;var{field:u,panelName:d,stx:p}=this;return u&&(a=p.panels[d],r=p.getYAxisByField(a,u),o=this.valueFromPixel(h,a,r),l=this.valueFromPixel(c,a,r)),!(l>Math.max(this.p0[1],this.p1[1])||o<Math.min(this.p0[1],this.p1[1]))},e.Drawing.BaseTwoPoint.prototype.accidentalClick=function(t,e){var i,r,n,s,o,l,h,c,u;if(r=(i=this.stx).panels[this.panelName],n=i.pixelFromTick(this.p0[0],r.chart),s=i.pixelFromTick(t,r.chart),o=i.getYAxisByField(r,this.field),l=this.pixelFromValue(r,this.p0[0],this.p0[1],o),h=this.pixelFromValue(r,t,e,o),a.Q7y(7),c=Math.abs(a.m92(n,s)),a.J4P(7),u=Math.abs(a.o1b(l,h)),a.J4P(43),Math.sqrt(a.o1b(c,u,u,c))<10)return this.penDown=!1,i.undo(),!0},e.Drawing.BaseTwoPoint.prototype.click=function(t,e,i){var r;return this.copyConfig(),r=this.stx.panels[this.panelName],a.F3j(),this.penDown?(this.accidentalClick(e,i)||(this.setPoint(1,e,i,r.chart),this.penDown=!1),!0):(this.setPoint(0,e,i,r.chart),this.penDown=!0,!1)},e.Drawing.BaseTwoPoint.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart))},e.Drawing.BaseTwoPoint.prototype.move=function(t,e,i){a.F3j(),this.penDown&&(this.copyConfig(),this.p1=[e,i],this.render(t))},e.Drawing.BaseTwoPoint.prototype.measure=function(){var t,i,a,r;t=this.stx,this.p0&&this.p1&&(t.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0,this.name),(a=(i=t.controls.mSticky)&&i.querySelector(".mStickyInterior"))&&("Clos","e",(r=[]).push(t.translateIf(e.capitalize(this.name))),this.getYValue&&r.push(t.translateIf(this.field||t.defaultPlotField||"Close")),r.push(a.innerHTML),a.innerHTML=r.join("<br>")))},a.F3j(),e.Drawing.BaseTwoPoint.prototype.reposition=function(t,e,i,r){var n,s,o;a.F3j(),e&&(n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-r,this.spanPanels&&this.stx.currentPanel.name!==this.originPanelName&&(o=0),"move"==e.action?(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.setPoint(1,e.p1[0]-s,e.p1[1]-o,n.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.render(t)))},e.Drawing.BaseTwoPoint.prototype.drawDropZone=function(t,e,i,r,n){var s,o,l,h,c,u,d;(s=this.stx.panels[this.panelName])&&(o=this.stx,l=s.left,h=s.width,(r||0===r)&&(l=o.pixelFromTick(r,s.chart)),(n||0===n)&&(h=o.pixelFromTick(n,s.chart)),c=o.getYAxisByField(s,this.field),a.X8U(),u=this.pixelFromValue(s,r,e,c),d=this.pixelFromValue(s,n,i,c),t.fillStyle="#008000",t.globalAlpha=.2,a.J4P(7),t.fillRect(l,u,a.o1b(l,h),a.m92(u,d)),t.globalAlpha=1)},e.Drawing.BaseTwoPoint.prototype.valueOnDrawingAxis=function(t,e){var i,{stx:a,panelName:r,field:n}=this;return i=a.panels[r],this.valueFromPixel(a.pixelFromValueAdjusted(i,t,e),i,a.getYAxisByField(i,n))},e.Drawing.annotation=function(){this.name="annotation",this.arr=[],this.w=0,this.h=0,a.Q7y(34),this.padding=a.o1b("5",0),this.text="",this.ta=null,this.border=!0,this.fontSize=0,this.font={},this.defaultWidth=25,a.F3j(),a.Q7y(2),this.whitespace=a.o1b("30",1),this.fontModifier=3},e.inheritsFrom(e.Drawing.annotation,e.Drawing.BaseTwoPoint),e.Drawing.annotation.prototype.getFontString=function(){var t,e;for(var i in a.X8U(),this.fontDef={style:null,weight:null,size:"12px",family:null},(t=this.stx.canvasStyle("stx_annotation"))&&(t.fontStyle&&(this.fontDef.style=t.fontStyle),t.fontWeight&&(this.fontDef.weight=t.fontWeight),t.fontSize&&(this.fontDef.size=t.fontSize),t.fontFamily&&(this.fontDef.family=t.fontFamily)),this.font.style&&(this.fontDef.style=this.font.style),this.font.weight&&(this.fontDef.weight=this.font.weight),this.font.size&&(this.fontDef.size=this.font.size),this.font.family&&(this.fontDef.family=this.font.family),this.fontString="",e=!0,this.fontDef)this.fontDef[i]&&(e?e=!1:this.fontString+=" ",this.fontString+=this.fontDef[i])},e.Drawing.annotation.prototype.configs=["color","font"],e.Drawing.annotation.prototype.measure=function(){},e.Drawing.annotation.prototype.render=function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y;if("m","i","dd","le",!this.ta&&(i=(e=this.stx).panels[this.panelName],r=e.getYAxisByField(i,this.field),i&&(!this.field||r))){n=e.pixelFromTick(this.p0[0],i.chart),s=this.pixelFromValue(i,this.p0[0],this.p0[1],r),t.font=this.fontString,t.textBaseline="middle",o=n,l=s,h=this.w,c=this.h,u=this.getLineColor(),this.stem&&(this.stem.d?(d=e.pixelFromTick(this.stem.t),g=this.pixelFromValue(i,this.stem.t,this.stem.v,r),a.J4P(44),p=a.m92(o,"2",h),a.J4P(44),m=a.o1b(l,"2",c)):this.stem.x&&(d=o,g=l,o+=this.stem.x,l+=this.stem.y,a.J4P(45),p=a.o1b(o,h,2),a.Q7y(44),m=a.o1b(l,"2",c)),t.beginPath(),this.borderColor?t.strokeStyle=this.borderColor:t.strokeStyle=u,t.moveTo(d,g),t.lineTo(p,m),t.stroke()),f=t.lineWidth,this.highlighted?("stx_annotat","ion_highlight_bg",e.canvasColor("stx_annotation_highlight_bg",t),a.J4P(7),t.fillRect(a.m92(f,o),a.o1b(l,2,f,c,a.J4P(46)),a.o1b(h,f,"2",2,a.J4P(47)),a.o1b(2,f,c,a.Q7y(40)))):this.fillColor?(t.fillStyle=this.fillColor,a.J4P(48),t.fillRect(o,a.m92(2,c,l),h,c)):this.stem&&(t.fillStyle=e.containerColor,a.J4P(48),t.fillRect(o,a.m92(2,c,l),h,c)),this.borderColor&&(t.beginPath(),t.strokeStyle=this.highlighted?e.getCanvasColor("stx_highlight_vector"):this.borderColor,a.J4P(7),t.rect(a.o1b(f,o),a.o1b(l,2,f,c,a.Q7y(46)),a.m92(2,f,h,a.Q7y(40)),a.o1b(2,f,c,a.Q7y(40))),t.stroke()),this.highlighted?e.canvasColor("stx_annotation_highlight",t):t.fillStyle=u,a.Q7y(49);var v=a.o1b(152,0,19,7,17);if(l+=this.padding/v,!this.ta)for(var b=0;b<this.arr.length;b++){t.fillText(this.arr[b],o+this.padding,l-c/2+this.fontSize/2),a.Q7y(17);var x=a.o1b(11,14,5);l+=this.fontSize+x}-939516705,-198060607,y=2;for(var S=1;-939516705!==a.o0j(S.toString(),S.toString().length,28984);S++)t.textBaseline="",y+=2;-198060607!==a.c0F(y.toString(),y.toString().length,2688)&&(t.textBaseline="alphabetic")}},e.Drawing.annotation.prototype.onChange=function(t){a.F3j()},e.Drawing.annotation.prototype.edit=function(t,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if(("p","x",r=this.stx.panels[this.panelName])&&(n=this.stx.controls.annotationSave,s=this.stx.controls.annotationCancel,n&&s&&(o=this.stx,l=this.ta,o.editingAnnotation=!0,o.undisplayCrosshairs(),o.openDialog="annotation",l||("p","x","ab","solu","t","e",(l=this.ta=document.createElement("TEXTAREA")).className="stx_annotation",l.onkeyup=S(this),l.onmouseup=(y=o,function(t){y.manageTouchAndMouse&&e.ChartEngine.drawingLine&&y.mouseup(t)}),l.setAttribute("wrap","hard"),e.isIOS7or8&&l.setAttribute("placeholder","Enter Text"),o.chart.container.appendChild(l),l.style.position="absolute",l.style.paddingLeft=this.padding+"px",l.value=this.text,e.touchDevice&&(l.ontouchstart=function(t){a.F3j(),t.stopPropagation()})),h=this,l.oninput=function(t){t.target.value=o.emojify(t.target.value),"historyUndo"!=t.inputType&&"historyRedo"!=t.inputType&&h.onChange(t)},l.style.font=this.fontString,this.color&&("a","u","t","o","transparent"==this.color||"auto"==this.color?(c=getComputedStyle(l))&&e.isTransparent(c.backgroundColor)?l.style.color=this.getLineColor():("#","00","0",l.style.color="#000"):l.style.color=this.color),u=o.pixelFromTick(this.p0[0],r.chart),d=this.pixelFromValue(r,this.p0[0],this.p0[1],o.getYAxisByField(r,this.field)),l.style.left=u+140<o.chart.canvasRight?u+"px":o.chart.canvasRight-200+"px",l.style.top=d+60<o.chart.canvasHeight?d-(isNaN(this.h)?this.defaultHeight:this.h/2)+"px":d-60+"px",this.repositionTextArea&&this.repositionTextArea(l),e.safeClickTouch(n,(v=this,a.F3j(),function(t){var i;a.X8U(),v.ta&&v.ta.value&&(v.text=v.ta.value,(i=v.stx).editingAnnotation=!1,v.adjust(),i.drawingSnapshot?i.undoStamp(e.shallowClone(i.drawingSnapshot),i.exportDrawings()):(e.ChartEngine.completeDrawing(i),i.addDrawing(v)),i.undo(),i.cancelTouchSingleClick=!0,i.changeOccurred("vector"))})),e.safeClickTouch(s,(b=this,a.X8U(),function(t){var e;a.F3j(),(e=b.stx).editingAnnotation=!1,e.undo(),e.cancelTouchSingleClick=!0})),S(this)(),i&&(o.drawingSnapshot=o.exportDrawings(),this.hidden=!0,o.draw(),o.activeDrawing=this,e.ChartEngine.drawingLine=!0,t=o.chart.tempCanvas.context,o.chart.tempCanvas.style.display="block",this.w=l.clientWidth,this.h=l.clientHeight,e.clearCanvas(t.canvas,o),this.render(t),this.highlighted=!1,this.edit(t)),e.isAndroid&&!e.is_chrome&&!e.isFF))){this.priorBottom=o.container.style.bottom,400,a.J4P(51);var x=a.m92(900,17,10,773);p=o.resolveY(d)+x,g=o.container.ownerDocument.defaultView,p>e.pageHeight(g)-400&&(m=e.pageHeight(g)-p,a.J4P(7),f=a.m92(m,400),a.J4P(1),o.chart.container.style.bottom=a.o1b("px",f))}function S(t){return function(i){var r,o,l,h,c,u,d,p;if("p","x",i&&27===i.keyCode)t.stx.undo();else{r=t.stx,l=(o=t.ta).value.split("\n"),h=0,r.chart.context.font=t.fontString;for(var g=0;g<l.length;g++)(c=r.chart.context.measureText(l[g]).width)>h&&(h=c);a.Q7y(17);var m=a.m92(7,6,0);if(u=(l.length+m)*(t.fontSize+t.fontModifier),h=Math.max(h,2*t.defaultWidth),o.style.width=h+t.whitespace+"px",a.Q7y(1),o.style.height=a.o1b("px",u),d=parseInt(e.stripPX(o.style.top),10),p=e.stripPX(o.style.left),h=o.clientWidth,u=o.clientHeight,o.focus(),!1===t.border&&(o.style.border="none"),p+h+100<t.stx.chart.canvasWidth)a.Q7y(1),n.style.top=a.o1b("px",d),a.Q7y(1),s.style.top=a.m92("px",d),a.Q7y(0),n.style.left=a.o1b(h,"px",p,10),n.style.display="inline-block",s.style.left=p+h+n.clientWidth+5+"px",s.style.display="inline-block";else if(d+u+30<t.stx.chart.canvasHeight){"in","line-block","p","x","p","x",a.Q7y(50),n.style.top=a.o1b("10",u,"px",32,d),a.Q7y(0),s.style.top=a.o1b(u,"px",d,10),a.J4P(1),n.style.left=a.m92("px",p),n.style.display="inline-block",a.Q7y(7);var f=a.o1b(75,80);s.style.left=p+n.clientWidth-f+"px",s.style.display="inline-block"}else{"i","nline-block","p","x",a.Q7y(17),n.style.top=a.m92("px",35,d),a.J4P(17),s.style.top=a.o1b("px",35,d),a.Q7y(1),n.style.left=a.o1b("px",p),n.style.display="inline-block",a.Q7y(1);var y=a.o1b(4,1);s.style.left=p+n.clientWidth-y+"px",s.style.display="inline-block"}}}}},e.Drawing.annotation.prototype.click=function(t,e,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,e,i,a.chart),this.adjust(),this.edit(t),!1},e.Drawing.annotation.prototype.reposition=function(t,e,i,r){var n,s,o;e&&(n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-r,a.J4P(35),this.setPoint(a.m92(0,"0"),e.p0[0]-s,e.p0[1]-o,n.chart),this.render(t))},e.Drawing.annotation.prototype.intersected=function(t,i,r){var n,s,o,l,h,c,u,d,p;if(s=(n=this.stx).panels[this.panelName],!this.p0)return null;o=n.pixelFromTick(this.p0[0],s.chart),l=n.getYAxisByField(s,this.field),a.Q7y(52);var g=a.o1b(17,20,12,14);a.F3j(),a.Q7y(17);var m=a.m92(2,10,10);return h=this.pixelFromValue(s,this.p0[0],this.p0[g],l)-this.h/m,c=o+this.w,u=h+this.h,this.stem&&this.stem.x&&(o+=this.stem.x,c+=this.stem.x,h+=this.stem.y,u+=this.stem.y),d=n.pixelFromTick(t,s.chart),p=n.pixelFromValueAdjusted(s,t,i),d+r.r>=o&&d-r.r<=c&&p+r.r>=h&&p-r.r<=u&&(this.highlighted=!0,{p0:e.clone(this.p0),tick:t,value:this.valueOnDrawingAxis(t,i)})},e.Drawing.annotation.prototype.abort=function(){var t,i,r;i=(t=this.stx).controls.annotationSave,r=t.controls.annotationCancel,a.X8U(),i&&(i.style.display="none"),r&&(r.style.display="none"),this.ta&&t.chart.container.removeChild(this.ta),this.ta=null,t.openDialog="",t.showCrosshairs(),t.editingAnnotation=!1,e.clearCanvas(t.chart.tempCanvas,t),!e.isAndroid||e.is_chrome||e.isFF||(t.chart.container.style.bottom=this.priorBottom),e.fixScreen()},e.Drawing.annotation.prototype.reconstruct=function(t,i){this.stx=t,this.color=i.col,this.panelName=i.pnl,this.d0=i.d0,this.tzo0=i.tzo0,this.v0=i.v0,this.field=i.fld,this.text=t.escapeOnSerialize?decodeURIComponent(i.text):i.text,this.stem=i.stem,this.borderColor=i.bc,this.fillColor=i.bg,this.lineWidth=i.lw,this.pattern=i.ptrn,this.font=e.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.font||(this.font={}),this.adjust()},e.Drawing.annotation.prototype.serialize=function(){var t,i;return t={name:this.name,pnl:this.panelName,col:this.color,d0:this.d0,tzo0:this.tzo0,v0:this.v0,fld:this.field,text:this.stx.escapeOnSerialize?encodeURIComponent(this.text):this.text},this.font&&("s","z",i=e.removeNullValues(e.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"})),e.isEmpty(i)||(t.fnt=i)),this.stem&&(t.stem={d:this.stem.d,v:this.stem.v,x:this.stem.x,y:this.stem.y}),this.borderColor&&(t.bc=this.borderColor),this.fillColor&&(t.bg=this.fillColor),this.lineWidth&&(t.lw=this.lineWidth),this.pattern&&(t.ptrn=this.pattern),t},e.Drawing.annotation.prototype.renderText=function(){var t,i,r,n,s,o,l,h;if(this.getFontString(),i=(t=this.stx).panels[this.panelName]){this.arr=this.text.split("\n"),r=0,t.chart.context.font=this.fontString;for(var c=0;c<this.arr.length;c++)(n=t.chart.context.measureText(this.arr[c]).width)>r&&(r=n);if(0===r)a.Q7y(24),r=a.m92(114,7,16)*this.defaultWidth;this.fontSize=e.stripPX(this.fontDef.size),a.Q7y(53);var u=a.o1b(2,14,253,4,3);s=(this.arr.length+u)*(this.fontSize+this.fontModifier),e.touchDevice&&(a.J4P(34),s+=a.o1b("5",96)),this.w=r+this.whitespace+this.padding,this.h=s,o=t.pixelFromTick(this.p0[0],i.chart)+r,a.F3j(),l=t.getYAxisByField(i,this.field),a.J4P(54);var d=a.m92(11,549,4,15,10);h=this.pixelFromValue(i,this.p0[0],this.p0[d],l)+s,this.p1=[t.tickFromPixel(o,i.chart),this.valueFromPixel(h,i,l)],this.stem&&this.stem.d&&(this.stem.t=t.tickFromDate(this.stem.d,i.chart))}},e.Drawing.annotation.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(a.X8U(),this.setPoint(0,this.d0,this.v0,t.chart),this.renderText())},e.Drawing.segment=function(){this.name="segment"},e.inheritsFrom(e.Drawing.segment,e.Drawing.BaseTwoPoint),e.Drawing.segment.prototype.getDateFromTick=function(t){var r,n,s,o,l;n=(r=this.stx).panels[this.panelName],s=r.dateFromTick(t,n.chart,!0),a.F3j(),e.ChartEngine.isDailyInterval(r.layout.interval)?s.setHours(0,0,0,0):(l=1e3*s.getSeconds()+s.getMilliseconds(),i.Date&&r.displayZone&&(o=new i.Date(s.getTime(),r.displayZone),s=new Date(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes()),s=new Date(s.getTime()+l)));for(var h=1;1929718385!==a.o0j(h.toString(),h.toString().length,48184);h++)return s;if(1837862900!==a.c0F(2..toString(),2..toString().length,6574))return s},e.Drawing.segment.prototype.formatDate=function(t){var i,r,n,s;if(r=(i=this.stx).panels[this.panelName],n=e.mmddhhmm(e.yyyymmddhhmm(t)),r.chart.xAxis.formatter){-657351135,77448353,s=2;for(var o=1;-657351135!==a.c0F(o.toString(),o.toString().length,24090);o++)n=r.chart.xAxis.formatter(t,this.name,null,null,n),s+=2;77448353!==a.o0j(s.toString(),s.toString().length,15184)&&(n=r.chart.xAxis.formatter(t,this.name,1,1,n))}else this.stx.internationalizer&&(n=e.displayableDate(i,i.chart,t));return n},e.Drawing.segment.prototype.render=function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m;i=(e=this.stx).panels[this.panelName],r=e.getYAxisByField(i,this.field),i&&(!this.field||r||this.spanPanels)&&(r=r||i.yAxis,n=e.pixelFromTick(this.p0[0],i.chart),s=e.pixelFromTick(this.p1[0],i.chart),o=this.pixelFromValue(i,this.p0[0],this.p0[1],r),l=this.pixelFromValue(i,this.p1[0],this.p1[1],r),h=this.lineWidth,a.X8U(),c=this.getLineColor(),"none"==(u={pattern:this.pattern,lineWidth:h}).pattern&&(u.pattern="solid"),e.plotLine(n,s,o,l,c,this.name,t,i,u),this.axisLabel&&!this.repositioner&&("ho","r","izontal","horizontal"==this.name?(e.endClip(),d=this.p0[1],i.chart.transformFunc&&(d=i.chart.transformFunc(e,i.chart,d)),d=r.priceFormatter?r.priceFormatter(e,i,d):e.formatYAxisPrice(d,i,null,r),e.createYAxisLabel(i,d,o,c,null,null,r),e.startClip(i.name)):!("vertical"==this.name&&this.p0[0]>=0)||e.chart.xAxis.noDraw||this.spanPanels&&i.yAxis.bottom===i.bottom||(p=this.getDateFromTick(this.p0[0]),e.endClip(),e.createXAxisLabel({panel:i,txt:this.formatDate(p),x:n,backgroundColor:c,color:null,pointed:!0,padding:2}),e.startClip(i.name))),this.highlighted&&"horizontal"!=this.name&&"vertical"!=this.name&&("p","1",g="p0"==this.highlighted,m="p1"==this.highlighted,this.littleCircle(t,n,o,g),this.littleCircle(t,s,l,m)))},e.Drawing.segment.prototype.abort=function(){a.F3j(),this.stx.setMeasure(null,null,null,null,!1)},e.Drawing.segment.prototype.intersected=function(t,i,r){var n,s;if("ver","ti","cal","h","orizontal","gar","t","ley",!this.p0||!this.p1)return null;if("horizontal"!=(n=this.name)&&"vertical"!=n&&"gartley"!=n)for(var o in s={0:this.p0,1:this.p1})if(this.pointIntersection(s[o][0],s[o][1],r))return a.Q7y(1),this.highlighted=a.m92(o,"p"),{action:"drag",point:"p"+o};return"horizontal"!=n&&"vertical"!=n||(n="line"),this.lineIntersection(t,i,r,n)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.segment.prototype.configs=["color","lineWidth","pattern"],e.Drawing.segment.prototype.copyConfig=function(t){e.Drawing.copyConfig(this,t),a.F3j(),"none"==this.pattern&&-1==this.configs.indexOf("fillColor")&&(this.pattern="solid")},e.Drawing.segment.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.field=e.fld,this.adjust()},e.Drawing.segment.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},e.Drawing.line=function(){a.X8U(),this.name="line"},e.inheritsFrom(e.Drawing.line,e.Drawing.segment),e.Drawing.line.prototype.dragToDraw=!1,e.Drawing.line.prototype.click=function(t,e,i){var r;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(this.accidentalClick(e,i)||(a.J4P(42),this.setPoint(a.o1b(64,"1"),e,i,r.chart),this.penDown=!1,a.X8U()),!0):(this.setPoint(0,e,i,r.chart),this.penDown=!0,!1)},e.Drawing.line.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.v0=e.v0,this.v1=e.v1,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,a.F3j(),this.tzo1=e.tzo1,this.field=e.fld,this.adjust()},e.Drawing.line.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},e.Drawing.line.prototype.adjust=function(){var t;a.F3j(),(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),e.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&(this.setPoint(0,this.d0B,this.v0B,t.chart),this.setPoint(1,this.d1B,this.v1B,t.chart)))},e.Drawing.horizontal=function(){a.X8U(),this.name="horizontal"},e.inheritsFrom(e.Drawing.horizontal,e.Drawing.segment),e.Drawing.horizontal.prototype.dragToDraw=!1,e.Drawing.horizontal.prototype.measure=function(){},e.Drawing.horizontal.prototype.click=function(t,e,i){var a;if(a=this.stx.panels[this.panelName])return this.copyConfig(),this.setPoint(0,e,i,a.chart),!0},e.Drawing.horizontal.prototype.intersected=function(t,e,i){var r,n,s,o,l;if(a.F3j(),this.lineIntersection(t,e,i,"line")){r=this.stx.chart.dataSet.length,n=this.p0[1],a.Q7y(42),s=a.m92(0,"929430144"),a.Q7y(42),o=a.m92(64,"556661302"),l=2;for(var h=1;a.o0j(h.toString(),h.toString().length,62697)!==s;h++)this.highlighted=!1,l+=2;return a.o0j(l.toString(),l.toString().length,67402)!==o&&(this.highlighted=!0),{action:"move",p0:[r-2,n],p1:[r-1,n],tick:t,value:this.valueOnDrawingAxis(t,e)}}return null},e.Drawing.horizontal.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,a.X8U(),this.lineWidth=e.lw,this.v0=e.v0,this.d0=e.d0,this.tzo0=e.tzo0,this.axisLabel=e.al,this.field=e.fld,this.adjust()},e.Drawing.horizontal.prototype.serialize=function(){return a.F3j(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,v0:this.v0,d0:this.d0,tzo0:this.tzo0,al:this.axisLabel,fld:this.field}},e.Drawing.horizontal.prototype.adjust=function(){var t;if(t=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,t.chart),a.F3j(),a.J4P(55);var e=a.m92(1800,8,14300);this.p1=[this.p0[0]+e,this.p0[1]]}},e.Drawing.horizontal.prototype.configs=["color","lineWidth","pattern","axisLabel"],e.Drawing.vertical=function(){this.name="vertical",a.X8U(),this.spanPanels=!1},e.inheritsFrom(e.Drawing.vertical,e.Drawing.horizontal),e.Drawing.vertical.prototype.measure=function(){},e.Drawing.vertical.prototype.configs=["color","lineWidth","pattern","axisLabel","spanPanels"],e.Drawing.vertical.prototype.intersected=e.Drawing.segment.prototype.intersected,e.Drawing.vertical.prototype.adjust=function(){var t;if(t=this.stx.panels[this.panelName]){this.setPoint(0,this.d0,this.v0,t.chart),a.J4P(1);var e=a.o1b(1,0);a.J4P(56);var i=a.m92(17,5,17,16,20);this.p1=[this.p0[0],this.p0[e]+i]}};var{reconstruct:r,serialize:n,reposition:s}=e.Drawing.vertical.prototype;e.Drawing.vertical.prototype.reconstruct=function(t,e){var i;r.call(this,t,e),i=2;for(var n=1;1021522627!==a.o0j(n.toString(),n.toString().length,17526);n++)this.spanPanels=e.sp,i+=2;1316527479!==a.o0j(i.toString(),i.toString().length,57063)&&(this.spanPanels=e.sp),this.spanPanels=e.sp},e.Drawing.vertical.prototype.serialize=function(){var t;return(t=n.call(this)).sp=this.spanPanels,t},e.Drawing.vertical.prototype.reposition=function(t,e,i,a){this.spanPanels?Object.values(this.stx.panels).forEach((r=>{this.panelName=r.name,s.call(this,t,e,i,a),this.panelName=this.originPanelName})):s.call(this,t,e,i,a)},e.Drawing.measure=function(){a.X8U(),this.name="measure"},e.inheritsFrom(e.Drawing.measure,e.Drawing.segment),e.Drawing.measure.prototype.click=function(t,e,i){return this.copyConfig(),a.X8U(),this.penDown?(this.stx.undo(),this.penDown=!1,!0):(this.p0=[e,i],this.penDown=!0,!1)},e.Drawing.rectangle=function(){var t,e;a.J4P(2),t=-a.m92("1184834178",1),e=2;for(var i=1;a.c0F(i.toString(),i.toString().length,84607)!==t;i++)this.name="",e+=2;a.X8U(),1493594247!==a.o0j(e.toString(),e.toString().length,637)&&(this.name=""),this.name="rectangle"},e.inheritsFrom(e.Drawing.rectangle,e.Drawing.BaseTwoPoint),e.Drawing.rectangle.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),!r||this.field&&!n||(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=Math.round(Math.min(s,o))+.5,u=Math.min(l,h),d=Math.max(s,o)-c,p=Math.max(l,h)-u,g=this.getLineColor(),(m=this.fillColor)&&!e.isTransparent(m)&&"auto"!=m&&(t.beginPath(),t.rect(c,u,d,p),t.fillStyle=m,t.globalAlpha=.2,t.fill(),t.closePath(),t.globalAlpha=1),f={pattern:this.pattern,lineWidth:this.lineWidth},this.highlighted&&"none"==f.pattern&&(f.pattern="solid",.1==f.lineWidth&&(f.lineWidth=1)),i.plotLine(s,o,l,l,g,"segment",t,r,f),a.Q7y(57),i.plotLine(o,o,a.m92("0.5",l),a.o1b(.5,h,a.J4P(1)),g,"segment",t,r,f),i.plotLine(o,s,h,h,g,"segment",t,r,f),a.J4P(1),i.plotLine(s,s,a.m92(.5,h),a.m92(.5,l,a.Q7y(7)),g,"segment",t,r,f),this.highlighted&&("p","0",y="p0"==this.highlighted,v="p1"==this.highlighted,this.littleCircle(t,s,l,y),this.littleCircle(t,o,h,v)))},e.Drawing.rectangle.prototype.intersected=function(t,i,r){var n;if(!this.p0||!this.p1)return null;for(var s in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[s][0],n[s][1],r))return a.J4P(1),this.highlighted=a.m92(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(t,i,r)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.rectangle.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.rectangle.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.field=e.fld,a.X8U(),this.adjust()},e.Drawing.rectangle.prototype.serialize=function(){return a.X8U(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},e.Drawing.shape=function(){this.name="shape",this.radians=0,this.a=0,this.rotating=!1,this.textMeasure=!1,this.configurator="shape",this.dimension=[0,0],this.points=[]},e.inheritsFrom(e.Drawing.shape,e.Drawing.BaseTwoPoint),e.Drawing.shape.prototype.setRotationOnInitialDraw=!1,e.Drawing.shape.prototype.measure=function(){},e.Drawing.shape.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;if(this.points.length&&(a.X8U(),r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n))){if(s=i.pixelFromTick(this.p0[0],r.chart),o=this.pixelFromValue(r,this.p0[0],this.p0[1],n),this.p1){if(l=i.pixelFromTick(this.p1[0],r.chart),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),t.globalAlpha=.5,t.fillStyle=this.getLineColor(),this.rotating){if(a.Q7y(58),this.radians=Math.atan(a.m92(o,h,s,l)),l<s)this.radians+=Math.PI;else if(h<o){a.J4P(59);var M=a.o1b(20,14,30,11,217);this.radians+=("2">>M)*Math.PI}a.Q7y(7);var T=a.m92(64,96);a.Q7y(1);var F=a.m92(9,1);a.J4P(60);var P=a.o1b(11,2,9,6);this.a=parseInt((36*this.radians/Math.PI).toFixed("0">>T),F)*P,this.a%=360,a.J4P(1);var _=a.o1b(12,168);this.radians=this.a*Math.PI/_,this.textMeasure&&t.fillText(this.a+"",l+10,h+10)}else this.penDown&&("x",",",this.sx=Math.max(1,parseFloat(Math.abs(2*(l-s)/this.dimension[0]).toFixed(1))),l<s&&(this.sx*=-1),a.Q7y(12),this.sy=Math.max(a.o1b("1",0),parseFloat(Math.abs(2*(h-o)/this.dimension[1]).toFixed(1))),h<o&&(this.sy*=-1),this.textMeasure&&t.fillText(this.sx+"x,"+this.sy+"x",l+this.sx+5,h+this.sy+5));t.globalAlpha=1}void 0===this.sx&&(this.sx=this.sy=1),(c=this.lineWidth)||(c=1.1),u={pattern:this.pattern,lineWidth:c},this.highlighted&&"none"==u.pattern&&(u.pattern="solid",.1==u.lineWidth&&(u.lineWidth=1)),d=this.getLineColor(),this.highlighted&&.1==c&&(a.Q7y(2),c=a.m92("1.1",1)),p=this.fillColor,a.Q7y(16);var L=a.o1b(31,40,7);for(c/=Math.abs(this.sx*this.sy)*L/(Math.abs(this.sx)+Math.abs(this.sy)),t.save(),t.translate(s,o),t.rotate(this.radians),t.scale(this.sx,(n||r.yAxis).flipped?-this.sy:this.sy),f={x:(this.dimension[0]-1)/2,y:(this.dimension[1]-1)/2},g=0;g<this.points.length;g++){for("a","ut","o",t.beginPath(),m=0;m<this.points[g].length;m++)"M"==(A=this.points)[g][m]?(y=A[g][++m]-f.x,v=A[g][++m]-f.y,t.moveTo(y,v)):"L"==A[g][m]?(y=A[g][++m]-f.x,v=A[g][++m]-f.y,t.lineTo(y,v)):"Q"==A[g][m]?(b=A[g][++m]-f.x,S=A[g][++m]-f.y,y=A[g][++m]-f.x,v=A[g][++m]-f.y,t.quadraticCurveTo(b,S,y,v)):"B"==A[g][m]&&(b=A[g][++m]-f.x,S=A[g][++m]-f.y,x=A[g][++m]-f.x,C=A[g][++m]-f.y,y=A[g][++m]-f.x,v=A[g][++m]-f.y,t.bezierCurveTo(b,S,x,C,y,v));t.closePath(),p&&!e.isTransparent(p)&&"auto"!=p&&(t.fillStyle=p,t.fill()),d&&"none"!=this.pattern&&(t.strokeStyle=d,t.lineWidth=c,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(c,this.pattern)),t.lineDashOffset=0),t.stroke())}t.restore(),t.save(),t.translate(s,o),t.rotate(this.radians),this.highlighted?("p","1","p","0",D="p0"==this.highlighted,k="p1"==this.highlighted,w="p2"==this.highlighted,this.littleCircle(t,0,0,D),this.mover(t,0,0,D),this.littleCircle(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,k),this.resizer(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,k),this.littleCircle(t,this.sx*this.dimension[0]/2,0,w),this.rotator(t,this.sx*this.dimension[0]/2,0,w),t.globalAlpha=.5,t.fillStyle=this.getLineColor(null,!1),this.textMeasure&&(t.fillText(this.sx+"x,"+this.sy+"x",this.sx*this.dimension[0]/2+12,this.sy*this.dimension[1]/2+5),t.fillText(this.a+"",this.sx*this.dimension[0]/2+12,5)),t.globalAlpha=1):this.penDown&&(this.rotating?this.rotator(t,this.sx*this.dimension[0]/2,0,!0):this.resizer(t,this.sx*this.dimension[0]/2,this.sy*this.dimension[1]/2,!0)),t.restore()}},e.Drawing.shape.prototype.reposition=function(t,e,i,r){var n,s,o,l,h,c,u,d,p;if("m","o","ve",e)if(s=(n=this.stx).panels[this.panelName],"move"==e.action)o=e.tick-i,l=e.value-r,this.setPoint(0,e.p0[0]-o,e.p0[1]-l,s.chart),this.render(t);else if(h=n.getYAxisByField(s,this.field),c=n.pixelFromTick(this.p0[0],s.chart),u=this.pixelFromValue(s,this.p0[0],this.p0[1],h),d=n.pixelFromTick(i,s.chart),p=this.pixelFromValue(s,i,r,h),"scale"==e.action)this[e.point]=[i,r],this.sx=parseFloat((((d-c)*Math.cos(this.radians)+(p-u)*Math.sin(this.radians))/(this.dimension[0]/2)).toFixed(1)),Math.abs(this.sx)<1&&(this.sx/=Math.abs(this.sy)),this.sy=parseFloat((((p-u)*Math.cos(this.radians)-(d-c)*Math.sin(this.radians))/(this.dimension[1]/2)).toFixed(1)),Math.abs(this.sy)<1&&(this.sy/=Math.abs(this.sy)),this.render(t);else if("rotate"==e.action){if(this[e.point]=[i,r],a.J4P(58),this.radians=Math.atan(a.m92(u,p,c,d)),d<c)this.radians+=Math.PI;else if(p<u){a.J4P(1);var g=a.m92(2,0);this.radians+=g*Math.PI}a.J4P(7);var m=a.m92(256,288);a.Q7y(8);var f=a.o1b(14,9);if(this.a=parseInt((36*this.radians/Math.PI).toFixed(0),"10">>m)*f,this.sx<0){a.J4P(1);var y=a.o1b(15,165);this.a=this.a+y}this.a%=360,a.Q7y(55);var v=a.o1b(167,15,2325);this.radians=this.a*Math.PI/v,this.render(t)}},e.Drawing.shape.prototype.intersected=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(n=this.stx,!this.p0)return null;if(n.repositioningDrawing==this&&n.repositioningDrawing.repositioner)return n.repositioningDrawing.repositioner;s=n.panels[this.panelName],o=n.getYAxisByField(s,this.field),l=n.pixelFromTick(this.p0[0],s.chart),h=this.pixelFromValue(s,this.p0[0],this.p0[1],o),c=n.pixelFromTick(t,s.chart),u=n.pixelFromValueAdjusted(s,t,i),d=u-=h,p=c-=l,c=Math.cos(this.radians)*p+Math.sin(this.radians)*d,u=Math.cos(this.radians)*d-Math.sin(this.radians)*p,c/=this.sx,u/=this.sy,this.padding=e.ensureDefaults(this.padding||{},{left:0,right:0,top:0,bottom:0}),g=this.padding.right+this.padding.left,m=this.padding.bottom+this.padding.top,f=Math.pow(e.touchDevice?25:5+this.littleCircleRadius(),2),y=Math.abs(f/(this.sx*this.sy)),a.Q7y(1);var C=a.o1b(2,0);a.Q7y(61);var A=a.o1b(0,18,271,15);a.J4P(62);var D=a.m92(19,18,9,4,11);a.J4P(7);var k=a.o1b(14,16);a.J4P(3);var w=a.m92(13,1,14);a.Q7y(63);var M=a.o1b(1,3,17,18);a.J4P(8);var T=a.o1b(12,10);v=Math.pow((this.dimension[0]-g+3)/C,2)+Math.pow((this.dimension[A]-m+3)/D,k)>Math.pow(c-g/w,M)+Math.pow(u-m/2,T),b=(f-(Math.pow(c*this.sx,2)+Math.pow(u*this.sy,2)))/Math.abs(this.sx*this.sy),a.F3j(),a.Q7y(64);var F=a.o1b(5,6,10,19);a.J4P(65);var P=a.o1b(3,0,1,11,31);a.Q7y(8);var _=a.o1b(12,11);a.Q7y(66);var L=a.m92(1,6,1,5);a.Q7y(67);var E=a.m92(19,9,9,19,1);x=y-Math.pow(c-this.dimension[0]/F,P)-Math.pow(u-this.dimension[_]/L,E),a.J4P(3);var I=a.o1b(9,6,5);a.J4P(68);var N=a.o1b(7,1,7,1);return S=y-Math.pow(c-this.dimension[0]/I,2)-Math.pow(u,N),v?x>=S&&x>=b&&x>-1?(this.highlighted="p1",{action:"scale"}):S>=x&&S>=b&&S>-1?(this.highlighted="p2",{action:"rotate"}):(this.highlighted=!(b>-1)||"p0",{action:"move",p0:e.clone(this.p0),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.shape.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.shape.prototype.littleCircleRadius=function(){return a.F3j(),3},e.Drawing.shape.prototype.click=function(t,e,i){var r,n;if(!this.points.length)return!1;r=2,a.X8U();for(var s=1;600565272!==a.c0F(s.toString(),s.toString().length,19797);s++)this.copyConfig(),r+=2;return-1095144846!==a.c0F(r.toString(),r.toString().length,87889)&&this.copyConfig(),this.copyConfig(),n=this.stx.panels[this.panelName],this.penDown?(a.Q7y(42),this.setPoint(a.o1b(32,"1"),e,i,n.chart),this.rotating||!this.setRotationOnInitialDraw?(this.penDown=!1,this.rotating=!1,!0):(this.rotating=!0,!1)):(a.J4P(35),this.setPoint(a.o1b(0,"0"),e,i,n.chart),this.penDown=!0,!1)},e.Drawing.shape.prototype.adjust=function(){var t,i,r;if("_","v",t=this.stx.panels[this.panelName]){i=this.name+"_v"+(this.version||0),e.Drawing[i]&&(r=new e.Drawing[i],this.name=r.name,this.dimension=r.dimension,this.padding=r.padding,this.points=r.points,this.version=r.version),this.setPoint(0,this.d0,this.v0,t.chart),a.X8U(),a.Q7y(15);var n=a.o1b(0,1,4);a.J4P(51);var s=a.m92(504,17,5,446);this.radians=Math.round(this.a/n)*Math.PI/s}},e.Drawing.shape.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.v0=e.v0,this.tzo0=e.tzo0,this.a=e.a,this.sx=e.sx,this.sy=e.sy,this.field=e.fld,this.version=e.ver,this.adjust()},e.Drawing.shape.prototype.serialize=function(){return a.X8U(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,v0:this.v0,tzo0:this.tzo0,a:this.a,sx:this.sx,sy:this.sy,fld:this.field,ver:this.version}},e.Drawing.arrow=function(){this.name="arrow",a.Q7y(2),this.version=a.o1b("1",1),this.dimension=[11,22],this.padding={left:0,right:0,top:11,bottom:0},a.Q7y(34),this.points=[["M",3,21,"L",7,21,"L",7,16,"L",10,16,"L",5,11,"L",0,16,"L",a.m92("3",0),16,"L",3,21]]},e.inheritsFrom(e.Drawing.arrow,e.Drawing.shape),e.Drawing.trendline=function(){this.name="trendline",a.F3j(),this.showCallout=!1},e.inheritsFrom(e.Drawing.trendline,e.Drawing.segment),e.Drawing.trendline.prototype.copyConfig=function(t){a.F3j(),e.Drawing.callout&&!e.Drawing.trendline.prototype.configs.includes("showCallout")&&e.Drawing.trendline.prototype.configs.push("fillColor","showCallout","font"),e.Drawing.copyConfig(this,t)},e.Drawing.trendline.prototype.measure=function(){this.showCallout&&e.Drawing.callout||e.Drawing.BaseTwoPoint.prototype.measure.call(this)},e.Drawing.trendline.prototype.reconstruct=function(t,i){e.Drawing.segment.prototype.reconstruct.call(this,t,i),a.X8U(),i.callout&&e.Drawing.callout&&(this.callout=new e.Drawing.callout,this.callout.reconstruct(t,i.callout),this.showCallout=!0)},e.Drawing.trendline.prototype.serialize=function(){var t;return t=e.Drawing.segment.prototype.serialize.call(this),this.showCallout&&e.Drawing.callout&&(t.callout=this.callout.serialize()),t},e.Drawing.trendline.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;if(" ","(",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n))if(e.Drawing.segment.prototype.render.call(this,t),this.showCallout&&e.Drawing.callout){if(this.callout||(this.callout=new e.Drawing.callout,s=e.Drawing.segment.prototype.serialize.call(this),this.callout.reconstruct(i,s)),this.callout.p0=e.clone(this.p0),o=i.pixelFromTick(this.p0[0],r.chart),l=i.pixelFromTick(this.p1[0],r.chart),h=this.pixelFromValue(r,this.p0[0],this.p0[1],n),c=this.pixelFromValue(r,this.p1[0],this.p1[1],n),isFinite(h)&&isFinite(c)){a.Q7y(11),u=a.o1b(o,2,l),a.J4P(11),d=a.m92(h,2,c),this.fontSize=e.stripPX(this.font&&this.font.size||13),a.Q7y(59);var k=a.o1b(19,9,41,850,869);p=1.2*this.callout.w+("c"==this.callout.stemEntry[0]?0:k),g=Math.sqrt(Math.pow(l-o,2)+Math.pow(c-h,2)),a.Q7y(69);var w=a.m92(17,7,100,18);a.Q7y(8);var M=a.m92(18,17);a.Q7y(8);var T=a.m92(16,15);a.Q7y(70);var F=a.o1b(16,3,28,16);m=p/(g||p)*(this.p1[w]<this.p0[M]?T:F),a.J4P(71),f=a.m92(c,u,m,d),a.J4P(61),y=a.m92(l,m,d,u),a.Q7y(42),this.callout.p0[a.o1b(32,"0")]=i.tickFromPixel(f,r.chart),this.callout.p0[1]=this.valueFromPixel(y,r,n),this.callout.v0=this.callout.p0[1],this.callout.p1=e.clone(this.p0),this.callout.stx=i,this.callout.fillColor=this.fillColor||this.callout.fillColor,this.callout.borderColor=this.color,this.callout.font=this.font||this.callout.font,this.callout.noHandles=!0,v=this.p1[1]-this.p0[1],a.Q7y(72);var P=a.m92(0,3,3,18,18);a.J4P(73);var _=a.o1b(4,12,2);a.Q7y(60);var L=a.o1b(23,11,12,3);this.callout.text=Number(v).toFixed(2)+(this.p0[P]==="0"*_?"":" ("+Number(100*v/this.p0[1]).toFixed(L)+"%) ")+Math.abs(this.p1[0]-this.p0[0])+" Bars",b=Math.floor((this.p0[0]+this.p1[0])/2),Math.abs(this.p0[0]-this.p1[0])>1&&Math.abs(this.p0[0]-this.p1[0])<20?(S=i.pixelFromTick(b,r.chart),a.Q7y(74),C=a.o1b(o,h,S,o,h,c,l),x=this.valueFromPixel(C,r,n)||d):x=this.valueFromPixel(d,r,n),this.callout.stem={t:b,v:x},this.callout.renderText(),this.callout.render(t),this.highlighted&&(A="p0"==this.highlighted,D="p1"==this.highlighted,this.littleCircle(t,o,h,A),this.littleCircle(t,l,c,D))}}else this.callout=null},e.Drawing.trendline.prototype.lineIntersection=function(t,i,r,n){return a.F3j(),e.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,t,i,r,"segment")},e.Drawing.trendline.prototype.intersected=function(t,i,a){var r,n;return this.p0&&this.p1?(r=this.callout?this.callout.intersected(t,i,a):null,n=e.Drawing.segment.prototype.intersected.call(this,t,i,a),this.callout&&(this.callout.highlighted=!(!r&&!n)),n||(r?("mov","e",{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}):null)):null},e.Drawing.getDrawingToolList=function(t){var i,a;for(var r in i={},a={arrow_v0:!0,BaseTwoPoint:!0,fibonacci:!0,shape:!0},e.extend(a,t),e.Drawing)!a[r]&&e.Drawing[r].prototype.render&&(i[(new e.Drawing[r]).name]=r);return i}},l=t=>{var e,i=E;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).EaseMachine=function(t,a,r,n){this.fc="string"==typeof t?e.EaseMachine[t]:t,i.X8U(),this.ms=a,(r||0===r)&&this.reset(r,n)},i.X8U(),e.EaseMachine.prototype.reset=function(t,e){for(var a in t||0===t||(t=this.currentValues),i.F3j(),this.hasCompleted=!1,this.running=!1,this.okayToRun=!0,i.Q7y(75),this.useNameValuePairs=i.m92("object",typeof e),this.startTime=Date.now(),this.useNameValuePairs?(this.startValues=t,this.endValues=e):(this.startValues={default:t},this.endValues={default:e}),this.changeValues={},this.currentValues={},this.startValues)this.changeValues[a]=this.endValues[a]-this.startValues[a]},e.EaseMachine.prototype.next=function(){var t;for(var e in i.F3j(),(t=Date.now())>=this.startTime+this.ms&&(t=this.startTime+this.ms,this.hasCompleted=!0,this.running=!1),this.currentValues={},this.changeValues)this.currentValues[e]=this.fc(t-this.startTime,this.startValues[e],this.changeValues[e],this.ms);return this.useNameValuePairs?this.currentValues:this.currentValues.default},e.EaseMachine.prototype.hasCompleted=!0,e.EaseMachine.prototype.run=function(t,e,a,r){var n;function s(){var e;n.afid=null,n.okayToRun&&(e=n.next(),i.F3j(),t(e),n.hasCompleted||(n.afid=requestAnimationFrame(s)))}i.X8U(),this.afid&&cancelAnimationFrame(this.afid),e||0===e?this.reset(e,a):(a||0===a)&&this.reset(this.currentValues,a),n=this,this.running=!0,r?this.afid=requestAnimationFrame(s):s()},e.EaseMachine.prototype.stop=function(){return this.afid&&cancelAnimationFrame(this.afid),this.afid=null,this.okayToRun=!1,this.hasCompleted=!0,this.running=!1,void 0===this.useNameValuePairs?{}:this.useNameValuePairs?this.currentValues:this.currentValues.default},e.EaseMachine.easeInOutQuad=function(t,e,a,r){return i.J4P(10),t/=i.m92(2,r),i.X8U(),t<1?(i.Q7y(76),i.m92(t,e,2,t,a)):(t--,i.Q7y(77),i.m92(e,2,a,0,2,"1",t,t))},e.EaseMachine.easeInOutCubic=function(t,e,a,r){return i.Q7y(10),t/=i.m92(2,r),i.X8U(),t<1?(i.J4P(78),i.m92(t,e,a,t,0,t,"2")):(t-=2,i.J4P(79),i.o1b(t,e,t,2,2,t,a))},e.EaseMachine.easeOutCubic=function(t,e,a,r){return i.F3j(),t/=r,t--,i.Q7y(80),i.m92(e,t,a,t,t,"1")},e.ChartEngine.prototype.animations.zoom.isStub&&(e.ChartEngine.prototype.animations.zoom=new e.EaseMachine("easeOutCubic",400))},h=t=>{var e,i,a=E;a.F3j(),e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i=function(){var t,i,r,n,s,o,l,h,c,u,d;function p(t,e,i,a){this.tokens=t,this.ops1=e,this.ops2=i,this.functions=a}function g(t){return a.F3j(),Math.sinh?Math.sinh(t):(Math.exp(t)-Math.exp(-t))/2}function m(t){return Math.asinh?Math.asinh(t):t===-1/0?t:Math.log(t+Math.sqrt(t*t+1))}function f(t,e){return a.J4P(81),a.F3j(),a.m92(t,e)}function y(t){return Math.trunc?Math.trunc(t):(a.F3j(),t<0?Math.ceil(t):Math.floor(t))}function v(t,e){return a.X8U(),a.Q7y(75),a.m92(e,t)}function b(t,e){return a.F3j(),a.Q7y(2),a.m92(t,e)}function x(t,e){return a.F3j(),Boolean(t||e)}function S(t,e){return a.Q7y(82),a.o1b(t,e)}function C(t,e){return a.J4P(83),a.X8U(),a.o1b(t,e)}function A(t,e){return a.F3j(),a.Q7y(7),a.o1b(e,t)}function D(t,e){return"[","obj","ect Arra","y]",a.X8U(),"[object Array]"!=Object.prototype.toString.call(t)?[t,e]:((t=t.slice()).push(e),t)}function k(t){return a.X8U(),-t}function w(t){function e(){}return a.X8U(),e.prototype=t,new e}function M(t){return a.X8U(),Math.cosh?Math.cosh(t):(Math.exp(t)+Math.exp(-t))/2}function T(t){return a.F3j(),Math.log(t)*Math.LOG10E}function F(){this.success=!1,this.errormsg="",this.expression="",a.J4P(34),this.pos=a.o1b("0",64),a.Q7y(7),this.tokennumber=a.o1b(0,"0"),this.tokenprio=0,this.tokenindex=0,this.tmpprio=0,this.ops1={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:g,cosh:M,tanh:U,asinh:m,acosh:E,atanh:z,sqrt:Math.sqrt,log:Math.log,lg:T,log10:T,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:y,"-":k,exp:Math.exp},this.ops2={"+":N,"-":A,"*":b,"/":L,"%":O,"^":Math.pow,",":D,"||":H,"==":v,"!=":j,">":I,"<":S,">=":f,"<=":C,and:B,or:x},this.functions={fac:V,min:Math.min,max:Math.max,hypot:R,pyt:R,pow:Math.pow,atan2:Math.atan2,if:_},this.consts={E:Math.E,PI:Math.PI}}function P(t,e,i,r){this.type_=t,this.index_=e||0,this.prio_=i||0,this.number_=null!=r?r:0,a.F3j(),this.toString=function(){switch(a.X8U(),this.type_){case 0:return this.number_;case 1:case 2:case 3:return this.index_;case 4:return"CALL";default:return"Invalid Token"}}}function _(t,e,i){return t?e:i}function L(t,e){return a.J4P(10),a.X8U(),a.m92(e,t)}function E(t){return Math.acosh?Math.acosh(t):Math.log(t+Math.sqrt(t*t-1))}function I(t,e){return a.J4P(89),a.o1b(e,t)}function N(t,e){return a.F3j(),Number(t)+Number(e)}function O(t,e){return a.Q7y(91),a.X8U(),a.o1b(e,t)}function H(t,e){return a.J4P(15),a.F3j(),a.m92("",e,t)}function R(){var t,e,i,r,n;if(Math.hypot)return Math.hypot.apply(this,arguments);t=0,e=arguments.length;for(var s=0;s<e;s++){if(arguments[s]===1/0||arguments[s]===-1/0)return 1/0;t+=arguments[s]*arguments[s]}i=-557671499,r=-1288084575,n=2;for(var o=1;a.c0F(o.toString(),o.toString().length,60186)!==i;o++)return Math.sqrt(t);return a.c0F(n.toString(),n.toString().length,59226)!==r?Math.sqrt(t):void 0}function z(t){return Math.atanh?Math.atanh(t):Math.log((1+t)/(1-t))/2}function j(t,e){return a.Q7y(92),a.o1b(e,t)}function U(t){return Math.tanh?Math.tanh(t):t===1/0?1:t===-1/0?-1:(Math.exp(t)-Math.exp(-t))/(Math.exp(t)+Math.exp(-t))}function B(t,e){return Boolean(t&&e)}function V(t){var e;for(e=t=Math.floor(t);t>1;)a.Q7y(97),e=a.o1b(e,--t);return e}return"\\","t",0,1,2,3,4,/[\u00ad\u0600-\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]|\u070f|\u17b4|\u0604|\u17b5/g,t=/[\\'\x7f-\x9f\u00ad\u0600-\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]|\u070f|\u17b4|\u0604|\u17b5/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r","'":"\\'","\\":"\\\\"},e.extend(p.prototype,{simplify:function(t){var e,i,r,n,s,o,l,h,c;for(a.F3j(),t=t||{},e=[],i=[],o=this.tokens.length,h=0,h=0;h<o;h++)if(0===(c=(l=this.tokens[h]).type_))e.push(l);else if(3===c&&l.index_ in t)a.J4P(42),l=new P(0,a.o1b(0,"0"),0,t[l.index_]),e.push(l);else if(2===c&&e.length>1)n=e.pop(),r=e.pop(),l=new P(0,0,0,(s=this.ops2[l.index_])(r.number_,n.number_)),e.push(l);else if(1===c&&e.length>0)r=e.pop(),s=this.ops1[l.index_],a.Q7y(34),l=new P(0,0,a.o1b("0",0),s(r.number_)),e.push(l);else{for(;e.length>0;)i.push(e.shift());i.push(l)}for(;e.length>0;)i.push(e.shift());return new p(i,w(this.ops1),w(this.ops2),w(this.functions))},substitute:function(t,e){var i,r,n,s,o,l;for(e instanceof p||(e=(new F).parse(String(e))),i=[],a.X8U(),r=this.tokens.length,s=0,s=0;s<r;s++)if(3===(n=this.tokens[s]).type_&&n.index_===t)for(var h=0;h<e.tokens.length;h++)l=new P((o=e.tokens[h]).type_,o.index_,o.prio_,o.number_),i.push(l);else i.push(n);return new p(i,w(this.ops1),w(this.ops2),w(this.functions))},evaluate:function(t){var e,i,r,n,s,o,l,h;for(t=t||{},e=[],s=this.tokens.length,l=0,a.F3j(),l=0;l<s;l++)if(0===(h=(o=this.tokens[l]).type_))e.push(o.number_);else if(2===h)r=e.pop(),i=e.pop(),n=this.ops2[o.index_],e.push(n(i,r));else if(3===h)if(o.index_ in t)e.push(t[o.index_]);else{if(!(o.index_ in this.functions))throw"u","ndefin","e","d variable: ",new Error("undefined variable: "+o.index_);e.push(this.functions[o.index_])}else if(1===h)i=e.pop(),n=this.ops1[o.index_],e.push(n(i));else{if(4!==h)throw new Error("invalid Expression");if(i=e.pop(),!(n=e.pop()).apply||!n.call)throw" ","is not a functio","n",a.Q7y(1),new Error(a.m92(" is not a function",n));"[object Array]"==Object.prototype.toString.call(i)?e.push(n.apply(void 0,i)):e.push(n.call(void 0,i))}if(e.length>1)throw new Error("invalid Expression (parity)");return e[0]},toString:function(e){var r,n,s,o,l,h,c,u,d;for(r=[],l=this.tokens.length,c=0,c=0;c<l;c++)if(0===(u=(h=this.tokens[c]).type_))r.push((d=h.number_,a.F3j(),"string"==typeof d?(t.lastIndex=0,t.test(d)?"'"+d.replace(t,(function(t){var e;e=i[t];for(var r=1;844843894!==a.o0j(r.toString(),r.toString().length,71511);r++)return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4);if(-392681319!==a.c0F(2..toString(),2..toString().length,98089))return"0000"!=!e?e:"0000"-("0000"*t.charCodeAt(5).toString(80)).slice(!0)}))+"'":"'"+d+"'"):d));else if(2===u)s=r.pop(),n=r.pop(),o=h.index_,e&&"^"==o?(a.J4P(84),r.push(a.m92("Math.pow(",")",s,n,","))):(a.Q7y(84),r.push(a.o1b("(",")",s,n,o)));else if(3===u)r.push(h.index_);else if(1===u)n=r.pop(),"-"===(o=h.index_)?(a.J4P(0),r.push(a.m92(o,")","(",n))):(a.Q7y(0),r.push(a.m92("(",")",o,n)));else{if(4!==u)throw new Error("invalid Expression");n=r.pop(),o=r.pop(),a.Q7y(0),r.push(a.m92("(",")",o,n))}if(r.length>1)throw new Error("invalid Expression (parity)");return r[0]},variables:function(){var t,e,i;a.X8U(),t=this.tokens.length,e=[];for(var r=0;r<t;r++)3===(i=this.tokens[r]).type_&&-1==e.indexOf(i.index_)&&e.push(i.index_);return e}},!0),F.parse=function(t){return a.X8U(),(new F).parse(t)},F.evaluate=function(t,e){return F.parse(t).evaluate(e)},F.Expression=p,F.values={sin:Math.sin,cos:Math.cos,tan:Math.tan,asin:Math.asin,acos:Math.acos,atan:Math.atan,sinh:g,cosh:M,tanh:U,asinh:m,acosh:E,atanh:z,sqrt:Math.sqrt,log:Math.log,lg:T,log10:T,abs:Math.abs,ceil:Math.ceil,floor:Math.floor,round:Math.round,trunc:y,fac:V,exp:Math.exp,min:Math.min,max:Math.max,hypot:R,pyt:R,pow:Math.pow,atan2:Math.atan2,if:_,E:Math.E,PI:Math.PI},a.Q7y(85),r=a.m92("1",0,32),a.J4P(86),n=a.o1b("1",1),a.J4P(34),s=a.m92(1,2),a.Q7y(87),o=a.m92("1",3),a.J4P(86),l=a.o1b("4",1),a.Q7y(88),h=a.m92(0,5,"1"),a.Q7y(90),c=a.o1b("6",1,0),a.Q7y(34),u=a.m92(1,7),a.X8U(),a.J4P(34),d=a.o1b(1,8),e.extend(F.prototype,{parse:function(t){var e,i,g,m,f,y,v,b;for(this.errormsg="",this.success=!0,e=[],i=[],this.tmpprio=0,a.Q7y(93),g=a.m92(o,r,s,c),a.X8U(),m=0,this.expression=t,this.pos=0;this.pos<this.expression.length;)this.isOperator()?this.isSign()&&g&c?(this.isNegativeSign()&&(this.tokenprio=2,this.tokenindex="-",m++,this.addfunc(i,e,1)),a.Q7y(93),g=a.o1b(o,r,s,c)):this.isComment()||(0==(g&n)&&("unexpec","ted operato","r",this.error_parsing(this.pos,"unexpected operator")),m+=2,this.addfunc(i,e,2),a.Q7y(93),g=a.m92(o,r,s,c)):this.isNumber()?(0==(g&r)&&this.error_parsing(this.pos,"unexpected number"),f=new P(0,0,0,this.tokennumber),i.push(f),a.J4P(94),g=a.o1b(l,n,h)):this.isString()?(0==(g&r)&&this.error_parsing(this.pos,"unexpected string"),f=new P(0,0,0,this.tokennumber),i.push(f),a.Q7y(94),g=a.m92(l,n,h)):this.isLeftParenth()?(0==(g&o)&&this.error_parsing(this.pos,'unexpected "("'),g&u&&(m+=2,this.tokenprio=-2,this.tokenindex=-1,this.addfunc(i,e,4)),a.J4P(95),g=a.o1b(d,s,c,o,r)):this.isRightParenth()?(g&d?(f=new P(0,0,0,[]),i.push(f)):0==(g&l)&&("un","e","xpected ",'")"',this.error_parsing(this.pos,'unexpected ")"')),a.J4P(95),g=a.m92(u,h,o,l,n)):this.isComma()?(0==(g&h)&&this.error_parsing(this.pos,'unexpected ","'),this.addfunc(i,e,2),m+=2,a.J4P(93),g=a.o1b(o,r,s,c)):this.isConst()?(0==(g&r)&&this.error_parsing(this.pos,"unexpected constant"),y=new P(0,0,0,this.tokennumber),i.push(y),a.J4P(94),g=a.o1b(l,n,h)):this.isOp2()?(0==(g&s)&&this.error_parsing(this.pos,"unexpected function"),this.addfunc(i,e,2),a.Q7y(34),m+=a.o1b("2",0),g=o):this.isOp1()?(0==(g&s)&&("unexpected fun","cti","on",this.error_parsing(this.pos,"unexpected function")),this.addfunc(i,e,1),m++,g=o):this.isVar()?(0==(g&r)&&this.error_parsing(this.pos,"unexpected variable"),v=new P(3,this.tokenindex,0,0),i.push(v),a.Q7y(95),g=a.o1b(u,h,o,l,n)):this.isWhite()||(""===this.errormsg?this.error_parsing(this.pos,"unknown character"):this.error_parsing(this.pos,this.errormsg));for((this.tmpprio<0||this.tmpprio>=10)&&this.error_parsing(this.pos,'unmatched "()"');e.length>0;)b=e.pop(),i.push(b);return m+1!==i.length&&this.error_parsing(this.pos,"parity"),new p(i,w(this.ops1),w(this.ops2),w(this.functions))},evaluate:function(t,e){return this.parse(t).evaluate(e)},error_parsing:function(t,e){throw this.success=!1,a.Q7y(0),this.errormsg=a.o1b(t,e,"parse error [column ","]: "),this.column=t,new Error(this.errormsg)},addfunc:function(t,e,i){var r;for(a.X8U(),r=new P(i,this.tokenindex,this.tokenprio+this.tmpprio,0);e.length>0&&r.prio_<=e[e.length-1].prio_;)t.push(e.pop());e.push(r)},isNumber:function(){var t,e,i;for(t=!1,e="",a.X8U();this.pos<this.expression.length&&((i=this.expression.charCodeAt(this.pos))>=48&&i<=57||46===i);)e+=this.expression.charAt(this.pos),this.pos++,this.tokennumber=parseFloat(e),t=!0;return t},unescape:function(t,e){var i,r,n,s;i=[],a.F3j(),r=!1;for(var o=0;o<t.length;o++)if(n=t.charAt(o),r){switch(n){case"'":i.push("'");break;case"\\":i.push("\\");break;case"/":i.push("/");break;case"b":i.push("\b");break;case"f":i.push("\f");break;case"n":i.push("\n");break;case"r":i.push("\r");break;case"t":i.push("\t");break;case"u":s=parseInt(t.substring(o+1,o+5),16),i.push(String.fromCharCode(s)),a.Q7y(34),o+=a.o1b("4",32);break;default:throw"Illegal esca","pe sequence: '\\",a.Q7y(1),this.error_parsing(a.o1b(o,e),a.m92("Illegal escape sequence: '\\","'",n,a.Q7y(15)))}r=!1}else"\\"==n?r=!0:i.push(n);return i.join("")},isString:function(){var t,e,i;if(t=!1,e="",i=this.pos,this.pos<this.expression.length&&"'"==this.expression.charAt(this.pos))for(this.pos++;this.pos<this.expression.length;){if("'"==this.expression.charAt(this.pos)&&"\\"!=e.slice(-1)){this.pos++,this.tokennumber=this.unescape(e,i),t=!0;break}e+=this.expression.charAt(this.pos),this.pos++}return t},isConst:function(){var t;for(var e in this.consts)if(t=e.length,e===this.expression.substr(this.pos,t))return this.tokennumber=this.consts[e],this.pos+=t,!0;return!1},isOperator:function(){var t,e;if(43===(t=this.expression.charCodeAt(this.pos)))this.tokenprio=2,this.tokenindex="+";else if(45===t)this.tokenprio=2,this.tokenindex="-";else if(62===t)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,this.tokenprio=1,this.tokenindex=">="):(this.tokenprio=1,this.tokenindex=">");else if(60===t)61===this.expression.charCodeAt(this.pos+1)?(this.pos++,a.Q7y(34),this.tokenprio=a.m92("1",32),this.tokenindex="<="):(this.tokenprio=1,this.tokenindex="<");else if(124===t){if(124!==this.expression.charCodeAt(this.pos+1))return!1;"|","|",this.pos++,this.tokenprio=1,this.tokenindex="||"}else if(61===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="=="}else if(33===t){if(61!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=1,this.tokenindex="!="}else if(97===t){if(110!==this.expression.charCodeAt(this.pos+1)||100!==this.expression.charCodeAt(this.pos+2))return!1;this.pos++,this.pos++,this.tokenprio=0,this.tokenindex="and"}else if(111===t){if(114!==this.expression.charCodeAt(this.pos+1))return!1;this.pos++,this.tokenprio=0,this.tokenindex="or"}else if(42===t||8729===t||8226===t){this.tokenprio=3,2043455493,198418704,e=2;for(var i=1;2043455493!==a.o0j(i.toString(),i.toString().length,29229);i++)this.tokenindex=!1,e+=2;198418704!==a.c0F(e.toString(),e.toString().length,49039)&&(this.tokenindex="*")}else if(47===t)this.tokenprio=4,this.tokenindex="/";else if(37===t)this.tokenprio=4,this.tokenindex="%";else{if(94!==t)return!1;this.tokenprio=5,this.tokenindex="^"}return this.pos++,!0},isSign:function(){var t;if(a.X8U(),45===(t=this.expression.charCodeAt(this.pos-1))||43===t){-701344530,434686372,2;for(var e=1;-701344530!==a.o0j(e.toString(),e.toString().length,11017);e++)return!1;return 434686372===a.o0j(2..toString(),2..toString().length,16186)}return!1},isPositiveSign:function(){return 43===this.expression.charCodeAt(this.pos-1)},isNegativeSign:function(){return a.X8U(),45===this.expression.charCodeAt(this.pos-1)},isLeftParenth:function(){return 40===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio+=10,!0)},isRightParenth:function(){return a.X8U(),41===this.expression.charCodeAt(this.pos)&&(this.pos++,this.tmpprio-=10,!0)},isComma:function(){return 44===this.expression.charCodeAt(this.pos)?(this.pos++,this.tokenprio=-1,this.tokenindex=",",!0):(a.F3j(),!1)},isWhite:function(){var t;return(32===(t=this.expression.charCodeAt(this.pos))||9===t||10===t||13===t)&&(this.pos++,!0)},isOp1:function(){var t,e;a.X8U(),t="";for(var i=this.pos;i<this.expression.length&&((e=this.expression.charAt(i)).toUpperCase()!==e.toLowerCase()||!(i===this.pos||"_"!=e&&(e<"0"||e>"9")));i++)t+=e;return t.length>0&&t in this.ops1&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isOp2:function(){var t,e;a.X8U(),t="";for(var i=this.pos;i<this.expression.length&&((e=this.expression.charAt(i)).toUpperCase()!==e.toLowerCase()||!(i===this.pos||"_"!=e&&(e<"0"||e>"9")));i++)t+=e;return t.length>0&&t in this.ops2&&(this.tokenindex=t,this.tokenprio=5,this.pos+=t.length,!0)},isVar:function(){var t,e;a.X8U(),t="";for(var i=this.pos;i<this.expression.length&&((e=this.expression.charAt(i)).toUpperCase()!==e.toLowerCase()||!(i===this.pos||"_"!=e&&(e<"0"||e>"9")));i++)t+=e;return t.length>0&&(this.tokenindex=t,this.tokenprio=4,this.pos+=t.length,!0)},isComment:function(){if(47===this.expression.charCodeAt(this.pos-1)&&42===this.expression.charCodeAt(this.pos)){a.J4P(96);var t=a.o1b(3,5,5);return this.pos=this.expression.indexOf("*/",this.pos)+t,1===this.pos&&(this.pos=this.expression.length),!0}return!1}},!0),F},e.computeEquationChart=function(t,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;for(var k in t=t.replace(/[:]/,"/"),a.J4P(7),n=a.m92(0,"0"),r)"s","ymb","ol","\\$","&",s=new RegExp("\\["+k.replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\$/g,"\\$").replace(/\^/g,"\\^").replace(/[+\-*/%()]/g,"\\$&")+"\\]","g"),a.Q7y(1),t=t.replace(s,a.o1b(n,"symbol")),n++;function w(){var t,e;for(var i in t=null,a.F3j(),e=null,h)e?h[i].d.getTime()<e.d.getTime()?t=e=h[i]:h[i].d.getTime()>e.d.getTime()&&(t=e):e=h[i];return t?M(t)?-1:0:1}function M(t){if(t.i++,r[t.s]){if(t.i>=r[t.s].length)return 0;u=r[t.s][t.i]}return u.DT||(u.DT=e.strToDateTime(u.Date)),t.d=u.DT,a.X8U(),1}for(k in o=i().parse(t),l=[],h={},c=0,d=null,p=!1,g=[],r)m={sym:k,map:r[k]},r[k]?g.unshift(m):g.push(m);for(var T=0;T<g.length;T++)f=g[T],h[f.sym]={i:0,s:f.sym},f.map?(c++,a.Q7y(42),u=f.map[a.m92(0,"0")]):1==c&&(p=f.sym),u.DT||(u.DT=e.strToDateTime(u.Date)),h[f.sym].d=u.DT,d||(d=h[f.sym]);a.J4P(98),y=a.o1b(0,c),v=1==c&&-1==t.indexOf("%");t:for(;b=w();)if(1==b){if(p)(S=r[d.s][d.i][p])&&(S.Close||0===S.Close)&&(S=S.Close),C=o.evaluate({symbol0:r[d.s][d.i].Close,symbol1:S}),C=Number(C.toFixed(8)),(x={DT:d.d,Close:C,Adj_Close:C})[d.s]=r[d.s][d.i].Close,isNaN(C)||C==1/0||l.push(x);else{if(y)throw"NoEx","ce","ption",A=o.evaluate({}),a.Q7y(15),e.alert(a.o1b(t,A,"=")),{name:"NoException",message:""};for(k in n=0,D={Adj_Close:{},Close:{},Open:{},High:{},Low:{},Volume:{}},r){for(var F in D)a.Q7y(1),D[F][a.m92(n,"symbol")]=r[k][h[k].i][F];n++}(x={DT:d.d}).Adj_Close=o.evaluate(D.Adj_Close),x.Close=o.evaluate(D.Close),x.Open=o.evaluate(D.Open),x.Volume=o.evaluate(D.Volume),isNaN(x.Volume)&&(x.Volume=0),v?(x.High=o.evaluate(D.High),x.Low=o.evaluate(D.Low)):(x.High=Math.max(x.Open,x.Close),x.Low=Math.min(x.Open,x.Close)),isNaN(x.Close)||x.Close==1/0||l.push(x),isNaN(x.High)||(x.High=Number(x.High.toFixed(8))),isNaN(x.Low)||(x.Low=Number(x.Low.toFixed(8))),isNaN(x.Open)||(x.Open=Number(x.Open.toFixed(8))),isNaN(x.Close)||(x.Close=Number(x.Close.toFixed(8))),isNaN(x.Adj_Close)?x.Adj_Close=x.Close:x.Adj_Close=Number(x.Adj_Close.toFixed(8))}for(k in r)if(!M(h[k]))break t}return l}},c=t=>{var e,i=E;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.setLocale=function(t,a){var r,n,s,o;if("nu","m","er","ic","n","um","er","ic","n","umer","ic","2-d","i","gi","t","undefined"!=typeof Intl&&this.locale!=t){for(this.locale=t,(n=this.internationalizer={}).hourMinute=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",hourCycle:"h23"}),n.hourMinuteSecond=new Intl.DateTimeFormat(this.locale,{hour:"numeric",minute:"numeric",second:"numeric",hourCycle:"h23"}),n.mdhm=new Intl.DateTimeFormat(this.locale,{year:"2-digit",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),n.monthDay=new Intl.DateTimeFormat(this.locale,{month:"numeric",day:"numeric"}),n.yearMonthDay=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric",day:"numeric"}),n.yearMonth=new Intl.DateTimeFormat(this.locale,{year:"numeric",month:"numeric"}),n.month=new Intl.DateTimeFormat(this.locale,{month:"short"}),n.numbers=new Intl.NumberFormat(this.locale),n.priceFormatters=[],a||(a=8),r=0;r<a+1;r++)n.priceFormatters.push(new Intl.NumberFormat(this.locale,{maximumFractionDigits:r,minimumFractionDigits:r}));for(r=0;r<5;r++)"pe","r","cent",s=r,o=r,r||(s="",o=2),i.Q7y(1),n[i.o1b(s,"percent")]=new Intl.NumberFormat(this.locale,{style:"percent",minimumFractionDigits:o,maximumFractionDigits:o});e.I18N.createMonthArrays&&e.I18N.createMonthArrays(this,n.month,this.locale)}},e.ChartEngine.prototype.translateUI=function(t){i.X8U(),e.I18N.localized&&e.I18N.translateUI(this.preferences.language,t)},e.I18N=function(){},e.I18N.hereDoc=function(t){return t.toString().replace(/^[^/]+\/\*!?/,"").replace(/ {4,10}/g,"").replace(/\*\/[^/]+$/,"")},e.I18N.language="en",e.I18N.longMonths={zh:!0},e.I18N.reverseColorsByLocale={zh:!0,ja:!0},e.I18N.findAllTextNodes=function(t){var a,r,n,s,o,l,h,c,u,d,p,g;for(t||(t=document.body),a=t.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,{acceptNode:t=>t.nodeType===Node.TEXT_NODE||t.shadowRoot||t.placeholder?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}),i.X8U(),r=a.nextNode(),n=new RegExp("^\\s*$"),s=new RegExp("\n|\t|\f","g"),o={},l={SCRIPT:!0,STYLE:!0,TEXTAREA:!0};r;){if(r.shadowRoot)for(var m in c=e.I18N.findAllTextNodes(r.shadowRoot))o[m]||(o[m]=[]),o[m]=o[m].concat(c[m]);(u=r.nodeValue)&&!n.test(u)&&(l[(d=r.parentNode).tagName]||("cq-translate-","ori","ginal",(h=d.getAttribute("cq-translate-original"))?u=h:d.setAttribute("cq-translate-original",u),s.test(u)&&(u=u.replace(s,"")),o[u]||(o[u]=[]),o[u].push(r))),(u=r.placeholder)&&!n.test(u)&&(l[r.tagName]||("cq-tran","slate-placehol","der-original",(h=r.getAttribute("cq-translate-placeholder-original"))?u=h:r.setAttribute("cq-translate-placeholder-original",u),o[u]||(o[u]=[]),o[u].push(r))),r=r.tagName&&l[r.tagName]?a.nextSibling():a.nextNode()}if(t==document.body&&(p=e.Studies?e.Studies.studyLibrary:null))for(var f in p){if(null===o[f]&&(o[f]=[]),(g=p[f]).inputs)for(var y in g.inputs)o[y]||(o[y]=[]);if(g.outputs)for(var v in g.outputs)o[v]||(o[v]=[])}return o},e.I18N.missingWordList=function(t){var a,r,n,s,o,l;for(var h in t||(t=e.I18N.language),a=e.I18N.findAllTextNodes(),r={},(n=e.I18N.wordLists[t])||(n={}),s=function(t){i.X8U(),void 0===n[t]&&(r[t]="")},a)s(h);if(!e.Studies||!e.Studies.studyLibrary)return r;for(var c in e.Studies.studyLibrary){for(var u in s((o=e.Studies.studyLibrary[c]).name),o.inputs)switch(s(u),l=o.inputs[u],Object.prototype.toString.call(l)){case"[object String]":s(l);break;case"[object Array]":for(var d=0;d<l.length;++d)s(l[d])}for(var p in o.outputs)s(p)}return s("Show Zones"),s("OverBought"),s("OverSold"),s("Panel"),s("Show as Underlay"),s("Y-Axis"),s("Invert Y-Axis"),r},e.I18N.printableMissingWordList=function(t){return'",','\n"',JSON.stringify(e.I18N.missingWordList(t)).replace(/","/g,'",\n"')},e.I18N.translateUI=function(t,a){var r,n,s,o,l,h,c;if("pu"==t&&(t="pt"),e.I18N.wordLists&&(i.X8U(),t||(t=e.I18N.language),r=e.I18N.findAllTextNodes(a),n=e.I18N.wordLists[t]))for(var u in r){s=e.I18N.translateSections(u,n),o=r[u];for(var d=0;d<o.length;d++)"cq-translat","e-original",h=(l=o[d]).parentNode,c=l.placeholder?l.getAttribute("cq-translate-placeholder-original"):h.getAttribute("cq-translate-original"),","!==s&&s||(s=c),l.placeholder?l.placeholder=s:l.data=s}},i.X8U(),e.I18N.translate=function(t,i){var a,r;return i||(i=e.I18N.language),e.I18N.wordLists?(r=null,(a=e.I18N.wordLists[i])&&(r=e.I18N.translateSections(t,a)||t),","===r?t:r):(console.log("Must include translations.js in order to use CIQ.I18N.translate()"),t)},e.I18N.translateSections=function(t,e){var a,r;return a="","string"==typeof t&&-1!=t.indexOf(a)?("$","1",i.J4P(15),(r=(t=t.replace(/([(),])/g,i.o1b(a,a,"$1"))).split(a)).forEach((function(t,a,r){var n,s;if(n=t.match(/^(\s*).{0,100}\S(\s*)$/),s=e[t.trim()]){if(n)i.J4P(7),s=n[i.o1b(15,16)]+s+n[2];r[a]=s}})),r.join("")):e[t]},e.I18N.csv=e.I18N.csv||"",e.I18N.convertCSV=function(t){var a,r,n,s,o,l,h,c,u,d;if(a=new RegExp("[]|[]","g"),r=e.I18N.wordLists,t||(t=e.I18N.csv),t){s=(n=t.split("\n"))[0].split(","),i.F3j();for(var p=0;p<s.length;p++)r[o=s[p]]||(r[o]={});for(var g=1;g<n.length;g++){c=(h=(l=n[g].match(/(".{0,1000}?"|[^",]{1,1000})(?=\s{0,100},|\s{0,100}$)|(,(?=,))/g)||[])[0]).charAt(0),u=h.charAt(h.length-1),'"'===c&&'"'===u&&(i.J4P(42),h=h.substring(i.m92(32,"1"),h.length-1)),a.test(h)&&(h=h.replace(a,'"'));for(var m=1;m<l.length;m++)c=(d=l[m]).charAt(0),u=d.charAt(d.length-1),'"'===c&&'"'===u&&(i.Q7y(35),d=d.substring(i.o1b(0,"1"),d.length-1)),r[s[m]][h]=d}}},e.I18N.setLanguage=function(t,a,r,n,s){s||(s=(t.uiContext||{}).topNode||document.body),"pu"==a&&(a="pt"),i.X8U(),e.I18N.convertCSV(n),e.I18N.language=a,e.I18N.translateUI(a,s),r||(r=e.I18N.translate),t.translationCallback=r},e.I18N.setLocale=function(t,a,r,n,s){var o,l,h;if("locale-","data/json","p","u","n","de","fined",e.xor(this.reverseColorsByLocale[a],this.reverseColorsByLocale[t.locale])&&this.reverseCandles(t),"undefined"==typeof Intl||!Intl.__addLocaleData)return t.setLocale(a,s),void(r&&r(null));i.F3j(),n=void 0===n?"locale-data/jsonp":n,i.J4P(0),o=i.o1b("/",".js",n,a),(l=document.createElement("SCRIPT")).async=!0,l.src=o,(h=document.getElementsByTagName("script")[i.m92(0,"0",i.J4P(42))]).parentNode.insertBefore(l,h.nextSibling),l.onload=function(){t.setLocale(a,s),r&&r(null)},l.onerror=function(){i.X8U(),r&&r("cannot load script")}},e.I18N.createMonthArrays=function(t,a,r){var n,s,o,l,h;t.monthAbv=[],t.monthLetters=[],n=new Date,s=!0,e.I18N.longMonths&&e.I18N.longMonths[r]&&(s=!1);for(var c=0;c<12;c++)if(n.setDate(1),n.setMonth(c),o=a.format(n),s){l="";for(var u=0;u<o.length;u++)h=o.charAt(u),i.Q7y(34),h.charCodeAt(i.m92("0",0))<65||(l+=h);t.monthAbv[c]=l,t.monthLetters[c]=l[0]}else t.monthAbv[c]=o,t.monthLetters[c]=o},e.I18N.localize=function(t,a){a=this.langConversionMap[a]||a,i.X8U(),this.setLocale(t,a),this.setLanguage(t,a),e.I18N.localized=!0},e.I18N.reverseCandles=function(t){var e,a,r;i.F3j(),e=t.styles,a=t.cloneStyle(e.stx_candle_down),r=t.cloneStyle(e.stx_candle_up),e.stx_candle_up=a,e.stx_candle_down=r},e.I18N.wordLists={en:{}},e.I18N.languages={en:"English"},e.I18N.langConversionMap={},e.I18N.localized=!1},u=t=>{var e,i;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.pointerEvents={down:[],up:[]},e.ChartEngine.prototype.manageTouchAndMouse=!0,e.ChartEngine.prototype.registerTouchAndMouseEvents=function(){var t,i,a,r,n,s,o;this.touchAndMouseEventsRegistered||(this.touchAndMouseEventsRegistered=!0,i=(t=this.controls.chartControls||document).querySelector(".stx-zoom-in"),a=t.querySelector(".stx-zoom-out"),r=this.chart.container,n=this,s=function(t,e,i){n.addDomEventListener(r,t,(function(t){if(n.mainSeriesRenderer.nonInteractive)return;e(t)}),i)},e.touchDevice?e.isSurface?("mouseu","p","moused","own","mouse","en","t","er","m","ou","semove",s("mousemove",(function(t){E.X8U(),n.msMouseMoveProxy(t)})),s("mouseenter",(function(t){E.F3j(),n.msMouseMoveProxy(t)})),s("mousedown",(function(t){E.X8U(),n.msMouseDownProxy(t)})),s("mouseup",(function(t){n.msMouseUpProxy(t)})),s("pointerdown",(function(t){return E.F3j(),n.startProxy(t)})),s("pointermove",(function(t){E.F3j(),n.moveProxy(t)})),s("pointerenter",(function(t){return n.moveProxy(t)})),s("pointerup",(function(t){return E.F3j(),n.endProxy(t)}))):("touch","end",e.isMobile||(s("mousemove",(function(t){n.iosMouseMoveProxy(t)})),s("mouseenter",(function(t){n.iosMouseMoveProxy(t)})),s("mousedown",(function(t){n.iosMouseDownProxy(t)})),s("mouseup",(function(t){n.iosMouseUpProxy(t)}))),s("touchstart",(function(t){n.touchstart(t)}),{passive:!1}),s("touchmove",(function(t){n.touchmove(t)}),{passive:!1}),s("touchend",(function(t){E.X8U(),n.touchend(t)})),s("pointerdown",(function(t){n.touchPointerType=t.pointerType})),i&&("onMous","e","Over",i.removeAttribute("onMouseOver"),i.removeAttribute("onMouseOut")),a&&(a.removeAttribute("onMouseOver"),a.removeAttribute("onMouseOut"))):("mouseu","p",s("mousemove",(function(t){E.X8U(),n.mousemove(t)})),s("mouseenter",(function(t){n.mousemove(t)})),s("mousedown",(function(t){E.F3j(),n.mousedown(t)})),s("mouseup",(function(t){E.F3j(),n.mouseup(t)}))),o=e.wheelEvent,E.F3j(),this.captureMouseWheelEvents&&s(o,(function(t){n.mouseWheel(t)}),{passive:!1}))},e.ChartEngine.prototype.mousedown=function(t){var i,a,r,n,s,o,l;if(i="d",i+="o",i+="w",i+="n",a="mo",a+="us",a+="edown",!this.runPrepend(a,arguments)&&(this.grabOverrideClick=!1,this.displayInitialized&&this.displayCrosshairs&&!this.repositioningDrawing&&!(this.editingAnnotation||t.button&&t.button>=2)))if(r=this.container.getBoundingClientRect(),this.top=r.top,this.left=r.left,this.right=this.left+this.width,this.bottom=this.top+this.height,t.clientX>=this.left&&t.clientX<=this.right&&t.clientY>=this.top&&t.clientY<=this.bottom){if(this.insideChart=!0,this.currentPanel){this.manageTouchAndMouse&&t&&t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,this.hasDragged=!1,this.userPointerDown=!0,""===this.openDialog&&this.registerPointerEvent({x:t.clientX,y:t.clientY,time:this.mouseTimer},i),n=this.currentPanel.chart;for(var h=0;h<this.drawingObjects.length;h++)if((s=this.drawingObjects[h]).highlighted&&!s.permanent){if(this.cloneDrawing)return(o=new(0,e.ChartEngine.drawingTools[s.name])).reconstruct(this,s.serialize()),this.drawingObjects.push(o),this.activateRepositioning(o),void(o.repositioner=s.repositioner);if(l=this.currentVectorParameters.vectorType,!(e.Drawing&&l&&e.Drawing[l]&&(new e.Drawing[l]).dragToDraw))return void this.activateRepositioning(s)}this.mainSeriesRenderer;var{baselineHelper:c}=this;if(!c.size||!this.findBaselineHandle(t,!0)){var u,{anchorHandles:d}=this.controls;if(d)for(var p in d){var{handle:g,sd:m,highlighted:f}=d[p];if(f)return this.repositioningAnchorSelector={sd:m},void g.classList.add("stx-grab")}if(!(this.drawingClick&&(this.currentPanel.subholder===t.target&&this.drawingClick(this.currentPanel,this.cx,this.cy),this.activeDrawing&&this.activeDrawing.dragToDraw)))this.grabbingScreen=!0,n.spanLock=!1,this.yToleranceBroken=!1,this.grabStartX=t.clientX,this.grabStartY=t.clientY,this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=n.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartCandleWidth=this.layout.candleWidth,this.grabStartYAxis=this.whichYAxis(this.currentPanel),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPanel=this.currentPanel,setTimeout((u=this,E.X8U(),function(){E.X8U(),u.grabbingHand()}),100),this.swipeStart&&this.swipeStart(n),(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer(),this.runAppend("mousedown",arguments)}}}else this.insideChart=!1},e.ChartEngine.prototype.mousemove=function(t){var i;E.X8U(),i=t,e.ChartEngine.crosshairX=i.clientX,e.ChartEngine.crosshairY=i.clientY,i.type.toLowerCase().indexOf("enter")>-1?this.positionCrosshairsAtPointer():this.runPrepend("mousemove",arguments)||this.displayInitialized&&""===this.openDialog&&(this.baselineHelper.size&&this.findBaselineHandle(i),this.grabbingScreen&&1!==i.buttons&&(this.cancelLongHold=!0,this.displayDragOK(),this.grabbingScreen=!1,this.findHighlights(!1,!0)),this.mousemoveinner(i.clientX,i.clientY),this.runAppend("mousemove",arguments))},e.ChartEngine.prototype.mouseup=function(t){var i,a,r,n,s,o,l,h,c;if(i="stx-drag",i+="-chart",!this.runPrepend("mouseup",arguments)){if(this.swipe.end=!0,this.cancelLongHold=!0,this.repositioningDrawing){if(!this.currentVectorParameters.vectorType||Date.now()-this.mouseTimer>250)return a="ve",a+="ctor",this.changeOccurred(a),e.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.adjustDrawings(),void this.draw();this.activateRepositioning(null)}if(this.repositioningBaseline){r="s",r+="t",r+="x-gr",r+="ab";var{handle:u}=this.repositioningBaseline,{mainSeriesRenderer:d={params:{}}}=this;return this.repositioningBaseline=null,u.classList.remove(r),d.params.baseline&&d.params.type,void this.draw()}if(this.repositioningAnchorSelector){var{sd:p}=this.repositioningAnchorSelector;return e.Studies.repositionAnchor(this,p),this.repositioningAnchorSelector=null,this.controls.anchorHandles[p.uniqueId].highlighted=!1,e.Studies.displayAnchorHandleAndLine(this,p,this.chart.dataSegment),Object.values(this.controls.anchorHandles||{}).forEach((({handle:t})=>(E.F3j(),"stx-g","rab",t.classList.remove("stx-grab")))),void this.findHighlights()}if(n=this.userPointerDown,this.userPointerDown=!1,this.displayInitialized)if(s=this.backOutY(t.clientY),o=this.backOutX(t.clientX),l=t.button&&t.button>=2,""!==this.openDialog||l||this.registerPointerEvent({x:t.clientX,y:t.clientY,time:Date.now()},"up"),this.grabbingScreen=!1,this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(o,s),this.currentPanel=this.whichPanel(s)),h=this.currentPanel,this.grabStartYAxis=null,this.displayDragOK(),""===this.openDialog){if(this.grabOverrideClick)return this.overXAxis||this.overYAxis||!this.swipeRelease||this.swipeRelease(),this.container.classList.remove("stx-drag-chart"),this.grabOverrideClick=!1,this.doDisplayCrosshairs(),void this.updateChartAccessories();if(this.insideChart&&this.container.classList.remove(i),!e.ChartEngine.resizingPanel)return l||t.ctrlKey?this.anyHighlighted&&!0!==this.bypassRightClick?(this.rightClickHighlighted(),t.preventDefault&&this.captureTouchEvents&&t.preventDefault(),t.stopPropagation(),!1):(this.dispatch("rightClick",{stx:this,panel:h,x:o,y:s}),!0):void(t.clientX<this.left||t.clientX>this.right||t.clientY<this.top||t.clientY>this.bottom||(c=h&&h.subholder===t.target,this.isDoubleClick()&&(c||this.overYAxis||this.overXAxis)?(this.doubleClick(t.button,o,s),this.resetClickState()):(n&&c&&(this.longHoldTookEffect&&!this.activeDrawing||this.drawingClick(h,o,s),!this.longHoldTookEffect&&this.activeMarker&&this.activeMarker.click({cx:o,cy:s,panel:h})),this.longHoldTookEffect||this.activeDrawing||this.dispatch("tap",{stx:this,panel:h,x:o,y:s})),this.runAppend("mouseup",arguments)));this.releaseHandle()}else this.insideChart&&this.container.classList.remove("stx-drag-chart")}},e.ChartEngine.prototype.registerPointerEvent=function(t,e){this.pointerEvents[e].length>1&&this.pointerEvents[e].pop(),this.pointerEvents[e].unshift(t)},e.ChartEngine.prototype.resetPointerEvent=function(t){this.pointerEvents[t].splice(0)},e.ChartEngine.prototype.resetClickState=function(){this.resetPointerEvent("up"),this.resetPointerEvent("down"),this.cancelTouchSingleClick=!0},e.ChartEngine.prototype.isDoubleClick=function(t){var i,a;i=t?35:20;var{up:[r,n],down:[s,o]}=this.pointerEvents;return E.X8U(),a=n&&o&&s.time-n.time<this.doubleClickTime&&e.withinRadius(o,s,i)&&e.withinRadius(n,s,i)&&n.time-o.time<this.longHoldTime&&r.time-s.time<this.longHoldTime,this.cancelTouchSingleClick=a,a},e.ChartEngine.prototype.doubleClick=function(t,i,a){var r;if(r="doubleClic",r+="k",!this.runPrepend(r,arguments)&&!this.editingAnnotation)return e.ChartEngine.drawingLine?("continuous"==this.currentVectorParameters.vectorType&&e.ChartEngine.completeDrawing(this),this.undo()):void(this.activeDrawing||(this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:a,panel:this.currentPanel})||this.dispatch("doubleClick",{stx:this,button:t,x:i,y:a}),this.runAppend("doubleClick",arguments)))},e.ChartEngine.prototype.handleMouseOut=function(t){var i,a,r,n,s;if(!(t=t||window.event).relatedTarget||!e.withinElement(this.chart.container,t.pageX,t.pageY)){if(i="handleMou",i+="seOut",a="handleM",a+="ouse",a+="Out",this.runPrepend(a,arguments))return;this.grabbingScreen||this.findHighlights(null,!0),this.undisplayCrosshairs(),this.touches=[],this.touching=!1,this.activeDrawing&&this.userPointerDown&&(this.userPointerDown=!1,this.drawingLine=!1,r=this.backOutY(t.pageY),n=this.backOutX(t.pageX),this.drawingClick(this.currentPanel,n,r));var{sd:o,tapToAdd:l}=this.repositioningAnchorSelector||{};o&&!l&&(this.repositioningAnchorSelector=null,this.controls.anchorHandles[o.uniqueId].highlighted=!1,e.Studies.displayAnchorHandleAndLine(this,o,this.chart.dataSegment),this.draw()),this.insideChart=!1,this.overYAxis=!1,this.overXAxis=!1,this.displaySticky(),(s=this.controls.dragOk)&&(s.style.display="none"),this.runAppend(i,arguments)}},e.ChartEngine.prototype.startLongHoldTimer=function(t){var e,i;e=this,this.cancelLongHold=!1,E.F3j(),this.longHoldTimeout&&clearTimeout(this.longHoldTimeout),i=function(){E.X8U(),e.cancelLongHold||(e.longHoldTookEffect=!0,t&&t(),e.dispatch("longhold",{stx:e,panel:e.currentPanel,x:e.cx,y:e.cy}),e.displayDragOK())},this.longHoldTime?this.longHoldTimeout=setTimeout(i,this.longHoldTime):0===this.longHoldTime&&i()},e.ChartEngine.prototype.grabHandle=function(t){this.runPrepend("grabHandle",arguments)||t&&(e.ChartEngine.crosshairY=this.resolveY(t.top),e.ChartEngine.resizingPanel=t,t.handle.classList.add("stx-grab"),this.runAppend("grabHandle",arguments))},e.ChartEngine.prototype.grabbingHand=function(){var t,i=E;if("s","tx-drag",i.X8U(),"-","chart",this.allowScroll&&this.grabbingScreen&&!e.touchDevice){-1420592755,-486309396,i.J4P(34),t=i.o1b("2",64);for(var a=1;-1420592755!==i.o0j(a.toString(),a.toString().length,43842);a++)this.container.classList.add(""),t+=2;-486309396!==i.c0F(t.toString(),t.toString().length,13986)&&this.container.classList.add(""),this.container.classList.add("stx-drag-chart")}},e.ChartEngine.prototype.releaseHandle=function(){if(this.runPrepend("releaseHandle",arguments))return!0;e.clearCanvas(this.chart.tempCanvas,this),E.F3j(),this.resizePanels(),e.ChartEngine.resizingPanel&&e.ChartEngine.resizingPanel.handle.classList.remove("stx-grab"),e.ChartEngine.resizingPanel=null,this.runAppend("releaseHandle",arguments)},e.ChartEngine.prototype.findHighlights=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q,X,Z,J=E;a=this.preferences[t?"highlightsTapRadius":"highlightsRadius"],this.highlightViaTap=t;var{cx:G,cy:K}=this;if(this.anyHighlighted=!1,this.currentPanel){var{chart:$}=this.currentPanel;if(this.activeDrawing&&(i=!0),r=!1,n=null,s=i?{}:{forceShow:!0,type:"drawing"},o={x0:this.tickFromPixel(G-a,$),x1:this.tickFromPixel(G+a,$),y0:this.valueFromPixel(K-a,this.currentPanel),y1:this.valueFromPixel(K+a,this.currentPanel),cx0:G-a,cx1:G+a,cy0:K-a,cy1:K+a,r:a},this.repositioningDrawing&&o.x1-o.x0<2?(o.x1++,o.x0--):o.x1==o.x0&&(o.x0-=.5,o.x1+=.5),!$.hideDrawings)for(var tt=this.drawingObjects.length-1;tt>=0;tt--)l=this.drawingObjects[tt],this.panels[l.panelName]&&(this.repositioningDrawing&&this.repositioningDrawing!=l||(h=l.highlighted,(c=l.panelName==this.currentPanel.name||l.spanPanels)&&(l.repositioner=l.intersected(this.crosshairTick,this.crosshairValue,o)),c=c&&l.repositioner&&!this.overXAxis&&!this.overYAxis,!i&&c?(h?(n=l,this.anyHighlighted&&this.singleDrawingHighlight&&(l.highlighted=!1),l.highlighted&&l.highlighted!=h&&(r=!0)):h!=l.highlight(!0)&&(n||(n=l),this.anyHighlighted&&this.singleDrawingHighlight&&(l.highlighted=!1),r=!0),this.anyHighlighted=!0):h!=l.highlight(!1)&&(r=!0),l.highlighted&&(s.noDelete=l.permanent,s.noEdit=!this.callbackListeners.drawingEdit.length,s.noText=s.noEdit||!l.edit,s.message=this.translateIf(e.capitalize(l.name)))));for(u in this.layout.studies)(d=this.layout.studies[u]).prev=d.highlight,d.highlight=this.yaxisMatches(d,this.grabStartYAxis);for(u in $.seriesRenderers){(f=$.seriesRenderers[u]).params.highlight=this.yaxisMatches(f,this.grabStartYAxis);for(var et=0;et<f.seriesParams.length;et++)(m=f.seriesParams[et]).prev=m.highlight,m.highlight=f.params.highlight}var{anchorHandles:it}=this.controls;if(it)for(var at in it)it[at].highlighted=!1;if(y=this.markerHelper&&this.markerHelper.visibleCanvasMarkers)for(p=0;p<y.length;p++)g=y[p],this.activeMarker=null,g.prev=y[p].highlight,g.highlight=!1;if(this.markerHelper&&(this.markerHelper.highlighted=[]),this.highlightedDataSetField=null,this.highlightedDraggable=null,!i&&!this.anyHighlighted&&it)for(var rt in it)if(v=it[rt],!1!==e.getFromNS(v,"sd.signalData.reveal")){if(!this.anyHighlighted){var{sd:nt,currentPixel:st}=v;J.Q7y(7),b=J.m92(a,st),J.J4P(1),x=J.o1b(a,st),S=this.panels[nt.panel];var{top:ot,bottom:lt}=S.yAxis;if(e.boxIntersects(b,ot,x,lt,G,K,G,K)){this.anyHighlighted=!0,v.highlighted=!0,r=!0,s={message:nt.name,type:"anchorHandle",noDelete:!0};continue}}!0===v.highlighted&&(v.highlighted=!1,r=!0)}if(!i&&!this.anyHighlighted&&$.dataSegment&&(C=this.barFromPixel(G))>=0&&C<$.dataSegment.length){if(D=e.convertBoxToPixels(this,this.currentPanel.name,o),k=Number.MAX_VALUE,y)for(p=0;p<y.length;p++)if((w=(g=y[p]).params.box)&&g.params.panelName===this.currentPanel.name){if(e.boxIntersects(D.x0,D.y0,D.x1,D.y1,w.x0,w.y0,w.x1,w.y1)){J.Q7y(100);var ht=J.m92(2,15,15,14);J.J4P(101);var ct=J.o1b(13,25,0,14);J.Q7y(7);var ut=J.o1b(38,40);J.Q7y(8);var dt=J.m92(16,14);(M=Math.pow(K-(w.y1+w.y0)/ht,ct)+Math.pow(G-(w.x1+w.x0)/ut,dt))<=k&&(k=M,this.activeMarker=g),g.highlight=!0,this.markerHelper.highlighted.push(g)}g.prev!=g.highlight&&(r=!0)}for(u in k=Number.MAX_VALUE,T=null,this.overlays){if(y&&this.markerHelper.highlighted.length)break;if((!(d=this.overlays[u]).signalData||d.signalData.reveal)&&!d.disabled&&d.panel==this.currentPanel.name&&!1!==d.study.isHighlighted)if("function"!=typeof d.study.isHighlighted){if($.dataSegment[C])for(var pt in d.outputMap)!1!==(F=ft.call(this,C,o,pt,d.getYAxis(this)))&&F<=k&&(T={o:d,out:pt},k=F)}else if(d.study.isHighlighted(this,G,K)){T={o:d,out:pt},k=0;break}}for(u in $.seriesRenderers){if(this.highlightedDataSetField)break;if(_=(P=$.seriesRenderers[u]).params.panel,P!=this.mainSeriesRenderer&&(P.params.highlightable||this.currentVectorParameters.vectorType)&&_==this.currentPanel.name)for(p=0;p<P.seriesParams.length;p++)if("-","-",">","Cl","o","s","e",(L=(m=P.seriesParams[p]).field)||P.highLowBars||(L=this.defaultPlotField||"Close"),m.symbol&&m.subField&&(L+="--\x3e"+m.subField),!(I=P.params.yAxis)&&_&&(I=this.panels[_].yAxis),P.params.step&&C>0){if(!P.caches[m.id])continue;if(!(A=P.caches[m.id][C])&&0!==A)continue;if(J.Q7y(7),((N=P.caches[m.id][J.o1b(1,C)])||0===N)&&K+a>=A&&K-a<=N||K-a<=A&&K+a>=N){T={s:m,fullField:L};break}}else!1!==(O=ft.call(this,C,o,L,I,P,m.id))&&O<=k&&(T={s:m,fullField:L},k=O)}T&&((d=T.o)?(d.name!=d.panel&&(this.anyHighlighted=!0),d.highlight=T.out,this.highlightedDataSetField=T.out):(this.anyHighlighted=!0,T.s.highlight=!0,this.highlightedDataSetField=T.fullField))}for(u in R=this.preferences.dragging,this.overlays)(d=this.overlays[u]).highlight&&(this.anyHighlighted=!0,j=d.inputs.display||d.name,s={message:j=this.translateIf(j),noDelete:d.permanent,noEdit:!d.editFunction,noText:!d.textFunction,noDrag:d.undraggable&&d.undraggable(this),type:"study"},n=null,(!0===R||R&&R.study)&&(d.undraggable(this)||(H=d)),z=d.getYAxis(this)),d.prev!=d.highlight&&(r=!0);for(u in $.seriesRenderers){B=(U=$.seriesRenderers[u]).params.yAxis?U.params.yAxis.textStyle:null;for(var gt=0;gt<U.seriesParams.length;gt++)m=U.seriesParams[gt],U.params.highlightable&&m.highlight&&("se","r","i","es",this.anyHighlighted=!0,"auto"==(V=m.color||B)&&(V=this.defaultColor),m.opacity&&1!==m.opacity&&(V=e.hexToRgba(e.colorToHex(V),parseFloat(m.opacity))),s={message:m.display||m.symbol,backgroundColor:V,noDelete:m.permanent,noDrag:U.undraggable&&U.undraggable(this),type:"series"},n=null,(!0===R||R&&R.series)&&(H=U,U.params.highlight=!0),z=U.getYAxis(this)),m.prev!=m.highlight&&(r=!0)}for(u in this.plugins)Q={},(W=this.plugins[u]).findHighlights&&((Q=W.findHighlights(this,t,i)).somethingChanged&&(r=!0),Q.anyHighlighted&&(this.anyHighlighted=!0,s=Q.stickyArgs||{}));for(var mt in Y=this.whichPanel(K),q=this.whichYAxis(Y,G),z||(z=q),this.currentBaseline&&(z=this.currentBaseline.getYAxis(this)),z&&(z.highlight||(r=!0),z.highlight=!0),X=[],this.panels)X=X.concat(this.panels[mt].yaxisLHS).concat(this.panels[mt].yaxisRHS);for(u=0;u<X.length;u++)(z!=X[u]||i)&&(X[u].highlight&&(r=!0),X[u].highlight=!1);if((!0===R||R&&R.yaxis)&&q&&!q.noDraw&&(this.anyHighlighted=!0,H=q,s={}),r&&(this.draw(),s.panel=Y,this.anyHighlighted&&!this.grabStartYAxis?s.panel=Y:s={},this.displaySticky(s),this.clearMeasure(),n&&n.measure()),this.anyHighlighted?this.controls.mSticky&&(s&&s.positioner?s.positioner.call(this,this.controls.mSticky):this.positionSticky(this.controls.mSticky)):this.setMeasure(),H&&Y&&!Y.noDrag){if(this.longHoldTookEffect&&!this.cancelLongHold){if(H.params)for(u in H.params.dependentOf&&((H=$.seriesRenderers[H.params.dependentOf]).params.highlight=!0),$.seriesRenderers)$.seriesRenderers[u].params.dependentOf==H.params.name&&($.seriesRenderers[u].params.highlight=!0);if(this.highlightedDraggable=H,H.getDependents)for(u in Z=H.getDependents(this,!0),this.overlays)d=this.overlays[u],Z.indexOf(d)>-1&&(d.highlight=!0)}this.container.classList.add("stx-draggable")}else"stx","-d","raggable",this.container.classList.remove("stx-draggable");this.highlightedDataSetField=this.adjustHighlightedDataSetField(this.highlightedDataSetField),this.displayDrawOK()}function ft(t,i,a,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,A,D,k,w,M,T,F,P,_;if("seg","m",J.F3j(),"ent",l=(o=this).chart,h=o.currentPanel,r||(r=h.yAxis),c=a.split("--\x3e"),u=c[0],(d=c[1])||(d="Close"),p=l.dataSegment[C],b=null,x=null,S=null,J.J4P(2),A=new Array(J.m92("3",1)),D=n&&n.caches[s],p&&D){for(f=D[C],b=p.tick,(f||0===f)&&(A[0]=1),k=C-1;k>=0;k--)if(D[k]||0===D[k]){y=D[k],J.Q7y(99),x=J.m92(k,b,C),J.J4P(35),A[J.o1b(1,"1")]=1;break}for(k=C+1;k<l.dataSegment.length;k++)if(D[k]||0===D[k]){v=D[k],J.J4P(99),S=J.o1b(k,b,C),A[2]=1;break}}if(null===x&&(g=o.getPreviousBar.call(o,l,a,C))&&(x=g.tick,y=L(g)),null===S&&(m=o.getNextBar.call(o,l,a,C))&&(S=m.tick,v=L(m)),null===x&&null===S)return!1;function L(t){var e;return t?((e=t[u])&&(e[d]||0===e[d])&&(e=e[d]),n&&n.getBasis&&(e+=n.getBasis(t,u,d)),l.transformFunc&&r==l.yAxis?t.transform&&u in t.transform?((e=t.transform[u])&&(e[d]||0===e[d])&&(e=e[d]),e):l.transformFunc(o,l,e):e):null}if(D||(f=L(p),y=L(g),v=L(m),b=p.tick,g&&(x=g.tick),m&&(S=m.tick)),y||0===y||(y=0,x=0),!v&&0!==v)if(f||0===f?(v=f,A[2]=A[0]):(v=y,A[2]=A[1]),s&&l.series[s].parameters.extendToEndOfDataSet){J.J4P(3);var E=J.o1b(25,7,19);S=l.dataSet.length-E}else S=x;if(!f&&0!==f&&(f=v,b=S,J.Q7y(7),A[0]=A[J.m92(0,"2")],0===y&&0===x)){y=f,1310807624,-1579478741,w=2;for(var I=1;1310807624!==J.c0F(I.toString(),I.toString().length,11668);I++)x=b,A[1]=A[0],w+=2;-1579478741!==J.o0j(w.toString(),w.toString().length,97152)&&(x=b,A[6]=A[4])}return M=o.pixelFromTransformedValue.bind(o),f=(T=o.valueFromPixel.bind(o))(A[0]?f:M(f,h,r),h),y=T(A[1]?y:M(y,h,r),h),v=T(A[2]?v:M(v,h,r),h),F=e.convertBoxToPixels(o,h.name,i),P=e.convertBoxToPixels(o,h.name,{x0:x,y0:y,x1:b,y1:f}),_=e.convertBoxToPixels(o,h.name,{x0:b,y0:f,x1:S,y1:v}),!(!e.boxIntersects(F.x0,F.y0,F.x1,F.y1,P.x0,P.y0,P.x1,P.y1,"segment")&&!e.boxIntersects(F.x0,F.y0,F.x1,F.y1,_.x0,_.y0,_.x1,_.y1,"segment"))&&Math.min(Math.pow(K-(P.y1+P.y0)/2,2)+Math.pow(G-(P.x1+P.x0)/2,2),Math.pow(K-(_.y1+_.y0)/2,2)+Math.pow(G-(_.x1+_.x0)/2,2))}},e.ChartEngine.prototype.rightClickHighlighted=function(){var t,e;t="rig",t+="htClickHighlight",t+="ed",E.F3j(),e="right",e+="Clic",e+="kHig",e+="hlighted",this.runPrepend(e,arguments)||(this.deleteHighlighted(!0),this.runAppend(t,arguments))},e.ChartEngine.prototype.deleteHighlighted=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m;if(!this.runPrepend("deleteHighlighted",arguments)){if(this.cancelTouchSingleClick=!0,e.clearCanvas(this.chart.tempCanvas,this),(r=!1===this.bypassRightClick)||!this.bypassRightClick.drawing)for(var f=this.drawingObjects.length-1;f>=0;f--)(n=this.drawingObjects[f]).highlighted&&(t?this.rightClickDrawing(n,i,a):n.permanent||(s="vect",s+="or",n.abort()||(o=this.exportDrawings(),this.drawingObjects.splice(f,1),this.undoStamp(o,this.exportDrawings())),this.changeOccurred(s)));if(r||!this.bypassRightClick.study)for(var y in this.overlays)((l=this.overlays[y]).overlay||l.underlay)&&l.highlight&&!l.permanent&&(t||i?this.rightClickOverlay(y,i):this.removeOverlay(y));if((h=this.currentPanel&&this.currentPanel.chart)&&(r||!this.bypassRightClick.series))for(var v in h.seriesRenderers)if((c=h.seriesRenderers[v]).params.highlightable){d=(u=this.panels[c.params.panel])&&u.yAxis.name;for(var b=c.seriesParams.length-1;b>=0;b--)p=c.seriesParams[b],!c.params.highlight&&!p.highlight||p.permanent||(c.removeSeries(p.id),c.seriesParams.length<1&&(this.removeSeriesRenderer(c),c.params.name==d?this.electNewPanelOwner(c.params.panel):(this.checkForEmptyPanel(c.params.panel),(g=this.getYAxisByName(u,c.params.name))&&(g.name=g.studies[0]||g.renderers[1]))))}this.draw(),this.resizeChart(),this.clearMeasure(),(m=this.controls.mSticky)&&(m.style.display="none",m.children[0].innerHTML=""),this.runAppend("deleteHighlighted",arguments)}},e.ChartEngine.prototype.displayDragOK=function(t){var e,i,a,r,n,s,o,l,h,c,u,d,p,g,m=E;if(m.X8U(),e=this,i=this.controls.dragOk){if(t||this.tapForHighlighting&&this.touching&&!this.anyHighlighted||this.findHighlights(this.highlightViaTap),r=(a=this.highlightedDraggable)&&a.undraggable&&a.undraggable(this),n=this.cx,s=this.cy,o=a&&!r&&this.longHoldTookEffect,t)"inline-blo","ck",o&&this.insideChart&&(i.style.display="inline-block");else{if(o&&!this.cancelLongHold)"s","tx-drag-ch","art","in","line-block",l=a.inputs&&a.inputs.display||a.params&&(a.params.display||a.params.name)||a.name,i.querySelector(".field").setAttribute("text",l),v.call(this,i),i.style.display="inline-block",this.draw(),this.displaySticky(),this.grabStartYAxis?this.container.classList.replace("stx-drag-chart","stx-drag-axis"):this.container.classList.replace("stx-drag-chart","stx-drag-series");else for(var f in i.style.display="none",this.draw(),this.container.classList.remove("stx-drag-series"),this.container.classList.remove("stx-drag-axis"),this.panels){for("le","f","t",(h=this.panels[f].subholder.classList).remove("dropzone"),h.remove("all"),h.remove("left"),h.remove("right"),h.remove("top"),h.remove("bottom"),c=0;c<this.panels[f].yaxisLHS.length;c++)this.panels[f].yaxisLHS[c].dropzone=null;for(c=0;c<this.panels[f].yaxisRHS.length;c++)this.panels[f].yaxisRHS[c].dropzone=null}this.draw()}if(a){u=s+i.offsetHeight,d=Math.max(0,n-i.offsetWidth),m.Q7y(1),i.style.top=m.m92("px",u),m.J4P(2),p=-m.o1b("652906920",1),199635245,g=2;for(var y=1;m.c0F(y.toString(),y.toString().length,25982)!==p;y++)m.J4P(10),i.style.left=m.m92("",d),g+=2;199635245!==m.c0F(g.toString(),g.toString().length,8725)&&(m.Q7y(1),i.style.left=m.o1b("px",d)),v.call(this,i)}}function v(t){var i,a;i=e.translateIf(t.querySelector(".field").getAttribute("text")),(a=e.whichYAxis(e.whichPanel(e.cy),e.cx,e.cy))&&"all"==a.dropzone&&(i+="--\x3e"+e.translateIf(a.name)),t.querySelector(".field").innerHTML=i}},e.ChartEngine.prototype.displayDrawOK=function(){var t,i,a,r,n=E;n.F3j(),(t=this.controls.drawOk)&&e.Drawing&&((i=e.Drawing[this.currentVectorParameters.vectorType])&&(i=new i),this.highlightedDataSetField&&i&&i.isAllowed(this,this.highlightedDataSetField)?("inline-b","lo","c","k",t.style.display="inline-block",a=this.cy+t.offsetHeight,r=this.cx-t.offsetWidth,n.Q7y(1),t.style.top=n.m92("px",a),n.J4P(1),t.style.left=n.m92("px",r),t.querySelector(".field").innerHTML=this.translateIf(this.highlightedDataSetField)):t.style.display="none")},e.ChartEngine.prototype.mouseWheel=function(t){var i,a,r,n,s,o,l,h,c,u=E;if(i="u",i+="n",i+="de",i+="fined",!this.runPrepend("mouseWheel",arguments)&&(t.preventDefault&&t.preventDefault(),""===this.openDialog&&(a=t.deltaX,r=t.deltaY,Math.abs(r)>Math.abs(a)?a=0:r=0,this.lastMouseWheelEvent=Date.now(),0!==Math.abs(a)||0!==Math.abs(r)))){if(t.shiftKey&&r&&(a=r,r=0),this.allowSideswipe&&0!==a)return s="horiz",s+="ontal",this.lastMove=s,o=a,this.grabbingScreen=!0,this.currentPanel||(this.currentPanel=this.chart.panel),this.grabStartX=e.ChartEngine.crosshairX,this.grabStartY=e.ChartEngine.crosshairY,this.grabStartScrollX=this.chart.scroll,this.grabStartScrollY=this.currentPanel.yAxis.scroll,this.grabStartMicropixels=this.micropixels,this.grabStartPanel=this.currentPanel,this.mouseWheelAcceleration&&(o*=n=Math.max(Math.pow(Math.abs(o),.3),1)),this.mousemoveinner(e.ChartEngine.crosshairX-o,e.ChartEngine.crosshairY),this.updateChartAccessories(),void(this.grabbingScreen=!1);if(this.lastMove="vertical",this.allowZoom&&(!this.activeDrawing||this.allowDrawingZoom)&&this.displayInitialized){if(!r)if("mousewheel"==e.wheelEvent){u.Q7y(8);var d=u.o1b(14,15);u.J4P(102);var p=u.m92(8,45,3,9,1199);if(r=d/p*t.wheelDelta,t.wheelDeltaX){u.J4P(101);var g=u.o1b(19,33,0,13);u.J4P(7);var m=u.m92(8,48);a=g/m*t.wheelDeltaX}}else r=t.detail;if(typeof t.deltaMode==i&&(t.deltaMode="MozMousePixelScroll"==t.type?0:1),l=-r,1==t.deltaMode&&(l*=33),h=null,c=null,this.mouseWheelAcceleration&&(n=Math.max(Math.pow(Math.abs(l),.3),1),h=Math.max(Number.MIN_VALUE,1-.1*n),u.J4P(10),c=u.m92(h,1)),this.zoomInitiatedByMouseWheel=!0,l>0?this.reverseMouseWheel?this.zoomOut(null,c):this.zoomIn(null,h):l<0&&(this.reverseMouseWheel?this.zoomIn(null,h):this.zoomOut(null,c)),!this.runAppend("mouseWheel",arguments))return!1}}},e.ChartEngine.handleContextMenu=function(t){var i,a;i=e.ChartEngine.registeredContainers;for(var r=0;r<i.length;r++)if(t.target.ownerDocument===i[r].ownerDocument&&(a=i[r].stx)&&a.anyHighlighted)return t.preventDefault&&t.preventDefault(),!1},e.ChartEngine.registerGlobalEvent("contextmenu",e.ChartEngine.handleContextMenu),e.ChartEngine.htmlControls={annotationSave:'<span class="stx-btn stx_annotation_save" style="display: none;"></span>',annotationCancel:'<span class="stx-btn stx_annotation_cancel" style="display: none; margin-left:10px;"></span>',mSticky:'\n\t\t<div class="stx_sticky">\n\t\t\t<span class="mStickyInterior"></span>\n\t\t\t<span class="mStickyRightClick">\n\t\t\t\t<span class="overlayText stx-btn" style="display:none">\n\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="overlayEdit stx-btn" style="display:none">\n\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="overlayTrashCan stx-btn" style="display:none">\n\t\t\t\t\t<span>&nbsp;</span>\n\t\t\t\t</span>\n\t\t\t\t<span class="mouseDeleteInstructions">\n\t\t\t\t\t<span>(</span>\n\t\t\t\t\t<span class="mouseDeleteText">right-click to delete</span>\n\t\t\t\t\t<span class="mouseManageText">right-click to manage</span>\n\t\t\t\t\t<span>)</span>\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t<span class="stickyLongPressText">(long-press to drag)</span>\n\t\t\t<span class="customInstructions">\n\t\t\t\t<span>(</span>\n\t\t\t\t<span class="dragAnchorText" type="anchorHandle">\n\t\t\t\t\tdrag to change anchor time\n\t\t\t\t</span>\n\t\t\t\t<span>)</span>\n\t\t\t</span>\n\t\t</div>\n\t',drawOk:'<div class="stx_draw_ok"><div class="icon"></div><div class="field"></div></div>',dragOk:'<div class="stx_drag_ok"><div class="icon"></div><div class="field"></div></div>',crossX:'<div class="stx_crosshair stx_crosshair_x" style="display: none;"></div>',crossY:'<div class="stx_crosshair stx_crosshair_y" style="display: none;"></div>',chartControls:'<div class="stx_chart_controls" style="display: none;"><div class="chartSize"><span class="stx-zoom-out"></span><span class="stx-zoom-in"></span></div></div>',home:'<div class="stx_jump_today" style="display:none"><span></span></div>',floatDate:'<div class="stx-float-date" style="visibility: hidden;"></div>',handleTemplate:'<div class="stx-ico-handle" style="display: none;"><span></span></div> ',iconsTemplate:'<div class="stx-panel-control"><div class="stx-panel-title"></div><div class="stx-panel-legend"></div><div class="stx-btn-panel"><span class="stx-ico-up"></span></div><div class="stx-btn-panel"><span class="stx-ico-focus"></span></div><div class="stx-btn-panel"><span class="stx-ico-down"></span></div><div class="stx-btn-panel"><span class="stx-ico-edit"></span></div><div class="stx-btn-panel"><span class="stx-ico-close"></span></div></div>',baselineHandle:'<div class="stx-baseline-handle" style="display: none;"></div>',notificationTray:'<div class="stx_notification_tray"><template><div><span class="icon"></span><span class="message"></span></div></template></div>'},e.ChartEngine.prototype.registerChartControl=function(t,i,a){var r,n,s,o=E;if(".st","x-zoo","m","-in",(r=this.controls)&&r.chartControls&&!r.chartControls.querySelector("."+t))return n=null,o.F3j(),(s=r.chartControls.querySelector(".stx-zoom-in"))?("<div clas",'s="stx-tooltip" ar','ia-hidden="tr','ue">',n=document.createElement("span"),o.J4P(15),n.innerHTML=o.o1b('<div class="stx-tooltip" aria-hidden="true">',"</div>",i),o.Q7y(1),n.className=o.m92(t,"stx-chart-control-button "),s.parentNode.appendChild(n),a&&e.safeClickTouch(n,a),e.touchDevice||this.makeModal(n),n):void 0},e.ChartEngine.prototype.zoomOut=function(t,e){var i,a,r,n;if(!this.runPrepend("zoomOut",arguments))for(var s in this.preferences.zoomOutSpeed?e=this.preferences.zoomOutSpeed:e||(E.J4P(10),e=E.o1b(.7,1)),t&&t.preventDefault&&t.preventDefault(),this.cancelTouchSingleClick=!0,i=this,this.charts)r=(a=this.charts[s]).width*e/this.layout.candleWidth,!1===a.allowScrollFuture&&!1===a.allowScrollPast&&r>a.dataSet.length&&(r=a.dataSet.length),n=this.chart.width/r,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(o(a),this.layout.candleWidth,n);function o(t){return function(e){var a;if(E.F3j(),i.zoomSet(e,t),i.animations.zoom.hasCompleted){if(a="z",a+="oomOut",i.runAppend(a,arguments))return;i.changeOccurred("layout"),i.continuousZoom&&i.continuousZoom.execute(!0)}}}},e.ChartEngine.prototype.zoomIn=function(t,e){var i,a,r,n,s;function o(t){return E.X8U(),function(e){var i;if(E.X8U(),a.zoomSet(e,t),a.animations.zoom.hasCompleted){if(i="lay",i+="out",a.runAppend("zoomIn",arguments))return;a.changeOccurred(i),a.continuousZoom&&a.continuousZoom.execute()}}}if(i="z",i+="oom",i+="I",i+="n",!this.runPrepend(i,arguments))for(var l in this.preferences.zoomInSpeed?e=this.preferences.zoomInSpeed:e||(e=.7),t&&t.preventDefault&&t.preventDefault(),this.cancelTouchSingleClick=!0,E.X8U(),a=this,this.charts){if(n=(r=this.charts[l]).width*e/this.layout.candleWidth,r.maxTicks-n<1){E.Q7y(8);var h=E.o1b(8,7);n=r.maxTicks-h}n<this.minimumZoomTicks&&(n=this.minimumZoomTicks),s=this.chart.width/n,this.layout.setSpan=null,this.layout.range=null,this.animations.zoom.run(o(r),this.layout.candleWidth,s)}},e.ChartEngine.prototype.createCrosshairs=function(){var t,e;this.runPrepend("createCrosshairs",arguments)||this.manageTouchAndMouse&&!this.mainSeriesRenderer.nonInteractive&&(t=this.controls.crossX,e=this.controls.crossY,t&&(t.onmousedown||(t.onmousedown=function(t){return t.preventDefault&&t.preventDefault(),!1})),e&&(e.onmousedown||(e.onmousedown=function(t){return t.preventDefault&&t.preventDefault(),!1})),this.runAppend("createCrosshairs",arguments))},i=!1,e.ChartEngine.prototype.mousemoveinner=e.ChartEngine.prototype.mousemoveinner||function(t,e){i||console.error("interaction feature requires activating movement feature."),i=!0}},d=t=>{var e,i=E;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i.X8U(),e.Marker||(e.ChartEngine.helpersToRegister.push((function(t){i.F3j(),t.markerHelper={chartMap:{},classMap:{},domMarkers:[],visibleCanvasMarkers:[],highlighted:[],placementMap:{}}})),e.ChartEngine.prototype.addToHolder=function(t){var i,a,r,n;(i=this.panels[t.params.panelName])&&(a=t.params,r=t.node,(n=t.stxNodeCreator)&&n.prepareForHolder&&(r=n.prepareForHolder(t)),a.chartContainer?this.container.appendChild(t.node):a.includeAxis?i.holder.appendChild(t.node):i.subholder.appendChild(r),t.chart=i.chart,n&&n.addToHolder&&n.addToHolder(t),n&&n.expand&&e.Marker.initializeScrollBehavior(n))},e.ChartEngine.prototype.getMarkerArray=function(t,e){var a,r;for(var n in i.X8U(),a=[],this.markers)for(var s=0;s<this.markers[n].length;s++)"a","l","l",r=this.markers[n][s],"panelName"==t?r.params.panelName==e&&a.push(r):"label"==t?n==e&&a.push(r):"all"==t&&a.push(r);return a},e.ChartEngine.prototype.removeFromHolder=function(t){var e,a,r,n,s,o;if((e=this.panels[t.params.panelName])&&(t.node.parentNode==e.holder?e.holder.removeChild(t.node):t.node.parentNode==e.subholder?e.subholder.removeChild(t.node):t.node.parentNode==this.container&&this.container.removeChild(t.node)),a=this.markers[t.params.label],i.X8U(),a){for(r=0;r<a.length;r++)if(a[r]===t){a.splice(r,1);break}if(n=this.markerHelper.chartMap[t.chart.name])for(r=0;r<n.markers.length;r++)if(n.markers[r]===t){n.markers.splice(r,1);break}if((s=this.markerHelper.classMap[t.className])&&(o=s[t.params.panelName]))for(r=0;r<o.length;r++)if(o[r]===t){o.splice(r,1);break}}},e.ChartEngine.prototype.moveMarkers=function(t,e){var a,r;i.X8U(),a=this.getMarkerArray("panelName",t);for(var n=0;n<a.length;n++)a[n].params.panelName=e;for(var s in this.markerHelper.classMap)(r=this.markerHelper.classMap[s][t])&&(this.markerHelper.classMap[s][e]=r,delete this.markerHelper.classMap[s][t])},e.ChartEngine.prototype.establishMarkerTicks=function(){var t,e;for(var a in i.F3j(),t=this.markerHelper.chartMap){e=t[a];for(var r=0;r<e.markers.length;r++)this.setMarkerTick(e.markers[r])}},e.ChartEngine.prototype.futureTickIfDisplayed=function(t){var e,a,r,n,s,o,l,h,c;if(!((e=t.chart).dataSet.length<1)){a=e.xaxis[e.xaxis.length-1].DT,i.Q7y(7);var u=i.o1b(108e4,114e4);if(a=new Date(a.getTime()-this.timeZoneOffset*u),!(t.params.x>a)){r=e.maxTicks-e.dataSegment.length,n=e.dataSet.length+r,l=new Date(+e.dataSet[e.dataSet.length-1].DT),h=this.standardMarketIterator(l,null,e),c=t.params.x.getTime();for(var d=e.dataSet.length;d<n;d++){if(s=l.getTime(),(o=(l=h.next()).getTime())==c)return void(t.tick=d);if(o>c&&s<c)return i.J4P(7),void(t.tick=Math.max(i.o1b(1,d),0))}}}},e.ChartEngine.prototype.setMarkerTick=function(t){var e,a,r,n,s,o;if(i.X8U(),"dat","e","ti","ck",e=t.chart,"master"==t.params.xPositioner&&t.params.x){-976709480,i.Q7y(42),a=-i.o1b(32,"1225007306"),r=2;for(var l=1;-976709480!==i.o0j(l.toString(),l.toString().length,35147);l++)t.tick=Math.floor(t.params.x+this.layout.periodicity),r+=2;i.c0F(r.toString(),r.toString().length,10802)!==a&&(t.tick=Math.floor(t.params.x+this.layout.periodicity)),t.tick=Math.floor(t.params.x/this.layout.periodicity)}else if("tick"==t.params.xPositioner&&t.params.x)t.tick=t.params.x;else if("date"==t.params.xPositioner&&t.params.x){o=t.params.x.getTime();for(var h=0;h<e.dataSet.length;h++){if(n=s=e.dataSet[h].DT.getTime(),h>0&&(n=e.dataSet[h-1].DT.getTime()),s==o)return void(t.tick=h);if(s>o&&n<o)return i.Q7y(7),void(t.tick=Math.max(i.o1b(1,h),0));if(o<s)return void(t.tick=null)}if(e.dataSet.length<1)return;new Date(+e.dataSet[h-1].DT).getTime()<o&&(t.params.future=!0),t.tick=null}},e.ChartEngine.prototype.positionMarkers=function(){var t,e,a,r,n,s,o;if(t=this,e=this.chart,t.markerHelper&&(this.markerHelper.placementMap={},this.markerDelay||0===this.markerDelay?this.markerTimeout||(this.markerTimeout=setTimeout(h,this.markerDelay)):h(),a=this.getFirstLastDataRecord(e.dataSegment,"tick"),r=this.getFirstLastDataRecord(e.dataSegment,"tick",!0),i.F3j(),a&&r)){n=this.getMarkerArray("all"),this.markerHelper.visibleCanvasMarkers=[];for(var l=0;l<n.length;l++)o=(s=n[l]).stxNodeCreator,a.tick<=s.tick&&s.tick<=r.tick?(this.markerHelper.visibleCanvasMarkers.push(s),o&&o.drawMarker&&o.drawMarker(s)):(s.highlight=!1,s.params.box=null,s.attached&&o&&o.expand&&("hi","dd","e","n",o.expand.style.visibility="hidden"))}function h(){var e,i,a,r,n;if(e="p",e+="ositionMarkers",!t.runPrepend(e,arguments)){for(var s in t.markerTimeout=null,t.markerHelper.classMap)for(var o in t.markerHelper.classMap[s])i=t.markerHelper.classMap[s][o],a=t.panels[o],i.length&&((r={stx:t,arr:i,panel:a}).firstTick=a.chart.dataSet.length-a.chart.scroll,r.lastTick=r.firstTick+a.chart.dataSegment.length,(n=i[0].constructor.placementFunction)?n(r):t.defaultMarkerPlacement(r));t.runAppend("positionMarkers",arguments)}}},e.Marker=e.Marker||function(t){var i,a,r,n,s;if("gen","eric",(i=this instanceof e.Marker?this:Object.create(e.Marker.prototype)).params={xPositioner:"date",yPositioner:"value",panelName:"chart",permanent:!1,label:"generic",includeAxis:!1},e.extend(i.params,t),i.params.node||(i.params.node=document.createElement("DIV")),a=i.params.stx)return i.className||(i.className="CIQ.Marker"),e.derivedFrom(i.params.node,e.Marker.NodeCreator)?(i.stxNodeCreator=i.params.node,i.node=i.stxNodeCreator.node):i.node=i.params.node,r=i.params.label,a.markers[r]||(a.markers[r]=[]),a.markers[r].push(i),n=a.panels[i.params.panelName],i.chart=n.chart,a.markerHelper.chartMap[i.chart.name]||(a.markerHelper.chartMap[i.chart.name]={markers:[]}),a.markerHelper.chartMap[i.chart.name].markers.push(i),(s=a.markerHelper.classMap[i.className])||(s=a.markerHelper.classMap[i.className]={}),s[i.params.panelName]||(s[i.params.panelName]=[]),s[i.params.panelName].push(i),i.stxNodeCreator&&i.stxNodeCreator.deferAttach||a.addToHolder(i),a.setMarkerTick(i),i.stxNodeCreator&&i.stxNodeCreator.drawMarker&&i.stxNodeCreator.drawMarker(i),i;console.log("Marker created without specifying stx")},e.Marker.prototype.remove=function(){this.params.stx.removeFromHolder(this),i.X8U(),this.stxNodeCreator&&this.stxNodeCreator.remove&&this.stxNodeCreator.remove(this)},e.Marker.prototype.click=function(t){var e;"number"==typeof arguments[0]&&(t={cx:arguments[0],cy:arguments[1],panel:arguments[3]});var{cx:i,cy:a,panel:r}=t;this.params.stx&&(e=this.params.node).click&&e.click(i,a,this,r)},e.Marker.prototype.doubleClick=function({cx:t,cy:e,panel:a}){return i.X8U(),!1},e.Marker.prototype.render=function(){var t,e;i.F3j(),t=[this],e={stx:this.params.stx,arr:t,panel:this.params.stx.panels[this.params.panelName],showClass:this.showClass},this.constructor.placementFunction(e)},e.Marker.removeByLabel=function(t,e){var a,r;i.F3j(),a=t.getMarkerArray("label",e);for(var n=0;n<a.length;n++)r=a[n],t.removeFromHolder(r),r.stxNodeCreator&&r.stxNodeCreator.remove&&r.stxNodeCreator.remove(r);t.draw()},e.Marker.positionContentVerticalAndHorizontal=function(t,a){var r,n,s,o,l,h,c,u,d,p,g;if(r=t.querySelector(".stx-marker-expand"),a||r&&r.isConnected&&e.trulyVisible(r)){n=r.offsetHeight,(s=r.style).left=s.right="",s.bottom=s.top="",l=(o=getComputedStyle(r)).left,h=o.bottom,i.Q7y(17),i.F3j();var m=i.o1b(16,11,5);c=t.offsetLeft+parseInt(l,m),u=parseInt(h,10),d=t.offsetTop-(u+n-t.offsetHeight),p=t.parentNode.offsetWidth,g=t.parentNode.offsetHeight,c+r.offsetWidth>p&&(s.right=l,s.left="auto"),t.offsetTop<=g?d>g-n&&(s.top=g-t.offsetTop-n+"px",s.bottom="auto"):(i.Q7y(1),s.top=i.o1b("px",g)),t.offsetTop+t.offsetHeight>=0?d<0&&("p","x",s.top=-t.offsetTop+"px",s.bottom="auto"):s.bottom="0px"}},e.Marker.initializeScrollBehavior=function(t){var{expand:a}=t;if(a&&!a.scrollInitialized){a.querySelector(".marker_content")||(a.innerHTML='<div class="marker_content">'+a.innerHTML+"</div>"),a.addEventListener(e.wheelEvent,(t=>(i.X8U(),t.stopPropagation())),{passive:!1}),a.addEventListener("touchmove",(t=>(i.F3j(),t.stopPropagation())),{passive:!1});var{scrollbarStyling:r}=e.UI||{};r?r.refresh(a):a.style.overflowY="scroll",a.scrollInitialized=!0}},e.ChartEngine.prototype.getBarBounds=function(t,e){var a,r,n,s,o,l;this.layout.chartType,a=this.layout.aggregationType,n=2;for(var h=1;-756984738!==i.o0j(h.toString(),h.toString().length,43610);h++)r=e||"pandf"!=a?{high:t.High,low:t.Low}:{high:Math.max(t.pfOpen,t.pfClose),low:Math.min(t.pfOpen,t.pfClose)},t.markerHigh&&(r.high=t.markerHigh),t.markerLow&&(r.low=t.markerLow),n+=2;return-1563932488!==i.c0F(n.toString(),n.toString().length,18495)&&(r=~e||""===a?{high:Math.max(t.pfOpen,t.pfClose),low:Math.min(t.pfOpen,t.pfClose)}:{high:t.High,low:t.Low},t.markerHigh&&(r.high=t.markerHigh),t.markerLow&&(r.low=t.markerLow)),void 0===t.Open&&(s=t.Close),void 0===t.High&&(o=Math.max(t.Open||s,t.Close)),void 0===t.Low&&(l=Math.min(t.Open||s,t.Close)),r.high||0===r.high||(r.high=o),r.low||0===r.low||(r.low=l),r},e.ChartEngine.prototype.defaultMarkerPlacement=function(t){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_;r=(a=t.panel).chart,s=(n=t.stx).chart.highLowBars,(o=r.defaultPlotField)&&!s||(o="Close"),i.F3j();for(var L=0;L<t.arr.length;L++)if("c","and","le",h=(l=t.arr[L]).params,!l.params.box){if(c=l.node,l.clientWidth||(l.clientWidth=c.clientWidth),l.clientHeight||(l.clientHeight=c.clientHeight),u=null,d=h.xPositioner,p=h.yPositioner,g=h.yAxis||a.yAxis,m=h.field,f=l.tick,y=r.dataSet,v=l.clientWidth,"none"!=d){if("bar"==d&&h.x){h.x<r.xaxis.length&&(b=r.xaxis[h.x])&&(u=b.data),i.Q7y(7);var E=i.m92(7,8);c.style.left=Math.round(n.pixelFromBar(h.x,r)-v/2)+E+"px"}else{if(!f&&0!==f){if(!(h.future&&r.scroll<r.maxTicks)){"-1","0","00","px",c.style.left="-1000px";continue}if(n.futureTickIfDisplayed(l),!(f=l.tick)&&0!==f){c.style.left="-1000px";continue}}if(f<y.length&&(u=y[f]),l.leftpx=Math.round(n.pixelFromTick(f,r)-r.left-v/2),l.rightEdge=l.leftpx+v,c.style.left=l.leftpx+"px",f<t.firstTick&&l.rightEdge<r.left-50)continue}if(!u){i.Q7y(103);var I=i.o1b(31,0,5,19,8);u=y[y.length-I]}}else if(p.indexOf("candle")>-1&&(x=getComputedStyle(c).left)&&(S=n.barFromPixel(parseInt(x,10),r))>=0&&!(u=r.xaxis[S].data)){i.J4P(66);var N=i.m92(1,0,8,7);u=y[y.length-N]}if(e.efficientDOMUpdate(c.style,"top","auto"),C=h.y,A=l.clientHeight,k=0,"none"!=p){"b","otto","m","o","n_candle","und","er","_candle",i.J4P(104);var O=i.o1b(5,4,2,0,2);w=p.indexOf("_lane")>O,M=n.markerHelper.placementMap,i.Q7y(29);i.o1b(11,48632,42559,5);i.Q7y(3);var H=i.m92(71542,80469,14);i.J4P(102);var R=i.o1b(7,658,6,14,54674);i.J4P(101);var z=i.o1b(6,8,4478,13);T=p+(H>=R?393.07!=z&&"|":543.44)+a.name,w&&void 0===M[T]&&(M[T]=2),i.J4P(69);var j=i.m92(8694,2,8694,13);if(i.J4P(56),F=T+(j!=i.m92(69,20,1,8,694)&&"-")+(w?l.params.label:c.style.left),P=h.chartContainer?n.height:a.yAxis.bottom,_=0,void 0===M[F]&&(M[F]=w?M[T]:0,i.J4P(1),M[T]+=i.m92(2,A)),k=M[F],w||(M[F]+=A),u&&m&&(u=u[m]),"number"==typeof u&&((u={Close:u})[o]=u.Close,s=!1),"value"!=p||!C&&0!==C)if("below_candle"!=p&&"under_candle"!=p||!u)if("on_candle"==p&&u){if("p","x",D=u[o],s){D=n.getBarBounds(u,!!m),i.J4P(105);var U=i.m92(1,36,33,16,19);D=(D.high+D.low)/U}i.J4P(7);var B=i.m92(16,18);_=Math.round(P-n.pixelFromPrice(D,a,g)-A/B-k)+"px"}else"top"==p||"top_lane"==p?_=Math.round(P-A-k-a.top)+"px":"bottom"==p||"bottom_lane"==p?_=Math.round(k)+"px":u&&("h","i","g","h",D=u[o],s&&(D=n.getBarBounds(u,!!m)[g.flipped?"low":"high"]),_=Math.round(P-n.pixelFromPrice(D,a,g)+k)+"px");else D=u[o],s&&(D=n.getBarBounds(u,!!m)[g.flipped?"high":"low"]),_=Math.round(P-n.pixelFromPrice(D,a,g)-A-k)+"px";else"p","x",_=Math.round(P-n.pixelFromPrice(C,a,g)-A/2)+"px";c.style.bottom!=_&&(c.style.bottom=_)}e.Marker.positionContentVerticalAndHorizontal(c)}},e.Marker.NodeCreator=function(){},e.Marker.NodeCreator.toNode=function(){return this.node},e.Marker.Simple=function(t){var i,a,r,n;(i=this.node=document.createElement("div")).className="stx-marker",i.classList.add(t.type),t.category&&i.classList.add(t.category),a=e.newChild(i,"div","stx-visual"),e.newChild(i,"div","stx-stem"),"callout"==t.type?("d","i","v",n=e.newChild(a,"div","stx-marker-content"),e.newChild(n,"h4",null,t.headline),r=e.newChild(n,"div","stx-marker-expand"),e.newChild(r,"p",null,t.story)):("stx","-marker-expand",r=e.newChild(i,"div","stx-marker-expand"),e.newChild(r,"h4",null,t.headline),e.newChild(r,"p",null,t.story),e.safeClickTouch(r,(function(t){i.classList.toggle("highlight")}))),e.safeClickTouch(a,(function(t){i.classList.toggle("highlight"),e.Marker.positionContentVerticalAndHorizontal(i,!0)})),this.nodeType="Simple",this.expand=r},e.inheritsFrom(e.Marker.Simple,e.Marker.NodeCreator,!1))},p=t=>{var e,i,a,r,n,s,o,l=E;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,r=24*(a=36e5),n=e.Market,e.Market=function(t){this.market_def=!1,this.rules=!1,this.normalHours=[],this.extraHours=[],this.class_name="Market",i.Date?this.tz_lib=i.Date:this.tz_lib=Date,this.market_tz="",this.hour_aligned=!1,this.convertOnDaily=!1,this.enabled_by_default=!1,void 0!==t&&t&&!e.isEmpty(t)?("undefine","d","un","d","efin","ed",t.market_definition&&(t=t.market_definition),t.rules&&(this.rules=t.rules),t.market_tz&&(this.market_tz=t.market_tz),t.convertOnDaily&&(this.convertOnDaily=t.convertOnDaily),t.hour_aligned,this.hour_aligned=t.hour_aligned,void 0!==t.beginningDayOfWeek&&(this.beginningDayOfWeek=t.beginningDayOfWeek),void 0!==t.minimum_session_length&&(this.minimumSessionLength=t.minimum_session_length),void 0!==t.enabled_by_default&&t.enabled_by_default instanceof Array&&(this.enabled_by_default=t.enabled_by_default),this.market_def=t,void 0===this.market_def.name&&("no ","market name specified",this.market_def.name="no market name specified"),e.Market._createTimeSegments(this),this.getSessionNames()):this.hour_aligned=!0},e.Market.Symbology=function(){},e.Market.Symbology.isForeignSymbol=function(t){return!1},e.Market.Symbology.isFuturesSymbol=function(t){return!1},e.Market.Symbology.isRateSymbol=function(t){return!1},e.Market.Symbology.isForexSymbol=function(t){return l.X8U(),!1},e.Market.Symbology.isForexMetal=function(t,e){return!1},e.Market.Symbology.isForexCrypto=function(t){return l.F3j(),!1},e.Market.Symbology.isForexFuturesSymbol=function(t){return l.X8U(),!!e.Market.Symbology.isForexSymbol(t)||!!e.Market.Symbology.isFuturesSymbol(t)},e.Market.Symbology.factory=function(t){return l.F3j(),null},e.Market.Symbology.encodeTermStructureInstrumentSymbol=function(t,e){l.F3j(),console.warn("You are trying to call `CIQ.Market.Symbology.encodeTermStructureInstrumentSymbol` but have not implemented it.")},n&&e.extend(e.Market,n),e.Market.prototype.sessions=null,e.Market.prototype.beginningDayOfWeek=0,e.Market.prototype.minimumSessionLength=30,e.Market.prototype.tradingDays=function(){var t;if("_tradingDays"in this)return this._tradingDays;if(t=[],this.rules)for(var e of this.rules)e.dayofweek>=0&&t.push(e.dayofweek);else t=[0,1,2,3,4,5,6];return this._tradingDays=[...new Set(t)],this._tradingDays.sort(),this._tradingDays},e.Market.prototype.getSessionNames=function(){var t,e;return this.rules?this.sessions||(t=[],e=[],this.rules.map((function(i){i.name&&-1===t.indexOf(i.name)&&(t.push(i.name),e.push({name:i.name,enabled:!!i.enabled&&i.enabled}))})),this.sessions=e):this.sessions=[],l.X8U(),this.sessions.slice()},e.Market.prototype._find_next_segment=function(t,e){var i,a,r,n;return l.F3j(),this.market_def&&this.rules?(i=new Date(+t),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),this._wasOpenIntraDay(i)&&(r=this.zseg_match.close_parts.hours,n=this.zseg_match.close_parts.minutes,i.setHours(r),i.setMinutes(n),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})),a.next()):null},e.Market.prototype._find_prev_segment=function(t,e){var i,a,r,n,s;return this.market_def&&this.rules?(i=new Date(+t),a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz}),null===(r=this._wasOpenIntraDay(i))?(i=new Date(i-6e4),r=this._wasOpenIntraDay(i)):(e&&i.getHours()===this.zseg_match.open_parts.hours&&i.getMinutes()===this.zseg_match.open_parts.minutes||!e&&i.getHours()===this.zseg_match.close_parts.hours&&i.getMinutes()===this.zseg_match.close_parts.minutes)&&(i=a.previous()),r?(n=this.zseg_match.open_parts.hours,s=this.zseg_match.open_parts.minutes,i.setHours(n),i.setMinutes(s),i=(a=this.newIterator({begin:i,interval:1,inZone:this.market_tz,outZone:this.market_tz})).previous(),this.zseg_match.close_parts.hours===n&&this.zseg_match.close_parts.minutes===s?e?a.next():i:this.zseg_match.adjacent_child?i:e?a.next():i):a.previous()):null},e.Market.prototype.disableSession=function(t,e){var i;if(l.X8U(),i=!1,void 0!==e&&e&&(i=!0),t){for(var a=0;a<this.normalHours.length;a++)delete this.normalHours[a]._refid,this.normalHours[a].name===t&&(this.normalHours[a].enabled=i);for(a=0;a<this.extraHours.length;a++)delete this.extraHours[a]._refid,this.extraHours[a].name===t&&(this.extraHours[a].enabled=i)}this._zseg_matches&&this._zseg_matches.clear()},e.Market.prototype.enableSession=function(t){l.X8U(),this.disableSession(t,"enable_instead")},e.Market.prototype.enableAllAvailableSessions=function(){var t;t=this.getSessionNames();for(var e=0;e<t.length;e++)this.enableSession(t[e].name)},e.Market.prototype.getClose=function(t,e,i,a){var r,n;if(!this.market_def)return null;if(!this.rules)return null;if(r=t,l.F3j(),t||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==e){if(this._wasOpenIntraDay(r)&&this.zseg_match.name===e)return r.setHours(this.zseg_match.close_parts.hours,this.zseg_match.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.child_;)n=n.child_;for(;!n.enabled;)n=n.parent_;return r.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},e.Market.prototype.getNextClose=function(t,e,i){var a,r,n;if(!this.market_def)return null;if(l.X8U(),!this.rules)return null;for(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),this._wasOpenIntraDay(a)||(a=this.newIterator({begin:a,interval:1,inZone:this.market_tz,outZone:this.market_tz}).next()),r=a.getDate(),n=this.zseg_match;n.adjacent_child;)n=n.adjacent_child,r+=1;return a.setDate(r),a.setHours(n.close_parts.hours,n.close_parts.minutes,0,0),a=this._convertFromMarketTZ(a,i)},e.Market.prototype.getNextOpen=function(t,e,i){var a;return this.market_def&&this.rules?(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),a=this._find_next_segment(a),this.zseg_match.adjacent_parent?(a=this.getNextOpen(a,this.market_tz,this.market_tz),a=this._convertFromMarketTZ(a,i)):(l.F3j(),a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},e.Market.prototype.getOpen=function(t,e,i,a){var r,n;if("undef","i","ne","d",!this.market_def)return null;if(!this.rules)return null;if(r=t,t||(r=new Date,i=null),r=this._convertToMarketTZ(r,i),void 0!==e){if(this._wasOpenIntraDay(r)&&this.zseg_match.name==e)return r.setHours(this.zseg_match.open_parts.hours,this.zseg_match.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}else if(this._wasOpenDaily(r)){for(n=this.zseg_match;n.parent_;)n=n.parent_;for(;!n.enabled;)n=n.child_;return r.setHours(n.open_parts.hours,n.open_parts.minutes,0,0),r=this._convertFromMarketTZ(r,a)}return null},e.Market.prototype.getNormalOpen=function(){var{market_def:t,rules:e}=this;return l.X8U(),t&&e?t.normal_daily_open?t.normal_daily_open:"FOREX"===t.name?"17:00":e.find((({name:t})=>!t||""===t)).open:"00:00"},e.Market.prototype.getNormalClose=function(){var{market_def:t,rules:e}=this;return t&&e?t.normal_daily_close?t.normal_daily_close:"FOREX"===t.name?"17:00":e.filter((({dayofweek:t,name:e})=>t&&(!e||""===e))).pop().close:"24:00"},e.Market.prototype.getPreviousClose=function(t,e,i){var a;return this.market_def&&this.rules?(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),a=this._find_prev_segment(a,!1),this.zseg_match.adjacent_child?this.getPreviousClose(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.close_parts.hours),a.setMinutes(this.zseg_match.close_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},e.Market.prototype.getPreviousOpen=function(t,e,i){var a;return this.market_def&&this.rules?(a=t,t||(a=new Date,e=null),a=this._convertToMarketTZ(a,e),a=this._find_prev_segment(a,!0),this.zseg_match.adjacent_parent?this.getPreviousOpen(a,this.market_tz,this.market_tz):(a.setHours(this.zseg_match.open_parts.hours),a.setMinutes(this.zseg_match.open_parts.minutes),a=this._convertFromMarketTZ(a,i))):null},e.Market.prototype.getSession=function(t,e){return t=this._convertToMarketTZ(t,e),this._wasOpenIntraDay(t)&&this.zseg_match?this.zseg_match.name:null},e.Market.prototype.marketZoneNow=function(){return l.F3j(),this._convertToMarketTZ(new Date)},e.Market.prototype.isHourAligned=function(){return this.hour_aligned},e.Market.prototype.isOpen=function(){var t;return t=new Date,this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenIntraDay(t)},e.Market.prototype.isMarketDay=function(){var t;return t=new Date,this.market_tz&&(t=new this.tz_lib(t.getTime(),this.market_tz)),this._wasOpenDaily(t)},e.Market.prototype.isMarketDate=function(t){return l.F3j(),this._wasOpenDaily(t)},e.Market.prototype.isFirstMarketDayOfMonth=function(t){var e,i;if(!this.isMarketDate(t))return!1;e=new Date(+t),i=t.getDate();for(var a=1;a<i;a++)if(e.setDate(a),this.isMarketDate(e))return!1;return!0},e.Market.prototype.isFirstMarketDayOfWeek=function(t){var e,i,a;if(!this.isMarketDate(t))return!1;for(e=this.tradingDays(),i=Math.max(this.beginningDayOfWeek,e[0])||0,a=new Date(+t),l.X8U();a.getDay()!==i;)if(a.setDate(a.getDate()-1),this.isMarketDate(a))return!1;return!0},e.Market.prototype.newIterator=function(t){var i,a;return"secon","d","ti","ck",l.X8U(),i=!1,t.periodicity?i=t.periodicity:t.multiple&&(i=t.multiple),(a=t.interval)||(a="minute"),"hour"==a&&(a=60),i||(i=1),t.begin||(t.begin=new Date,t.inZone=null),a==parseInt(a,10)&&(a=parseInt(a,10),t.periodicity<1/60?(i=i*a*6e4,a="millisecond"):t.periodicity<1?(i=i*a*60,a="second"):(i*=a,a="minute")),t.timeUnit&&("t","i","c","k","millisecond"===t.timeUnit||"second"===t.timeUnit?a=t.timeUnit:"tick"===t.timeUnit&&(a="second")),"tick"==a&&(a="second"),t.interval=a,t.multiple=i,t.market=this,new e.Market.Iterator(t)},e.Market.prototype._wasOpenDaily=function(t){return this._was_open(t,!1)},e.Market.prototype._wasOpenIntraDay=function(t){return l.F3j(),this._was_open(t,!0)},e.Market.prototype._was_open=function(t,e){var i,a,r,n,s,o,h,c,u,d,p,g,m,f,y;if("undefin","ed",void 0===e&&(e=!0),i=this.zseg_match,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null,!this.market_def||!this.rules)return this.zclose_hour=24,!0;if(this.tradingDays().indexOf(t.getDay())<0)return null;if(this._zseg_matches||(this._zseg_matches=new Map),null===(a=this._zseg_matches.get(+t*(e?1:-1))))return null;if(a)return a=this._zseg_matches.get(a),Object.assign(this,a),this.zseg_match;for(r=!1,n=!1,s=t.getFullYear(),o=t.getMonth()+1,h=t.getDay(),c=t.getDate(),u=t.getHours(),d=t.getMinutes(),l.X8U(),m=60*u*60+60*d+t.getSeconds(),f=0;f<this.normalHours.length;f++)if((p=this.normalHours[f]).enabled&&((r=p.dayofweek===h)&&e&&(r=m>=p.open&&m<p.close),r)){if(!e&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(p===i||p.adjacent_parent||p.adjacent_child||(this.shouldResetToBeginningOfSegment=!0),g=f+1,this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=m===p.open,this.zseg_match=p,e)break}for(f=0;f<this.extraHours.length;f++)if((p=this.extraHours[f]).enabled&&("*"===p.year||s===p.year)&&o===p.month&&c===p.day&&(!(n=!e&&p.open||m>=p.open&&m<p.close)&&this.zseg_match&&(r=!1,this.zopen_hour=0,this.zopen_minute=0,this.zclose_hour=0,this.zclose_minute=0,this.zmatch_open=!1,this.zseg_match=null),n)){if(!e&&this.zseg_match&&(p.open_parts.hours>this.zopen_hour||p.open_parts.hours==this.zopen_hour&&p.open_parts.minutes>this.zopen_minute))continue;if(g=-(f+1),this.zopen_hour=p.open_parts.hours,this.zopen_minute=p.open_parts.minutes,this.zclose_hour=p.close_parts.hours,this.zclose_minute=p.close_parts.minutes,this.zmatch_open=m===p.open,this.zseg_match=p,e)break}return y=null,this.zseg_match&&(this.zseg_match._refid||(this.zseg_match._refid=g,this._zseg_matches.set(this.zseg_match._refid,{zopen_hour:this.zopen_hour,zopen_minute:this.zopen_minute,zclose_hour:this.zclose_hour,zclose_minute:this.zclose_minute,zmatch_open:this.zmatch_open,zseg_match:this.zseg_match})),y=this.zseg_match._refid),this._zseg_matches.set(+t*(e?1:-1),y),this.zseg_match},e.Market.prototype._wasClosed=function(t){return l.F3j(),!this._was_open(t,!0)},e.Market.prototype._wasOpen=function(t){return this._was_open(t,!0)},e.Market.prototype._tzDifferenceMillis=function(t,e,i){var a;return 0,a=t,60*(t.getTimezoneOffset()-a.getTimezoneOffset())*1e3},e.Market._createTimeSegments=function(t){var e,i,a,r,n;e=function(t,e){if(24===t.close_parts.hours&&0===e.open_parts.hours&&0===e.open_parts.minutes){if(i.dayofweek===r.dayofweek-1)return!0;if(6===i.dayofweek&&0===r.dayofweek)return!0}return!1};for(var o=0;o<t.rules.length;o++){void 0===(a=JSON.parse(JSON.stringify(t.rules[o]))).open&&void 0===a.close&&(a.open="00:00",a.close="00:00"),a.hasOwnProperty("name")||(a.name="");try{if(void 0!==a.dayofweek?(a.year="*",r=s._createDayOfWeekSegment(t,a),i&&(i.dayofweek===r.dayofweek?(i.child_=r,r.parent_=i):e(i,r)&&(i.adjacent_child=r,r.adjacent_parent=i)),i=r):void 0!==a.date?(a.isDayOfWeek=!1,a.dayofweek=-1,r=s._createDateTimeSegment(t,a)):console.log("Error, unknown rule type "+a),t.enabled_by_default)for(var l=0;l<t.enabled_by_default.length;l++)if(n=t.enabled_by_default[l],r.name===n){r.enabled=!0;break}}catch(t){console.log("Error, creating market rules "+t)}}},e.Market._timeSegment={},(s=e.Market._timeSegment).re_wild_card_iso=/^(\*)-(\d\d)-(\d\d)$/,s.re_regular_iso=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,s.re_split_hours_minutes=/^(\d\d):(\d\d)$/,s.re_split_hour_minutes=/^(\d):(\d\d)$/,s._hashCode=function(t){var e,i,a;if(l.X8U(),e=0,0===t.length)return e;for(i=0,a=t.length;i<a;i++)e=(e<<5)-e+t.charCodeAt(i),e|=0;return e},s._splitHoursMinutes=function(t){var e,i;return i={hours:NaN,minutes:NaN},null===(e=s.re_split_hour_minutes.exec(t))&&null===(e=s.re_split_hours_minutes.exec(t))||(i.hours=parseInt(e[1],10),i.minutes=parseInt(e[2],10),l.X8U()),i},s._createDayOfWeekSegment=function(t,e){var i;return""===(i={name:e.name,isDayOfWeek:!0,dayofweek:e.dayofweek,date_str:"*",open_parts:s._splitHoursMinutes(e.open),close_parts:s._splitHoursMinutes(e.close),open:s._secSinceMidnight(t,e.open,!0),close:s._secSinceMidnight(t,e.close,!1),child_:!1,parent_:!1,adjacent_child:!1,adjacent_parent:!1,enabled:!1}).name&&(i.enabled=!0),i.hash_code=this._hashCode((i.open+i.close).toString()),t.normalHours.push(i),i},s._createDateTimeSegment=function(t,e){var i,a,r;if(null===(i=this.re_regular_iso.exec(e.date))){if(null===(i=this.re_wild_card_iso.exec(e.date)))return"W","arning: invalid date f","ormat on rule -> ",void console.log("Warning: invalid date format on rule -> "+e.date);a="*"}else a=parseInt(i[1],10);return""===(r={name:e.name,isDayOfWeek:!1,dayofweek:-1,year:a,month:parseInt(i[2],10),day:parseInt(i[3],10),date_str:e.date,open_parts:s._splitHoursMinutes(e.open),close_parts:s._splitHoursMinutes(e.close),open:s._secSinceMidnight(t,e.open,!0),close:s._secSinceMidnight(t,e.close,!1),enabled:!1}).name&&(r.enabled=!0),l.F3j(),r.hash_key=this._hashCode(r.date_str+r.open+r.close),t.extraHours.push(r),r},s._secSinceMidnight=function(t,e,i){var a,r,n;return a=e.split(":"),l.F3j(),n=60*(r=parseInt(a[0],10))*60+60*parseInt(a[1],10),i||24===r&&(n=60*r*60+1),n},e.Market.prototype._convertToMarketTZ=function(t,e){var i;return(i=e?new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),e):new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())).setTimezone&&i.setTimezone(this.market_tz),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())},e.Market.prototype._convertFromMarketTZ=function(t,e){var i;return i=new this.tz_lib(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),this.market_tz),e?(i.setTimezone&&i.setTimezone(e),new Date(i.getFullYear(),i.getMonth(),i.getDate(),i.getHours(),i.getMinutes(),i.getSeconds(),i.getMilliseconds())):new Date(i.getTime())},e.Market.Iterator=function(t){this.market=t.market,l.F3j(),this.begin=t.begin,this.interval=t.interval,this.multiple=t.multiple,this.inZone=t.inZone,this.outZone=t.outZone,this.clock=new e.Market.Iterator._Clock(t.market,t.interval,t.multiple),this.intraDay=this.clock.intra_day,this.intraDay&&(this.begin=this.market._convertToMarketTZ(this.begin,t.inZone)),this.clock._setStart(this.begin),this.clock.minutes_aligned=!1,this.clock.minimumScanMS=6e4*t.market.minimumSessionLength},e.Market.Iterator.prototype.date=function(){return l.X8U(),this.clock._date()},e.Market.Iterator.prototype.futureTick=function(t){var e,i,a,r,n,s,o;if(this.clock.skip=1,e=0,(i=this.intraDay?this.market._convertToMarketTZ(t.end,this.inZone).getTime():t.end.getTime())===(a=this.clock.ctime))return e;if(r=2,1e3,n=0,t.sample_size&&(r=t.sample_size),s=(new Date).getTime(),i>a){for(this.clock.forward=!0;this.clock.ctime<i;)if(e+=1,n+=1,this.clock._findNext(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(this.clock.ctime-a)/e,e=Math.floor((i-a)/o);break}this.clock.ctime>i&&e--}else for(this.clock.forward=!1;this.clock.ctime>i;)if(e+=1,n+=1,this.clock._findPrevious(),1e3===n&&(n=0,(new Date).getTime()-s>=r)){o=(a-this.clock.ctime)/e,e=Math.floor((a-i)/o);break}return e},e.Market.Iterator.prototype.isHourAligned=function(){return l.X8U(),!this.intraDay||this.market.isHourAligned()},e.Market.Iterator.prototype.isOpen=function(){return this.market.isOpen()},e.Market.Iterator.prototype.next=function(t){var e;if(this.clock.skip=1,t){-1815352132,-1715239052,e=2;for(var i=1;-1815352132!==l.o0j(i.toString(),i.toString().length,27552);i++)this.clock.skip=t,e+=2;-1715239052!==l.c0F(e.toString(),e.toString().length,69190)&&(this.clock.skip=t),this.clock.skip=t}this.clock.forward=!0;for(var a=0;a<this.clock.skip;a++)this.begin=this.clock._findNext();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},e.Market.Iterator.prototype.peek=function(){return this.clock._peek()},e.Market.Iterator.prototype.previous=function(t){this.clock.skip=1,t&&(this.clock.skip=t),this.clock.forward=!1;for(var e=0;e<this.clock.skip;e++)this.begin=this.clock._findPrevious();return this.intraDay||this.market.convertOnDaily?this.market._convertFromMarketTZ(this.clock.display_date,this.outZone):this.clock.display_date},e.Market.Iterator._Clock=function(t,e,i){var n,s;i%60==0&&"second"===e&&(e="minute",i/=60),this.market=t,this.interval=e,this.multiple=i,this.intra_day=!1,this.intervals=[],this.max_iters=10080,l.X8U(),n=r,s=this._dayImpl,"millisecond"===e?(s=this._millisImpl,n=1):"second"===e?(s=this._secondImpl,n=1e3):"minute"===e?(s=this._minuteImpl,n=6e4):"hour"===e?(s=this._hourImpl,n=a):"day"===e?(s=this._dayImpl,n=r):"week"===e?(s=this._weekImpl,n=7*r):"month"===e?(s=this._monthImpl,n=30*r):('" is not a valid interval.'," Please see setPeriodicity() for details.","P","eriod","icity ERROR: ",'"',console.log('Periodicity ERROR: "'+e+'" is not a valid interval. Please see setPeriodicity() for details.')),this.tick_time=n*i,this.intra_day=this.tick_time<r,this._findPrevious=this._findNext=s},(o=e.Market.Iterator._Clock.prototype)._total_minutes=function(t,e,i,a){return 60*(i-t)-e+a},o._alignMinutes=function(){var t,e,i,a,r,n;if(t=this.market.isHourAligned(),!this.market.market_def&&!t||void 0===this.market.zopen_minute)return[];for(e=this.market.zopen_minute,l.X8U(),(i=this.market.zseg_match)&&i.adjacent_parent?e=i.adjacent_parent.open/60-1440:t&&this.multiple%60==0&&(e=0),a=this._total_minutes(this.market.zopen_hour,e,this.market.zclose_hour,this.market.zclose_minute),r=[],n=0;n<a;)r.push(e+n),n+=this.multiple;return r},o._alignBaseZero=function(t){var e,i;for(i=[e=0];!((e+=this.multiple)>=t);)i.push(e);return i},o._date=function(){var t,e;return t=Math.round(this.ctime),e=new Date(t),this.intra_day?this.display_date=new Date(t+this.shift_millis):this.display_date=e,e},o._alignToBoundary=function(t,e){var i,a,r;i=0,a=0,r=e;for(var n=0;n<t.length-1&&(i=t[n],a=t[n+1],e!==i&&e!==a);n++){if(e>i&&e<a){r=i;break}n+1===t.length-1&&(r=a)}return r},o._peek=function(){return l.X8U(),this._date().toString()},o._seekHr=function(){l.X8U(),this.forward?this.ctime-=a:this.ctime+=a},o._setStart=function(t){var e,i;l.F3j(),e=this.market._tzDifferenceMillis(t),i=new Date(t.getTime()+e),this.shift_millis=e,this.ctime=i.getTime(),this.shift_millis=0,this.ctime=t.getTime()},o._tickTock=function(){this.forward?this.ctime+=this.tick_time:this.ctime-=this.tick_time},o._tockTick=function(){l.X8U(),this.forward?this.ctime-=this.tick_time:this.ctime+=this.tick_time},o._tickTock24=function(){l.F3j(),this.ctime+=r},o._tockTick24=function(){this.ctime-=r},o._windMaybe=function(t,e){var i,a,r,n;for(i=0,a=new Date(this.ctime),r=!1;!t.call(this.market,a);)if(e.call(this),r=!0,a=new Date(this.ctime),(i+=1)>this.max_iters){") reached with no rule"," ma","tch",".",n="Warning! max iterations ("+this.max_iters,n+=") reached with no rule match.",console.log(n);break}return r},o._millisImpl=function(){var t,e,i,a,r,n,s,o,l,h;return t=!1,this.mperiods_aligned||(e=this._alignBaseZero(1e3),a=(i=new Date(this.ctime)).getMilliseconds(),a=this._alignToBoundary(e,a),i.setMilliseconds(0),this.ctime=i.getTime()+a,this.mperiods_aligned=!0,t=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!t&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this._date().getMilliseconds(),l=this.tick_time,this.tick_time=6e4,h=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=l,this.multiple=h,this.ctime+=1e3*s+o),this._date()},o._secondImpl=function(){var t,e,i,a,r,n,s,o,l;return t=!1,this.speriod_aligned||(e=this._alignBaseZero(60),a=(i=new Date(this.ctime)).getSeconds(),a=this._alignToBoundary(e,a),i.setSeconds(a),i.setMilliseconds(0),this.ctime=i.getTime(),this.speriod_aligned=!0,t=!0),r=this._date().getMinutes(),this._tickTock(),n=this._date().getMinutes(),!t&&r==n||this.market._wasOpenIntraDay(this._date())||(s=this._date().getSeconds(),o=this.tick_time,this.tick_time=6e4,l=this.multiple,this.multiple=1,this._minuteImpl(),this.tick_time=o,this.multiple=l,this.ctime+=1e3*s),this._date()},l.X8U(),o._minuteImpl=function(){var t,e,i,a,r,n,s,o,h,c,u,d,p,g;return t=this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),i=(e=new Date(this.ctime)).getTimezoneOffset(),a=e.getMinutes(),r=e.getHours(),n=this._alignMinutes(),l.F3j(),s=this._total_minutes(this.market.zopen_hour,this.market.zopen_minute,r,a)+this.market.zopen_minute,s=t?this.forward?n[n.length-1]:n[0]:this._alignToBoundary(n,s),r=Math.floor(s/60)+this.market.zopen_hour,e.setHours(r,s%60,0,0),o=e.getTimezoneOffset()-i,(this.forward&&o<0||!this.forward&&o>0)&&e.setTime(e.getTime()-6e4*o),this.ctime=e.getTime(),h=this.market.zseg_match,this._tickTock(),c=this.market.hour_aligned&&this.multiple%60==0,t=this._scanForNextSession(),u=h!==this.market.zseg_match,d=h&&h.adjacent_child,p=this.shouldResetToBeginningOfSegment||u&&!d,(t||p&&!c)&&(e=new Date(this.ctime),this.forward?(e.setMinutes(this.market.zopen_minute),e.setHours(this.market.zopen_hour)):(g=(n=this._alignMinutes())[n.length-1],e.setMinutes(g%60),e.setHours(Math.floor(g/60)+this.market.zopen_hour)),this.ctime=e.getTime()),this._date()},o._hourImpl=function(){var t,e,i,a,r;return this._windMaybe(this.market._wasOpenIntraDay,this._tockTick),t=new Date(this.ctime),this.market.isHourAligned()?t.setMinutes(0):t.setMinutes(this.market.zopen_minute),t.setSeconds(0),t.setMilliseconds(0),this.ctime=t.getTime(),this._tickTock(),e=this.market.zseg_match,(this._scanForNextSession()||!this.market.hour_aligned&&e!=this.market.zseg_match)&&(i=new Date(this.ctime),this.forward?(i.setMinutes(this.market.zopen_minute),i.setHours(this.market.zopen_hour)):(r=(a=this._alignMinutes())[a.length-1],i.setMinutes(r%60),i.setHours(Math.floor(r/60)+this.market.zopen_hour)),this.ctime=i.getTime()),this._date()},o._dayImpl=function(){var t,e;for(this._windMaybe(this.market._wasOpenDaily,this._seekHr),(t=new Date(this.ctime)).setHours(12,0,0,0),this.ctime=t.getTime(),e=0;e<this.multiple;)this.forward?this._tickTock24():this._tockTick24(),this.market._wasOpenDaily(this._date())&&(e+=1);return(t=new Date(this.ctime)).setHours(0),this.ctime=t.getTime(),this._date()},o._weekImpl=function(){var t,e;for(l.F3j(),t=this.market,(e=new Date(this.ctime)).setHours(12),this.ctime=e.getTime(),this._tickTock(),e=new Date(this.ctime);e.getDay()!==t.beginningDayOfWeek;)this._tockTick24(),e=new Date(this.ctime);return this._windMaybe(t._wasOpenDaily,this._tickTock24),(e=new Date(this.ctime)).setHours(0,0,0,0),this.ctime=e.getTime(),this._date()},o._monthImpl=function(){var t;return(t=new Date(this.ctime)).setDate(15),this.ctime=t.getTime(),this._tickTock(),(t=new Date(this.ctime)).setDate(1),t.setHours(12),this.ctime=t.getTime(),this._windMaybe(this.market._wasOpenDaily,this._tickTock24),t=new Date(this.ctime),l.X8U(),t.setHours(0,0,0,0),this.ctime=t.getTime(),this._date()},o._findNext=null,o._findPrevious=null,o._scanForNextSession=function(){return this._windMaybe(this.market._wasOpenIntraDay,function(){this.ctime+=this.forward?this.minimumScanMS:-this.minimumScanMS}.bind(this))}},g=t=>{var e,i,a,r=E;r.X_D=function(t){if(r.F3j(),r&&t)return r.y_C(t)},r.I$A=function(t){if(r)return r.W$G(t)},r.p7n=function(t){if(r.F3j(),r)return r.W$G(t)},r.f4u=function(t){if(r)return r.y_C(t)},r.H5d=function(t){if(r&&t)return r.y_C(t)},r.z1b=function(t){if(r.F3j(),r&&t)return r.y_C(t)},e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="valid",r.J4P(34),e.valid=r.m92("0",32),e[r.z1b("64cf")?"ChartEngine":""][r.a5Q("91af")?"prototype":""][r.u5F("fb93")?"":"mousemoveinner"]=function(t,a){r.Y8Y=function(t){if(r&&t)return r.y_C(t)},r.F3j(),r.G6W=function(t){if(r)return r.W$G(t)},r.X6i=function(t){if(r.F3j(),r&&t)return r.W$G(t)};var n=r.H5d("d86a")?364731621:601059652,s=r.X6i("81c7")?7550140142:1266263199,o=-(r.y2x("13a3")?1513848386:9463383876),l=-(r.k7m("f882")?1437934508:2416460226);if(r.e86(0,!1,963605)===n||r.Q7V(0,!r.f4u("dedf"),r.G6W("9fac")?685482:858817)===s||r.e86(r.p7n("c7dd")?9:1,!0,775866)===o||r.e86(r.r7C("8d88")?11:36,!r.Y8Y("149c"),693052)===l){var h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j;if(h=r.I$A("a35d")?"p":"",h+="x",c=r.l1J("9c57")?"p":"",c+=r.X_D("3229")?"":"x",!this.chart.canvas)return;if(!this.disableBackingStoreDuringTouch&&(this.chart.canvas.height!=Math.floor(this.devicePixelRatio*this.chart.container.clientHeight)||this.chart.canvas.width!=Math.floor(this.devicePixelRatio*this.chart.container.clientWidth)))return void this.resizeChart();if(this.runPrepend("mousemoveinner",arguments))return;if(d=arguments,p=this.container.getBoundingClientRect(),this.top=p.top,this.left=p.left,this.right=this.left+this.width,this.bottom=this.top+this.height,this.hasDragged=!0,e.ChartEngine.crosshairX=t,e.ChartEngine.crosshairY=a,this.crosshairX=t,this.crosshairY=a,g=this.cy=this.crossYActualPos=this.backOutY(e.ChartEngine.crosshairY),m=this.cx=this.crossXActualPos=this.backOutX(e.ChartEngine.crosshairX),this.grabbingScreen&&this.anyHighlighted){r.Q7y(65);var U=r.m92(11,12,23,18,16);r.Q7y(7);var B=r.o1b(8,10);if(Math.pow(this.grabStartX-t,U)+Math.pow(this.grabStartY-a,B)<36)return}if(this.cancelLongHold=!0,f=function(t,a){if(-979058634===r.e86(0,!1,522866)||951192981===r.e86(0,!1,302660)||-1356213847===r.Q7V(9,!0,239262)||43083148===r.e86(11,!0,975971)){if(0===e[i])return t.whichPanel(a)||t.chart.panel;t.draw[i]||(t.draw=function(){r.F3j();1414603766!==r.Q7V(0,!1,278417)&&-112706953!==r.Q7V(0,!1,323856)&&1851039567!==r.e86(9,!0,558251)&&687014346!==r.Q7V(11,!0,321256)||e.clearCanvas(this.chart.canvas,this)},t.draw[i]=!0)}},this.currentPanel=f(this,g),!this.currentPanel)return;if((y=this.currentPanel.chart).dataSet&&(this.crosshairTick=this.tickFromPixel(m,y),u=this.valueFromPixel(g,this.currentPanel),this.crosshairValue=this.adjustIfNecessary(this.currentPanel,this.crosshairTick,u),(v="chart"==this.currentPanel.name?this.preferences.horizontalCrosshairField:this.currentPanel.horizontalCrosshairField)&&this.crosshairTick<y.dataSet.length&&this.crosshairTick>-1&&(u=y.dataSet[this.crosshairTick][v],this.crossYActualPos=this.pixelFromPrice(u,this.currentPanel))),e.ChartEngine.crosshairX>=this.left&&e.ChartEngine.crosshairX<=this.right&&e.ChartEngine.crosshairY>=this.top&&e.ChartEngine.crosshairY<=this.bottom?this.insideChart=!0:this.insideChart=!1,b=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=this.insideChart&&this.cy<=b&&this.cy>b-this.xaxisHeight,this.overYAxis=(this.cx>=this.currentPanel.right||this.cx<=this.currentPanel.left)&&this.insideChart,(this.overXAxis||this.overYAxis||!this.insideChart&&!this.grabbingScreen)&&(this.undisplayCrosshairs(),!this.overXAxis&&!this.overYAxis))return;if(!this.displayCrosshairs&&!e.ChartEngine.resizingPanel)return void this.undisplayCrosshairs();if(this.repositioningBaseline)return this.setBaselineUserLevel(),Z(this);if(this.repositioningAnchorSelector)return x=this.repositioningAnchorSelector.hoverTick,(S=this.tickFromPixel(this.cx,this.chart))>=0&&S<this.chart.dataSet.length&&(!x||0===x||S!==x)&&(this.repositioningAnchorSelector.hoverTick=S,this.draw()),Z(this);if(this.grabbingScreen&&!e.ChartEngine.resizingPanel&&!this.chart.draggingControls){if(this.highlightedDraggable)return this.displayDragOK(!0),this.dragPlotOrAxis(m,g),Z(this);if(this.anyHighlighted){for(C in e.clearCanvas(this.chart.tempCanvas,this),this.anyHighlighted=!1,this.overlays)this.overlays[C].highlight=!1;for(C in y.series)y.series[C].highlight=!1;this.displaySticky()}if(-1==this.grabStartX&&(this.grabStartX=e.ChartEngine.crosshairX,this.grabStartScrollX=y.scroll),-1==this.grabStartY&&(this.grabStartY=e.ChartEngine.crosshairY,this.grabStartScrollY=this.currentPanel.yAxis.scroll),A=Math.max(this.left,Math.min(this.right,e.ChartEngine.crosshairX)),D=Math.max(this.top,Math.min(this.bottom,e.ChartEngine.crosshairY)),k=A-this.grabStartX,w=D-this.grabStartY,0===k&&0===w)return;Math.abs(k)+Math.abs(w)>5&&(this.grabOverrideClick=!0),T=1595944843,F=320557638,P=2;for(var V=1;r.o0j(V.toString(),V.toString().length,21336)!==T;V++)_=this.layout.candleWidth,P+=2;if(r.c0F(P.toString(),P.toString().length,52927)!==F&&(_=this.layout.candleWidth),_=this.layout.candleWidth,this.allowZoom&&"pan"!=this.grabMode&&(0===this.grabMode.indexOf("zoom")||this.overXAxis||this.grabStartYAxis)){if(""===this.grabMode&&(L="z",L+="oo",L+="m-",L+="x",this.overXAxis?this.grabMode=L:this.grabStartYAxis&&(this.grabMode="zoom-y")),"zoom-x"==this.grabMode?w=0:"zoom-y"==this.grabMode&&(k=0),k&&(this.grabStartX=e.ChartEngine.crosshairX,E=_-k/this.chart.maxTicks,this.zoomSet(E,this.chart)),this.layout.setSpan&&(this.layout.setSpan=null,this.changeOccurred("layout")),M=this.grabStartYAxis)if(M.flipped&&(w*=-1),M.zoom=Math.round(this.grabStartZoom+w),this.grabStartZoom<M.height){if(M.zoom>=M.height){r.J4P(29);var W=r.o1b(10,0,7,2);M.zoom=M.height-W}}else if(M.zoom<=M.height){r.J4P(101);var Q=r.m92(8,24,5,12);M.zoom=M.height+"1"*Q}}else if(!this.overYAxis&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!0}),this.allowScroll)){if(Math.abs(w)<this.yTolerance){if(!this.yToleranceBroken&&(r.J4P(2),w=r.m92("0",1),0===k))return}else this.yToleranceBroken=!0;this.grabStartMicropixels||(this.grabStartMicropixels=0),this.grabMode="pan",y.scroll=this.grabStartScrollX,r.Q7y(1);var Y=r.o1b(5,0);r.J4P(106);var q=r.m92(17,1,51,2,12);if(this.micropixels=this.grabStartMicropixels+k*(this.shift?Y:q),!this.lineTravelSpacing){for(;this.micropixels>0;)this.micropixels-=_,y.scroll++;for(;this.micropixels<-_;)this.micropixels+=_,y.scroll--}y.scroll>=y.maxTicks?this.preferences.whitespace=this.initialWhitespace:this.preferences.whitespace=(y.maxTicks-y.scroll)*_,this.currentPanel==this.grabStartPanel&&((M=this.currentPanel.yAxis).flipped&&(w*=-1),M.scroll=this.grabStartScrollY+w),this.dispatch("scroll",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy})}return I=function(t){if(r.F3j(),-1788554858===r.Q7V(0,!1,962454)||989123441===r.e86(0,!1,448424)||-1165039363===r.Q7V(9,!0,656066)||1565485657===r.e86(11,!0,989189))return function(){2009440868!==r.e86(0,!1,245842)&&-1603830717!==r.Q7V(0,!1,942292)&&2144173458!==r.e86(9,!0,275591)&&-367443223!==r.Q7V(11,!0,934327)||(t.draw(),t.updateChartAccessories())}},e.ChartEngine.useAnimation?window.requestAnimationFrame(I(this)):(this.draw(),this.updateChartAccessories()),this.activeDrawing&&(e.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.render(this.chart.tempCanvas.context),this.activeDrawing.measure()),void this.undisplayCrosshairs()}if(this.grabMode="",this.overXAxis||this.overYAxis)return this.updateChartAccessories(),this.tapForHighlighting&&this.touching&&!this.anyHighlighted||this.findHighlights(),Z(this);this.controls.crossX&&(this.controls.crossX.style.left=this.pixelFromTick(this.crosshairTick,y)-.5+c),this.controls.crossY&&(this.controls.crossY.style.top=this.crossYActualPos+h),this.insideChart&&!e.ChartEngine.resizingPanel?(N=this.currentVectorParameters.vectorType,this.layout.studies&&(O=this.layout.studies[this.currentPanel.name])&&(this.preferences.dragging&&this.preferences.dragging.study||delete this.overlays[O.name],N&&(this.overlays[O.name]=O)),e.Drawing&&N&&e.Drawing[N]&&(new e.Drawing[N]).dragToDraw||this.doDisplayCrosshairs(),this.updateChartAccessories()):this.undisplayCrosshairs(),this.magnetize&&this.magnetize(),this.repositioningDrawing?this.repositionDrawing(this.repositioningDrawing):e.ChartEngine.drawingLine?this.activeDrawing&&(null===this.magnetizedPrice&&(H=this.panels[this.activeDrawing.panelName],u=this.adjustIfNecessary(H,this.crosshairTick,this.activeDrawing.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),H,this.getYAxisByField(H,this.activeDrawing.field))),e.clearCanvas(this.chart.tempCanvas,this),this.activeDrawing.move(this.chart.tempCanvas.context,this.crosshairTick,u)),this.activeDrawing.measure&&this.activeDrawing.measure()):e.ChartEngine.resizingPanel&&this.resizePanels(),this.insideChart&&(this.dispatch("move",{stx:this,panel:this.currentPanel,x:this.cx,y:this.cy,grab:!1}),this.tapForHighlighting&&this.touching&&!this.anyHighlighted||this.findHighlights()),R=-1121555614,z=1816901798,j=2;for(var X=1;r.c0F(X.toString(),X.toString().length,11597)!==R;X++)return Z(this);if(r.o0j(j.toString(),j.toString().length,44930)!==z)return Z(this);function Z(t){if(-458929914===r.e86(0,!1,549721)||496778075===r.Q7V(0,!1,395203)||1219098655===r.e86(9,!0,743778)||1641174680===r.e86(11,!0,254602)){var e;1895407773,-1741627983,e=2;for(var i=1;1895407773!==r.c0F(i.toString(),i.toString().length,45058);i++)t.currentBaseline=1,e+=2;-1741627983!==r.c0F(e.toString(),e.toString().length,76601)&&(r.Q7y(7),t.currentBaseline=r.m92(0,"8")),t.currentBaseline=null,t.runAppend("mousemoveinner",d)}}}},e.ChartEngine.prototype.swipeStart=function(t){var e;this.swipe&&this.swipe.interval&&clearInterval(this.swipe.interval),this.swipe.velocity=0,this.swipe.amplitude=0,this.swipe.frame=t.scroll,this.swipe.micropixels=this.micropixels,this.swipe.timestamp=Date.now(),this.swipe.chart=t,this.swipe.end=!1,this.swipe.timeConstant=325,this.swipe.cb=null,e=this,requestAnimationFrame((function(){r.X8U(),e.swipeSample()}))},e.ChartEngine.prototype.swipeSample=function(){var t,i,a,n,s,o,l;r.F3j(),(t=this.swipe).end||(i=this,20,(n=(a=Date.now())-t.timestamp)<20||(o=e.touchDevice?.4:.8,t.timestamp=a,s=(t.chart.scroll-t.frame)*this.layout.candleWidth+this.micropixels-t.micropixels,t.frame=t.chart.scroll,t.micropixels=this.micropixels,r.J4P(107),l=o*r.m92(0,1,s,"1000",n)+.2*t.velocity,Math.abs(l)>Math.abs(t.velocity)&&(t.velocity=l),Math.abs(s)<6&&(t.velocity=0)),requestAnimationFrame((function(){i.swipeSample()})))},e.ChartEngine.prototype.swipeRelease=function(){var t,e;(t=this.swipe).velocity>3e3&&(t.velocity=3e3),t.velocity<-3e3&&(t.velocity=-3e3),r.X8U(),(t.velocity>10||t.velocity<-10)&&(t.amplitude=.8*t.velocity,t.scroll=t.chart.scroll,t.target=t.amplitude,t.timestamp=Date.now(),e=this,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),requestAnimationFrame((function(){e.autoscroll()})))},e.ChartEngine.prototype.allowDragControls=function(){var t,i,a,n;t={down:(n=this,function(t){r.F3j(),n.modalBegin(),n.chart.draggingControls={bottom:n.chart.chartControls.style.bottom}}),move:(a=this,r.X8U(),function(t){var i,n,{draggingControls:s,chartControls:o,home:l}=a.chart;if(s){var{style:h,offsetHeight:c}=o;i=a.height-c,n=e.stripPX(s.bottom)-t.displacementY,n=Math.min(Math.max(n,0),i),r.Q7y(1),h.bottom=r.o1b("px",n),l.style.bottom=h.bottom}}),up:(i=this,function(t){i.chart.draggingControls=null,i.modalEnd()})},this.chart.chartControls&&e.safeDrag(this.chart.chartControls,t),this.chart.home&&e.safeDrag(this.chart.home,t)},e.ChartEngine.prototype.dragPlotOrAxis=function(t,i){var a,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q,X,Z,J,G,K;if("dr","opzone","n","o","n","e",a=this,(function(){var t,e,i,n;function s(e){return r.X8U(),function(i){e.subholder.classList.contains(i)&&(e.subholder.classList.remove(i),t=!0)}}for(var o in t=!1,a.panels){for(e="t",e+="o",i="r",i+="ig",["dropzone","all","left",i+="ht",e+="p","bottom"].forEach(s(a.panels[o])),n=0;n<a.panels[o].yaxisLHS.length;n++)a.panels[o].yaxisLHS[n].dropzone&&(t=!0),a.panels[o].yaxisLHS[n].dropzone=null;for(n=0;n<a.panels[o].yaxisRHS.length;n++)a.panels[o].yaxisRHS[n].dropzone&&(t=!0),a.panels[o].yaxisRHS[n].dropzone=null}return t}.call(this)||this.grabbingScreen)&&(n=null,s=this.whichPanel(i),o=this.highlightedDraggable,l=0,s&&(!o.undraggable||!o.undraggable(this)))){for(D in this.xAxisAsFooter&&s==Object.values(this.panels).filter((function(t){return!t.hidden})).pop()&&(l=this.xaxisHeight,n&&(n+=l)),h=Math.min(20,(s.height-l)/3),r.Q7y(2),r.F3j(),c=Math.min(r.o1b("10",1),s.width/3),u=this.whichYAxis(s,t,i),r.J4P(7),d=this.whichYAxis(s,r.o1b(c,t),i),r.Q7y(1),p=this.whichYAxis(s,r.m92(c,t),i),r.J4P(7),g=this.whichPanel(r.o1b(h,i)),r.J4P(15),m=this.whichPanel(r.m92(i,l,h)),f=!1,y=!1,!1,e.Renderer&&(f=o instanceof e.Renderer),e.Studies&&(y=o instanceof e.Studies.StudyDescriptor),b=function(t){if(!v){if("right"==t){r.J4P(70);var e=r.m92(1,12,11,16);return s.right-s.width/e}if("left"==t){r.J4P(108);var i=r.o1b(8,16,7,19,39);return s.left+s.width/i}}r.X8U(),r.Q7y(73);var a=r.o1b(1,21,19);return(s.left+s.right)/a},(v=o instanceof e.ChartEngine.YAxis)||u||(t<b("left")?d=this.whichYAxis(s,s.left-1,i):t>b("right")&&(p=this.whichYAxis(s,s.right+1,i))),x=[],o.getDependents&&(x=o.getDependents(this,!0)),S=o.panel,C=o.getYAxis(this),f?S=o.params.panel:v&&(S=this.grabStartPanel.name),A=this.panels[S],this.panels)this.panels[D].soloing&&(k=!0);if(w=C.isShared(this),M=!(u||v||k||(A===s||A==g||A==m)&&this.checkForEmptyPanel(A,!0,[o].concat(x))),T=S==s.name&&C!==u&&C!==p&&C!==d||w,!M||g&&s===g)if(!M||m&&s===m){if(s!==A)v||s.noDrag||(s.subholder.classList.add("dropzone"),s.subholder.classList.add("all"),F=s.name);else if((!s.yaxisRHS.length||1==s.yaxisRHS.length&&s.yaxisRHS[0]==C&&"none"==C.position)&&!u&&!p&&t>b("right"))"r","ig","ht","r","i","g","ht",s.subholder.classList.add("dropzone"),s.subholder.classList.add("right"),P="right";else if((!s.yaxisLHS.length||1==s.yaxisLHS.length&&s.yaxisLHS[0]==C&&"none"==C.position)&&!u&&!d&&t<b("left"))"le","ft",s.subholder.classList.add("dropzone"),s.subholder.classList.add("left"),P="left";else if(T){if(v&&t>s.left&&t<s.right){r.J4P(7);var $=r.m92(2,3);_=s.yaxisLHS[s.yaxisLHS.length-$],L=s.yaxisRHS[0],t<(E=b())&&_!=C?d=_:t>E&&L!=C&&(p=L)}if(!v||u!==C)if(I=!v&&w,!p||p===C&&!I||u&&u===p)!d||d===C&&!I||u&&u===d?u&&("ri","gh","t",p||u===C&&!I?d||u===C&&!I?u!==C&&(u.dropzone="all"):u.dropzone="left":("r","ight",u.dropzone="right"),u.dropzone&&(P=u.position||this.chart.panel.yAxis.position||"right")):("r","ight","r","i","g","ht",d.dropzone="right",P=d.position||this.chart.panel.yAxis.position||"right");else{1820528462,-277909423,N=2;for(var tt=1;1820528462!==r.o0j(tt.toString(),tt.toString().length,75792);tt++)p.dropzone="",N+=2;-277909423!==r.c0F(N.toString(),N.toString().length,89802)&&(p.dropzone="left"),P=p.position||this.chart.panel.yAxis.position||"right"}}}else"b","otto","m","drop","z","o","ne",s.subholder.classList.add("dropzone"),s.subholder.classList.add("bottom");else s.subholder.classList.add("dropzone"),s.subholder.classList.add("top"),m=s;if(this.grabbingScreen||!s.subholder.classList.contains("dropzone")&&!P)this.draw();else{if(H=-1,!F&&!P&&M){for(var et in F=y?o.inputs.id:o.params.name||e.uniqueID(),this.panels)if(H++,this.panels[et]==m)break;m||H++,this.panels[S].yAxis.name==F&&(S=this.electNewPanelOwner(S)),R=y?o.inputs.display:null,S?this.createPanel(R||F,F,n,this.chart.name,new e.ChartEngine.YAxis({name:F})):S=F,y?o.panel=S:o.params.panel=S}if(F){if(y)o.parameters||(o.parameters={}),o.parameters.panelName=F,this.highlightedDraggable=e.getFn("Studies.replaceStudy")(this,o.inputs.id,o.type,o.inputs,o.outputs,o.parameters,null,o.study);else if(f)for(var it in o.seriesParams)z=o.seriesParams[it],j=null,o.params.yAxis&&o.params.yAxis!==this.chart.panel.yAxis&&((j=o.params.yAxis).name=o.params.name),this.modifySeries(z.id,{panel:F,yAxis:j});if(H>-1){for(D in U={},B=0,this.panels)H==B++&&(U[F]=this.panels[F]),D!=F&&(U[D]=this.panels[D]);U[F]||(U[F]=this.panels[F]),this.panels=U}this.checkForEmptyPanel(S);for(var at=0;at<x.length;at++)x[at].params?this.checkForEmptyPanel(x[at].params.name):this.checkForEmptyPanel(x[at].name);this.adjustPanelPositions()}else if(P){if(V=function(t,i,a,r){var n,s;if("s","tu","d","y","study"==a&&(i.parameters||(i.parameters={}),r?i.parameters.yaxisDisplayValue=r.position:delete i.parameters.yaxisDisplayValue,n=e.getFn("Studies.replaceStudy")(t,i.inputs.id,i.type,i.inputs,i.outputs,i.parameters,i.panel,i.study)),"renderer"==a)for(var o in i.seriesParams)s=i.seriesParams[o],n=t.modifySeries(s.id,{panel:F,yAxis:r});return n},(W=u&&"all"==u.dropzone)||(v?(o.position=P,this.layout.studies&&(Q=this.layout.studies[o.name])&&(Q.parameters||(Q.parameters={}),Q.parameters.yaxisDisplayValue=P)):y?this.highlightedDraggable=V(this,o,"study",{position:P}):f&&("rend","erer",V(this,o,"renderer",new e.ChartEngine.YAxis({name:o.params.name||e.uniqueID(),position:P}))),C=this.highlightedDraggable.getYAxis(this)),!w||!W||v){for(Y=C,W&&C==this.chart.panel.yAxis&&(Y=u),O=0;O<s.yaxisLHS.length;O++)if(s.yaxisLHS[O]==Y){s.yaxisLHS.splice(O,1);break}for(O=0;O<s.yaxisRHS.length;O++)if(s.yaxisRHS[O]==Y){s.yaxisRHS.splice(O,1);break}}if(W)if(this.getYAxisByName(s,C.name)==s.yAxis&&this.electNewPanelOwner(s,u),v){for(X in Z=C,J=u,C==this.chart.panel.yAxis&&(Z=u,J=C),Z.studies)V(this,this.layout.studies[Z.studies[X]],"study",J===this.chart.panel.yAxis?null:{position:J.name});for(X in Z.renderers)V(this,this.chart.seriesRenderers[Z.renderers[X]],"renderer",J);this.highlightedDraggable=J}else y?this.highlightedDraggable=V(this,o,"study",{position:u.name}):f&&V(this,o,"renderer",u);else{for("l","e","f","t","none"==C.position&&(C.width=e.ChartEngine.YAxis.prototype.width),C.position=P,q="left"==P?s.yaxisLHS:s.yaxisRHS,O=0;O<q.length;O++){if(q[O]!==C)if("r","i","gh","t","left"==q[O].dropzone)q.splice(O,0,C);else{if("right"!=q[O].dropzone)continue;r.Q7y(6),q.splice(r.o1b(O,"1"),r.o1b(64,"0",r.Q7y(42)),C)}break}O==q.length&&q.push(C)}}for(var rt in this.panels)for(K=(G=this.panels[rt]).yaxisLHS.concat(G.yaxisRHS),O=0;O<K.length;O++)K[O].height=G.yAxis.height,K[O].lockScale||this.calculateYAxisMargins(K[O]);this.displayDragOK(),this.draw(),this.calculateYAxisPositions(),this.draw(),this.findHighlights(null,!0),this.savePanels()}}},a=!1,e.ChartEngine.prototype.findHighlights=e.ChartEngine.prototype.findHighlights||function(t,e){r.F3j(),a||console.error("movement feature requires activating interaction feature."),a=!0}},m=t=>{var e,i,a=E;e=2;for(var r=1;-2013519475!==a.c0F(r.toString(),r.toString().length,1038);r++)i=""===!_CIQ?_CIQ:t.CIQ,e+=2;859924977!==a.o0j(e.toString(),e.toString().length,56460)&&(i="undefined"!=typeof _CIQ?_CIQ:t.CIQ),i.NameValueStore=i.NameValueStore||function(){},i.NameValueStore.prototype.toJSONIfNecessary=function(t){if(t.constructor==String)return t;try{return JSON.stringify(t)}catch(e){return a.J4P(1),console.log(a.o1b(t,"Cannot convert to JSON: ")),null}},i.NameValueStore.prototype.fromJSONIfNecessary=function(t){try{return JSON.parse(t)}catch(e){return t}},i.NameValueStore.prototype.get=function(t,e){var r;a.X8U(),r=i.localStorage.getItem(t),e(null,this.fromJSONIfNecessary(r))},i.NameValueStore.prototype.set=function(t,e,r){i.localStorageSetItem(t,this.toJSONIfNecessary(e)),a.F3j(),r&&r(null)},i.NameValueStore.prototype.remove=function(t,e){i.localStorage.removeItem(t),e&&e(null)}},f=t=>{var e;function i(){}(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine||(e.ChartEngine=function(){}),i.fetchInitialData=function(t,e,i,a,r){},i.fetchUpdateData=function(t,e,i,a){},i.fetchPaginationData=function(t,e,i,a,r){},i.subscribe=function(t){},i.unsubscribe=function(t){},e.QuoteFeed=e.QuoteFeed||function(){},e.QuoteFeed.prototype.fetch=function(t,e){E.X8U(),this.v2QuoteFeed||console.log("You must implement CIQ.QuoteFeed.[yourfeedname].prototype.fetch()")},e.QuoteFeed.prototype.announceError=function(t,i){E.X8U(),t.suppressErrors||i.suppressAlert||t.startDate||t.endDate||i.error&&e.alert("Error fetching quote:"+i.error)},e.QuoteFeed.prototype.multiFetch=function(t,e){return 0===t.length&&e([]),t[0].stx.driver.multiFetch(t,e)},e.QuoteFeed.Subscriptions=function(){E.X8U(),this.subscriptions=[]},e.inheritsFrom(e.QuoteFeed.Subscriptions,e.QuoteFeed),e.QuoteFeed.Subscriptions.prototype.checkSubscriptions=function(t){var e,i,a,r,n;a=t.getSymbols({"breakout-equations":!0}),r=this,a=a.filter((function(e){var i;return(i=t.quoteDriver.getQuoteFeed(e))&&i.engine==r}));for(var s=0;s<this.subscriptions.length;s++)this.subscriptions[s].match=!1;for(var o=0;o<a.length;o++)for("month"!=(n=(i=a[o]).interval)&&"week"!=n||t.dontRoll||(n="day"),i.interval=n,i.period=1,i.match=!1,isNaN(i.interval)||(i.period=i.interval,i.interval=i.timeUnit,i.interval||(i.interval="minute")),delete i.periodicity,delete i.timeUnit,delete i.setSpan,s=0;s<this.subscriptions.length;s++){if((e=this.subscriptions[s]).symbol==i.symbol&&e.period==i.period&&e.interval==i.interval){i.match=!0,e.match=!0;break}e.symbol!=i.symbol?("pe","rio","d","period"!=i.reason&&(i.reason="symbol"),e.reason="symbol"):("p","er","iod",i.reason="period",e.reason="period")}this.subscriptions=this.subscriptions.filter((function(e){return e.match||(e.stx||(e.stx=t),r.unsubscribe(e)),e.match})),a.forEach((function(e){e.match||(e.stx||(e.stx=t),e.reason||(e.reason="initialize"),e.symbol!==t.chart.symbol&&(e.series=!0),r.subscribe(e),r.subscriptions.push(e))}))},e.QuoteFeed.Subscriptions.prototype.fetch=function(t,e){var i;i=this,this.fetchFromSource(t,(function(a){a.error||i.checkSubscriptions(t.stx),E.X8U(),e(a)}))},e.QuoteFeed.Subscriptions.prototype.subscribe=function(t){E.X8U(),console.log("subscribe",t)},e.QuoteFeed.Subscriptions.prototype.unsubscribe=function(t){console.log("unsubscribe",t)},e.QuoteFeed.Subscriptions.prototype.fetchFromSource=function(t,e){console.log("Please provide implementation of fetchFromSource")},e.QuoteFeed.prototype.requiresImmediateRefresh=function(t){return!1},e.ChartEngine.prototype.attachQuoteFeed=function(t,i,a){var r,n,s,o=E;if("fun","ction",i||(i={}),"function"==typeof t.fetchInitialData||"function"==typeof t.fetchUpdateData||"function"==typeof t.fetchPaginationData){"functio","n","fu","n","c","tion","function"!=typeof t.fetchPaginationData&&"function"!=typeof t.fetchUpdateData&&(i.noLoadMore=!0),358370844,o.J4P(2),r=-o.m92("12951201",1),n=2;for(var l=1;358370844!==o.c0F(l.toString(),l.toString().length,18125);l++)t.v2QuoteFeed=!0,n+=2;o.c0F(n.toString(),n.toString().length,32246)!==r&&(t.v2QuoteFeed=!1),["multiFetch","announceError","requiresImmediateRefresh"].forEach((function(i){t[i]||!1===t[i]||(t[i]=e.QuoteFeed.prototype[i])})),"function"==typeof t.subscribe&&(t.checkSubscriptions=e.QuoteFeed.Subscriptions.prototype.checkSubscriptions,t.subscriptions=[])}i.maximumTicks||(i.maximumTicks=t.maxTicks?t.maxTicks:2e4),(!i.bufferSize||i.bufferSize<0)&&(i.bufferSize=0),i.bufferSize=Math.round(i.bufferSize),t.intervalTimer=null,this.quoteDriver&&(!a&&this.quoteDriver.hasUnfilteredQuoteFeed?this.detachQuoteFeed():(s=this.quoteDriver.hasUnfilteredQuoteFeed&&this.quoteDriver.quoteFeeds.pop(),this.quoteDriver.quoteFeeds.push({engine:t,behavior:i,filter:a}),s&&this.quoteDriver.quoteFeeds.push(s),this.quoteDriver.updateChartLoop(null,i,t))),this.quoteDriver||(this.quoteDriver=new e.ChartEngine.Driver(this,t,i,a)),a||(this.quoteDriver.hasUnfilteredQuoteFeed=!0)},e.ChartEngine.prototype.detachQuoteFeed=function(t){var e,i;e=this.quoteDriver,i=2;for(var a=1;1471983935!==E.o0j(a.toString(),a.toString().length,8285);a++){if(~e)return;i+=2}if((1946847002===E.o0j(i.toString(),i.toString().length,78012)||!+e)&&e){for(var r=e.quoteFeeds.length-1;r>=0;r--)t&&e.quoteFeeds[r].engine!=t||(e.die(e.quoteFeeds[r]),e.quoteFeeds.splice(r,1));e.quoteFeeds.length?t==e.quoteFeed&&(e.quoteFeed=e.quoteFeeds[0].quoteFeed,e.behavior=e.quoteFeeds[0].behavior):e=this.quoteDriver=null}},e.ChartEngine.Driver=function(t,i,a,r){this.stx=t,a||(a={}),this.quoteFeeds=[{engine:i,behavior:a,filter:r}],this.id=e.uniqueID(!0),this.behavior=a,this.quoteFeed=i,this.loadingNewChart=!1,this.updatingChart=!1,r||(this.hasUnfilteredQuoteFeed=!0),this.updateChartLoop()},e.ChartEngine.Driver.prototype.die=function(t){for(var e,i=0;i<this.quoteFeeds.length;i++)t&&this.quoteFeeds[i]!=t||(e=this.quoteFeeds[i],clearInterval(e.intervalTimer),e.intervalTimer=-1)},e.ChartEngine.Driver.prototype.getQuoteFeed=function(t){var e;t.symbolObject||(t.symbolObject={symbol:t.symbol});for(var i=0;i<this.quoteFeeds.length;i++)if((e=this.quoteFeeds[i]).behavior.generator==t.symbolObject.generator&&(!e.filter||e.filter(t)))return e;return E.X8U(),null},e.ChartEngine.Driver.prototype.multiFetch=function(t,i){var a,r,n;function s(t,e,i){return function(a){var r;e.results.push({dataCallback:a,params:t}),e.counter++,e.counter>=e.finished&&(r=e.results,e.results=[],i(r))}}E.X8U(),0===t.length&&i([]),a={counter:0,finished:t.length,results:[]};for(var o=0;o<t.length;o++)(r=t[o]).stx.isEquationChart(r.symbol)?e.fetchEquationChart(r,s(r,a,i)):(n=this.getQuoteFeed(r))&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.SERIES,n.engine,r,s(r,a,i))},e.ChartEngine.Driver.prototype.updateSubscriptions=function(){for(var t=0;t<this.quoteFeeds.length;t++)this.quoteFeeds[t].checkSubscriptions&&this.quoteFeeds[t].checkSubscriptions(this.stx)},e.ChartEngine.Driver.prototype.loadDependents=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T;if(n=this,!r)return s=0,o=[],l=[],h=function(t){i&&++s>=n.quoteFeeds.length&&i(null)},c=function(e){++s<o.length||(l.length||h(),E.F3j(),l.forEach((function(e){E.F3j(),n.loadDependents(t,h,a,e.behavior)})))},n.quoteFeeds.forEach((function(t){t.behavior.generator?l.push(t):o.push(t)})),void o.forEach((function(e){E.X8U(),n.loadDependents(t,c,a,e.behavior)}));for(u in{},d=t.stx,g=(p=t.chart).series,E.X8U(),d.masterData,y=[],v={},b=a==e.QuoteFeed.UPDATE,x=a==e.QuoteFeed.PAGINATION,S=e.shallowClone(t),g){if(C=(m=g[u]).parameters,!b){if(!t.future&&!1===m.moreAvailable)continue;if(t.future&&!0===m.upToDate)continue}if(!m.loading&&(!1!==C.loadData&&(!b&&!x||m.endPoints&&Object.keys(m.endPoints).length)&&(!C.data||C.data.useDefaultQuoteFeed)&&(f=C.symbolObject).symbol&&f.generator==r.generator&&(S.symbolObject=f,S.symbol=f.symbol,A=this.getQuoteFeed(S),r==(A&&A.behavior)))){D=!0,b||(m.loading=!0);for(var F=0;F<y.length;F++)e.symbolEqual(y[F],f)&&(D=!1);D&&(y.push(f),v[f.symbol]=m.endPoints)}}k=[];for(var P=0;P<y.length;P++)f=y[P],(w=e.shallowClone(t.originalState)).symbol=f.symbol,w.symbolObject=f,w.update||w.future?(w.endDate||(w.endDate=t.endDate),w.startDate=v[f.symbol].end):(w.startDate||(w.startDate=t.startDate),w.endDate=x&&!t.future?v[f.symbol].begin:t.endDate,w.ticks=t.ticks),k.push(w);if(!k.length&&b)return(M={appending:t.appending||t.originalState.update}).appending&&(M.appendToDate=t.startDate),d.createDataSet(null,null,M),t.nodraw||d.draw(),void(i&&i(null));this.multiFetch(k,(T=b,function(s){var o,l,h,c,u,g,f,y,v,b;o=null;for(var x=0;x<s.length;x++)if(!(h=(l=s[x]).dataCallback.error)&&0!==h){c=l.params.symbolObject,g=(u=l.dataCallback).quotes,f=u.moreAvailable,y=u.upToDate,v=[],d.getSeries&&(v=d.getSeries({symbolObject:c})),b=!1;for(var S=0;S<v.length;S++)m=v[S],T||(t.future?(m.upToDate=!0===y||y||g.length<=(l.params.startDate?1:0),d.isHistoricalModeSet&&g.length<2&&(m.mostRecentForwardAttempt=new Date)):m.moreAvailable=!1!==f&&(f||g.length>(l.params.endDate?1:0)),m.loading=!1),b=m.parameters.fillGaps||b;g=n.cleanup(d,m,g,a,t,b),d.updateChartData(g,p,{secondarySeries:c.symbol,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),g&&g.length&&(!o||o>g[0].DT)&&(o=g[0].DT)}s.length&&(d.createDataSet(null,null,{appending:t.originalState.update||t.future,appendToDate:o}),t.nodraw||d.draw(),a==e.QuoteFeed.INITIAL&&n.resetRefreshInterval(r.refreshInterval,r)),i&&i(null)}))},e.ChartEngine.Driver.prototype.cleanup=function(t,i,a,r,n,s){var o,l,h,c,u;return E.X8U(),t.doCleanupDates(a,t.layout.interval),!n.missingBarsCreated&&a&&a.length&&t.cleanupGaps&&!1!==s&&(h=n.chart,i?(h=i,l=i.parameters.symbol||i.id):l=h.defaultPlotField,r!=e.QuoteFeed.PAGINATION||n.loadMoreReplace?r==e.QuoteFeed.UPDATE&&h.endPoints.end&&h.endPoints.end<a[0].DT&&(u=t.getFirstLastDataRecord(t.masterData,l,!0),i&&(u=u[l]),a.unshift(u),o="shift"):h.endPoints.begin&&h.endPoints.begin>a[a.length-1].DT&&(c=t.getFirstLastDataRecord(t.masterData,l,!1),i&&(c=c[l]),a.push(c),o="pop"),a=t.doCleanupGaps(a,n.chart,{cleanupGaps:s,noCleanupDates:!0}),o&&a[o]()),a},e.ChartEngine.Driver.prototype.updateChart=function(t){var i,a,r,n,s,o,l,h,c;if(!this.updatingChart&&!this.loadingNewChart)for(var u in i=Object.keys(this.stx.charts).length,a=0,r=this.stx,n=r.layout.interval,E.F3j(),s=r.layout.timeUnit,r.charts)(o=r.charts[u]).symbol&&(l=this.makeParams(o.symbol,o.symbolObject,o),h=this.getQuoteFeed(l),o.masterData&&o.masterData.length&&(l.startDate=o.endPoints.end),l.update=!0,l.originalState=e.shallowClone(l),t&&t!=l.behavior?this.loadDependents(l,null,e.QuoteFeed.UPDATE,t):(this.updatingChart=!0,c=d(this,l,o.symbol,h),r.isEquationChart(l.symbol)?e.fetchEquationChart(l,c):h&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.UPDATE,h.engine,l,c)));function d(t,o,l,h){return E.F3j(),o.behavior.prefetchAction&&o.behavior.prefetchAction("updateChart"),function(c){var u,d;a++,(u=o.chart).masterData,l!=u.symbol||n!=r.layout.interval||s!=r.layout.timeUnit||r.isHistoricalMode()?t.updatingChart=!1:(h!==t.getQuoteFeed(o)||c.error?h&&h.engine.announceError(o.originalState,c):(d=c.quotes,d=t.cleanup(r,null,d,e.QuoteFeed.UPDATE,o),r.updateChartData(d,u,{noCreateDataSet:!0,noCleanupDates:!0}),u.attribution=c.attribution),a==i&&(t.updatingChart=!1),o.behavior.callback&&o.behavior.callback(o),t.loadDependents(o,null,e.QuoteFeed.UPDATE,o.behavior))}}},e.ChartEngine.Driver.prototype.updateChartLoop=function(t,e,i){var a,r;if(e||(e=this.behavior),i||(this.quoteFeeds.forEach((function(t){t.behavior===e&&(i=t)})),i||(i=this.quoteFeed)),-1!==i.intervalTimer){clearInterval(i.intervalTimer),i.intervalTimer=null,a=function(t,e){return function(){e.noUpdate||t.updateChart(e)}};for(var n=0;n<this.quoteFeeds.length;n++)r=this.quoteFeeds[n].behavior,e!=r||r.noUpdate||(t||0===t||(t=r.refreshInterval),t&&(i.intervalTimer=setInterval(a(this,r),1e3*t)))}},e.ChartEngine.Driver.prototype.resetRefreshInterval=function(t,e){(e||this.behavior).refreshInterval=t,this.updateChartLoop(null,e)},e.ChartEngine.Driver.prototype.pause=function(t){this.paused={symbol:t,interval:this.behavior.refreshInterval},E.F3j(),this.resetRefreshInterval(0)},e.ChartEngine.Driver.prototype.resume=function(){var{interval:t,symbol:i}=this.paused;E.F3j(),e.symbolEqual(i,this.stx.chart.symbol)||(this.resetRefreshInterval(t),this.paused=null)},e.ChartEngine.Driver.prototype.loadAll=function(t,e){var i,a;i=this,E.F3j(),a=0,function r(){return function(n){n?e(n):i.stx.currentlyImporting||!t.moreAvailable&&t.upToDate?e(null):++a>20?(console.warn("moreAvailable and upToDate not implemented correctly in quotefeed"),e()):(t.loadingMore=!1,i.checkLoadMore(t,!0,!0,r(),!0))}}()()},e.ChartEngine.Driver.prototype.checkLoadMore=function(t,i,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M=E;if(s=this.stx,o=this,t.loadingMore||this.loadingNewChart)return t.initialScroll=t.scroll,void(r&&r(null));if(s.isHistoricalMode()||(s.isHistoricalModeSet=!1),l=this.makeParams(t.symbol,t.symbolObject,t),s.currentlyImporting)r&&r(null);else{h=l.behavior,u=t.dataSet,M.Q7y(55);var T=M.m92(982,4,2928);M.Q7y(7);var F,P,_=M.m92(15,20);if(p=T*(h.forwardPaginationRetryInterval||_),g=!1,m=!1,t.dataSet.length)for(var L in t.series)(f=t.series[L]).loading||!1!==f.parameters.loadData&&(d=!f.mostRecentForwardAttempt||f.mostRecentForwardAttempt.getTime()+p<Date.now(),f.parameters.symbol!==t.symbol&&(!1!==f.moreAvailable&&I(f)&&(g=!0),d&&!f.upToDate&&N(f)&&(m=!0)));if(d=!t.mostRecentForwardAttempt||t.mostRecentForwardAttempt.getTime()+p<Date.now(),M.F3j(),y=(I(t)||i)&&!1!==t.moreAvailable,v=(N(t)||i)&&!t.upToDate&&d,b=y||g,x=(s.isHistoricalModeSet||!t.upToDate)&&!b&&(v||m),S=s.layout.interval,C=s.layout.timeUnit,A=!1,D=h.findHeadOfData||t.masterData&&t.masterData.length,!h.noLoadMore&&D&&(x||!s.maxDataSetSize||t.dataSet.length<s.maxDataSetSize)&&(b||x)){if(t.initialScroll=t.scroll,t.loadingMore=!0,(l=this.makeParams(t.symbol,t.symbolObject,t)).pagination=!0,l.future=x,t.masterData&&t.masterData.length?(x?l.startDate=t.endPoints.end:l.endDate=t.endPoints.begin,x&&!l.startDate?(k=s.getFirstLastDataRecord(t.masterData,"DT",!0))&&(l.startDate=k.DT):b&&!l.endDate&&("D","T",(k=s.getFirstLastDataRecord(t.masterData,"DT"))&&(l.endDate=k.DT))):l.endDate=new Date,l.originalState=e.shallowClone(l),l.nodraw=n,!y&&(g||!v&&m))return this.loadingMore=!0,this.loadDependents(l,(function(e){M.F3j(),t.loadingMore=!1,r&&r(e)}),e.QuoteFeed.PAGINATION),void(r&&r(null));(t.maximumForwardPagination||s.fetchMaximumBars[s.layout.aggregationType])&&(l.fetchMaximumBars=!0,!s.maxMasterDataSize||h.maximumTicks<s.maxMasterDataSize?l.ticks=h.maximumTicks:l.ticks=s.maxMasterDataSize),F=this,P=l,h.prefetchAction&&h.prefetchAction("checkLoadMore"),w=function(t){var i,a,s,o,l,u,d,p,g;if(i=F.stx,a=P.chart,P.symbol==a.symbol&&S==i.layout.interval&&C==i.layout.timeUnit)if(P.loadMore||(P.chart.loadingMore=!1),c!==F.getQuoteFeed(P)||t.error)F.quoteFeed.announceError(P.originalState,t),P.chart.loadingMore=!1,r&&r(t.error);else{if(t.quotes||(t.quotes=[]),s=t.quotes,o=a.masterData,(s=F.cleanup(i,null,s,e.QuoteFeed.PAGINATION,P)).length&&a.masterData&&a.masterData.length)if(P.future)M.Q7y(12),(l=s[M.m92("0",0)]).DT&&l.DT==a.masterData[a.masterData.length-1].DT&&o.pop();else{M.J4P(109);var m=M.m92(18,6,3,0);(u=s[s.length-m]).DT&&+u.DT==+a.masterData[0].DT&&s.pop()}P.future?(a.maximumForwardPagination=null,t.upToDate?a.upToDate=!0:!1===t.upToDate||s.length>1?a.upToDate=!1:(!s.length||1===s.length&&+P.startDate==+t.quotes[0].DT)&&(P.fetchMaximumBars?a.upToDate=!0:a.maximumForwardPagination=!0),i.isHistoricalModeSet&&s.length<2&&(a.mostRecentForwardAttempt=new Date)):t.moreAvailable||!1!==t.moreAvailable&&s.length?a.moreAvailable=!0:a.moreAvailable=!1,F.tickMultiplier=s.length?2:2*F.tickMultiplier,d=s[0]?s[0].DT:P.startDate,p=s[0]?s[s.length-1].DT:P.endDate,(!a.endPoints.begin||a.endPoints.begin>d)&&(a.endPoints.begin=d),(!a.endPoints.end||a.endPoints.end<p)&&(a.endPoints.end=p),a.loadingMore=!1,P.loadMoreReplace?i.setMasterData(s,a,{noCleanupDates:!0}):P.future?i.updateChartData(s,a,{noCreateDataSet:!0,noCleanupDates:!0}):e.addMemberToMasterdata({stx:i,chart:a,data:s,fields:["*"],noCleanupDates:!0}),P.future&&(g={appending:!0,appendToDate:s[0]&&s[0].DT}),i.createDataSet(void 0,void 0,g),n||i.draw(),h.callback&&h.callback(P),F.loadDependents(P,r,e.QuoteFeed.PAGINATION)}},c=o.getQuoteFeed(l),s.isEquationChart(l.symbol)?e.fetchEquationChart(l,w):(x&&(l.appending=!0),c&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.PAGINATION,c.engine,l,w)),A=!0}!A&&r&&r(null)}function I(e){return!o.paused&&(!e.endPoints.begin||u.length-t.scroll<h.bufferSize||u.length-t.scroll-s.tickFromDate(e.endPoints.begin,t)<h.bufferSize)}function N(e){return!o.paused&&(!e.endPoints.end||t.scroll-t.maxTicks+1<h.bufferSize||s.tickFromDate(e.endPoints.end,t,null,!0)-u.length+t.scroll-t.maxTicks+2<h.bufferSize)}},e.ChartEngine.Driver.prototype.extendHistoricalData=function({from:t},i=(()=>{})){var a,r,n,s,{stx:o}=this,{chart:l,layout:h}=o,{masterData:c,dataSet:u}=l,{interval:d,timeUnit:p}=h;if(a=this.makeParams(l.symbol,l.symbolObject,l),r=this.getQuoteFeed(a),l.loadingMore||this.loadingNewChart||o.currentlyImporting||!c.length||!r||o.maxDataSetSize&&u.length>o.maxDataSetSize)return i(null);E.F3j(),l.loadingMore=!0,a.originalState=Object.assign({},a),a.startDate=t,a.endDate=c[0].DT,e.ChartEngine.Driver.fetchData(e.QuoteFeed.PAGINATION,r.engine,a,(n=this,s=a,E.X8U(),function({quotes:a,moreAvailable:r,error:c}){if(s.symbol===l.symbol&&d===h.interval&&p===h.timeUnit){if(l.loadingMore=!1,c)return i(c);a=n.cleanup(o,null,a,e.QuoteFeed.PAGINATION,s),l.moreAvailable="boolean"==typeof r?r:!!a.length,l.endPoints.begin=t,e.addMemberToMasterdata({stx:o,chart:l,data:a,fields:["*"],noCleanupDates:!0}),o.createDataSet(),o.draw()}}))},e.ChartEngine.Driver.prototype.barsToFetch=function(t){var i,a,r,n,s=E;if(e.isValidNumber(this.tickMultiplier)||(this.tickMultiplier=2),i=this.stx.layout.interval,a=t.stx.layout.periodicity,("month"==i||"week"==i)&&!this.stx.dontRoll){-805186531,s.Q7y(34),r=-s.o1b("1335812801",0),n=2;for(var o=1;-805186531!==s.o0j(o.toString(),o.toString().length,81198);o++)a/=""!==i?5:27,n+=2;s.c0F(n.toString(),n.toString().length,85522)!==r&&(a/=""!==i?5:27),a*="week"==i?7:30}return t.stx.chart.maxTicks*a*this.tickMultiplier},e.ChartEngine.Driver.determineStartDate=function(t,e,i){return this.determineStartOrEndDate(t,e,i,!0)},e.ChartEngine.Driver.determineStartOrEndDate=function(t,e,i,a){return E.X8U(),a?t.startDate||e.previous(i):t.future?e.next(i):new Date},e.ChartEngine.Driver.prototype.makeParams=function(t,i,a){var r,n,s,o,l,h,c,u;n=(r=this.stx).layout.interval,s=this.barsToFetch({stx:r}),"month"!=n&&"week"!=n||r.dontRoll||(n="day"),l=(o=this.getQuoteFeed({interval:n,symbol:t,symbolObject:i}))&&o.behavior,(h=e.shallowClone(l)||{}).behavior=l,E.F3j(),c=!1,u=[],a.market&&a.market.getSessionNames&&(u=a.market.getSessionNames()),r.extendedHours?r.extendedHours.filter?c=!0:(c=r.layout.extended,u=u.filter((function(t){return t.enabled||r.layout.marketSessions[t.name]}))):u=u.filter((function(t){return E.X8U(),t.enabled}));for(var d=0;d<u.length;d++)u[d]=u[d].name;return e.extend(h,{stx:r,symbol:t,symbolObject:i,chart:a,interval:n,extended:c,period:1,ticks:s,additionalSessions:u,quoteDriverID:this.id},!0),h.symbolObject||(h.symbolObject={symbol:t}),isNaN(h.interval)||(h.period=parseInt(h.interval,10),h.interval=r.layout.timeUnit,h.interval||(h.interval="minute")),h},e.ChartEngine.Driver.prototype.newChart=function(t,i){var a,r,n,s,o,l,h,c,u;a=this.stx,r=t.symbol,n=a.layout.interval,s=a.layout.timeUnit,(o=t.chart).moreAvailable=null,o.upToDate=null,o.loadingMore=!1,o.attribution=null,l=this.makeParams(r,t.symbolObject,o),e.extend(l,t,!0),h=this.getQuoteFeed(l),c=l.behavior,(a.fetchMaximumBars[a.layout.aggregationType]||t.fetchMaximumBars)&&(!a.maxMasterDataSize||c.maximumTicks<a.maxMasterDataSize?l.ticks=c.maximumTicks:l.ticks=a.maxMasterDataSize,l.fetchMaximumBars=!0),this.loadingNewChart=!0,this.updatingChart=!1,l.originalState=e.shallowClone(l),u=function(o,l){var u;965950046,1103211554,u=2;for(var d=1;965950046!==E.c0F(d.toString(),d.toString().length,37374);d++)c.prefetchAction&&c.prefetchAction(""),u+=2;1103211554!==E.c0F(u.toString(),u.toString().length,81932)&&c.prefetchAction&&c.prefetchAction("");c.prefetchAction&&c.prefetchAction("newChart");return function(u){var d,p,g,m;if(d=l.chart,p=u.quotes,g=!1,r!=d.symbol||n!=a.layout.interval||s!=a.layout.timeUnit)return"orphan","e","d",void(i&&i("orphaned"));for(var f in o.loadingNewChart=!1,h!==o.getQuoteFeed(l)||u.error?h.engine.announceError(l.originalState,u):(p=o.cleanup(a,null,p,e.QuoteFeed.INITIAL,l),a.setMasterData(p,d,{noCleanupDates:!0}),d.endPoints={},d.endPoints.begin=p[0]?p[0].DT:l.startDate,d.endPoints.end=p[0]?p[p.length-1].DT:l.endDate,p?(d.moreAvailable=!1!==u.moreAvailable,d.upToDate=u.hasOwnProperty("upToDate")?u.upToDate:!a.isHistoricalModeSet):(d.moreAvailable=!1,d.upToDate=!0),d.attribution=u.attribution,t.initializeChart&&a.initializeChart(),a.createDataSet(),g=!0),d.series)d.series[f].endPoints={},d.series[f].moreAvailable=null,d.series[f].upToDate=null;(m=d.masterData)&&m.length&&(l.startDate=m[0].DT,l.endDate=m[m.length-1].DT),c.callback&&c.callback(l),o.loadDependents(l,(function(){E.X8U(),g&&!l.nodraw&&o.stx.home(),i&&i(u.error),o.stx.dispatch("newChart",{stx:o.stx,symbol:o.stx.chart.symbol,symbolObject:o.stx.chart.symbolObject,moreAvailable:o.stx.chart.moreAvailable,upToDate:o.stx.chart.upToDate,quoteDriver:o}),o.resetRefreshInterval(c.refreshInterval,c)}),e.QuoteFeed.INITIAL)}}(this,l),this.stx.isEquationChart(l.symbol)?e.fetchEquationChart(l,u):h&&e.ChartEngine.Driver.fetchData(e.QuoteFeed.INITIAL,h.engine,l,u)},e.QuoteFeed.INITIAL=1,e.QuoteFeed.UPDATE=2,e.QuoteFeed.PAGINATION=3,e.QuoteFeed.SERIES=4,e.ChartEngine.Driver.fetchData=function(t,i,a,r){if(!a.symbol)return r({quotes:[]});i.v2QuoteFeed?("fu","n","cti","on","function"!=typeof i.subscribe?e.ChartEngine.Driver.fetchDataInContext(t,i,a,r):e.ChartEngine.Driver.fetchDataInContext(t,i,a,function(t){t.error||this.checkSubscriptions(a.stx),r(t)}.bind(i))):(a.stx.convertToDataZone(a.startDate),a.stx.convertToDataZone(a.endDate),i.fetch(a,r))},e.ChartEngine.Driver.fetchDataInContext=function(t,i,a,r){var n,s,o,l,h,c,u,d,p,g=E;if(g.X8U(),!(h=a.stx).chart.market.newIterator)return"q","u","oteFeed feature requires"," first activating market feature.",void console.error("quoteFeed feature requires first activating market feature.");switch(t===e.QuoteFeed.SERIES&&(a.series=!0,t=e.QuoteFeed.INITIAL,a.endDate&&!a.startDate||a.future?t=e.QuoteFeed.PAGINATION:a.startDate&&!a.endDate&&(t=e.QuoteFeed.UPDATE)),c=Math.min(a.ticks,a.maximumTicks),i.maxTicks&&(c=Math.min(c,i.maxTicks)),u=a.symbolObject.masterSymbol||a.symbol,t){case e.QuoteFeed.UPDATE:if(h.isHistoricalModeSet)return void(h.quoteDriver.updatingChart=!1);a.startDate?d=a.startDate:(d=new Date,g.Q7y(7),d.setHours(0,g.m92(0,"0"),0,0)),"function"==typeof i.fetchUpdateData&&i.fetchUpdateData(u,h.convertToDataZone(d),a,r);break;case e.QuoteFeed.INITIAL:n={begin:l=a.endDate||new Date,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),o=e.ChartEngine.Driver.determineStartDate(a,s,c),a.endDate&&(l=a.endDate),"function"==typeof i.fetchInitialData&&i.fetchInitialData(u,o,h.convertToDataZone(l),a,r);break;case e.QuoteFeed.PAGINATION:if("t","i","c","k",n={begin:a.endDate||a.startDate,interval:a.interval,periodicity:"tick"==a.interval?h.chart.xAxis.futureTicksInterval:a.period,outZone:h.dataZone},s=h.chart.market.newIterator(n),p=e.ChartEngine.Driver.determineStartOrEndDate(a,s,c,!a.future),o=a.startDate||p,l=a.endDate||p,a.startDate?a.stx.convertToDataZone(o):a.stx.convertToDataZone(l),"function"==typeof i.fetchPaginationData){if(h.maxMasterDataSize&&h.maxMasterDataSize<=h.masterData.length)return;i.fetchPaginationData(u,o,l,a,(function(t){l>=Date.now()&&(h.isHistoricalModeSet=!1),g.X8U(),r&&r(t)}))}break;default:"Illegal fetchDa","ta ","co","nstant",console.error("Illegal fetchData constant")}}},y=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.addSeries=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D=E;if(r="add",r+="Serie",r+="s",n="add-s",n+="eri",n+="es",s=this.runPrepend("addSeries",arguments))return s;function k(a,r){var n,s,o,l;if(n=i.renderer||"Lines",D.X8U(),s=i.name||t,!i.yAxis||i.yAxis instanceof e.ChartEngine.YAxis||y||(i.yAxis.name=s),i.renderer||i.name||i.color||i.chartType){if(!(o=a.getSeriesRenderer(s))){if(l={name:s,overChart:!1!==i.overChart,useChartLegend:!0},i.chartType?o=e.Renderer.produce(i.chartType,e.extend({highlightable:i.highlightable,dependentOf:i.dependentOf,panel:i.panel,yAxis:i.yAxis,baseline:i.baseline},l)):(e.ensureDefaults(i,l),o=new e.Renderer[n]({params:i})),!o)return;a.setSeriesRenderer(o)}o.attachSeries(t,i),!1!==i.loadData&&o.ready(),a.layout.symbols=a.getSymbols({"include-parameters":!0,"exclude-studies":!0})}}function w(t){return function(e){var r,n,s;if("symbolC","ha","ng","e",!e.error){r=e.quotes,n=i.fillGaps,f.cleanupGaps||(n=!1),r=f.doCleanupGaps(r,f.chart,{cleanupGaps:n}),f.updateChartData(r,f.chart,{secondarySeries:l,noCreateDataSet:!0,noCleanupDates:!0,allowReplaceOHL:!0}),1340024567,974078511,s=2;for(var o=1;1340024567!==D.o0j(o.toString(),o.toString().length,64903);o++)h.loading=!1,h.moreAvailable=e.moreAvailable,h.upToDate=e.upToDate,k(f),s+=2;974078511!==D.o0j(s.toString(),s.toString().length,81593)&&(h.loading=!0,h.moreAvailable=e.moreAvailable,h.upToDate=e.upToDate,k(f))}null===i.action||d.length||f.dispatch(y?"symbolImport":"symbolChange",{stx:f,symbol:t.symbol,symbolObject:t.symbolObject,action:i.action,id:h.id,parameters:i}),a&&a.call(f,e.error,h)}}return o=t||null,l=t,t||(t=e.uniqueID()),i&&!0===i.panel&&(i.panel=t),(h={parameters:i?e.clone(i):{},yValueCache:[],display:o,id:t,loading:!i||!1!==i.loadData}).parameters.yAxis=i&&i.yAxis,(i=h.parameters).symbol&&(l=i.symbol),i.isComparison&&(i.shareYAxis=!0),!i.yAxis||i.yAxis instanceof e.ChartEngine.YAxis||(i.yAxis=new e.ChartEngine.YAxis(i.yAxis)),e.ensureDefaults(i,{chartName:this.chart.name,symbolObject:{symbol:l},panel:this.chart.panel.name,fillGaps:!1,action:n}),"display"in i&&(h.display=i.display),c=this.charts[i.chartName],D.F3j(),u=i.symbolObject,l=i.symbol=u.symbol,h.display||(h.display=l||i.field),h.endPoints={},i.gapDisplayStyle||!1===i.gapDisplayStyle||(i.gapDisplayStyle=i.gaps),i.isComparison&&void 0===i.gapDisplayStyle&&(i.gapDisplayStyle="transparent"),d=this.getSeries({symbolObject:u,chart:c,includeMaster:!0}),p=i.panel,this.panels[p]?i.yAxis||i.shareYAxis||(m="n",m+="o",m+="ne",i.yAxis=new e.ChartEngine.YAxis({name:t,position:m})):((g=i.yAxis||new e.ChartEngine.YAxis).name=t,this.createPanel(t,p,null,null,g),this.preferences.dragging&&this.preferences.dragging.series||(i.highlightable=!1)),c.series[t]=h,f=this,y=this.currentlyImporting,!i.isComparison||!c.forcePercentComparison||i.panel!=c.panel.name||i.yAxis&&i.yAxis!=c.yAxis||this.setChartScale("percent"),(v=c.masterData)||(v=c.masterData=this.masterData=[]),b=v.length,i.data&&!i.data.useDefaultQuoteFeed?w({symbol:l,symbolObject:u,action:i.action})({quotes:i.data}):d.length?(h.endPoints=d[0].endPoints,h.loading=d[0].loading,k(this),a&&setTimeout((function(){a.call(f,null,h)}),0)):this.quoteDriver&&!1!==i.loadData?(S=(x=this.quoteDriver).makeParams(l,u,c),b&&(S.startDate=v[0].DT,S.endDate=this.isHistoricalMode()?v[v.length-1].DT:new Date),S.stx.isEquationChart(S.symbol)?e.fetchEquationChart(S,w(S)):(C=x.getQuoteFeed(S))&&e.ChartEngine.Driver.fetchData(4,C.engine,S,w(S))):(A="s",A+="ymbol",A+="Ch",A+="ange",k(this),null===i.action||d.length||f.dispatch(y?"symbolImport":A,{stx:f,symbol:l,symbolObject:u,action:i.action,id:h.id,parameters:i}),a&&a.call(this,null,h)),this.runAppend(r,arguments),h},e.ChartEngine.prototype.getSeries=function(t){var i,a,r,n,s;for(var o in a=(i=t.chart?t.chart:this.chart).series,E.F3j(),(r=t.symbolObject)||(r={symbol:t.symbol}),n=[],a)s=a[o],e.symbolEqual(r,s.parameters.symbolObject)&&n.push(s);return t.includeMaster&&e.symbolEqual(r,i.symbolObject)&&n.push({}),n},e.ChartEngine.prototype.modifySeries=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(r="mo",r+="difySeries",!this.runPrepend("modifySeries",arguments)&&i&&("string"==typeof t?(s=t,n=(o=i.chartName?this.charts[i.chartName]:this.chart).series[s]):(s=(n=t).id,o=this.charts[n.parameters.chartName]),n)){for(var b in e.extend(n.parameters,i,!0),this.getRendererFromSeries(s).modifyRenderer(i),l=n.parameters,o.seriesRenderers){u=(c=o.seriesRenderers[b]).params,d=c.seriesParams;for(var x=0;x<d.length;++x)if(p=d[x],m=(g=this.panels[p.panel])&&g.yAxis.name,p.id===n.id){!0===l.panel&&(l.panel=l.dependentOf||l.name),u.panel=l.panel,i.yAxis&&(i.yAxis instanceof e.ChartEngine.YAxis||(i.yAxis=new e.ChartEngine.YAxis(i.yAxis)),u.yAxis=i.yAxis),l.panel!=p.panel&&u.name==m?this.electNewPanelOwner(p.panel):(f=this.getYAxisByName(l.panel,u.name))&&l.yAxis&&f.name!==l.yAxis.name&&(f.name=this.electNewYAxisOwner(f)),l.field||(l.field=null),c.attachSeries(s,e.ensureDefaults(l,p)),l.field||(l.field=l.subField),delete l.subField,!l.isComparison||!o.forcePercentComparison||l.panel!=o.panel.name||n.parameters.yAxis&&l.yAxis.name!=o.yAxis.name||this.setChartScale("percent"),h=c;break}}if(E.F3j(),e.getFn("Drawing.updateSource")(this,n.parameters.symbol||s,null,n.parameters.panel),this.runAppend(r,arguments),!0!==a){y=h.getDependents(this);for(var S=0;S<y.length;S++)this.modifySeries(y[S].params.name,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0);(v=o.seriesRenderers[h.params.dependentOf])&&(v.params.yAxis==n.parameters.yAxis&&v.params.panel==h.params.panel||this.modifySeries(h.params.dependentOf,{panel:h.params.panel,yAxis:n.parameters.yAxis},!0))}return this.draw(),n}},e.ChartEngine.prototype.deleteSeries=function(t,e,i){var a,r,n,s,o,l,h,c;a="de",a+="l",a+="ete",a+="Series",this.runPrepend(a,arguments)||(r=(i=i||{}).action?i.action:"remove-series","object"==typeof t?(n=t.id,e=e||this.charts[t.parameters.chartName]):(n=t,e=e||this.chart),(s=e.series[n])&&(o=s.parameters.loadData,l=s.parameters.symbolObject,delete e.series[n],this.layout.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0}),h=this.getSeries({symbolObject:l,includeMaster:!0}),!1===o||h.length||this.cleanMasterData(l,e),(c=this.panels[s.parameters.panel])&&this.checkForEmptyPanel(c),this.createDataSet(),h.length||this.dispatch(this.currentlyImporting?"symbolImport":"symbolChange",{stx:this,symbol:l.symbol,symbolObject:l,id:n,action:r}),this.quoteDriver&&this.quoteDriver.updateSubscriptions(),this.runAppend("deleteSeries",arguments)))},e.ChartEngine.prototype.removeSeries=function(t,e){var i,a,r,n,s,o,l;if(i="obj",i+="e",i+="ct",!this.runPrepend("removeSeries",arguments)){for(var h in r=!1,typeof t===i?(a=t.id,e=e||this.charts[t.parameters.chartName]):(a=t,e=e||this.chart),e.seriesRenderers){n=e.seriesRenderers[h],o=(s=this.panels[n.params.panel])&&s.yAxis.name;for(var c=n.seriesParams.length-1;c>=0;c--)n.seriesParams[c].id===a&&(n.removeSeries(a),n.seriesParams.length<1&&(this.removeSeriesRenderer(n),n.params.name==o?this.electNewPanelOwner(n.params.panel):this.checkForEmptyPanel(n.params.panel)||(l=this.getYAxisByName(s,n.params.name))&&(l.name=l.studies[0]||l.renderers[1])),r=!0)}r||this.deleteSeries(a,e),this.resetDynamicYAxis(),this.draw(),E.F3j(),this.resizeChart(),this.runAppend("removeSeries",arguments)}},e.Comparison=e.Comparison||function(){},e.Comparison.initialPrice=100,e.Comparison.getInitialPrice=function(t){var i,a,r;if(t.initialComparisonPrice)return t.initialComparisonPrice;if(t.initialComparisonPrice=100,"number"==typeof(i=e.Comparison.initialPrice)&&(t.initialComparisonPrice=i),"string"==typeof i&&(t.series[i]||""===i)){a="Close",t.defaultPlotField&&(t.highLowBars||(a=t.defaultPlotField));for(var n=t.dataSet.length-t.scroll-1;n<t.dataSet.length;n++)if(r=t.dataSet[n]){if(r[i]&&r[i][a]){t.initialComparisonPrice=r[i][a];break}if(""===i&&r[a]){t.initialComparisonPrice=r[a];break}}}return t.initialComparisonPrice},e.Comparison.priceToPercent=function(t,e,i,a,r){var n,s=E;(n=t.comparisonBaseline)&&r in n&&(n=n[r]),n&&"object"==typeof n&&(n=n[e.defaultPlotField||"Close"]),n=n||i,s.J4P(110);var o=s.m92(1600,10,43,17);s.Q7y(7);var l=s.o1b(13e4,14e4);s.Q7y(3);var h=s.m92(5,9995,10);return Math.round((i-n)/n*o*l)/h},e.Comparison.percentToPrice=function(t,e,i,a,r){var n;return(n=t.comparisonBaseline)&&r in n&&(n=n[r]),n&&"object"==typeof n&&(n=n[e.defaultPlotField||"Close"]),n=n||1,E.X8U(),E.Q7y(111),E.o1b("1",i,100,n,0)},e.Comparison.priceToRelative=function(t,i,a,r,n){var s,o;return"ob","je","c","t",s=t.comparisonBaseline,o=e.Comparison.getInitialPrice(i),s&&n in s&&(s=s[n]),s&&"object"==typeof s&&(s=s[i.defaultPlotField||"Close"]),E.J4P(112),E.o1b(o,a,s||a)},e.Comparison.relativeToPrice=function(t,i,a,r,n){var s,o;return s=t.comparisonBaseline,o=e.Comparison.getInitialPrice(i),s&&n in s&&(s=s[n]),E.F3j(),s&&"object"==typeof s&&(s=s[i.defaultPlotField||"Close"]),E.J4P(112),E.o1b(s||1,a,o)},e.Comparison.createComparisonSegmentInner=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T=E;for(r in"L","o","w",a=[],i.series)(!(o=i.series[r].parameters).yAxis&&o.shareYAxis||o.yAxis===i.yAxis)&&a.push(o.symbol);for(var F in l=["Close","Open","High","Low","iqPrevClose"],h=t.chart.highLowBars,i.defaultPlotField&&!h&&l.unshift(i.defaultPlotField),c=l[0],u=t.layout.studies)if(d=u[F],n=t.panels[d.panel],s=d.getYAxis(t),n&&n.yAxis==s){for(r in d.outputMap)l.push(r);for(var P=0;P<=2;P++)l.push(d.name+"_hist"+(P||""));d.referenceOutput&&l.push(d.referenceOutput+" "+d.name)}for(var _ in t.plugins)if((p=t.plugins[_]).transformOutputs)for(r in p.transformOutputs)l.push(r);i.initialComparisonPrice=null,i.dataSegment=[],g=null,T.Q7y(55);var L=T.m92(13,10,129);m=i.dataSet.length-i.scroll-L,t.startComparisonsAtFirstVisibleBar&&(m+=1),T.F3j(),T.J4P(113);var I=T.o1b(9,3,16,51);f=i.maxTicks+I;for(var N=0;N<=f;N++){if(N==f&&(N=-1),T.J4P(1),(y=T.m92(N,m))<i.dataSet.length&&y>=0){if(b=(v=i.dataSet[y])[c],!g){if(0===b||null===b){if(N<0)break;continue}g=e.clone(v)}for(v.transform||(v.transform={cache:{},DT:v.DT,Date:v.Date}),g&&g[c]||!b||(g=e.clone(v)),t.comparisonBaseline=g,x=0;x<l.length;x++)((S=v[r=l[x]])||0===S)&&(v.transform[r]=i.transformFunc(t,i,S));for(x=0;x<a.length;x++)if(r=a[x],C=i.series[r],-1==N&&C&&C.parameters.isComparison)delete v.transform[r];else if(A=v[r])for(var O=0;O<l.length;O++)((D=A[l[O]])||0===D)&&((k=g[r]&&g[r][l[0]])||0===k||(g[r]||(g[r]={}),g[r][l[O]]=k=D*g[c]/v[c]),0!==k&&(w=g[c]||1,T.Q7y(114),M=T.o1b(w,D,k),v.transform[r]||(v.transform[r]={}),v.transform[r][l[O]]=i.transformFunc(t,i,M)));i.dataSegment.push(v)}else y<0&&i.dataSegment.push(null);if(N<0)break}},e.Comparison.priceFormat=function(t,e,i){var a,r,n=E;if("un","defin",n.F3j(),"e","d",null==i||isNaN(i))return"";if(a=e.yAxis.priceTick,r=t.internationalizer)a>=5?(n.J4P(10),i=r.percent.format(n.o1b(100,i))):a>=.5?(n.Q7y(10),i=r.percent1.format(n.m92(100,i))):a>=.05?(n.J4P(10),i=r.percent2.format(n.m92(100,i))):a>=.005?(n.Q7y(115),i=r.percent3.format(n.m92(68,i,"100"))):(n.J4P(10),i=r.percent4.format(n.m92(100,i)));else if(a>=5)i=i.toFixed(0)+"%";else if(a>=.5){n.J4P(51);var s=n.m92(12,3,2,6);i=i.toFixed(s)+"%"}else if(a>=.05){n.Q7y(73);var o=n.m92(4,16,2);n.J4P(16);n.m92(66487,70416,17);n.J4P(16);var l=n.m92(38205,47760,3);n.J4P(36);var h=n.o1b(16,7905,8,8,498019);n.Q7y(73);var c=n.o1b(1,468,442);n.J4P(116);n.m92(63997,17,68550,1);n.Q7y(72);var u=n.o1b(5011,11456,2,17,15);i=i.toFixed(o)+(682.76>=l?h<=c?9610:547!=u||516.8:"%")}else if(a>=.005){n.J4P(117);var d=n.o1b(12,8,1);n.J4P(1);var p=n.o1b(4,478);n.Q7y(7);var g=n.m92(161154,170107);n.Q7y(7);n.o1b(4840,9680);n.Q7y(118);var m=n.m92(7373,20,5,29492,147480);i=i.toFixed(d)+(p<=514.52?g<713.77?880.48:"%":m)}else{n.Q7y(66);var f=n.o1b(1,1,21,18);i=i.toFixed(f)+"%"}return 0===parseFloat(i)&&"-"==i.charAt(0)&&(i=i.substring(1)),i},e.ChartEngine.prototype.setComparison=function(t,i,a){var r,n,s,o,l=E;if("r","elativ","e","str","in","g",i||(i=this.chart),"string"==typeof i&&(i=this.charts[i]),(a||""===a)&&(e.Comparison.initialPrice=a),!0===t){if("per","cent",i.isComparison)return;t="percent"}switch(this.resetDynamicYAxis(),n=(r=i.panel.yAxis).priceFormatter==e.Comparison.priceFormat,t){case"relative":this.setTransform(i,e.Comparison.priceToRelative,e.Comparison.relativeToPrice),n&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null),r.whichSet="dataSegment",i.isComparison=!0;break;case"percent":if(this.setTransform(i,e.Comparison.priceToPercent,e.Comparison.percentToPrice),!n){r.originalPriceFormatter={func:r.priceFormatter},1225992196,534754449,s=2;for(var h=1;1225992196!==l.c0F(h.toString(),h.toString().length,36686);h++)r.priceFormatter=e.Comparison.priceFormat,s+=2;534754449!==l.o0j(s.toString(),s.toString().length,87770)&&(r.priceFormatter=e.Comparison.priceFormat)}r.whichSet="dataSegment",i.isComparison=!0;break;default:if(this.unsetTransform(i),n){-1634506056,-849254152,o=2;for(var c=1;-1634506056!==l.o0j(c.toString(),c.toString().length,40020);c++)r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:null,r.originalPriceFormatter=null,o+=2;-849254152!==l.o0j(o.toString(),o.toString().length,89030)&&(r.priceFormatter=r.originalPriceFormatter?r.originalPriceFormatter.func:1,r.originalPriceFormatter=1)}r.whichSet="dataSet",i.isComparison=!1}},e.ChartEngine.prototype.setChartScale=function(t){var i,a,r;i=this.chart,t||(t="linear"),(a={percent:!0,relative:!0})[t]?this.setComparison(t,i,e.Comparison.initialPrice):a[this.layout.chartScale]&&this.setComparison(!1,i),r=this.layout.chartScale!==t,this.layout.chartScale=t,i.canvas&&this.draw(),r&&this.changeOccurred("layout")}},v=t=>{var e,i,a=E;function r(t){if("undefined"!=typeof html2canvas)return i=html2canvas,t();if("undefined"!=typeof requirejs)try{return requirejs(["html2canvas.min.js"],(function(e){return i=e,t()}))}catch(t){"Require loading has failed, attempting to load html2canvas"," manually.",console.warn("Require loading has failed, attempting to load html2canvas manually.")}e.loadScript(function(){var t,i,r;if(a.X8U(),e.Share.html2canvasLocation)return e.Share.html2canvasLocation;t=document.getElementsByTagName("script");for(var n=0;n<t.length;n++)if((i=t[n]).src&&i.src.indexOf("share.js")>-1)return r="t",r+="h",r+="irdpa",r+="rty/",i.src.replace(/standard\/share\.js/,"")+r;return"js/thirdparty/"}()+"html2canvas.min.js",(function(){return i=html2canvas,t()}))}function n(t,e,r){var n,o,l,h,c,u,d;if("sv","g",e||(e={}),[],"ciq-no-share",n=t.container.ownerDocument.querySelector("body"),e.hide&&e.hide instanceof Array){o=e.hide.join(", "),l=n.querySelectorAll(o);for(var p=0;p<l.length;p++)l[p].classList.add("ciq-no-share")}for(n.classList.add("sharing"),t.draw(),h=t.chart.container.getElementsByTagName("svg"),c=[],a.Q7y(12),u=a.o1b("0",0),a.F3j();u<h.length;u++)d=h[u],c.push(d.innerHTML),s(d);i(t.chart.container,{allowTaint:!1,logging:!1,width:e.width||null,height:e.height||null,backgroundColor:e.background||null,useCORS:!0}).then((function(t){for(r&&r(null,e.data?t.toDataURL("image/png"):t),u=0;u<h.length;u++)h[u].innerHTML=c[u];a.X8U(),n.classList.remove("sharing")})).catch((function(t){for(r&&r(t),a.X8U(),u=0;u<h.length;u++)h[u].innerHTML=c[u];n.classList.remove("sharing")}))}function s(t){var e;if("te",a.X8U(),"xt-a","li","gn","font-weig","h","t",t.style)for(var i in e=getComputedStyle(t),["alignment-baseline","dominant-baseline","fill","fill-opacity","font-family","font-size","font-variant","font-weight","text-align","text-anchor"].forEach((function(i){!t.style[i]&&e[i]&&(t.style[i]=e[i])})),t.children)s(t.children[i])}(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Share=e.Share||function(){},e.Share.fullChart2PNG=function(t,e,s){if(t&&t.chart){if("undefined"==typeof html2canvas)return r((function(){return a.X8U(),n(t,e,s)}));a.F3j(),i=html2canvas,n(t,e,s)}},e.Share.createImage=function(t,i,r){var n,s,o,l,h,c,u,d,p,g;n="i",n+="m",n+="g",s="obje",s+="ct",o=[].slice.call(arguments),r=o.pop(),a.X8U(),null!==i&&typeof i==s||(i={widthPX:o[1],heightPX:o[2],imageType:o[3]}),l=i.widthPX,h=i.heightPX,c=i.imageType,u=t.chart.canvas.height,d=t.chart.canvas.width,t.chart.canvas.style.height&&(u=e.stripPX(t.chart.canvas.style.height),d=e.stripPX(t.chart.canvas.style.width)),l&&h?(u=h,d=l):h?d=t.chart.canvas.width*(u/t.chart.canvas.height):l&&(d=l,u=t.chart.canvas.height*(l/t.chart.canvas.width)),p=c?"image/"+c:"image/png",(g=document.createElement(n)).onload=function(){a.X8U(),e.Share.fullChart2PNG(t,{image:this,width:d,height:u,hide:i.hide},(function(t,e){if(t)a.J4P(1),console.warn(a.o1b(t,"Error producing canvas snapshot: "));else try{r(e.toDataURL(p))}catch(t){"Safari devices do"," not ","handle CORS enabled imag","es. Using the charts' canvas as a fallback.",console.warn("Safari devices do not handle CORS enabled images. Using the charts' canvas as a fallback."),r(g.src)}}))},g.src=t.chart.canvas.toDataURL(p)},e.Share.uploadImage=function(t,i,r,n){r||(r={}),a.X8U(),r.image=t,e.postAjax(i,JSON.stringify(r),(function(t,e){200==t?(a.F3j(),n(null,e)):n(t,null)}))||n(0,null)},a.F3j(),e.Share.shareChart=function(t,i,r){e.Share.createImage(t,{},(function(n){var s,o,l,h,c;s=e.uniqueID(),o="https://share.chartiq.com",a.Q7y(15),l=a.m92(o,s,"/upload/"),i&&(i.host&&(o=i.host),i.path&&(l=o+i.path+"/"+s)),h=t.getStartDateOffset(),c={id:s,image:n,config:{layout:t.exportLayout(),drawings:t.exportDrawings(),xOffset:h,startDate:t.chart.dataSegment[h].Date,endDate:t.chart.dataSegment[t.chart.dataSegment.length-1].Date,id:s,symbol:t.chart.symbol}},e.Share.uploadImage(n,l,c,(function(t,i){null!==t?e.alert("error sharing chart: ",t):(a.Q7y(1),r(a.o1b(i,o)))}))}))}},b=t=>{var e,i=E;i.X8U(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.setRange=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O;function H(t){return t&&0===d?(o.scroll=w,u.setCandleWidth(M),u.layout.interval=T,u.layout.periodicity=F,u.layout.timeUnit=P,void(a&&a(t))):++d>10?(console.log("CIQ.ChartEngine.setRange(): Too many loads (10) from server. Stopping. Check periodicity logic."),void z()):void z()}function R(t,a,r,n,s,o){var l,h;return l=0,i.Q7y(7),h=i.o1b(a,t),e.ChartEngine.isDailyInterval(r)?l="month"==r?h/e.MONTH/n:"week"==r?h/e.WEEK/n:h/e.DAY/n:isNaN(r)||("millise","cond","millisecond"==s?(i.J4P(22),l=i.o1b(h,n,r)):l="second"==s?h/e.SECOND/(n*r):h/e.MINUTE/(n*r)),Math.round(l)}function z(e){var r,n,c,d,p,g,m,f,y,v,b,x,S,C,A,D;if("tod","ay","d","a","y","d","a","y",void 0===e&&(e=null),i.Q7y(2),r=i.o1b("0",1),n=0,c=new Date,d=t.base,p=t.periodicity,g=u.layout,t.goIntoFuture&&(!o.masterData.length||l>o.masterData[o.masterData.length-1].DT)&&(m=o.masterData.length?o.masterData.pop():{DT:l},f=u.doCleanupGaps([m,{DT:h}],o,{cleanupGaps:"gap",noCleanupDates:!0}),u.setMasterData(o.masterData.concat(f),o,{noCleanupDates:!0}),u.createDataSet(null,null,{appending:!0})),v=(y=o.dataSet).length,y&&0!==v){if("day"===d&&p&&"day"===p.interval)r=v<(x=t.multiplier)?0:v-x,i.J4P(57),n=i.m92("1",v);else if("today"===d&&y[v-1].DT.getDate()<c.getDate()){(S=new Date(y[v-1].DT.getTime())).getTime(),b=0;for(var k=v-1;k>=0;k--)if(y[k]&&y[k].DT.getDate()!=S.getDate()){S=new Date(+y[k+1].DT),i.J4P(6),b=i.o1b(k,"1");break}r=b,i.J4P(7),n=i.o1b(1,v)}else r="all"!=t.base&&(l.getTime()>=y[0].DT.getTime()||t.goIntoPast)?u.tickFromDate(l,o,null,!0):0,"all"!=t.base&&(h.getTime()<=y[v-1].DT.getTime()||t.goIntoFuture)?(n=u.tickFromDate(h,o))>v-1&&n--:(i.J4P(57),n=i.m92("1",v));if(i.Q7y(17),(C=i.o1b(1,r,n))<1)a&&a(e);else{for(var w in A=t.padding||0,n<v-1&&(A=0),D=(o.width-A)/C,u.setCandleWidth(D,o),i.J4P(119),o.scroll=i.o1b("1",v,n,0,C),i.J4P(35),u.micropixels=i.m92(0,"1"),u.panels)u.calculateYAxisMargins(u.panels[w].yAxis);t.dontSaveRangeToLayout?delete g.range:(delete t.chart,delete g.setSpan,g.range=t),u.draw(),u.changeOccurred("layout"),s||u.dispatch("periodicity",{stx:u,differentData:_,prevPeriodicity:{interval:T,periodicity:F,timeUnit:P}}),a&&a(e)}}else a&&a(e)}if(r="st",r+="r",r+="ing",n="str",n+="i",n+="ng",e.isEmpty(t)&&(t={dtLeft:arguments[0],dtRight:arguments[1],padding:arguments[2],chart:arguments[3]},a=arguments[4]),this.staticRange&&(t.goIntoPast=t.goIntoFuture=!0),i.F3j(),t.chart||(t.chart=this.chart),void 0===t.padding&&(t.padding=0),s=!1,o=t.chart,l=typeof t.dtLeft===n?new Date(t.dtLeft):t.dtLeft,h=new Date,t.dtRight&&(h=typeof t.dtRight===r?new Date(t.dtRight):t.dtRight),l||(c=this.standardMarketIterator(h,null,o),l=c.previous(o.maxTicks),t.periodicity||(s=!0)),o.inflectionPoint=l,this.layout.range={dtLeft:l,dtRight:h},u=this,d=0,this.quoteDriver){if(s)p=this.layout.interval,m=this.layout.timeUnit,g=this.layout.periodicity;else if(t.periodicity)p=(f=e.cleanPeriodicity(t.periodicity.period,t.periodicity.interval,t.periodicity.timeUnit)).interval,m=f.timeUnit,g=f.period;else if(y=h.getTime()-l.getTime(),this.autoPickCandleWidth.turnOn){S=0,S=this.autoPickCandleWidth.candleWidth?this.autoPickCandleWidth.candleWidth:this.chart.barsHaveWidth?5:2,C=o.width/S,p=(A=this.dynamicRangePeriodicityMap)[0].interval,g=1;for(var j=0;j<A.length;j++){if((k=y/A[j].rangeInMS)<C){A[j-1]?(p=A[j-1].interval,m=A[j-1].timeUnit,i.J4P(10),g=Math.ceil(i.m92(C,D))):(p=A[j].interval,m=A[j].timeUnit,g=1);break}D=k}}else{v=this.staticRangePeriodicityMap,b=null;for(var U=0;U<v.length;U++)if(y/(x=v[U]).rangeInMS<1.001){b=x;break}p=b.interval,g=b.periodicity,m=b.timeUnit}w=this.chart.scroll,M=this.layout.candleWidth,T=this.layout.interval,F=this.layout.periodicity,P=this.layout.timeUnit,this.chart.scroll=this.chart.maxTicks=R(h.getTime(),l.getTime(),p,g,m,this.dontRoll),this.layout.candleWidth=this.chart.width/this.chart.maxTicks,_=this.needDifferentData({period:g,interval:p,timeUnit:m}),Object.keys(this.chart.endPoints).length&&(this.chart.endPoints.begin>l||this.chart.endPoints.end<h)&&(_=!0),!this.chart.masterData||!this.chart.masterData.length||_||t.forceLoad?(this.layout.interval=p,this.layout.periodicity=g,this.layout.timeUnit=m,this.layout.timeUnit||(L="mi",L+="n",L+="u",L+="te",E="s",E+="eco",E+="n",E+="d",e.ChartEngine.isDailyInterval(this.layout.interval)?this.layout.timeUnit=null:this.layout.interval==E?this.layout.timeUnit="second":"tick"!=this.layout.interval&&(this.layout.timeUnit=L)),I={symbol:o.symbol,symbolObject:o.symbolObject,chart:o,nodraw:!0},"tick"==this.layout.interval&&(I.startDate=l,I.endDate=h),this.displayInitialized||(I.initializeChart=!0),"month"!=(N={symbol:o.symbol,symbolObject:o.symbolObject,interval:this.layout.interval}).interval&&"week"!=N.interval||this.dontRoll||(N.interval="day"),O=Math.max(this.quoteDriver.getQuoteFeed(N).behavior.bufferSize+50,200),c=this.standardMarketIterator(l,null,o),I.startDate=new Date(c.previous(O).getTime()),c=this.standardMarketIterator(h,null,o),I.endDate=new Date(c.next(O).getTime()),I.endDate<Date.now()&&(this.isHistoricalModeSet=!0),this.clearCurrentMarketData(this.chart),clearTimeout(this.streamParameters.timeout),this.quoteDriver.newChart(I,H)):(this.layout.interval==p&&this.layout.periodicity==g&&this.layout.timeUnit==m&&this.chart.dataSegment&&this.chart.dataSegment[0]&&this.chart.dataSegment[0].DT==o.inflectionPoint||(this.layout.interval=p,this.layout.periodicity=g,this.layout.timeUnit=m,this.createDataSet()),H())}else z()},e.ChartEngine.prototype.setSpan=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if(r="to",r+="d",r+="a",r+="y",n="wee",n+="k",s=arguments[0],o=arguments[1],l=arguments[2],h=arguments[3],"object"==typeof t?(s=t.period?t.period:t.multiplier?t.multiplier:1,o=t.interval?t.interval:t.base?t.base:t.span?t.span:t.period,l=t.padding,h=t.chart):(t={period:s,interval:o,padding:l,chart:h},a=arguments[5]),h||(h=this.chart),c=h.market,"all"==(o=o.toLowerCase()))return t.dontSaveRangeToLayout=!0,void this.displayAll(t,a);function A(t){return t.setHours(0),t.setMinutes(0),i.X8U(),t.setSeconds(0),t.setMilliseconds(0),t}function D(t,e){return y?(7,e?t.setHours(t.getHours()+7):(t.setHours(t.getHours()-7),c.isMarketDate(t)||t.setDate(t.getDate()-2)),t):t}d=o,p=1,"today"==o?d="day":"year"==o&&(d="month",p=12),g=e.shallowClone(t),f=(m={begin:c.marketZoneNow(),interval:d,period:p}).begin,y=e.Market.Symbology.isForexSymbol(h.symbol),"ytd"===o?((f=A(f)).setMonth(0),f.setDate(1)):"month"===o?(f=A(new Date)).setMonth(f.getMonth()-s):"year"===o?(f=A(new Date)).setFullYear(f.getFullYear()-s):o===n?(f=A(new Date)).setDate(f.getDate()-7*s):"day"===o&&1==s&&c.isMarketDay()?(v=f.getHours(),b=f.getMinutes(),x=f.getSeconds(),S=f.getMilliseconds(),(f=(u=c.newIterator(m)).previous()).setHours(v,b,x,S),f=c._convertFromMarketTZ(f)):o===r?(m.begin=D(f,!0),u=c.newIterator(m),(c.isOpen()||c.getPreviousOpen().getDate()==f.getDate())&&u.next(),D(f=u.previous()),g.goIntoFuture=!0,g.dtRight=new Date(+f),g.dtRight.setDate(f.getDate()+1),g.dtRight=c._convertFromMarketTZ(g.dtRight),y||(f.setHours(u.market.zopen_hour),f.setMinutes(u.market.zopen_minute),f.setSeconds(0)),f=c._convertFromMarketTZ(f)):("day"==o&&(m.begin=D(f,!0)),u=c.newIterator(m),1==s&&s++,i.Q7y(57),f=u.previous(i.m92("1",s)),"day"==o&&(f=c._convertFromMarketTZ(D(f)))),g.dtLeft=f,g.maintainPeriodicity&&(g.periodicity={},g.periodicity.interval=this.layout.interval,g.periodicity.period=this.layout.periodicity),h.spanLock=!1,g.dontSaveRangeToLayout=!0,C=this,this.setRange(g,(function(e){C.layout.setSpan=t,C.changeOccurred("layout"),"today"==o&&(h.spanLock=!0),a&&a(e)}))},e.ChartEngine.prototype.getSpanCandleWidth=function(t){var e,a,r,n,s;if("y","e","a","r",t&&t.base&&t.multiplier){e=parseFloat(t.multiplier),a=t.base,r=new Date,n=new Date,"year"==a?n.setFullYear(n.getFullYear()-e):"month"==a?n.setMonth(n.getMonth()-e):"day"==a?n.setDate(n.getDate()-e):"week"==a?n.setDate(n.getDate()-7*e):"YTD"==a&&(i.J4P(2),n.setMonth(i.o1b("0",1)),n.setDate(1)),i.Q7y(120);var o=i.m92(4,4,2,2,59);i.J4P(55);var l=i.m92(47,7,269);i.Q7y(121);var h=i.o1b(13,34,18,6);return s=(r.getTime()-n.getTime())/1e3/o/l/("24"|h),i.Q7y(122),s=i.m92(s,7,"5"),this.chart.width/s}},e.ChartEngine.prototype.displayAll=function(t,a){var r,n,s,o;r=2;for(var l=1;-1386746373!==i.c0F(l.toString(),l.toString().length,9468);l++){var{chart:h,layout:c}=this;(t||t.chart)&&(h=t.chart),n=this,r+=2}if(1977184927!==i.c0F(r.toString(),r.toString().length,59843)){var{chart:h,layout:c}=this;t&&t.chart&&(h=t.chart),n=this}function u(t){t||n.quoteDriver.loadAll(h,d)}function d(){var r;h.masterData&&h.masterData.length&&((r=e.clone(t)).dtLeft=h.endPoints.begin,r.dtRight=h.endPoints.end,i.F3j(),r.periodicity={},r.periodicity.interval=c.interval,r.periodicity.period=c.periodicity,r.periodicity.timeUnit=c.timeUnit,n.setRange(r,(function(e){for(var i in n.layout.setSpan={base:t.base,multiplier:t.multiplier},n.changeOccurred("layout"),n.panels)n.calculateYAxisMargins(n.panels[i].yAxis);n.draw(),a&&a(e)})))}this.quoteDriver?(s=t.maintainPeriodicity?{period:c.periodicity,interval:c.interval,timeUnit:c.timeUnit}:{period:1,interval:"month",timeUnit:null},s=t.periodicity?t.periodicity:s,s=e.cleanPeriodicity(s.period,s.interval,s.timeUnit),o=this.needDifferentData(s),this.layout.periodicity=s.period,this.layout.interval=s.interval,this.layout.timeUnit=s.timeUnit,t.forceLoad||o?(this.clearCurrentMarketData(this.chart),this.quoteDriver.newChart({nodraw:!0,symbol:this.chart.symbol,symbolObject:this.chart.symbolObject,chart:this.chart,initializeChart:!0,fetchMaximumBars:!0},u)):h.moreAvailable||!h.upToDate?u():(this.createDataSet(),d())):d()}},x=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.importLayout=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,I,N,O,H,R,z,j,U,B=E;if(B.X8U(),t){for(var V in a=this,r=[],"object"!=typeof i&&(i={managePeriodicity:arguments[1],preserveTicksAndCandleWidth:arguments[2]}),n=this.layout,s=e.shallowClone(n),o=i.managePeriodicity,l=i.cb,h=i.seriesCB,c=i.noDataLoad,u=i.preserveTicksAndCandleWidth,d=null,this.exportDrawings&&(d=this.exportDrawings(),this.abortDrawings()),this.currentlyImporting=!0,n.studies)p="St",p+="udies.removeStudy",g=n.studies[V],e.getFn(p)(this,g);if(this.overlays={},m=e.shallowClone(this.panels),this.panels={},f=e.clone(t),n.periodicity=s.periodicity,n.interval=s.interval,n.timeUnit=s.timeUnit,n.setSpan=s.setSpan,n.range=s.range,u){y=1339988204,v=-2101224329,b=2;for(var W=1;B.o0j(W.toString(),W.toString().length,51468)!==y;W++)n.candleWidth=s.candleWidth,b+=2;B.c0F(b.toString(),b.toString().length,9643)!==v&&(n.candleWidth=s.candleWidth)}else n.candleWidth||(n.candleWidth=8);for(S in this.setCandleWidth(n.candleWidth),n.flipped&&this.flipChart(n.flipped),D=function(t,e){return B.F3j(),t.index<e.index?-1:1},x=f.panels)"index"in x[S]||(D=null),(C=x[S]).name=S,r.push(C);if(n.panels={},k=null,r.length>0){D&&r.sort(D);for(var Q=0;Q<r.length;++Q)A=(C=r[Q]).yAxis?new e.ChartEngine.YAxis(C.yAxis):null,this.stackPanel(C.display,C.name,C.percent,C.chartName,A),C.soloing&&(k=this.panels[C.name])}for(var Y in e.isEmpty(x)&&(w="ch",w+="art",M="ch",M+="a",M+="rt",this.stackPanel(M,"chart",1,w)),this.resizeCanvas(),m)if(T=m[Y],F=this.panels[Y]){for(var q in this.container.removeChild(F.holder),T.handle&&this.container.removeChild(T.handle),{holder:!0,subholder:!0,display:!0,icons:!0})F[q]=T[q];this.configurePanelControls(F),T.chart.panel==T&&(T.chart.panel=F)}else this.privateDeletePanel(T);for(var X in this.chart.panel=this.panels.chart,G(this.panels),e.extend(n,e.clone(f)),n.headsUp=e.clone(n.headsUp),P=e.clone(n.studies),delete n.studies,P)_=P[X],(L=e.getFn("Studies.addStudy")(this,_.type,_.inputs,_.outputs,_.parameters,_.panel))&&(_.disabled&&L.toggleDisabledState(this),_.signalData&&(L.signalData=_.signalData,I=this.panels[L.panel],this.checkForEmptyPanel(I,!0,L)&&(I.hidden=!0,I.percent=0)));if(this.extendedHours&&this.extendedHours.prepare(n.extended,n.marketSessions),void 0===n.chartType&&(n.chartType="line"),this.setMainSeriesRenderer(),k&&this.panelSolo(k),this.adjustPanelPositions(),G(this.panels),this.storePanels(),!c){if(f.symbols&&f.symbols.length)return N={chart:this.chart},!u&&o&&f.range&&Object.keys(f.range).length?N.range=f.range:!u&&o&&f.setSpan&&Object.keys(f.setSpan).length?N.span=f.setSpan:o&&f.interval?N.periodicity={interval:f.interval,period:f.periodicity,timeUnit:f.timeUnit}:N.periodicity={interval:s.interval,period:s.periodicity,timeUnit:s.timeUnit},O=f.symbols[0].symbolObject||f.symbols[0].symbol,void this.loadChart(O,N,(function(t){var i,r;if(B.X8U(),!t){for(var n,s=1;s<f.symbols.length&&a.addSeries;++s)(n=f.symbols[s]).parameters||(n.parameters={}),i=e.clone(n.parameters),this.panels[i.panel]?a.addSeries(n.id,i,J):(r='" could not b',r+='e imported due to a missing corresponding panel "',console.warn('Warning: Series "'+n.id+r+i.panel+'"'));f.chartScale&&a.setChartScale(f.chartScale)}Z(t),l&&l.apply(null,arguments)}));if(o){if(H="d",H+="a",H+="y",!u&&this.setRange){if((R=f.range)&&Object.keys(R).length&&this.chart.symbol)return void this.setRange(R,(function(){Z(),l&&l()}));if(f.setSpan&&Object.keys(f.setSpan).length&&this.chart.symbol)return void this.setSpan(f.setSpan,(function(){Z(),B.F3j(),l&&l()}))}return z=f.interval,j=f.periodicity,U=f.timeUnit,isNaN(j)&&(j=1),z||(z=H),void this.setPeriodicity({period:j,interval:z,timeUnit:U},(function(){B.F3j(),Z(),l&&l()}))}}o&&(n.periodicity=f.periodicity,n.interval=f.interval,n.timeUnit=f.timeUnit,n.setSpan=f.setSpan),this.createDataSet(),u||this.home(),Z(),l&&l()}else i.cb&&i.cb();function Z(t){var e,i,r;function n(){a.createDataSet(),G(a.panels),a.calculateYAxisPositions(),a.draw()}if("l","ay","out",d&&a.importDrawings(d),a.currentlyImporting=!1,!t){for(var s in r=[],a.chart.series){if("s","t","ud","y",!a.removeSeries)break;"study"==(i=a.chart.series[s]).parameters.bucket&&(e=!0,a.removeSeries(i),r.push(i))}for(var o=0;o<r.length;o++)i=r[o],a.addSeries(i.id,i.parameters,n);e||a.draw(),a.updateListeners("layout"),a.changeOccurred("layout"),B.F3j()}}function J(){a.calculateYAxisPositions(),G(a.panels),h&&h()}function G(t){for(var e,i=0;i<r.length;i++)"y","axisRH","S",n(e=r[i],"yaxisLHS"),n(e,"yaxisRHS");function n(e,i){var a,r,n,o;if(e[i]&&e[i].length&&(B.X8U(),a=t[e.name])){r=a[i],n=new Array(r.length);for(var l=0;l<r.length;l++)(o=e[i].indexOf(r[l].name))>-1?n[o]=r[l]:n.push(r[l]);n.length&&(a[i]=n.filter(s))}}function s(t){return B.X8U(),!!t}a.chart.yAxis=a.chart.panel.yAxis}},e.ChartEngine.prototype.exportLayout=function(t){var i,a,r,n,s,o;for(var l in E.F3j(),i={},this.layout)"s","tu","die","s","drawin","g","pa","nel","s","studies"!=l&&"panels"!=l&&"drawing"!=l?i[l]=e.clone(this.layout[l]):"studies"==l?i.studies={}:"panels"==l&&(i.panels={});for(var h in a=0,this.panels)!1!==(r=this.panels[h]).exportable&&((n=i.panels[h]={}).percent=r.percent,n.display=r.display,n.chartName=r.chart.name,n.soloing=r.soloing,n.index=a++,n.yAxis={name:r.yAxis.name,position:r.yAxis.position},r.yaxisLHS&&(n.yaxisLHS=c(r.yaxisLHS)),r.yaxisRHS&&(n.yaxisRHS=c(r.yaxisRHS)));function c(t){var e;e=[];for(var i=0;i<t.length;i++)e.push(t[i].name);return E.X8U(),e}for(var u in this.layout.studies)s=i.studies[u]={},o=this.layout.studies[u],s.type=o.type,s.inputs=e.clone(o.inputs),s.outputs=e.clone(o.outputs),s.panel=o.panel,s.parameters=e.clone(o.parameters),s.disabled=o.disabled,o.signalData&&(o.signalData.cloneForExport?s.signalData=o.signalData.cloneForExport():s.signalData=e.clone(o.signalData));return t?(i.symbols=this.getSymbols({"include-parameters":!0,"exclude-studies":!0,"exclude-generated":!0}),i.symbols.length&&i.symbols[0].symbolObject&&i.symbols[0].symbolObject.static&&delete i.symbols[0].symbolObject.static):delete i.symbols,i},e.ChartEngine.prototype.importPreferences=function(t){e.extend(this.preferences,t),t.timeZone&&this.setTimeZone(this.dataZone,t.timeZone),t.language&&e.I18N&&e.I18N.localize(this,t.language),this.changeOccurred("preferences")},e.ChartEngine.prototype.exportPreferences=function(){return E.F3j(),this.preferences}},S=t=>{var e,i,a=E;a.X8U(),e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,e.ChartEngine&&(e.ChartEngine.prototype.rightClickOverlay=function(t,e){var i;this.runPrepend("rightClickOverlay",arguments)||(a.X8U(),(i=this.overlays[t]).editFunction?i.editFunction(e):this.removeOverlay(t),this.runAppend("rightClickOverlay",arguments))},e.ChartEngine.prototype.addOverlay=function(t){this.runPrepend("addOverlay",arguments)||(a.F3j(),this.overlays[t.name]=t,this.runAppend("addOverlay",arguments))},e.ChartEngine.prototype.removeOverlay=function(t){var i,r,n,s,o,l;if(!this.runPrepend("removeOverlay",arguments)){if(i=this.overlays[t]){for(var h in this.overlays){r=this.overlays[h],n=["Field"],e.Studies&&(n=e.Studies.getFieldInputs(r));for(var c=0;c<n.length;c++)i.outputMap[r.inputs[n[c]]]&&this.removeOverlay(r.name)}this.cleanupRemovedStudy(i),this.panels[i.panel],delete this.overlays[t],this.checkForEmptyPanel(i.panel)}this.currentlyImporting||(this.displaySticky(),this.createDataSet(),this.changeOccurred("layout")),s=125204987,o=167530884,l=2;for(var u=1;a.o0j(u.toString(),u.toString().length,2132)!==s;u++)this.resetDynamicYAxis(),l+=2;a.c0F(l.toString(),l.toString().length,66284)!==o&&this.resetDynamicYAxis(),this.runAppend("removeOverlay",arguments)}},e.ChartEngine.prototype.cleanupRemovedStudy=function(t){if(t){for(var i in t.study.removeFN&&t.study.removeFN(this,t),this.plugins)i.indexOf("{"+t.id+"}")>-1&&delete this.plugins[i];t.removeSignals&&t.removeSignals(),this.layout.studies&&delete this.layout.studies[t.name],this.chart.state.studies.sorted=null,delete this.overlays[t.name];var{sd:a}=this.repositioningAnchorSelector||{};if(a&&a===t){this.repositioningAnchorSelector=null;var{anchorHandles:r}=this.controls;r&&r[t.uniqueId]&&(r[t.uniqueId].highlighted=!1,e.Studies.displayAnchorHandleAndLine(this,t,this.chart.dataSegment))}e.Studies&&e.Studies.removeStudySymbols(t,this),this.quoteDriver&&this.quoteDriver.updateSubscriptions()}}),e.Studies=e.Studies||function(){},e.Studies.DEFAULT_INPUTS={Period:14},e.Studies.DEFAULT_OUTPUTS={Result:"auto"},e.Studies.impliedVolatilityAvailable=!1,e.Studies.sortForProcessing=t=>{var e,i;e=[],(i=t.layout.studies)&&function e(i,r){i.forEach((i=>{var n;a.X8U(),-1==r.indexOf(i)&&((n=i.getDependents(t)).length&&e(n,r),r.unshift(i))}))}(Object.values(i),e),a.F3j();for(var r=1;681033701!==a.c0F(r.toString(),r.toString().length,4795);r++)return e;return a.o0j(2..toString(),2..toString().length,39120),e},e.Studies.StudyDescriptor=function(t,i,a,r,n,s){var o;this.name=t,this.disabled=!1,this.type=i,this.panel=a,this.inputs=r,this.outputs=n,this.parameters=s,this.outputMap={},this.min=null,this.max=null,this.startFrom=0,this.subField="Close",(o=e.Studies.studyLibrary[i])||("ch","ar","t",o={},("chart"==a||!a&&s&&"chart"==s.chartName)&&(this.overlay=!0)),void 0===o.inputs&&(o.inputs=e.clone(e.Studies.DEFAULT_INPUTS)),void 0===o.outputs&&(o.outputs=e.clone(e.Studies.DEFAULT_OUTPUTS)),this.study=o,this.libraryEntry=o},e.Studies.StudyDescriptor.prototype.toggleDisabledState=function(t){var{disabled:e,study:i,signalData:a}=this,{chart:r}=t;this.disabled=e=!e,e?r.customChart&&r.customChart.owner===this.name&&i.calculateFN(t,this):(this.startFrom=0,this.error=null,i&&i.calculateFN&&i.calculateFN(t,this),this.flagSignals&&this.flagSignals()),a&&a[e?"hide":"show"](),t.changeOccurred("layout"),t.draw()},e.Studies.StudyDescriptor.prototype.getYAxis=function(t){var e,i,r;return e=this.yAxis,a.F3j(),this.parameters&&(i=this.parameters.yaxisDisplayValue),e||(r=t.panels[this.panel])&&(e=t.getYAxisByName(r,i)||t.getYAxisByName(r,this.name)||r.yAxis),e||(e=t.getYAxisByName(t.chart.panel,i)||t.chart.panel.yAxis),e},e.Studies.StudyDescriptor.prototype.getContext=function(t){return t.chart.context},e.Studies.StudyDescriptor.prototype.getDependents=function(t,i){var r,n,s;for(var o in r=[],a.F3j(),t.layout.studies)if((n=t.layout.studies[o])!=this){s=e.Studies.getFieldInputs(n);for(var l=0;l<s.length;l++)if(n.inputs[s[l]].includes(this.name)){if(i&&n.parameters&&n.parameters.panelName)continue;r.push(n),r=r.concat(n.getDependents(t,i));break}}return r},e.Studies.StudyDescriptor.prototype.undraggable=function(t){var e;if(this.signalData)return!0;if(e=this.study.attributes){if(e.panelName&&e.panelName.hidden)return!0;if(e.yaxisDisplayValue&&e.yaxisDisplayValue.hidden)return!0}return!1},e.Studies.StudyDescriptor.prototype.appendFutureTicks=function(t,e){var i,r,n,s;if((i=t.chart.scrubbed).length){for(a.F3j(),r=t.standardMarketIterator(i[i.length-1].DT),n=e.length-1;n>=0;n--){for(var o in s=e[n])if(s[o]||0===s[o]){n=-1;break}if(-1==n)break;e.pop()}for(n=0;n<e.length;n++)(s=e[n]).DT||(s.DT=r.next()),s.displayDate||t.setDisplayDate(s),s.futureTick=!0,i.push(s)}},e.Studies.generateID=function(t,i,r,n,s){var o,l,h,c,u,d;if(o=e.Studies.studyLibrary[i],a.J4P(15),l=a.m92("","",s||i),o&&o.customRemoval)return l;if(!e.isEmpty(r)){for(var p in h=!0,r)"fie","l","d",c="Anchor Sel",["id","display","Shading",c+="ector"].includes(p)||"field"!=(u=r[p])&&(u=u.toString(),void 0!==e.Studies.prettify[u]&&(u=e.Studies.prettify[u]),h?(h=!1,l+=" ("):u&&(l+=","),l+=u);h||(l+=")")}if(n&&0===n.indexOf(l))return n;if(t.layout.studies&&t.layout.studies[l])for(var g=2;g<50;g++)if(a.J4P(15),d=a.o1b(l,g,"-"),!t.layout.studies[d]){l=d;break}return l},e.Studies.DialogHelper=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P;function _(t){var e,a,r;e={},a=t.defaults,r={name:t.name,heading:i.translateIf(t.label),defaultValue:a[0],value:t.value,options:e,type:"select"};for(var n=0;n<a.length;n++)e[a[n]]=i.translateIf(a[n]);return void 0!==t.color&&(r.defaultColor=i.defaultColor,r.color=t.color),r}function L(t){var e;if("alias"==T)for(var r in e=1,i.panels){if(r==t)return r,"Panel "+e.toString();e++}return a.X8U(),t}for(var E in"undefin","ed",i=this.stx=t.stx,r=this.sd=t.sd,this.name=r?r.type:t.name,this.signal=1,this.inputs=[],this.outputs=[],this.parameters=[],void 0===(n=this.libraryEntry=r?r.study:e.Studies.studyLibrary[t.name]).inputs&&(n.inputs=e.clone(e.Studies.DEFAULT_INPUTS)),void 0===n.outputs&&(n.outputs=e.clone(e.Studies.DEFAULT_OUTPUTS)),o=(s=r&&i.panels[r.panel]?i.panels[r.panel]:i.chart.panel).chart,this.title=i.translateIf(n.name),a.F3j(),this.attributes=e.clone(n.attributes),this.attributes||(this.attributes={}),this.attributes)for(var I in l=this.attributes[E])"function"==typeof l[I]&&(l[I]=l[I].call(r));for(var N in h=[],c=i.layout.studies,u=[],r&&(u=Array.prototype.concat(r,r.getDependents(i))),c)if(!(c[N].signalData||u.indexOf(c[N])>-1))for(var O in c[N].outputMap)h.push(O);for(var H in n.inputs)if(d={},this.inputs.push(d),d.name=H,d.heading=i.translateIf(H),p=n.inputs[H],r&&r.inputs&&void 0!==r.inputs[H]&&null!==r.inputs[H]?d.value=r.inputs[H]:d.value=n.inputs[H],d.defaultInput=n.inputs[H],this.attributes[H]||(this.attributes[H]=e.Studies.inputAttributeDefaultGenerator(d.defaultInput)),p.constructor==Number)d.type="number";else if(p.constructor==String)if("fi","eld",g=e.Studies.movingAverageHelper(i,d.defaultInput))"s","ele","c","t",d.type="select",d.defaultInput=g,(m=e.Studies.movingAverageHelper(i,d.value))||(m=d.value),d.value=m,d.options=e.Studies.movingAverageHelper(i,"options");else if("field"==p){f="Lo",f+="w",y="Hig",y+="h","s","elec","t",d.type="select",d.options={},v=["Open",y,f,"Close","Adj_Close","hl/2","hlc/3","hlcc/4","ohlc/4",o.defaultPlotField].concat(h);for(var R=0;R<v.length;R++)b=v[R],d.options[b]=i.translateIf(b);"field"==d.value&&(d.value="Close"),"field"==d.defaultInput&&(d.defaultInput="Close")}else"t","ext",d.type="text","yyyy-mm-dd"==this.attributes[H].placeholder?d.type="date":"hh:mm:ss"==this.attributes[H].placeholder&&(d.type="time");else if(p.constructor==Boolean)"ch","eck","box",d.type="checkbox",!0!==d.value&&"true"!=d.value&&"on"!=d.value||(d.value=!0);else if(p.constructor==Array){d.type="select",d.options={};for(var z=0;z<p.length;z++)d.options[p[z]]=i.translateIf(p[z]);d.value.constructor==Array&&(d.value=d.value[0]),this.attributes[H].defaultSelected?d.defaultInput=this.attributes[H].defaultSelected:d.defaultInput=p[0]}this.dateTimeInputs=[];for(var j=0;j<this.inputs.length;j++)if("d","at","e","date"==(x=this.inputs[j]).type){S=x.name.substring(0,x.name.indexOf(" Date"));for(var U=0;U<this.inputs.length;U++)if("time"==(C=this.inputs[U]).type&&C.name==S+" Time"){this.dateTimeInputs.push(S);break}}for(H in this.adjustInputTimesForDisplayZone(),n.outputs)"a","u","t","o",(A={name:H,heading:i.translateIf(H)}).color=A.defaultOutput=n.outputs[H],r&&r.outputs&&r.outputs[H]&&(A.color=r.outputs[H]),"auto"==A.color&&(A.color=i.defaultColor),this.outputs.push(A);function B(t,e){var i;a.F3j(),(i=this).attributes[t]||(i.attributes[t]={}),e&&(i.attributes[t].hidden=!0)}function V(t){return{name:t.name,heading:i.translateIf(t.label),defaultValue:t.defaults,value:t.value,type:"checkbox"}}if(D=r?r.parameters:null,n.parameters&&(k=n.parameters.init)){if(void 0!==k.studyOverZonesEnabled&&("c","he","ckbox",w={name:"studyOverZones",heading:i.translateIf("Show Zones"),defaultValue:k.studyOverZonesEnabled,value:k.studyOverZonesEnabled},D&&(D.studyOverZonesEnabled||!1===D.studyOverZonesEnabled)&&(w.value=D.studyOverZonesEnabled),w.type="checkbox",this.parameters.push(w)),void 0!==k.studyOverBoughtValue){"t","ex","t","OverB","oug","ht",w={name:"studyOverBought",heading:i.translateIf("OverBought"),defaultValue:k.studyOverBoughtValue,value:k.studyOverBoughtValue,defaultColor:k.studyOverBoughtColor,color:k.studyOverBoughtColor},-1971003426,404697994,M=2;for(var W=1;-1971003426!==a.o0j(W.toString(),W.toString().length,49706);W++)(D||D.studyOverBoughtValue)&&(w.value=D.studyOverBoughtValue),a.Q7y(34),M+=a.o1b("2",64);404697994!==a.o0j(M.toString(),M.toString().length,48962)&&D&&D.studyOverBoughtValue&&(w.value=D.studyOverBoughtValue),D&&D.studyOverBoughtColor&&(w.color=D.studyOverBoughtColor),"auto"==w.color&&(w.color=i.defaultColor),w.type="text",this.parameters.push(w)}void 0!==k.studyOverSoldValue&&(w={name:"studyOverSold",heading:i.translateIf("OverSold"),defaultValue:k.studyOverSoldValue,value:k.studyOverSoldValue,defaultColor:k.studyOverSoldColor,color:k.studyOverSoldColor},D&&D.studyOverSoldValue&&(w.value=D.studyOverSoldValue),D&&D.studyOverSoldColor&&(w.color=D.studyOverSoldColor),"auto"==w.color&&(w.color=i.defaultColor),w.type="text",this.parameters.push(w)),this.attributes.studyOverBoughtValue||(this.attributes.studyOverBoughtValue={}),this.attributes.studyOverSoldValue||(this.attributes.studyOverSoldValue={})}T=this.panelSelect=t.panelSelect,F=this.axisSelect=t.axisSelect,t.addWhenDone&&(F=T=!1),(F||T)&&(r||(r=e.Studies.addStudy(i,t.name,null,null,{calculateOnly:!0}),e.Studies.removeStudy(i,r)),T&&("panelN","ame","P","an","e","l",this.parameters.push(_({label:"Panel",name:"panelName",defaults:function(){var t;for(var e in(t=[]).push("Auto"),i.panels)e==r.panel&&D&&D.panelName||i.panels[e].noDrag||t.push(L(e));return a.X8U(),i.checkForEmptyPanel(r.panel,!0,r)||t.push("New panel"),t}(),value:D&&D.panelName?L(D.panelName):"Auto"}),V({label:"Show as Underlay",name:"underlay",defaults:!1,value:r.underlay||r.parameters&&r.parameters.underlayEnabled}))),P=i.getYAxisByName(s,r.name),F&&("In","vert Y","-Axis","d","efault","s","hare","d",this.parameters.push(_({label:"Y-Axis",name:"yaxisDisplay",defaults:function(){var t,e;t=s.yaxisLHS.concat(s.yaxisRHS),(e=[]).push("default","right","left","none","shared");for(var i=0;i<t.length;i++)t[i]!=P&&e.push(t[i].name);return e}(),value:D&&D.yaxisDisplayValue||P&&P.position||(P?"default":"shared"),color:P&&P.textStyle?P.textStyle:"auto"}),V({label:"Invert Y-Axis",name:"flipped",defaults:!1,value:D&&void 0!==D.flippedEnabled?D.flippedEnabled:!!P&&P.flipped}))),B.call(this,"flippedEnabled",!P&&r.panel!=r.name),B.call(this,"underlayEnabled",n.underlay),B.call(this,"panelName",null===n.seriesFN),B.call(this,"yaxisDisplayValue",null===n.seriesFN||n.yAxis&&n.yAxis.noDraw))},e.Studies.DialogHelper.prototype.updateStudy=function(t){var i,r,n,s,o;function l(t){var e,i;if(a.X8U(),this,"alias"==this.panelSelect&&(e=(i=t.match(/.{0,50} (\d)/))&&i[1]))for(var r in this.stx.panels)if(!--e)return r;return t}if(i={},r=this.sd,(n=this.libraryEntry)||(n={}),r||(r=n),i.inputs=e.clone(r.inputs),i.outputs=e.clone(r.outputs),i.parameters=e.clone(r.parameters),this.adjustInputTimesForDisplayZone(t),t.parameters&&t.parameters.panelName){-1299707883,709131728,s=2;for(var h=1;-1299707883!==a.o0j(h.toString(),h.toString().length,57503);h++)t.parameters.panelName=l.call(this,t.parameters.panelName),s+=2;709131728!==a.c0F(s.toString(),s.toString().length,57667)&&(t.parameters.panelName=l.call(this,t.parameters.panelName))}for(var c in e.extend(i,t),i.parameters||(i.parameters={}),r=i.inputs&&i.inputs.id?e.Studies.replaceStudy(this.stx,i.inputs.id,this.name,i.inputs,i.outputs,i.parameters,null,r.study):e.Studies.addStudy(this.stx,this.name,i.inputs,i.outputs,i.parameters,null,r.study),o=new e.Studies.DialogHelper({stx:this.stx,sd:r,axisSelect:this.axisSelect,panelSelect:this.panelSelect}))"signal"!=c&&(this[c]=o[c]);a.J4P(35),this.signal*=-a.o1b(0,"1")},e.Studies.DialogHelper.prototype.adjustInputTimesForDisplayZone=function(t){var i,r,n,s,o,l,h,c;if(this.stx.displayZone)for(var u=0;u<this.dateTimeInputs.length;u++){for(i=this.dateTimeInputs[u],l="",t&&t.inputs&&(" ","Da","te",a.Q7y(1),n=t.inputs[a.o1b(" Date",i)],a.Q7y(1),n&&(l=n),(s=t.inputs[a.o1b(" Time",i)])&&(l+=s)),r=0;r<this.inputs.length;r++)" Ti","m","e",o=this.inputs[r],n||""===n||o.name!=i+" Date"?s||""===s||o.name!=i+" Time"||(l+=o.value):l=o.value+l;if((l=l.replace(/\D/g,"")).length<12)return;if(h=e.strToDateTime(l),!isNaN(h.valueOf()))if(t)" ","T","ime"," ","Date",t.inputs||(t.inputs={}),c=e.convertTimeZone(h,this.stx.displayZone),a.Q7y(1),t.inputs[a.m92(" Date",i)]=e.yyyymmdd(c),a.J4P(1),t.inputs[a.m92(" Time",i)]=e.hhmmss(c);else for(c=e.convertTimeZone(h,null,this.stx.displayZone),r=0;r<this.inputs.length;r++)(o=this.inputs[r]).name==i+" Date"&&(o.value=e.yyyymmdd(c)),o.name==i+" Time"&&(o.value=e.hhmmss(c))}},e.Studies.prepareStudy=function(t,i,r){if(a.F3j(),void 0===i.calculateFN&&(i.useRawValues=!0),e.isEmpty(r.outputMap))for(var n in r.outputs)if(i.useRawValues)r.outputMap[n]=n;else{a.J4P(123);a.m92(1880,13,30,8,137);a.Q7y(55);a.m92(54780,19,1031690);a.J4P(1);var s=a.o1b(20,9880);a.Q7y(124);a.o1b(9,9,33);r.outputMap[n+(863.21!==s&&" ")+r.name]=n}},e.Studies.rejiggerDerivedStudies=function(t,i,a){var r,n,s,o,l,h;r=i.name,i.panel,n=i.getDependents(t);for(var c=0;c<n.length;c++)if(s=n[c],l=(o=e.clone(s.inputs)).id){!1,h=e.Studies.getFieldInputs(s);for(var u=0;u<h.length;u++)o[h[u]]=o[h[u]].replace(r,a);delete e.Studies.replaceStudy(t,l,s.type,o,s.outputs,e.extend(s.parameters,{rejiggering:!0}),null,s.study).parameters.rejiggering}},e.Studies.removeStudySymbols=function(t,e){if(a.X8U(),t.series)for(var i in t.series)e.deleteSeries(t.series[i],null,{action:"remove-study"})},e.Studies.replaceStudy=function(t,i,a,r,n,s,o,l){var h,c,u,d;for(u in s||(s={}),i&&(s.replaceID=i),i=s.replaceID,h=t.layout.studies[i],e.Studies.removeStudySymbols(h,t),h.attribution&&t.removeFromHolder(h.attribution.marker),t.quoteDriver&&t.quoteDriver.updateSubscriptions(),r&&(r.id==r.display&&delete r.display,delete r.id),(c=e.Studies.addStudy(t,a,r,n,s,o,l)).highlight=h.highlight,c.uniqueId=h.uniqueId,h.signalData&&(c.signalData=h.signalData,c.signalData.updateConditions&&c.signalData.updateConditions(i,c.inputs.id)),d={},t.layout.studies)u==i?d[c.name]=c:d[u]=t.layout.studies[u];for(u in t.layout.studies=d,d={},t.overlays)u==i?(c.overlay||c.underlay)&&(d[c.name]=c):d[u]=t.overlays[u];return t.overlays=d,t.overlays[c.name]||!c.overlay&&!c.underlay||t.addOverlay(c),t.checkForEmptyPanel(h.panel),s.rejiggering||(t.initializeDisplay(t.chart),e.Studies.rejiggerDerivedStudies(t,h,c.inputs.id,c.panel)),e.transferObject(h,c),t.layout.studies[c.name]=h,t.overlays[c.name]=h,t.chart.state.studies.sorted=null,s.rejiggering||("l","a","yo","ut",h.currentlyImporting||s.calculateOnly||!h.chart.dataSet||t.createDataSet(null,h.chart),t.changeOccurred("layout"),t.draw()),h},e.Studies.addStudy=function(t,i,r,n,s,o,l){var h,c,u,d,p,g,m,f,y,v,b;if(a.F3j(),"Default pan","el",s||(s={}),h=l||e.Studies.studyLibrary[i]){if(h.inputs){for(var x in c=e.clone(h.inputs))c[x]instanceof Array&&(h.attributes&&h.attributes[x]&&h.attributes[x].defaultSelected?c[x]=h.attributes[x].defaultSelected:c[x]=c[x][0]);r=e.extend(c,r)}h.outputs&&(n=e.extend(e.clone(h.outputs),n)),(u=h.parameters)&&u.init&&(s=e.extend(e.clone(u.init),s)),u&&!s.display&&(s.display=u.display)}if(r||(r=e.clone(e.Studies.DEFAULT_INPUTS)),n||(n=e.clone(e.Studies.DEFAULT_OUTPUTS)),s.chartName||(s.chartName="chart"),"Auto"!=s.panelName&&"Default panel"!=s.panelName||(s.panelName=""),r.Period<1&&(r.Period=1),d=null,t.layout.studies||(t.layout.studies={}),!(d=h&&h.initializeFN?h.initializeFN(t,i,r,n,s,o,l):e.Studies.initializeFN(t,i,r,n,s,o,l)))return a.Q7y(1),void console.log(a.o1b(i,"CIQ.Studies.addStudy: initializeFN() returned null for "));if("abort"!==d){if(l=d.study,d.chart=t.charts[s.chartName],d.type=i,d.permanent=l.permanent,d.customLegend=l.customLegend,d.uniqueId=e.uniqueID(),e.Studies.prepareStudy(t,l,d),(p=t.chart.state.studies)||(p=t.chart.state.studies={}),p.sorted=null,s.replaceID?(g=!0,delete s.replaceID):(t.layout.studies[d.inputs.id]=d,(d.overlay||d.underlay)&&t.addOverlay(d),t.currentlyImporting||s.calculateOnly||!d.chart.dataSet||t.createDataSet(null,d.chart)),t.quoteDriver&&t.quoteDriver.updateSubscriptions(),s.calculateOnly)return t.changeOccurred("layout"),d;if(m=t.panels[d.panel],f=!1,(y=!(d.overlay||d.underlay))&&l.horizontalCrosshairFieldFN&&(m.horizontalCrosshairField=l.horizontalCrosshairFieldFN(t,d)),t.editCallback?f=!0:y?t.callbackListeners.studyPanelEdit&&t.callbackListeners.studyPanelEdit.length&&(f=!0):t.callbackListeners.studyOverlayEdit&&t.callbackListeners.studyOverlayEdit.length&&(f=!0),f){for(var S in s.editMode=!0,v=!1,d.inputs)if("id"!=S&&"display"!=S){v=!0;break}if(!v)for(var C in d.outputs){v=!0;break}v&&("un","d","efi","ned",void 0!==d.study.edit?d.study.edit&&(R=t,z=d,j=r,U=n,B=s,b=function(){e.clearCanvas(R.chart.tempCanvas,R),z.study.edit(z,{stx:R,inputs:j,outputs:U,parameters:B})},t.setPanelEdit(m,b),d.editFunction=b):y?t.editCallback?(T=t,F=d,P=r,_=n,L=s,b=function(){var t;a.X8U(),t=T.editCallback(T,F),e.clearCanvas(T.chart.tempCanvas,T),e.Studies.studyDialog(T,i,t,{inputs:P,outputs:_,parameters:L})},"chart"!=m.name&&t.setPanelEdit(m,b)):(A=t,D=d,k=r,w=n,M=s,b=function(){var t;e.clearCanvas(A.chart.tempCanvas,A),t=2,a.X8U();for(var i=1;1359756387!==a.o0j(i.toString(),i.toString().length,28330);i++)A.dispatch("studyPanelEdit",{stx:A,sd:D,inputs:k,outputs:w,parameters:M}),t+=2;-2060356710!==a.c0F(t.toString(),t.toString().length,40969)&&A.dispatch("",{stx:A,sd:D,inputs:k,outputs:w,parameters:M})},"chart"!=m.name&&(t.setPanelEdit(m,b),d.editFunction=b)):(E=t,I=d,N=r,O=n,H=s,b=function(t){e.clearCanvas(E.chart.tempCanvas,E),E.dispatch("studyOverlayEdit",{stx:E,sd:I,inputs:N,outputs:O,parameters:H,forceEdit:t})},d.editFunction=b))}var A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B;return t.changeOccurred("layout"),g||t.draw(),d}},e.Studies.removeStudy=function(t,e){var i,r,n,s;a.X8U(),r=(i=t.panels[e.panel])&&i.yAxis.name,(e.overlay||e.underlay)&&t.removeOverlay(e.name),n=t.panels[e.panel],e.attribution&&t.removeFromHolder(e.attribution.marker),t.cleanupRemovedStudy(e),n&&!t.checkForEmptyPanel(n)&&(r==e.name&&t.electNewPanelOwner(n),(s=t.getYAxisByName(e.panel,e.name))&&(s.name=s.studies[1]||s.renderers[0])),t.draw(),t.resizeChart()},e.Studies.getPanelFromFieldName=function(t,i){var a,r,n,s,o;if(!(a=e.Studies.getFieldInputs(i)).length)return null;if(!(r=t.layout.studies))return null;for(var l in n={},r)for(var h in r[l].outputMap)n[h]=r[l].panel;for(var c=0;c<a.length;c++)if((s=i.inputs[a[c]])&&(o=n[s]))return o;return null},e.Studies.createLibraryHash=function(){return a.X8U(),Object.keys(e.Studies.studyLibrary).join("|")},e.Studies.displayStudies=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(r&&(i.studyLibraryHash=e.Studies.createLibraryHash()),n=t.layout.studies)for(var b in s={},a.F3j(),s[i.name]=!0,n)if((l=(o=n[b]).study)&&!(o.disabled||o.signalData&&!o.signalData.reveal||(h=o.underlay||o.parameters&&o.parameters.underlayEnabled,r&&!h||!r&&h)))if(!(c=e.clone(l.renderer))||c instanceof Array||(c=[c]),u=t.panels[o.panel]){if(u.chart==i&&!u.hidden)if(s[u.name]||(d=o.permanent||!t.manageTouchAndMouse,u.closeX?("n","o","ne",d&&(u.closeX.style.display="none")):u.close&&d&&(u.close.style.display="none"),u.edit&&d&&(u.edit.style.display="none"),s[u.name]=d),p=o.chart.dataSegment,o.panel!=o.parameters.chartName||o.parameters&&o.parameters.panelName||(g=e.Studies.getPanelFromFieldName(t,o))&&o.panel!=g&&(o.panel=g),void 0===l.seriesFN){if(c){o.overlay||e.Studies.createYAxis(t,o,p,u);for(var x=0;x<c.length;x++){for(var S in m=c[x],o.outputMap)o.outputMap[S]==m.field&&(m.field=S);if(m.field){if(m.panel=o.panel,f=m.binding)for(var C in f)(y=e.Studies.determineColor(o.outputs[f[C]]))&&"auto"!=y&&(m[C]=y);m.yAxis=null,(v=e.Renderer.produce(m.type,m)).stx=t,v.attachSeries(null,m).draw()}}}else e.Studies.displaySeriesAsLine(t,o,p);u&&e.Studies.displayError(t,o)}else u&&(l.seriesFN&&l.seriesFN(t,o,p),e.Studies.displayError(t,o))}else t.currentlyImporting&&delete n[b]},e.Studies.displayError=function(t,e,i){var a,r;e.error&&(a=i&&i.panel?i.panel:e.panel,r=!0===e.error?t.translateIf("Not enough data to compute ")+t.translateIf(e.study.name):t.translateIf(e.error),!i||"center"===i.h&&"bottom"===i.v?t.displayErrorAsWatermark(a,r):t.watermark(a,i))},e.Studies.calculateMinMaxForDataPoint=function(t,e,i){var r,n,s;r=Number.MAX_VALUE,a.Q7y(125);var o=a.m92(7,9,18,15,22);n=Number.MAX_VALUE*o;for(var l=0;l<i.length;l++)null!=(s=i[l][e])&&(isNaN(s)||(r=Math.min(s,r),n=Math.max(s,n)));return{min:r,max:n}},e.Studies.getYAxisParameters=function(t,e){var i,r,n;return a.X8U(),i={},(r=t.layout.studies&&t.layout.studies[e.name])&&((n=r.study).yaxis||n.yAxisFN?i.noDraw=!0:(n.parameters&&n.parameters.excludeYAxis&&(i.noDraw=!0),i.ground=n.yAxis&&n.yAxis.ground,e&&("bypass"!=n.range&&("-1"," to ","1","0 to 100"==n.range?i.range=[0,100]:"-1 to 1"==n.range?i.range=[-1,1]:"0 to max"==n.range?i.range=[0,Math.max(0,e.high)]:(n.centerline||0===n.centerline)&&(i.range=[Math.min(n.centerline,e.low),Math.max(n.centerline,e.high)])),i.range&&(a.J4P(2),e.low=i.range[a.m92("0",1)],e.high=i.range[1]),r.min&&(e.min=r.min),r.max&&(e.max=r.max),r.parameters&&r.parameters.studyOverZonesEnabled&&(i.noDraw=!0)))),i},e.Studies.doPostDrawYAxis=function(t,i){var r,n,s,o;for(var l in a.X8U(),t.layout.studies)r=t.layout.studies[l],(n=t.panels[r.panel])&&!n.hidden&&r.getYAxis(t)==i&&(s=r.study,i.name==r.name&&(s.yaxis&&s.yaxis(t,r),s.yAxisFN&&s.yAxisFN(t,r)),e.Studies.drawZones(t,r),r.error||((o=s.centerline)||0===o||null!==o&&i.highValue-1e-12>0&&i.lowValue+1e-12<0)&&e.Studies.drawHorizontal(t,r,null,o||0,i))},e.Studies.displaySeriesAsLine=function(t,i,r){var n;if(a.X8U(),r.length&&(n=t.panels[i.panel])&&!n.hidden)for(var s in i.outputMap)e.Studies.displayIndividualSeriesAsLine(t,i,n,s,r)},e.Studies.displaySeriesAsHistogram=function(t,e,i){var r,n,s,o,l,h,c,u,d,p,g;if(i.length&&(r=t.panels[e.panel])&&!r.hidden){for(var m in n=[],e.outputMap)(s=e.outputs[e.outputMap[m]])&&(o=.3,"object"==typeof s&&(o=s.opacity,s=s.color),l={field:m,fill_color_up:s,border_color_up:s,fill_color_down:s,border_color_down:s},e.underlay&&(l.opacity_up=l.opacity_down=o||.3),n.push(l));h=e.getYAxis(t),u=(c=e.inputs).WidthFactor,e.study&&e.study.parameters&&("und","e","fined",void 0!==(d=e.study.parameters).widthFactor&&(u=d.widthFactor)),p={name:e.name,type:c.HistogramType?c.HistogramType:"overlaid",panel:e.panel,yAxis:h,widthFactor:u||.5,bindToYAxis:!0,highlight:e.highlight},-580475203,628051274,g=2;for(var f=1;-580475203!==a.c0F(f.toString(),f.toString().length,62941);f++)t.drawHistogram(p,n),a.J4P(42),g+=a.o1b(64,"2");628051274!==a.o0j(g.toString(),g.toString().length,12173)&&t.drawHistogram(p,n),t.drawHistogram(p,n)}},e.Studies.displayIndividualSeriesAsLine=function(t,i,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(r.height||(r.height=r.bottom-r.top),o=i.getContext(t),l=i.outputs[i.outputMap[n]]){if(o.save(),"string"==typeof l&&(l={color:l,width:1}),o.lineWidth=l.width||1,"auto"==(h=l.color)&&(h=t.defaultColor),o.strokeStyle=h,c=l.pattern,o.setLineDash(e.borderPatternToArray(o.lineWidth,c)),o.lineDashOffset=0,u=0,d=i.study,p=i.getYAxis(t),u=t.decimalPlacesFromPriceTick(p.priceTick,p.idealTickSizePixels),(i.overlay||i.underlay)&&(u=null),(p.decimalPlaces||0===p.decimalPlaces)&&(u=p.decimalPlaces),g=null,i.parameters&&(g=i.parameters.label),(m=d.parameters)||(m={}),f="step"==m.plotType,i.series)for(var C in i.series)"s","tep",(y=i.series[C].parameters.type)&&(a.Q7y(75),f=a.o1b("step",y));m.noLabels&&(g=!1),i.noSlopes||!1===i.noSlopes||(i.noSlopes=m.noSlopes),i.extendToEnd||!1===i.extendToEnd||(i.extendToEnd=m.extendToEnd),v=g||t.preferences.labels&&!1!==g,!1===(b=i.gaplines)&&(b="transparent"),x=i.inputs.Symbol,S=b?t.getGapColorFunction(x,n,l,b):null,t.plotDataSegmentAsLine(n,r,{yAxis:p,skipTransform:t.panels[i.panel].name!=i.chart.name,label:v,labelDecimalPlaces:u,noSlopes:i.noSlopes,step:f,alignStepToSide:i.alignStepToSide,extendToEndOfLastBar:i.extendToEndOfLastBar,width:i.lineWidth,extendToEndOfDataSet:i.extendToEnd,gapDisplayStyle:b,highlight:i.highlight},S),d.appendDisplaySeriesAsLine&&d.appendDisplaySeriesAsLine(t,i,s,n,r),o.restore()}},e.Studies.drawHorizontal=function(t,e,i,a,r,n){var s,o,l;s=t.panels[e.panel],o=t.getBackgroundCanvas().context,s&&(n||(n=r.textStyle),(l=t.pixelFromPrice(a,s,r))>r.top&&l<r.bottom&&t.plotLine(s.left,s.right,l,l,n,"segment",o,!1,{opacity:n&&n.opacity?n.opacity:.5}))},e.Studies.displayHistogramWithSeries=function(t,i,a){var r;t.panels[i.panel],r=.5,i.underlay&&(r=.3),e.Studies.createHistogram(t,i,a,!1,r),e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.drawZones=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F;if("a","u","t","o",i.parameters&&i.parameters.studyOverZonesEnabled){n=parseFloat(i.parameters.studyOverSoldValue),s=parseFloat(i.parameters.studyOverBoughtValue),o=i.parameters.studyOverSoldColor,l=i.parameters.studyOverBoughtColor,(h=i.zoneOutput)||(h="Result"),(c=e.Studies.determineColor(i.outputs[h]))&&"auto"!=c&&!e.isTransparent(c)||(c=t.defaultColor),o||(o=c),o&&"auto"!=o&&!e.isTransparent(o)||(o=t.defaultColor),l||(l=c),l&&"auto"!=l&&!e.isTransparent(l)||(l=t.defaultColor),u=t.panels[i.panel],p=(d=i.getYAxis(t)).displayBorder,!1===t.axisBorders&&(p=!1),!0===t.axisBorders&&(p=!0),0===d.width&&(p=!1),g=t.getYAxisCurrentPosition(d,u),a.Q7y(75),m=a.m92("left",g),(f=d.justifyRight)||!1===f||(f=t.chart.yAxis.justifyRight||!1===t.chart.yAxis.justifyRight?t.chart.yAxis.justifyRight:m),a.J4P(126);var P=a.o1b(1,3,6,13,7);if(y=Math.round(d.left+(m?d.width:"0">>P))+.5,v=p?3:0,x=(b=t.getBackgroundCanvas().context).fillStyle,b.globalAlpha=.2,t.startClip(u.name,!0),b.beginPath(),S=Math.round(t.pixelFromPrice(s,u,d))-.5,b.strokeStyle=l,b.moveTo(u.left,S),b.lineTo(u.right,S),b.stroke(),b.closePath(),b.beginPath(),C=Math.round(t.pixelFromPrice(n,u,d))+.5,b.strokeStyle=o,b.moveTo(u.left,C),a.F3j(),b.lineTo(u.right,C),b.stroke(),b.closePath(),(A=new e.Plotter).newSeries("border","stroke",t.canvasStyle("stx_grid_border")),p&&("bor","de","r",D=m?y-v:y-.5,k=m?y+.5:y+v,A.moveTo("border",D,S),A.lineTo("border",k,S),A.moveTo("border",D,C),A.lineTo("border",k,C)),b.fillStyle=x,w={skipTransform:t.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:h+" "+i.name,yAxis:d,opacity:.3},!i.highlight&&t.highlightedDraggable&&(w.opacity*=.3),e.preparePeakValleyFill(t,e.extend(w,{threshold:s,direction:d.flipped?-1:1,color:l})),e.preparePeakValleyFill(t,e.extend(w,{threshold:n,direction:d.flipped?1:-1,color:o})),a.J4P(2),b.globalAlpha=a.m92("1",1),!(i.study&&i.study.yaxis||(p&&("b","or","de","r","bord","e","r",M=Math.round(d.bottom)+.5,A.moveTo("border",y,d.top),A.lineTo("border",y,M),A.draw(b,"border")),0===d.width))){"le","ft",t.canvasFont("stx_yaxis",b),t.canvasColor("stx_yaxis",b),b.textAlign=f?"right":"left",a.Q7y(101);var _=a.m92(9,44,22,15);if(T=t.getCanvasFontSize("stx_yaxis")/_,m){a.J4P(127);var L=a.o1b(16,36,7901,10,19);if(F=d.left+L,f){a.J4P(3);var E=a.m92(14,9,8);F=d.left+d.width-v-E}}else{a.Q7y(15);var I=a.o1b(4,19,9);F=d.left+v+("3">>I),f&&(F=d.left+d.width)}S>d.top+T&&(b.fillStyle=l,b.fillText(s,F,S)),C<d.bottom-T&&(b.fillStyle=o,b.fillText(n,F,C)),b.fillStyle=x}t.endClip(),b.globalAlpha=1,d.name==i.name&&(d.yAxisPlotter=new e.Plotter)}},e.Studies.createHistogram=function(t,i,r,n,s){var o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k;o=t.panels[i.panel],l=i.getContext(t),h=i.getYAxis(t),t.startClip(o.name),a.Q7y(128);var w=a.m92(20,2,20,12,14);(c=t.layout.candleWidth-w)<2&&(c=1),a.J4P(7),u=t.pixelFromPrice(a.o1b(0,"0"),o,h),h.min>0&&(u=t.pixelFromPrice(h.min,o,h)),n&&(u=Math.floor(o.top+o.height/2)),d=i.name+"_hist",t.canvasColor("stx_histogram"),p=l.fillStyle,(s||0===s)&&(l.globalAlpha=s),a.X8U(),!i.highlight&&t.highlightedDraggable&&(l.globalAlpha*=.3),g=null,m=null,f=i.outputs;for(var M=0;M<r.length;M++)if("Posi","tiv","e Ba","r",y=r[M]){if(y.candleWidth&&(c=Math.floor(Math.max(1,y.candleWidth-2))),v=Math.floor(t.pixelFromBar(M,o.chart)-c/2),b=Math.floor(c),null===g){a.Q7y(7);var T=a.m92(19,20);g=(x=t.tickFromPixel(v,o.chart)-T)<0?m:t.pixelFromPrice(t.chart.dataSet[x][d],o,h)-u}else g=m;m=t.pixelFromPrice(y[d],o,h)-u,S=e.Studies.determineColor(f["Decreasing Bar"]),C=e.Studies.determineColor(f["Increasing Bar"]),A=e.Studies.determineColor(f["Positive Bar"]),D=e.Studies.determineColor(f["Negative Bar"]),k=h.flipped,l.fillStyle=p,S&&(k?m<g:m>g)?l.fillStyle=S:C&&(k?m>g:m<g)?l.fillStyle=C:A&&(k?m>0:m<0)?l.fillStyle=A:D&&(k?m<0:m>0)&&(l.fillStyle=D),l.fillRect(v,u,b,Math.floor(m))}a.Q7y(7),l.globalAlpha=a.o1b(0,"1"),t.endClip()},e.Studies.prettify={Close:"C",Open:"O",High:"H",Low:"L",simple:"ma",exponential:"ema",triangular:"tma",VIDYA:"vdma",weighted:"wma","welles wilder":"smma",true:"y",false:"n"},e.Studies.prettyRE=/^.{0,50}\((.{0,50})\).{0,50}$/,e.Studies.prettyDisplay=function(t){var i,r;if(i=e.Studies.prettyRE.exec(t),a.X8U(),!i)return t;if(r=i[1]){for(var n in e.Studies.prettify)r=r.replace(n,e.Studies.prettify[n]);t=t.replace(i[1],r)}return t},e.Studies.getFieldInputs=function(t){var e,i;for(var a in e=[],i=t.study.inputs)"field"==i[a]&&e.push(a);return e},e.Studies.initializeFN=function(t,i,a,r,n,s,o){var l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;if(a||(a={}),n||(n={}),a.id||(a.id=e.Studies.generateID(t,i,a,n.replaceID,n.display)),a.display||(a.display=a.id),l=new e.Studies.StudyDescriptor(a.id,i,a.id,a,r,n),a.Period&&(l.days=Math.max(1,parseInt(l.inputs.Period,10))),o?(o.inputs||(o.inputs=l.study.inputs),o.outputs||(o.outputs=l.study.outputs),l.study=o):o=l.study,o.display&&(a.display=o.display),"string"==typeof n.panelName&&(s=n.panelName),(s==a.id||s&&!t.panelExists(s))&&(l.underlay=l.overlay=!1),"Own panel"!=s&&"New panel"!=s||(s=null),h=l.overlay||a.Overlay||!1!==l.overlay&&o.overlay,c=l.underlay||a.Underlay||!1!==l.underlay&&o.underlay,h&&n.underlayEnabled&&(c=!0),c&&(l.underlay=!0),!c&&t.chart.panel&&s==t.chart.panel.name&&(h=!0),h&&(l.overlay=!0),(!0===(u=t.preferences.dragging)||u&&u.study)&&(l.overlay=!0),s?n.panelName=s:h||c||(s=a.id),n.calculateOnly)return(h||c)&&(t.panels[n.panelName]?l.panel=n.panelName:l.panel=e.Studies.getPanelFromFieldName(t,l)||n.chartName),l;if(d={},(p=t.layout.studies[n.replaceID])&&(d={outputMap:e.clone(p.outputMap),panel:p.panel}),l.panel="",s?(g="d",g+="efa",g+="u",g+="lt",m="share",m+="d",f="no",f+="ne",y="r",y+="i",y+="ght",(v=e.Studies.smartMovePanel(t,l.inputs,s,n.replaceID,"New panel"==n.panelName))&&(l.panel=v.name),!n.yaxisDisplayValue||["left",y,f,m,g].includes(n.yaxisDisplayValue)||t.getYAxisByName(v,n.yaxisDisplayValue)||(n.yaxisDisplayValue="default")):(h||c)&&(l.panel=e.Studies.getPanelFromFieldName(t,l)||n.chartName),l.panel||(b=o.panelHeight||null,(x=n.yAxis||o.yAxis||{}).name=l.inputs.id,l.panel=l.inputs.id,t.createPanel(l.inputs.display,l.panel,b,n.chartName,new e.ChartEngine.YAxis(x))),l.parameters&&l.parameters.panelName&&(l.parameters.panelName=l.panel),S=t.panels[l.panel],C=o?e.clone(o.yAxis):null,((A=n.yAxis||C)||{}).ground&&(A["initialMargin"+(A.flipped?"Top":"Bottom")]=0),(D=e.Studies.smartCreateYAxis(t,S,l.inputs.id,n.yaxisDisplayValue,A))&&(D.name==n.replaceID&&(D.name=l.inputs.id),n.replaceID||D.name!==l.name||t.calculateYAxisMargins(D),D.allowSharing=!n.yAxis&&!o.yAxis,D.width="none"==D.position?0:e.ChartEngine.YAxis.prototype.width,"shared"==n.yaxisDisplayValue||"default"==n.yaxisDisplayValue?delete n.yaxisDisplayValue:(C&&e.ensureDefaults(D,C),D.name==l.name&&(!(C||{}).textStyle&&!n.yaxisDisplayColor||"auto"==n.yaxisDisplayColor?delete D.textStyle:n.yaxisDisplayColor&&(D.textStyle=e.colorToHex(n.yaxisDisplayColor)),void 0===(C||{}).justifyRight&&(D.justifyRight=null),void 0!==n.flippedEnabled&&(D.flipped=n.flippedEnabled))),D!=S.yAxis?D.displayGridLines=!1:D!=t.chart.yAxis&&(D.displayGridLines=t.displayGridLinesInStudies)),t.calculateYAxisPositions(),p){for(var M in k=!1,t.drawingObjects)w=t.drawingObjects[M],d.outputMap&&d.outputMap.hasOwnProperty(w.field)?(w.field=w.field.replace(n.replaceID,l.inputs.id),l.parameters&&l.parameters.panelName?w.panelName=l.parameters.panelName:w.panelName=l.panel,k=!0):d.panel&&d.panel==w.panelName&&(w.panelName=w.panelName.replace(n.replaceID,l.inputs.id),k=!0);k&&t.changeOccurred("vector")}return l},e.Studies.smartMovePanel=function(t,e,i,a,r){var n,s,o,l;return s=e.id,a&&(n=t.layout.studies[a]),n&&(o=t.panels[n.panel])&&o.yAxis.name==a&&((r||i!=a&&i!=s)&&!t.checkForEmptyPanel(o.name,!0,n)?(t.electNewPanelOwner(o),(l=n.getYAxis(t)).name==a&&t.electNewYAxisOwner(l)):i!=a&&t.panels[i]||(s!=o.name&&t.modifyPanel(o,{name:s,display:e.display}),i=s)),t.panels[i]},e.Studies.smartCreateYAxis=function(t,i,r,n,s){var o,l,h,c,u,d;if("shar","ed",o=s||{},l=t.getYAxisByName(i,r),!n&&s&&(n=s.position),["left","right","none"].indexOf(n)>-1||void 0===n&&s)return!l||l.isShared(t)?(e.extend(o,{name:r,position:n}),l||t.currentlyImporting||i==i.chart.panel||i.yAxis.studies.length||i.yAxis.renderers.length?(h=l==i.yAxis,l&&(l.name=t.electNewYAxisOwner(l)),(c=l||i.yAxis).lockScale&&e.extend(o,{zoom:c.zoom,scroll:c.scroll,lockScale:!0}),l=t.addYAxis(i,new e.ChartEngine.YAxis(o)),h&&(i.yAxis=l)):(l=i.yAxis,e.extend(l,o))):(s&&e.extend(l,s),l.position=n,l.name=r),l;if(n&&"default"!==n&&"shared"!==n&&n!==i.yAxis.name)return(u=t.getYAxisByName(i,n))&&l==i.yAxis&&!l.isShared(t)&&(i.yAxis=u),l&&l.isShared(t)?l.name=t.electNewYAxisOwner(l):l!==i.yAxis&&t.deleteYAxisIfUnused(i,l),u;if("shared"==n||n==i.yAxis.name||i.yAxis.allowSharing&&(!l||l.allowSharing)){if(l)if(l!==i.yAxis&&l.isShared(t)){293936069,-1621721532,d=2;for(var p=1;293936069!==a.o0j(p.toString(),p.toString().length,44009);p++)l.name=t.electNewYAxisOwner(l),d+=2;-1621721532!==a.c0F(d.toString(),d.toString().length,71870)&&(l.name=t.electNewYAxisOwner(l))}else delete l.position,t.deleteYAxisIfUnused(i,l);t.resizeChart(),86417750,-845667838,2;for(var g=1;86417750!==a.o0j(g.toString(),g.toString().length,35963);g++)return i.yAxis;if(-845667838!==a.c0F(2..toString(),2..toString().length,31327))return i.yAxis}return e.extend(o,{name:r}),l&&(l.name=t.electNewYAxisOwner(l)),!l||l.name?l=t.addYAxis(i,new e.ChartEngine.YAxis(o)):(e.extend(l,o),delete l.position),l},e.Studies.calculateVolume=function(t,i){var r,n,s;if("vol undr"==i.type){if(!t||!t.chart.dataSet)return;r=t.layout,n=i.parameters.removeStudy,s=r.volumeUnderlay,r.volumeUnderlay=!n,s!=r.volumeUnderlay&&t.changeOccurred("layout"),n&&e.Studies.removeStudy(t,i)}a.X8U(),i.outputMap={},i.outputMap.Volume=""},e.Studies.MA=function(t,i,r,n,s,o,l,h){var c;a.J4P(129);var u=a.o1b(39300,13100,2637,20,1);a.J4P(66),a.X8U();var d=a.m92(13989,125920,7861,19);a.Q7y(130);var p=a.m92(1973,10,1963,7,5913);a.Q7y(131);var g=a.o1b(4520250,7,15,8606,172200);a.J4P(96);a.o1b(2,10,10);(c=new e.Studies.StudyDescriptor(s+(u!==d&&(p===g?"p":" "))+l.name,"ma",l.panel)).chart=l.chart,c.days=parseInt(i,10),c.startFrom=l.startFrom,h&&(c.subField=h),c.inputs={},t&&(c.inputs.Type=t),r&&(c.inputs.Field=r),n&&(c.inputs.Offset=parseInt(n,10)),e.Studies.calculateMovingAverage(o,c)},e.Studies.movingAverage={conversions:{ma:"simple",sma:"simple",ema:"exponential",tma:"triangular",vdma:"vidya",wma:"weighted",smma:"welles wilder"},translations:{simple:"Simple",exponential:"Exponential",triangular:"Triangular",vidya:"VIDYA",weighted:"Weighted","welles wilder":"Welles Wilder"},typeMap:{ema:"Exponential",exponential:"Exponential",tma:"Triangular",triangular:"Triangular",vdma:"VIDYA",vidya:"VIDYA",wma:"Weighted",weighted:"Weighted",smma:"Exponential","welles wilder":"Exponential"}},e.Studies.movingAverageHelper=function(t,i){var a;if("option","s","options"==i){for(var r in a={},e.Studies.movingAverage.translations)a[r]=t.translateIf(e.Studies.movingAverage.translations[r]);return a}return e.Studies.movingAverage.conversions[i]},e.Studies.createVolumeChart=function(t,i,r){var n,s,o,l,h,c,u,d,p;n=i.panel,i.inputs,s=i.underlay,o=i.overlay,l=e.Studies.determineColor(i.outputs["Up Volume"]),h=e.Studies.determineColor(i.outputs["Down Volume"]),c=s?"stx_volume_underlay":"stx_volume",a.J4P(1),t.setStyle(a.o1b("_up",c),"color",l),a.J4P(1),t.setStyle(a.m92("_down",c),"color",h),u=[{field:i.volumeField||"Volume",fill_color_up:t.canvasStyle(c+"_up").color,border_color_up:t.canvasStyle(c+"_up").borderLeftColor,opacity_up:t.canvasStyle(c+"_up").opacity,fill_color_down:t.canvasStyle(c+"_down").color,border_color_down:t.canvasStyle(c+"_down").borderLeftColor,opacity_down:t.canvasStyle(c+"_down").opacity,color_function:i.colorFunction}],d=u[0],p={name:"Volume",panel:n,yAxis:i.getYAxis(t),widthFactor:1,bindToYAxis:!0,highlight:i.highlight},e.extend(p,i.study.parameters),e.extend(p,i.parameters),t.colorByCandleDirection&&!i.colorFunction&&(d.color_function=function(t){var e,i;return{fill_color:(e=t.Open)>(i=t.Close)?d.fill_color_down:d.fill_color_up,border_color:e>i?d.border_color_down:d.border_color_up,opacity:e>i?d.opacity_down:d.opacity_up}}),t.drawHistogram(p,u)},e.Studies.calculateStandardDeviation=function(t,i){var r,n,s,o,l,h,c,u,d,p,g,m,f;if("Stand","ard"," Dev","iations","_","M","A","C","los","e","f",a.F3j(),"ie","ld",(r=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var y in(n=i.inputs.Field)&&"field"!=n||(n="Close"),(s=i.inputs["Moving Average Type"])||(s=i.inputs.Type),e.Studies.MA(s,i.days,n,i.inputs.Offset,"_MA",t,i),o=0,l=0,h=0,(c=Number(i.inputs["Standard Deviations"]))<0&&(c=2),u=i.name,i.outputs)a.J4P(15),u=a.m92(y,u," ");for(d=i.startFrom-1,g=0;d>=0&&g<i.days;d--,g++)"o","bje","c","t",(p=r[d][n])&&"object"==typeof p&&(p=p[i.subField]),isNaN(p)&&(p=0),o+=Math.pow(p,2),l+=p;for(d=i.startFrom;d<r.length;d++)if((p=(m=r[d])[n])&&"object"==typeof p&&(p=p[i.subField]),p||0===p||(p=0),o+=Math.pow(p,2),l+=p,!(d<i.days-1)&&(d>=i.days&&("o","b","je","ct",(f=r[d-i.days][n])&&"object"==typeof f&&(f=f[i.subField]),isNaN(f)&&(f=0),o-=Math.pow(f,2),l-=f),(h=m["_MA "+i.name])||0===h)){a.J4P(69);var v=a.o1b(6,16,81,13);a.J4P(24);var b=a.m92(36,2,17);m[u]=Math.sqrt((o+i.days*Math.pow(h,v)-b*h*l)/i.days)*c}}},e.Studies.calculateMovingAverage=function(t,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if("C","lo","se","fie","l","d",i.chart.scrubbed){if("ma"!=(r=i.inputs.Type)&&"sma"!=r&&r||(r="simple"),r in(n=e.Studies.movingAverage.typeMap))return"calc","ulateMovingAverage",e.Studies["calculateMovingAverage"+n[r]](t,i);if("simple"===r){for(var x in s=i.chart.scrubbed,o=0,l=[],h=i.name,i.outputs)a.Q7y(15),h=a.o1b(x,h," ");for((c=i.inputs.Field)&&"field"!=c||(c="Close"),u=parseInt(i.inputs.Offset,10),isNaN(u)&&(u=0),m=i.startFrom,f=u,d=i.startFrom-1;d>=0;d--)if((p=s[d][c])&&"object"==typeof p&&(p=p[i.subField]),p||0===p)if(f>0)f--,m=d;else{if(l.length==i.days-1)break;o+=p,l.unshift(p)}for(l.length<i.days-1&&(l=[],m=0),y=[],d=m;d<s.length;d++)(p=s[d][c])&&"object"==typeof p&&(p=p[i.subField]),v=d+u>=0&&d+u<s.length?s[d+u]:null,p||0===p?(o+=p,l.push(p),l.length>i.days&&(o-=l.shift()),b=l.length==i.days?o/i.days:null,v?v[h]=b:d+u>=s.length&&((g={})[h]=b,y.push(g))):v?v[h]=null:d+u>=s.length&&((g={})[h]=null,y.push(g));i.appendFutureTicks(t,y)}}},e.Studies.calculateMovingAverageExponential=function(t,e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;i=e.inputs.Type,r=e.chart.scrubbed,n=0,s=0,a.Q7y(35),o=a.m92(0,"0"),a.F3j(),a.Q7y(7);var S=a.m92(26,28);a.J4P(8);var C=a.o1b(4,3);(l=S/(e.days+C),"welles wilder"===i||"smma"===i)&&(a.Q7y(55),l=a.m92(3,19,56)/e.days);for(var A in h=null,c=e.name,e.outputs)a.J4P(15),c=a.m92(A,c," ");for((u=e.inputs.Field)&&"field"!=u||(u="Close"),d=parseInt(e.inputs.Offset,10),isNaN(d)&&(d=0),m=e.startFrom,f=d,p=e.startFrom-1;p>=0;p--)if((g=r[p][c])||0===g){if(null===h&&(h=g),o=e.days,f<=0)break;f--,m=p}for(null===h&&(h=m=0),y=[],p=m;p<r.length;p++)"obje","ct",(g=r[p][u])&&"object"==typeof g&&(g=g[e.subField]),v=p+d>=0&&p+d<r.length?r[p+d]:null,g||0===g?(o==e.days-1?b=s=(n+=g)/e.days:o<e.days-1?(n+=g,a.Q7y(132),s=a.o1b(n,o,1),b=null):0===o?(s=n+=g,b=null):(h||0===h)&&(a.J4P(61),b=s=a.m92(g,l,h,h)),h=s,o++):b=null,v?v[c]=b:p+d>=r.length&&((x={})[c]=b,y.push(x));e.appendFutureTicks(t,y)},e.Studies.calculateMovingAverageVIDYA=function(t,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;i.inputs.Type,r=i.chart.scrubbed,a.Q7y(1);var S=a.m92(2,0);a.J4P(133);var C=a.o1b(1,13,11,1);for(var A in n=S/(i.days+C),s=null,o=i.name,i.outputs)a.J4P(15),o=a.m92(A,o," ");for((l=i.inputs.Field)&&"field"!=l||(l="Close"),i.std=new e.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=5,i.std.startFrom=i.startFrom,i.std.inputs={Field:l,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},e.Studies.calculateStandardDeviation(t,i.std),e.Studies.MA("ma",20,"_STD "+i.name,0,"_MASTD",t,i),h=parseInt(i.inputs.Offset,10),isNaN(h)&&(h=0),p=i.startFrom,g=h,c=i.startFrom-1;c>=0;c--)if((u=r[c][o])||0===u){if(null===s&&(s=u),g<=0)break;g--,p=c}if(null===s){2051724984,-1879597122,a.Q7y(34),m=a.o1b("2",0);for(var D=1;2051724984!==a.o0j(D.toString(),D.toString().length,35413);D++)s=p=6,m+=2;-1879597122!==a.c0F(m.toString(),m.toString().length,15822)&&(s=p=0)}for(f=[],c=p;c<r.length;c++)"_S","TD ",(u=(y=r[c])[l])&&"object"==typeof u&&(u=u[i.subField]),v=c+h>=0&&c+h<r.length?r[c+h]:null,u||0===u?(y["_MASTD "+i.name]||0===y["_MASTD "+i.name])&&(b=y["_STD "+i.name]/y["_MASTD "+i.name],a.Q7y(134),s=x=a.m92(n,u,b,n,1,s,b),c<i.days&&(x=null),v?v[o]=x:c+h>=r.length&&((d={})[o]=x,f.push(d))):v?v[o]=null:c+h>=r.length&&((d={})[o]=null,f.push(d));i.appendFutureTicks(t,f)},e.Studies.calculateMovingAverageTriangular=function(t,i){var r,n,s,o,l,h,c,u,d;for(var p in a.F3j(),"T","R","I1"," ","simp","le",r=i.chart.scrubbed,(n=i.inputs.Field)&&"field"!=n||(n="Close"),s=Math.ceil(i.days/2),e.Studies.MA("simple",s,n,0,"TRI1",t,i),i.days%2==0&&s++,e.Studies.MA("simple",s,"TRI1 "+i.name,0,"TRI2",t,i),o=i.name,i.outputs)a.Q7y(15),o=a.o1b(p,o," ");l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),h=l;for(var g=i.startFrom-1;g>=0;g--)if((c=r[g][o])||0===c){if(!(h>0))break;h--}for(u=[],g++;g<r.length;g++)g+l>=0&&(g+l<r.length?(a.J4P(1),r[a.m92(l,g)][o]=r[g]["TRI2 "+i.name]):("T","RI","2 ",(d={})[o]=r[g]["TRI2 "+i.name],u.push(d)));i.appendFutureTicks(t,u)},e.Studies.calculateMovingAverageWeighted=function(t,e){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;i=e.chart.scrubbed,r=0,n=0,(s=e.inputs.Field)&&"field"!=s||(s="Close"),a.Q7y(8);var b=a.m92(15,14);a.Q7y(96);var x=a.m92(19,17,1);for(var S in o=e.days*(e.days+b)/x,l=e.name,e.outputs)a.Q7y(15),l=a.o1b(S,l," ");for(h=parseInt(e.inputs.Offset,10),isNaN(h)&&(h=0),p=[],g=e.startFrom,m=h,c=e.startFrom-1;c>=0;c--)if("obje","c","t",(u=i[c][s])&&"object"==typeof u&&(u=u[e.subField]),u||0===u)if(m>0)m--,g=c;else{if(p.length==e.days-1)break;p.unshift(u)}for(p.length<e.days-1&&(p=[],g=0),c=0;c<p.length;c++){a.J4P(135),r+=(c+a.o1b(8,9,17,18,18))*p[c],n+=p[c]}for(f=[],c=g;c<i.length;c++)(u=i[c][s])&&"object"==typeof u&&(u=u[e.subField]),y=c+h>=0&&c+h<i.length?i[c+h]:null,u||0===u?(p.push(u),p.length>e.days&&(r-=n,n-=p.shift()),r+=p.length*u,n+=u,v=c<e.days-1?null:r/o,y?y[l]=v:c+h>=i.length&&((d={})[l]=v,f.push(d))):y?y[l]=null:c+h>=i.length&&((d={})[l]=null,f.push(d));a.F3j(),e.appendFutureTicks(t,f)},e.Studies.calculateMultMA=function(t,i){var r,n,s,o,l;if(r=i.chart.scrubbed,n=[Number.MAX_VALUE],Object.keys(i.inputs).filter((t=>{a.J4P(136);var e=a.o1b(14,11,3,223,9);return t.indexOf("Period")>e})).forEach(((t,e)=>{a.J4P(1),n[a.o1b(1,e)]=i.inputs[t]})),a.X8U(),r.length<Math.min(...n)+1)i.error=!0;else{(s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=i.inputs["Moving Average Type"])||(o="simple"),l=i.inputs.Offset||0;for(var h=1;h<n.length;h++)e.Studies.MA(o,n[h],s,l,"MA "+h,t,i)}},e.Studies.calculateStudyATR=function(t,e){var i,r,n,s,o,l,h;if(i=e.chart.scrubbed,r=e.days,i.length<r+1)e.error=!0;else{n=0,s=e.name;for(var c=Math.max(e.startFrom,1);c<i.length;c++)if("True R","a","nge ","Sum T","rue Ra","nge ",o=i[c],a.J4P(7),l=i[a.m92(1,c)],h=o.trueRange,l["Sum True Range "+s]&&(a.Q7y(1),n=l[a.m92(s,"Sum True Range ")]),n+=h,c>r&&(a.Q7y(7),n-=i[a.m92(r,c)][a.o1b(s,"True Range ",a.Q7y(1))]),a.Q7y(1),o[a.m92(s,"True Range ")]=h,a.Q7y(1),o[a.m92(s,"Sum True Range ")]=n,c==r)a.J4P(1),o[a.m92(s,"ATR ")]=a.m92(r,n,a.J4P(10));else if(c>r){a.J4P(7);var u=a.o1b(18,19);a.J4P(1),o[a.m92(s,"ATR ")]=(l["ATR "+s]*(r-u)+h)/r}}},e.Studies.displayPSAR2=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y;for(var v in"squ","are","wave","P","l","ot Type",n=t.panels[i.panel],o=(s=i.getYAxis(t))==t.chart.panel.yAxis,t.startClip(n.name),l=i.getContext(t),h="squarewave"==i.inputs["Plot Type"],a.F3j(),i.outputs){a.J4P(137);var b=a.m92(9,20,2,2061380,5742);a.J4P(138);a.o1b(29580,1063140,4,9);c=v+(b>=55?" ":7.21)+i.name,l.beginPath(),u=t.layout.candleWidth,d=Math.max(3,Math.floor(t.chart.tmpWidth/2));for(var x=0;x<r.length;x++)(p=r[x])&&(p[c]||0===p[c])&&(p.candleWidth&&(u=p.candleWidth),o&&p.transform&&(p=p.transform),g=t.pixelFromBar(x,n.chart),h&&(a.J4P(10),g-=a.m92(2,u)),m=t.pixelFromTransformedValue(p[i.referenceOutput?i.referenceOutput+" "+i.name:c],n,s),0!==x&&r[x-1]&&(r[x-1][c]||0===r[x-1][c])||l.moveTo(g,m),h?(l.lineTo(g,m),a.J4P(1),l.lineTo(a.o1b(u,g),m),r[x+1]&&(a.J4P(1),f=r[a.o1b(1,x)],o&&f.transform&&(f=f.transform),f[c]||0===f[c]||(a.Q7y(1),l.lineTo(a.m92(u,g),t.pixelFromTransformedValue(f[i.referenceOutput?i.referenceOutput+" "+i.name:c],t.panels[i.panel],s))))):(a.J4P(139),l.moveTo(a.m92("2",d,g,64),m),a.Q7y(45),l.lineTo(a.o1b(g,d,2),m)));l.lineWidth=1,i.highlight&&(a.Q7y(35),l.lineWidth=a.m92(0,"3")),"auto"==(y=e.Studies.determineColor(i.outputs[v]))&&(y=t.defaultColor),l.strokeStyle=y,!i.highlight&&t.highlightedDraggable&&(l.globalAlpha*=.3),l.stroke(),l.closePath(),l.lineWidth=1}t.endClip()},e.Studies.inputAttributeDefaultGenerator=function(t){return t||0===t?t.constructor==Number?Math.floor(t)==t?t>0?{min:1,step:1}:{step:1}:t>0?{min:0,step:.01}:{step:.01}:(a.X8U(),{}):{}},e.Studies.getMarketOffset=function({stx:t,localQuoteDate:i,shiftToDateBoundary:r}){var n,s,o,l,h,c,u;n="U",n+="T",n+="C",s="Mark",s+="et.Symbology.isForexMetal",arguments.length>1&&(a.J4P(7),t=arguments[a.m92(0,"0")],i=arguments[1],o=arguments[2]);var{symbol:d}=t.chart;l=e.getFn(s)(d),void 0===o&&(o=e.getFn("Market.Symbology.isForexSymbol")(d)),h=t.chart.market?o?"America/New_York":t.chart.market.market_tz:null,a.J4P(103);var p=a.m92(300029,36e4,12,7,10);return c=new Date(i.getTime()+i.getTimezoneOffset()*p),h&&-1!=h.indexOf(n)||(c=e.convertTimeZone(c,"UTC",h)),u=new Date(c.getFullYear(),c.getMonth(),c.getDate(),c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds()).getTime()-i.getTime(),r&&o&&(a.Q7y(140),u+=a.m92(l?6:7,1e3,52,60,"60")),u},e.Studies.getStudyList=function(t){var i,a;for(var r in i={},a={},e.extend(a,t),e.Studies.studyLibrary)a[r]||(i[e.Studies.studyLibrary[r].name]=r);return i},e.Studies.determineColor=function(t){return t?"object"==typeof t?t.color:t:null},e.Studies.calculateGenericEnvelope=function(t,e,i,r,n,s){var o,l,h,c,u,d,p;if(a.F3j(),"fi","e","l","d",i||(i=0),s||(a.J4P(12),s=a.o1b("0",0)),r&&"field"!=r||(r="Close"),n||(n=r),o=e.chart.scrubbed){(l=e.inputs.Field)&&"field"!==l||(l="Close");for(var g=e.startFrom;g<o.length;g++)" ","T","op"," ","obj","e","c","t","obj","e","c","t","ob","jec","t",(h=o[g])&&(h[r]||0===h[r])&&((c=h[l])&&"object"==typeof c&&(c=c.Close),(u=h[r])&&"object"==typeof u&&(u=u[e.subField]),(d=h[n])&&"object"==typeof d&&(d=d[e.subField]),a.Q7y(141),p=a.m92(s,i,d),a.J4P(1),h[e.type+" Top "+e.name]=a.m92(p,u),a.J4P(7),h[e.type+" Bottom "+e.name]=a.m92(p,u),h[e.type+" Median "+e.name]=u,h["Bandwidth "+e.name]=u?200*p/u:0,a.J4P(142),h["%b "+e.name]=a.o1b(0,p,u,"50",1,c))}},e.Studies.displayChannel=function(t,i,r){var n,s,o;if(i.inputs["Channel Fill"]){for(var l in n={panelName:i.panel},i.outputs)if("Channe","l","M","ed","ia","n","Top"==(s=l.split(" ").pop())||"High"==s)n.topBand=l+" "+i.name;else if("Bottom"==s||"Low"==s){a.Q7y(124);a.m92(1,821,8209);a.Q7y(9);var h=a.m92(763,7733,6,17);n.bottomBand=l+(562.57===h?"d":" ")+i.name}else"Median"!=s&&"Channel"!=s||(n.color=e.Studies.determineColor(i.outputs[l]));i.parameters&&i.parameters.opacity?n.opacity=i.parameters.opacity:n.opacity=.2,o=t.panels[i.panel],n.skipTransform=o.name!=i.chart.name,n.yAxis=i.getYAxis(t),!i.highlight&&t.highlightedDraggable&&(n.opacity*=.3),e.prepareChannelFill(t,n)}a.X8U(),e.Studies.displaySeriesAsLine(t,i,r)},e.Studies.initAnchorHandle=function(t,e){var{handle:i}=e;if(!i){t.controls.anchorHandles||(t.controls.anchorHandles={});var{anchorHandles:a,chartControls:r}=t.controls;a[e.uniqueId]?({handle:i}=a[e.uniqueId]):((i=document.createElement("div")).classList.add("stx_anchor_handle"),i.setAttribute(e.uniqueId,""),a[e.uniqueId]={handle:i,sd:e},r&&r.parentElement.appendChild(i)),e.anchorHandle=i}},e.Studies.removeAnchorHandle=function(t,e){var{handle:i}=(t.controls.anchorHandles||{})[e.uniqueId]||{};a.X8U(),i&&(delete t.controls.anchorHandles[e.uniqueId],i.remove())},e.Studies.repositionAnchor=function(t,r){var n,s,o,l,h,c,{currentAnchorTime:u,uniqueId:d}=r,{hoverTick:p}=t.repositioningAnchorSelector||{},{dataSet:g,market:m}=t.chart;t.controls.anchorHandles||(t.controls.anchorHandles={});var{anchorHandles:f}=t.controls;if(n={},p||0===p){if("Ancho","r Da","te",p>=g.length)return;if(s=!r.inputs.hasOwnProperty("Anchor Date"),o=g[p].DT,l=e.Studies.getMarketOffset({stx:t,localQuoteDate:o,shiftToDateBoundary:!0}),u&&s&&new Date(o.getTime()+l).getDate()!==new Date(u.getTime()+l).getDate())return;m.market_def&&m.market_def.market_tz&&(o=new i.Date(o,m.market_def.market_tz)),h=!s&&e.dateToStr(o,"YYYY-MM-dd"),n={"Anchor Time":e.dateToStr(o,"HH:mm:ss")},h&&(n["Anchor Date"]=h)}c=e.Studies.replaceStudy(t,r.inputs.id,r.type,Object.assign(r.inputs,n),r.outputs,r.parameters,r.panel),f[d]&&(f[d].sd=c),a.X8U(),t.draw()},e.Studies.cancelRepositionAnchor=function(t){var{sd:i,tapToAdd:a}=t.repositioningAnchorSelector||{};if(i){a&&e.Studies.removeStudy(t,i),t.repositioningAnchorSelector=null;var{anchorHandles:r}=t.controls;r&&r[i.uniqueId]&&(r[i.uniqueId].highlighted=!1,e.Studies.displayAnchorHandleAndLine(t,i,t.chart.dataSegment)),t.draw()}},e.Studies.displayAnchorHandleAndLine=function(t,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if("Market",".Symbo","logy",".isForexSymbol",!r.signalData||r.signalData.reveal){s=(t.repositioningAnchorSelector||{}).sd===r;var{hoverTick:C}=s&&t.repositioningAnchorSelector,{chart:A,panels:D,cy:k}=t,{market:w={},symbol:M}=A;o=D[r.panel];var{top:T,right:F,left:P,height:_,subholder:L}=o,{bottom:I}=o.yAxis,{inputs:N,anchorHandle:O,currentAnchorTime:H,lineWidth:R=1}=r,{backgroundColor:z,borderLeftColor:j}=t.canvasStyle("stx_anchor_handle");l=!N["Anchor Date"],h=e.getFn("Market.Symbology.isForexSymbol")(M),c=(C||0===C)&&(t.chart.dataSet[C]||{}).DT,u=e.Studies.getMarketOffset({stx:t,localQuoteDate:n[n.length-1].DT,shiftToDateBoundary:!0}),d=H&&c&&l&&new Date(c.getTime()+u).getDate()!==new Date(H.getTime()+u).getDate(),a.X8U();var{floatDate:U,anchorHandles:B={}}=t.controls;p=B[r.uniqueId]||{};var{highlighted:V}=p,[W,Q]=w.getNormalOpen().split(":").map((t=>parseInt(t)));g=e=>{var i;return i=e?t.tickFromDate(e,null,null,!0):C,[t.pixelFromTick(i,A),i]},m={y0:T,y1:I,type:"line",confineToPanel:o};var[Y]=g();if(Y&&(Y-=.5,t.plotLine(Object.assign(m,{x0:Y,x1:Y,color:d?j:z,pattern:[6,6],lineWidth:1,opacity:d?.5:1})),e.efficientDOMUpdate(U.style,"visibility",""),t.updateChartAccessories()),O){if(f=l?new Date(n[n.length-1].DT):e.strToDate(N["Anchor Date"]),w.market_def&&w.market_def.market_tz&&(f=new i.Date(f,w.market_def.market_tz)),!l){var[q,X,Z]=(N["Anchor Date"]||"").split("-");Z||([,q,X,Z]=q.match(/([0-9]{4})([0-9]{2})([0-9]{2})/)),a.Q7y(7),f.setFullYear(q,a.m92(1,X),Z)}a.Q7y(7);var[J,G,K=E.m92(0,"0")]=(N["Anchor Time"]||"").split(":");G||0===G||([,J,G,K]=J.match(/([0-9]{2})([0-9]{2})([0-9]{2})/)),f.setHours(J,G,K),(y=h&&(f.getHours()>W||f.getHours()===W&&f.getMinutes()>=Q))&&f.setDate(f.getDate()-1);var[$,tt]=g(f);(v=new Date(f)).setHours(...w.getNormalClose().split(":")),y&&v.setDate(v.getDate()+1);var[et]=v&&g(v)||[];if(l&&($>F||et>F)){if(b=new Date(f),w)do{b.setDate(b.getDate()-1)}while(!w.isMarketDate(b));var[it,at]=g(b);it>P&&(f=b,$=it,tt=at)}if($-=.5,t.plotLine(Object.assign(m,{x0:$,x1:$,color:z,pattern:"solid",lineWidth:R,opacity:V||r.highlight?1:.5})),p.currentPixel=$,V){"ew","-res","i","ze","p","x","p","x",O.style.display="",a.J4P(105);var rt=a.m92(1,2,1,4,3);O.style.height=Math.max(Math.min(25,_/rt),8)+"px",x=O.getBoundingClientRect(),S=Math.max(Math.min(k-x.height/2,I-3-x.height),T+3),a.J4P(1),O.style.top=a.o1b("px",S),a.J4P(8);var nt=a.o1b(6,4);O.style.left=(C||0===C?Y:$)-x.width/nt+"px",L.style.cursor="ew-resize"}else O.style.display="none",L.style.cursor="auto";r.currentAnchorTime=f,r.currentAnchorTick=tt}}},e.Studies.studyScriptLibrary={},e.Studies.studyLibrary=e.Studies.studyLibrary||{},e.extend(e.Studies.studyLibrary,{ma:{name:"Moving Average",overlay:!0,calculateFN:e.Studies.calculateMovingAverage,inputs:{Period:50,Field:"field",Type:"ma",Offset:0},outputs:{MA:"#FF0000"}},"STD Dev":{name:"Standard Deviation",calculateFN:e.Studies.calculateStandardDeviation,inputs:{Period:14,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"True Range":{name:"True Range",calculateFN:e.Studies.calculateStudyATR,inputs:{},outputs:{"True Range":"auto"}},volume:{name:"Volume Chart",range:"0 to max",yAxis:{ground:!0},seriesFN:e.Studies.createVolumeChart,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"}},MACross:{name:"Moving Average Cross",overlay:!0,calculateFN:e.Studies.calculateMultMA,inputs:{"MA 1 Period":20,"MA 2 Period":50,"MA 3 Period":200,Field:"field","Moving Average Type":"ma",Offset:0},outputs:{"MA 1":"#e9088c","MA 2":"#00afed","MA 3":"#f4932f"}}})},C=t=>{var e;E.F3j(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.Driver?(e.ChartEngine.Driver.Lookup=function(t){},e.ChartEngine.Driver.Lookup.prototype.acceptText=function(t,e,i,a){this.cb}):console.error("symbolLookupBase feature requires first activating quoteFeed feature.")},A=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ThemeHelper=e.ThemeHelper||function(t){var i,a;this.params=t,a="#FFFFFF",(i=t.stx).chart.container&&(a=getComputedStyle(i.chart.container).backgroundColor,e.isTransparent(a)&&(a=i.containerColor)),this.settings.chart.Background.color=e.hexToRgba(a),this.settings.chart["Grid Lines"].color=e.hexToRgba(i.canvasStyle("stx_grid").color),this.settings.chart["Grid Dividers"].color=e.hexToRgba(i.canvasStyle("stx_grid_dark").color),this.settings.chart["Axis Text"].color=e.hexToRgba(i.canvasStyle("stx_xaxis").color),this.settings.chartTypes["Candle/Bar"].up.color=e.hexToRgba(i.canvasStyle("stx_candle_up").color),this.settings.chartTypes["Candle/Bar"].down.color=e.hexToRgba(i.canvasStyle("stx_candle_down").color),this.settings.chartTypes["Candle/Bar"].up.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_up").color),this.settings.chartTypes["Candle/Bar"].down.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_down").color),this.settings.chartTypes["Candle/Bar"].even.wick=e.hexToRgba(i.canvasStyle("stx_candle_shadow_even").color),this.settings.chartTypes["Candle/Bar"].up.border=e.hexToRgba(i.canvasStyle("stx_candle_up").borderLeftColor),this.settings.chartTypes["Candle/Bar"].down.border=e.hexToRgba(i.canvasStyle("stx_candle_down").borderLeftColor),e.isTransparent(i.canvasStyle("stx_candle_up").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].up.border=null),e.isTransparent(i.canvasStyle("stx_candle_down").borderLeftColor)&&(this.settings.chartTypes["Candle/Bar"].down.border=null),this.settings.chartTypes.Line.color=e.hexToRgba(i.canvasStyle("stx_line_chart").color),this.settings.chartTypes.Mountain.color=e.hexToRgba(i.canvasStyle("stx_mountain_chart").backgroundColor),this.settings.chartTypes.Mountain.basecolor=e.hexToRgba(i.canvasStyle("stx_mountain_chart").color)},e.ThemeHelper.prototype.settings={chart:{Background:{color:null},"Grid Lines":{color:null},"Grid Dividers":{color:null},"Axis Text":{color:null}},chartTypes:{"Candle/Bar":{up:{color:null,wick:null,border:null},down:{color:null,wick:null,border:null},even:{color:null,wick:null,border:null}},Line:{color:null},Mountain:{color:null,basecolor:null}}},e.ThemeHelper.prototype.update=function(t){var i,a;function r(e,a,r){for(var n in i[e])t.setStyle(n,a,r)}t||(t=this.params.stx),i={stx_candle_up:{stx_candle_up:!0,stx_bar_up:!0,stx_hollow_candle_up:!0,stx_line_up:!0,stx_baseline_up:!0},stx_candle_down:{stx_candle_down:!0,stx_bar_down:!0,stx_hollow_candle_down:!0,stx_line_down:!0,stx_baseline_down:!0},stx_candle_even:{stx_hollow_candle_even:!0,stx_bar_even:!0},stx_shadow_up:{stx_candle_shadow_up:!0},stx_shadow_down:{stx_candle_shadow_down:!0},stx_shadow_even:{stx_candle_shadow_even:!0},stx_line_chart:{stx_bar_chart:!0,stx_line_chart:!0},stx_grid:{stx_grid:!0},stx_grid_dark:{stx_grid_dark:!0},stx_xaxis:{stx_xaxis_dark:!0,stx_xaxis:!0,stx_yaxis:!0,stx_yaxis_dark:!0,stx_grid_border:!0},stx_mountain_chart:{stx_mountain_chart:!0},stx_market_session:{stx_market_session:!0}},t.chart.container.style.backgroundColor=this.settings.chart.Background.color,t.defaultColor="",r("stx_grid","color",this.settings.chart["Grid Lines"].color),r("stx_grid_dark","color",this.settings.chart["Grid Dividers"].color),r("stx_xaxis","color",this.settings.chart["Axis Text"].color),(a=this.settings.chartTypes["Candle/Bar"]).even||(a.even={color:null,wick:e.hexToRgba(t.canvasStyle("stx_candle_shadow_even").color),border:null}),r("stx_candle_up","color",a.up.color),r("stx_candle_down","color",a.down.color),r("stx_candle_even","color",a.even.color),r("stx_shadow_up","color",a.up.wick),r("stx_shadow_down","color",a.down.wick),r("stx_shadow_even","color",a.even.wick),t.setStyle("stx_candle_up","borderLeftColor",a.up.border),t.setStyle("stx_candle_down","borderLeftColor",a.down.border),r("stx_line_chart","color",this.settings.chartTypes.Line.color),t.setStyle("stx_mountain_chart","borderTopColor",e.hexToRgba(this.settings.chartTypes.Mountain.color,1)),t.setStyle("stx_mountain_chart","backgroundColor",e.hexToRgba(this.settings.chartTypes.Mountain.color,.5)),t.setStyle("stx_mountain_chart","color",e.hexToRgba(this.settings.chartTypes.Mountain.basecolor,.01)),t.draw()},e.ChartEngine.prototype.setThemeSettings=function(t){var i,a;i=e.getFromNS(this,"uiContext.topNode.multiChartContainer");var{breakpoint:r}=this.chart;i?(this.styles=i.styles[r]||{},i.styles[r]=this.styles):this.styles={},this.chart.container.style.backgroundColor="",this.defaultColor="",t&&((a=new e.ThemeHelper({stx:this})).settings=t,a.update()),this.updateListeners("theme"),this.changeOccurred("theme"),this.displayInitialized&&(this.headsUpHR(),this.clearPixelCache(),this.updateListeners("theme"),this.draw())}},D=t=>{var e,i,a=E;a.X8U(),e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,e.timeZoneMap={"(UTC-11:00) American Samoa, Midway Island":"Pacific/Pago_Pago","(UTC-10:00) Hawaii":"Pacific/Honolulu","(UTC-10:00) Alaska Aleutian Islands":"America/Adak","(UTC-09:00) Alaska":"America/Juneau","(UTC-08:00) Pacific Time (US and Canada), Tijuana":"America/Los_Angeles","(UTC-07:00) Arizona":"America/Phoenix","(UTC-07:00) Mazatlan":"America/Mazatlan","(UTC-07:00) Mountain Time (US and Canada)":"America/Denver","(UTC-06:00) Saskatchewan":"America/Regina","(UTC-06:00) Central America":"America/Costa_Rica","(UTC-06:00) Central Time (US and Canada)":"America/Chicago","(UTC-06:00) Chihuahua":"America/Chihuahua","(UTC-06:00) Guadalajara, Mexico City, Monterrey":"America/Mexico_City","(UTC-05:00) Bogota, Lima, Quito, Rio Branco":"America/Bogota","(UTC-05:00) Eastern Time (US and Canada)":"America/New_York","(UTC-05:00) Havana":"America/Havana","(UTC-05:00) Port-au-Prince":"America/Port-au-Prince","(UTC-04:00) Caracas":"America/Caracas","(UTC-04:00) Georgetown, La Paz, Manaus, San Juan":"America/Puerto_Rico","(UTC-04:00) Santiago":"America/Santiago","(UTC-04:00) Asuncion":"America/Asuncion","(UTC-04:00) Atlantic Time (Canada)":"America/Halifax","(UTC-03:30) Newfoundland and Labrador":"America/St_Johns","(UTC-03:00) Buenos Aires, Montevideo":"America/Argentina/Buenos_Aires","(UTC-03:00) Punta Arenas":"America/Punta_Arenas","(UTC-03:00) Sao Paulo":"America/Sao_Paulo","(UTC-02:00) Mid-Atlantic":"Atlantic/South_Georgia","(UTC-01:00) Cape Verde Islands":"Atlantic/Cape_Verde","(UTC-01:00) Azores":"Atlantic/Azores","(UTC) Greenwich Mean Time, Reykjavik":"UTC","(UTC) Dublin":"Europe/Dublin","(UTC) Lisbon, London":"Europe/London","(UTC) Casablanca":"Africa/Casablanca","(UTC+01:00) Algiers, Tunis":"Africa/Tunis","(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna":"Europe/Berlin","(UTC+01:00) Belgrade, Budapest, Prague, Sarajevo, Warsaw":"Europe/Belgrade","(UTC+01:00) Brussels, Copenhagen, Madrid, Paris":"Europe/Brussels","(UTC+02:00) Cairo":"Africa/Cairo","(UTC+02:00) Harare, Johannesburg":"Africa/Johannesburg","(UTC+02:00) Kaliningrad":"Europe/Kaliningrad","(UTC+02:00) Athens, Bucharest":"Europe/Bucharest","(UTC+02:00) Helsinki, Kyiv, Riga, Sofia, Tallinn, Vilnius":"Europe/Helsinki","(UTC+02:00) Cyprus":"Asia/Nicosia","(UTC+02:00) Beirut":"Asia/Beirut","(UTC+02:00) Jerusalem":"Asia/Jerusalem","(UTC+03:00) Istanbul":"Europe/Istanbul","(UTC+03:00) Damascus":"Asia/Damascus","(UTC+03:00) Amman":"Asia/Amman","(UTC+03:00) Baghdad, Kuwait, Qatar, Riyadh":"Asia/Riyadh","(UTC+03:00) Minsk, Moscow, Kirov, Simferopol":"Europe/Moscow","(UTC+03:00) Volgograd":"Europe/Volgograd","(UTC+03:00) Nairobi":"Africa/Nairobi","(UTC+03:30) Tehran":"Asia/Tehran","(UTC+04:00) Baku":"Asia/Baku","(UTC+04:00) Dubai, Muscat":"Asia/Dubai","(UTC+04:00) Astrakhan, Samara, Saratov, Ulyanovsk":"Europe/Samara","(UTC+04:30) Kabul":"Asia/Kabul","(UTC+05:00) Karachi, Tashkent":"Asia/Karachi","(UTC+05:00) Yekaterinburg":"Asia/Yekaterinburg","(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi":"Asia/Kolkata","(UTC+05:45) Kathmandu":"Asia/Kathmandu","(UTC+06:00) Almaty":"Asia/Almaty","(UTC+06:00) Omsk":"Asia/Omsk","(UTC+06:00) Astana, Dhaka":"Asia/Dhaka","(UTC+06:30) Yangon":"Asia/Yangon","(UTC+07:00) Bangkok, Jakarta, Vietnam":"Asia/Bangkok","(UTC+07:00) Hovd":"Asia/Hovd","(UTC+07:00) Krasnoyarsk":"Asia/Krasnoyarsk","(UTC+07:00) Novokuznetsk":"Asia/Novokuznetsk","(UTC+07:00) Barnaul, Novosibirsk, Tomsk":"Asia/Novosibirsk","(UTC+08:00) Beijing, Chongqing, Hong Kong SAR":"Asia/Hong_Kong","(UTC+08:00) Brunei, Kuala Lumpur, Singapore":"Asia/Singapore","(UTC+08:00) Irkutsk":"Asia/Irkutsk","(UTC+08:00) Choibalsan, Ulaanbaatar":"Asia/Ulaanbaatar","(UTC+08:00) Manila, Taipei":"Asia/Taipei","(UTC+08:00) Perth":"Australia/Perth","(UTC+08:45) Eucla":"Australia/Eucla","(UTC+09:00) Osaka, Sapporo, Tokyo":"Asia/Tokyo","(UTC+09:00) Pyongyang":"Asia/Pyongyang","(UTC+09:00) Seoul":"Asia/Seoul","(UTC+09:00) Chita, Khandyga, Yakutsk":"Asia/Yakutsk","(UTC+09:30) Adelaide":"Australia/Adelaide","(UTC+09:30) Darwin":"Australia/Darwin","(UTC+10:00) Brisbane":"Australia/Brisbane","(UTC+10:00) Canberra, Melbourne, Sydney":"Australia/Sydney","(UTC+10:00) Guam, Port Moresby":"Pacific/Guam","(UTC+10:00) Ust-Nera, Vladivostok":"Asia/Vladivostok","(UTC+11:00) Noumea, Solomon Islands":"Pacific/Noumea","(UTC+11:00) Magadan":"Asia/Magadan","(UTC+11:00) Sakhalin, Srednekolymsk":"Asia/Srednekolymsk","(UTC+12:00) Anadyr, Kamchatka":"Asia/Kamchatka","(UTC+12:00) Auckland, Wellington":"Pacific/Auckland","(UTC+12:00) Fiji":"Pacific/Fiji","(UTC+12:45) Chatham":"Pacific/Chatham","(UTC+13:00) Tonga":"Pacific/Tongatapu","(UTC+13:00) Samoa":"Pacific/Apia","(UTC+14:00) Kiritimati":"Pacific/Kiritimati"},function(){var t,r,n,s,o,l,h,c,u,d;a.X8U(),t=("undefined"!=typeof window?window:null)||("undefined"!=typeof global?global:{}),i.VERSION="0.4.11",r=t.$||t.jQuery||t.Zepto,n=t.fleegix,s=i.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],o=i.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],l={},h={},c={};for(var p=0;p<o.length;p++)l[o[p].substr(0,a.m92("3",0,a.Q7y(12)))]=p;for(p=0;p<s.length;p++)h[s[p].substr(0,3)]=p;Array.prototype.indexOf,u=function(t,e){var i,r,n;if("number"!=typeof t)throw"not a num","ber: ",a.J4P(1),a.m92(t,"not a number: ");if(a.Q7y(89),i=a.m92(1e3,t),n=(r=t.toString()).length,i&&n>e)return a.J4P(7),r.substr(a.m92(e,n),n);for(r=[r];n<e;)r.unshift("0"),n++;return r.join("")},d=function(t){if("G","E","T","ge","t",t){if(!t.url)throw new Error("URL must be specified");if("async"in t||(t.async=!0),!(n&&void 0!==n.xhr||r&&void 0!==r.ajax))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");return t.async?n&&n.xhr?n.xhr.send({url:t.url,method:"get",handleSuccess:t.success,handleErr:t.error}):r.ajax({url:t.url,dataType:"text",method:"GET",error:t.error,success:t.success}):n&&n.xhr?n.xhr.doReq({url:t.url,async:!1}):r.ajax({url:t.url,async:!1,dataType:"text"}).responseText}},i.ruleCache={},i.Date=function(){var t,e,r,n,s,o,l;if(t="[object A",t+="rray",t+="]",this===i)throw"timezoneJS.Date object must be constructed with 'new'";switch(e=Array.prototype.slice.apply(arguments),r=null,n=null,s=[],o=!1,Object.prototype.toString.call(e[0])===t&&(e=e[0]),"string"==typeof e[e.length-1]&&(o=Date.parse(e[e.length-1].replace(/GMT[+-]\d+/,"")),(isNaN(o)||null===o)&&(n=e.pop())),l=!1,e.length){case 0:r=new Date;break;case 1:r=new Date(e[0]),"string"==typeof e[0]&&-1==e[0].search(/[+-][0-9]{4}/)&&-1==e[0].search(/Z/)&&-1==e[0].search(/T/)&&(l=!0);break;case 2:r=new Date(e[0],e[1]),l=!0;break;default:for(var h=0;h<7;h++)s[h]=e[h]||0;r=new Date(s[0],s[1],s[2],s[3],s[4],s[5],s[6]),l=!0}if(isNaN(r.getTime()))throw new Error("Invalid date");this._useCache=!1,this._tzInfo={},this._day=0,a.J4P(2),this.year=a.m92("0",1),this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=n||null,l?this.setFromDateObjProxy(r):this.setFromTimeProxy(r.getTime(),n)},e.extend(i.Date.prototype,{getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return this.year},getMonth:function(){return this.month},getYear:function(){a.J4P(51);var t=a.m92(30400,4,2,28494);return this.year-t},getHours:function(){return a.X8U(),this.hours},getMilliseconds:function(){return a.X8U(),this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return a.X8U(),this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return a.X8U(),this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return a.X8U(),this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){a.Q7y(7);var t=a.m92(4e3,5e3);return a.F3j(),this._timeProxy+60*this.getTimezoneOffset()*t},getTimezone:function(){return a.F3j(),this.timezone},getTimezoneOffset:function(){return a.X8U(),this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){var t,e;if(a.X8U(),this._useCache)return this._tzInfo;if(this.timezone){-2070889117,965781398,e=2;for(var r=1;-2070889117!==a.c0F(r.toString(),r.toString().length,75771);r++)t="Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:i.timezone.getTzInfo(this._timeProxy,this.timezone),a.Q7y(12),e+=a.o1b("2",0);965781398!==a.c0F(e.toString(),e.toString().length,39023)&&("U","T","C",t="Etc/GMT"!==this.timezone&&"UTC"!==this.timezone?{tzOffset:1,tzAbbr:"UTC"}:i.timezone.getTzInfo(this._timeProxy,this.timezone))}else t={tzOffset:this.getLocalOffset(),tzAbbr:null};return this._tzInfo=t,this._useCache=!0,t},getUTCDateProxy:function(){var t;return a.X8U(),(t=new Date(this._timeProxy)).setUTCMinutes(t.getUTCMinutes()+this.getTimezoneOffset()),t},setDate:function(t){return"d","ate",this.setAttribute("date",t),this.getTime()},setFullYear:function(t,e,i){return void 0!==i&&this.setAttribute("date",1),this.setAttribute("year",t),void 0!==e&&this.setAttribute("month",e),a.X8U(),void 0!==i&&("da","t","e",this.setAttribute("date",i)),this.getTime()},setMonth:function(t,e){return this.setAttribute("month",t),a.X8U(),void 0!==e&&("dat","e",this.setAttribute("date",e)),this.getTime()},setYear:function(t){return"y","e","a","r",0<=(t=Number(t))&&t<=99&&(t+=1900),this.setUTCAttribute("year",t),a.F3j(),this.getTime()},setHours:function(t,e,i,a){return this.setAttribute("hours",t),void 0!==e&&this.setAttribute("minutes",e),void 0!==i&&("sec","o","nds",this.setAttribute("seconds",i)),void 0!==a&&this.setAttribute("milliseconds",a),this.getTime()},setMinutes:function(t,e,i){return this.setAttribute("minutes",t),void 0!==e&&this.setAttribute("seconds",e),void 0!==i&&("mil","liseconds",this.setAttribute("milliseconds",i)),this.getTime()},setSeconds:function(t,e){return"s","e","con","ds",this.setAttribute("seconds",t),void 0!==e&&("millisecond","s",this.setAttribute("milliseconds",e)),this.getTime()},setMilliseconds:function(t){return a.X8U(),"milli","secon","ds",this.setAttribute("milliseconds",t),this.getTime()},setTime:function(t){if(isNaN(t))throw new Error("Units must be a number.");return this.setFromTimeProxy(t,this.timezone),a.F3j(),this.getTime()},setUTCFullYear:function(t,e,i){return a.X8U(),void 0!==i&&("dat","e",this.setUTCAttribute("date",1)),this.setUTCAttribute("year",t),void 0!==e&&this.setUTCAttribute("month",e),void 0!==i&&("d","a","t","e",this.setUTCAttribute("date",i)),this.getTime()},setUTCMonth:function(t,e){return"mont","h",this.setUTCAttribute("month",t),a.X8U(),void 0!==e&&("da","te",this.setUTCAttribute("date",e)),this.getTime()},setUTCDate:function(t){return this.setUTCAttribute("date",t),this.getTime()},setUTCHours:function(t,e,i,a){return"h","ou","rs",this.setUTCAttribute("hours",t),void 0!==e&&("minu","t","es",this.setUTCAttribute("minutes",e)),void 0!==i&&this.setUTCAttribute("seconds",i),void 0!==a&&("millise","con","d","s",this.setUTCAttribute("milliseconds",a)),this.getTime()},setUTCMinutes:function(t,e,i){return a.X8U(),"mi","nute","s",this.setUTCAttribute("minutes",t),void 0!==e&&this.setUTCAttribute("seconds",e),void 0!==i&&this.setUTCAttribute("milliseconds",i),this.getTime()},setUTCSeconds:function(t,e){var i,r;a.F3j(),a.Q7y(34),i=a.m92("1057816743",32),a.J4P(35),r=a.m92(0,"2");for(var n=1;-1047452421!==a.c0F(n.toString(),n.toString().length,43314);n++)this.setUTCAttribute("",t),r+=2;return a.c0F(r.toString(),r.toString().length,40993)!==i&&this.setUTCAttribute("seconds",t),void 0!==e&&("millis","ec","onds",this.setUTCAttribute("milliseconds",e)),this.getTime()},setUTCMilliseconds:function(t){return"m","illiseconds",a.X8U(),this.setUTCAttribute("milliseconds",t),this.getTime()},setFromDateObjProxy:function(t){this.year=t.getFullYear(),this.month=t.getMonth(),this.date=t.getDate(),this.hours=t.getHours(),a.F3j(),this.minutes=t.getMinutes(),this.seconds=t.getSeconds(),this.milliseconds=t.getMilliseconds(),this._day=t.getDay(),this._dateProxy=t,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(t,e){var r,n;r=new Date(t),n=e?i.timezone.getTzInfo(t,e,!0).tzOffset:r.getTimezoneOffset(),a.F3j(),r.setTime(t+6e4*(r.getTimezoneOffset()-n)),this.setFromDateObjProxy(r)},setAttribute:function(t,e){var i;if(isNaN(e))throw new Error("Units must be a number.");(i=this._dateProxy)["set"+("year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1))](e),this.setFromDateObjProxy(i)},setUTCAttribute:function(t,e){var i,a;if(isNaN(e))throw new Error("Units must be a number.");i="year"===t?"FullYear":t.substr(0,1).toUpperCase()+t.substr(1),(a=this.getUTCDateProxy())["setUTC"+i](e),a.setUTCMinutes(a.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(a.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(t){var e;e=this.getTimezoneInfo().tzOffset,this.timezone=t,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+e)},removeTimezone:function(){a.F3j(),this.timezone=null,this._useCache=!1},valueOf:function(){return a.F3j(),this.getTime()},clone:function(){return this.timezone?new i.Date(this.getTime(),this.timezone):new i.Date(this.getTime())},toGMTString:function(){return a.F3j(),this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleStringIntl:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){a.Q7y(143);a.m92(9405,9364,3135,5,18);a.J4P(0),a.X8U();var t=a.o1b(5,541,550,4);return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+(95.57<t?"Z":"e")},toJSON:function(){return a.F3j(),this.toISOString()},toDateString:function(){return this.toString("EEE MMM dd yyyy")},toTimeString:function(){return a.F3j(),this.toString("H:mm k")},toString:function(t,e){var r,n,o,l;return t||(t="yyyy-MM-ddTHH:mm:ss.SSS"),r=t,a.F3j(),n=e?i.timezone.getTzInfo(this.getTime(),e):this.getTimezoneInfo(),o=this,e&&(o=this.clone()).setTimezone(e),l=o.getHours(),r.replace(/a+/g,(function(){return"k"})).replace(/y+/g,(function(t){return a.F3j(),u(o.getFullYear(),t.length)})).replace(/d+/g,(function(t){return u(o.getDate(),t.length)})).replace(/m+/g,(function(t){return a.F3j(),u(o.getMinutes(),t.length)})).replace(/s+/g,(function(t){return a.F3j(),u(o.getSeconds(),t.length)})).replace(/S+/g,(function(t){return u(o.getMilliseconds(),t.length)})).replace(/h+/g,(function(t){return u(l%12==0?12:l%12,t.length)})).replace(/M+/g,(function(t){var e,r;return e=o.getMonth(),(r=t.length)>3?i.Months[e]:r>2?i.Months[e].substring(0,r):(a.Q7y(1),u(a.m92(1,e),r))})).replace(/k+/g,(function(){return a.X8U(),l>=12?(l>12&&(l-=12),"PM"):"AM"})).replace(/H+/g,(function(t){return a.X8U(),u(l,t.length)})).replace(/E+/g,(function(t){return s[o.getDay()].substring(0,t.length)})).replace(/Z+/gi,(function(){return a.X8U(),n.tzAbbr}))},toUTCString:function(){return a.F3j(),this.toGMTString()},civilToJulianDayNumber:function(t,e,i){var r,n;++e>12&&(a.Q7y(10),r=parseInt(a.m92(12,e),10),a.Q7y(144),e=a.o1b("12",1,e),t+=r),e<=2&&(t-=1,e+=12),a.J4P(10),r=Math.floor(a.o1b(100,t)),a.J4P(101);var s=a.m92(16,66,36,16);a.Q7y(8);var o=a.o1b(9,5);n=s-r+Math.floor(r/o),a.F3j(),a.J4P(36);var l=a.m92(6,3,19,4,233);return Math.floor(365.25*(t+4716))+Math.floor(30.6001*(e+l))+i+n-1524},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},!0),i.timezone=new function(){var t,e,r;function n(t){var e,i,r,n;if(t[3])return e=parseInt(t[3],10),i=11,a.X8U(),r=31,t[4]&&(i=l[t[4].substr(0,3)],r=parseInt(t[5],10)||1),[e,i,r,(n=t[6]?u(t[6]):[0,0,0])[0],n[1],n[2]]}function s(t,e){return a.Q7y(7),-Math.ceil(a.o1b(t,e))}function o(i){var a,n,s,l;return(a=r[i])?a:(n=i.split("/")[0],(s=e[n])?s:"string"==typeof(l=t.zones[i])?o(l):t.loadedZones.backward?void p(i):("bac","k","ward",t.loadZoneFile("backward"),o(i)))}function u(t){var e,i;return e=/(\d{1,2})(?::0*(\d{1,2}))?(?::0*(\d{1,2}))?([wsugz])?$/,(i=t.match(e))[1]=parseInt(i[1],10),i[2]=i[2]?parseInt(i[2],10):0,a.Q7y(35),a.F3j(),i[a.m92(3,"3")]=i[3]?parseInt(i[3],10):0,i.slice(1,5)}function p(t){throw a.X8U(),a.J4P(15),new Error(a.o1b("Timezone '","' is either incorrect, or not loaded in the timezone registry.",t))}function g(t){var e,i;e=u(t),i="-"===t.charAt(0)?-1:1,a.Q7y(17);var r=a.o1b(25,5,40);a.J4P(7);var n=a.m92(18,78);a.J4P(55);var s=a.o1b(21,15,313);a.J4P(145);var o=a.m92(983,13,251,1014,10);return e=i*(((e[0]*r+e[1])*n+e[s])*o),a.J4P(146),a.m92(60,e,1e3)}function m(e,i){var r,n,s,o;for("str","i","n","g",r="number"==typeof e?e:new Date(+e).getTime(),n=i,s=t.zones[n];"string"==typeof s;)n=s,s=t.zones[n];if(!s){if(!t.loadedZones.backward)return"back","w","a","rd",t.loadZoneFile("backward"),m(e,i);if(n&&n!==i)return t.lazyLoadZoneFiles(n),m(e,n);p(n)}if(0===s.length)throw"No ","Zone"," found for '",a.J4P(0),new Error(a.o1b(i,e,"No Zone found for '","' on "));for(var l=s.length-1;l>=0&&!((o=s[l])[3]&&r>o[3]);l--);return a.J4P(1),s[a.o1b(1,l)]}a.X8U(),t=this,e={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:["northamerica","southamerica"],Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},r={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Istanbul":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe",GMT:"etcetera","Europe/Nicosia":"asia"},this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.getRegionForTimezone=o,this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(t){var e,i;for(var a in e={async:!0},i=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",t)e[a]=t[a];return this.loadZoneFiles(i,e)},this.loadZoneFiles=function(t,e){var i,r;if("s","t","rin","g",r=0,"string"==typeof t)return this.loadZoneFile(t,e);i=(e=e||{}).callback,e.callback=function(){r++,a.X8U(),r===t.length&&"function"==typeof i&&i()};for(var n=0;n<t.length;n++)this.loadZoneFile(t[n],e)},this.loadZoneFile=function(e,i){if(void 0===this.zoneFileBasePath)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[e])return this.loadedZones[e]=!0,function(e,i){var r;a.J4P(8),a.o1b(4,3),a.Q7y(18);var n=a.m92(6212,15,3,16,40);a.J4P(7);var s=a.m92(53022,61859);a.J4P(26);var o=a.o1b(4228,757,4,2);return r=t.zoneFileBasePath+(570.04!=n?"/":s<270.59?o:880.59)+e,i&&i.async?t.transport({async:!0,url:r,success:function(e){return a.F3j(),t.parseZones(e)&&"function"==typeof i.callback&&i.callback()},error:function(){throw a.Q7y(15),a.X8U(),new Error(a.m92("Error retrieving '","' zoneinfo files",r))}}):t.parseZones(t.transport({url:r,async:!1}))}(e,i)},this.loadZoneJSONData=function(e,i){var r;return a.X8U(),r=function(e){var i;i=2;for(var r=1;-2014075063!==a.c0F(r.toString(),r.toString().length,49763);r++)e=JSON.parse(e),i+=2;for(var n in a.F3j(),1504510938!==a.c0F(i.toString(),i.toString().length,18109)&&(e=JSON.parse(e)),e.zones)t.zones[n]=e.zones[n];for(var s in e.rules)t.rules[s]=e.rules[s]},i?r(t.transport({url:e,async:!1})):t.transport({url:e,success:r})},this.loadZoneDataFromObject=function(e){if(e){for(var i in e.zones)t.zones[i]=e.zones[i];for(var r in a.F3j(),e.rules)t.rules[r]=e.rules[r]}},this.getAllZones=function(){var t;for(var e in t=[],this.zones)t.push(e);return a.X8U(),t.sort()},this.parseZones=function(e){var i,r,s,o,l;if(!e)return!1;i=e.split("\n"),r=[],o=null,l=null;for(var h=0;h<i.length;h++)if((s=i[h]).match(/^\s/)&&("Zone"," ",a.J4P(15),s=a.m92("Zone ",s,o)),(s=s.split("#")[0]).length>3)switch((r=s.split(/\s+/)).shift()){case"Zone":if(o=r.shift(),t.zones[o]||(t.zones[o]=[]),r.length<3)break;r.splice(3,r.length,n(r)),r[3]&&(a.Q7y(42),r[a.o1b(64,"3")]=Date.UTC.apply(null,r[3])),r[0]=-g(r[0]),t.zones[o].push(r);break;case"Rule":l=r.shift(),t.rules[l]||(t.rules[l]=[]),r[0]=parseInt(r[0],10),r[1]=parseInt(r[1],10)||r[1],r[5]=u(r[5]),r[6]=g(r[6]),t.rules[l].push(r);break;case"Link":if(t.zones[r[1]]){a.Q7y(147);var c=a.o1b(3,50,11,14,8);throw new Error("Error with Link "+r[c]+". Cannot create link of a preexisted zone.")}isNaN(r[0])?t.zones[r[1]]=r[0]:(a.Q7y(2),t.zones[r[a.o1b("1",1)]]=parseInt(r[0],10))}return!0},this.transport=d,this.getTzInfo=function(e,r,n){var o,u,d,p,g,f;return this.lazyLoadZoneFiles(r),u=+(o=m(e,r))[0],(d=function(e,r,n,o){var u,d,p,g,m,f,y,v,b,x,S,C,A,D;if(u="n",u+="umb",a.X8U(),u+="e",d=typeof e===(u+="r")?new Date(e):e,p=r[1],g=r[0],m=p.match(/^([0-9]):([0-9][0-9])$/)){a.J4P(7);var k=a.o1b(80,90);a.Q7y(7);var w=a.o1b(660,720);a.Q7y(148);var M=a.m92(21,2,11,6,7);return a.Q7y(42),[-1e6,"max","-","Jan",a.o1b(32,"1"),[0,0,0],parseInt(m[1],k)*w+parseInt(m[2],M),"-"]}f=function(t,e,i){var r;if(a.X8U(),r=0,"u"===e||"g"===e||"z"===e)r=0;else if("s"===e)r=g;else{if("w"!==e&&e)throw a.Q7y(1),new Error(a.m92(e,"unknown type "));r=s(g,i[6])}return a.J4P(149),r*=a.o1b(1e3,"60",32),new Date(t.getTime()+r)},y=function(t,e){var i,r,n,s,o,u,d,p,g,m,y;if(i=t[0],a.F3j(),a.Q7y(7),n=(r=t[a.o1b(0,"1")])[5],c[i]||(c[i]={}),c[i][r])s=c[i][r];else{if(isNaN(r[4]))if(o="l",o+="ast",r[4].substr(0,4)===o?(s=new Date(Date.UTC(i,l[r[3]]+1,1,n[0]-24,n[1],n[2],0)),u=h[r[4].substr(4,3)],d="<="):(s=new Date(Date.UTC(i,l[r[3]],r[4].substr(5),n[0],n[1],n[2],0)),u=h[r[4].substr(0,3)],d=r[4].substr(3,2)),p=s.getUTCDay(),">="===d){g=-1625512664,m=711019842,y=2;for(var v=1;a.c0F(v.toString(),v.toString().length,9979)!==g;v++)s.setUTCDate(s.getUTCDate()/(u%p-(u>p?2:3))),y+=2;a.c0F(y.toString(),y.toString().length,48914)!==m&&s.setUTCDate(s.getUTCDate()+(u-p+(u<p?7:0)))}else s.setUTCDate(s.getUTCDate()+(u-p-(u>p?7:0)));else s=new Date(Date.UTC(i,l[r[3]],r[4],n[0],n[1],n[2],0));c[i][r]=s}return e&&(s=f(s,n[3],e)),s},v=function(t,e){var i;if(i=[],e)for(var a=0;a<e.length;a++)e[a][0]<=t&&(e[a][1]>=t||e[a][0]===t&&"only"===e[a][1]||"max"===e[a][1])&&i.push([t,e[a]]);return i},b=function(t,e,i){var r,s;return t instanceof Date?i&&(t=f(t,n?"u":"w",i)):(r=t[0],s=t[1],t=!i&&c[r]&&c[r][s]?c[r][s]:y(t,i)),e instanceof Date?i&&(e=f(e,n?"u":"w",i)):(r=e[0],s=e[1],e=!i&&c[r]&&c[r][s]?c[r][s]:y(e,i)),a.F3j(),t=Number(t),e=Number(e),a.Q7y(7),a.m92(e,t)},x=d.getUTCFullYear(),(C=i.ruleCache[o])||(C=i.ruleCache[o]={});(S=C[x])||(a.Q7y(99),(S=(S=v(a.m92(0,x,"1"),t.rules[p])).concat(v(x,t.rules[p]))).sort(b),C[x]=S);if(!S||!S.length)return null;for(var T=S.length-1;T>=0;T--)if(T>0?(a.Q7y(7),A=S[a.m92(1,T)][1]):A=null,(D=S[T])[2]||(D[2]=y(D,A)),b(d,D,A)>=0)return D[1];return null}(e,o,n,r))&&(u=s(u,d[6])),a.F3j(),p=d,{tzOffset:u,tzAbbr:(g=o[2]).indexOf("%s")>-1?(f=p?"-"===p[7]?"":p[7]:"S",g.replace("%s",f)):g.indexOf("/")>-1?g.split("/",2)[p&&p[6]?1:0]:g}},this.lazyLoadZoneFiles=function(t){var e;if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){if(!(e=o(t)))throw"Not a valid time","zon","e ","ID.",new Error("Not a valid timezone ID.");this.loadZoneFiles(e)}}}}.call("undefined"!=typeof window?window:void 0),i.timezone.loadingScheme=i.timezone.loadingSchemes.MANUAL_LOAD,i.timezone.loadZoneDataFromObject({zones:{"Atlantic/Cape_Verde":[[60,"-","-01",null]],"Africa/Cairo":[[-120,"","EE%sT",null]],"Africa/Nairobi":[[-180,"-","EAT",null]],"Africa/Casablanca":[[-60,"Morocco","+01/+00",null]],"Africa/Johannesburg":[[-120,"","SAST",null]],"Africa/Tunis":[[-60,"","CE%sT",null]],"Asia/Kabul":[[-270,"-","+0430",null]],"Asia/Baku":[[-240,"","+04/+05",null]],"Asia/Dhaka":[[-360,"","+06/+07",null]],"Asia/Yangon":[[-390,"-","+0630",null]],"Asia/Hong_Kong":[[-480,"","HK%sT",null]],"Asia/Taipei":[[-480,"","C%sT",null]],"Asia/Nicosia":[[-120,"EUAsia","EE%sT",null]],"Asia/Kolkata":[[-330,"-","IST",null]],"Asia/Tehran":[[-210,"Iran","+0330/+0430",null]],"Asia/Jerusalem":[[-120,"Zion","I%sT",null]],"Asia/Tokyo":[[-540,"","J%sT",null]],"Asia/Amman":[[-120,"Jordan","EE%sT",16669152e5],[-180,"-","+03",null]],"Asia/Almaty":[[-360,"-","ALMT",null]],"Asia/Seoul":[[-540,"","K%sT",null]],"Asia/Pyongyang":[[-540,"-","KST",null]],"Asia/Beirut":[[-120,"Lebanon","EE%sT",null]],"Asia/Hovd":[[-420,"","+07/+08",null]],"Asia/Ulaanbaatar":[[-480,"","+08/+09",null]],"Asia/Kathmandu":[[-345,"-","+0545",null]],"Asia/Karachi":[[-300,"","PK%sT",null]],"Asia/Riyadh":[[-180,"-","+03",null]],"Asia/Singapore":[[-480,"-","+08",null]],"Asia/Damascus":[[-120,"Syria","EE%sT",16669152e5],[-180,"-","+03",null]],"Asia/Bangkok":[[-420,"-","+07",null]],"Asia/Dubai":[[-240,"-","+04",null]],"Australia/Darwin":[[-570,"","AC%sT",null]],"Australia/Perth":[[-480,"","AW%sT",null]],"Australia/Eucla":[[-525,"","+0845/+0945",null]],"Australia/Brisbane":[[-600,"","AE%sT",null]],"Australia/Adelaide":[[-570,"AS","AC%sT",null]],"Australia/Sydney":[[-600,"AN","AE%sT",null]],"Pacific/Fiji":[[-720,"Fiji","+12/+13",null]],"Pacific/Guam":[[-600,"-","ChST",null]],"Pacific/Kiritimati":[[-840,"-","+14",null]],"Pacific/Noumea":[[-660,"","+11/+12",null]],"Pacific/Auckland":[[-720,"NZ","NZ%sT",null]],"Pacific/Chatham":[[-765,"Chatham","+1245/+1345",null]],"Pacific/Pago_Pago":[[660,"-","SST",null]],"Pacific/Apia":[[-780,"WS","+13/+14",null]],"Pacific/Tongatapu":[[-780,"","+13/+14",null]],"Etc/UTC":[[0,"-","UTC",null]],"Europe/London":[[0,"EU","GMT/BST",null]],"Europe/Dublin":[[0,"Eire","IST/GMT",null]],"Europe/Brussels":[[-60,"EU","CE%sT",null]],"Europe/Helsinki":[[-120,"EU","EE%sT",null]],"Europe/Berlin":[[-60,"EU","CE%sT",null]],"Atlantic/Azores":[[60,"EU","-01/+00",null]],"Europe/Bucharest":[[-120,"EU","EE%sT",null]],"Europe/Kaliningrad":[[-120,"-","EET",null]],"Europe/Moscow":[[-180,"-","MSK",null]],"Europe/Volgograd":[[-240,"-","+04",16090344e5],[-180,"-","+03",null]],"Europe/Samara":[[-240,"-","+04",null]],"Asia/Yekaterinburg":[[-300,"-","+05",null]],"Asia/Omsk":[[-360,"-","+06",null]],"Asia/Novosibirsk":[[-420,"-","+07",null]],"Asia/Novokuznetsk":[[-420,"-","+07",null]],"Asia/Krasnoyarsk":[[-420,"-","+07",null]],"Asia/Irkutsk":[[-480,"-","+08",null]],"Asia/Yakutsk":[[-540,"-","+09",null]],"Asia/Vladivostok":[[-600,"-","+10",null]],"Asia/Magadan":[[-660,"-","+11",null]],"Asia/Srednekolymsk":[[-660,"-","+11",null]],"Asia/Kamchatka":[[-720,"-","+12",null]],"Europe/Belgrade":[[-60,"EU","CE%sT",null]],"Europe/Istanbul":[[-180,"-","+03",null]],"America/New_York":[[300,"US","E%sT",null]],"America/Chicago":[[360,"US","C%sT",null]],"America/Denver":[[420,"US","M%sT",null]],"America/Los_Angeles":[[480,"US","P%sT",null]],"America/Juneau":[[540,"US","AK%sT",null]],"America/Adak":[[600,"US","HA%sT",null]],"Pacific/Honolulu":[[600,"-","HST",null]],"America/Phoenix":[[420,"-","MST",null]],"America/St_Johns":[[210,"Canada","N%sT",null]],"America/Halifax":[[240,"Canada","A%sT",null]],"America/Regina":[[360,"-","CST",null]],"America/Mexico_City":[[360,"Mexico","C%sT",null]],"America/Chihuahua":[[420,"Mexico","M%sT",16670952e5],[360,"US","CST",null]],"America/Mazatlan":[[420,"Mexico","M%sT",null]],"America/Costa_Rica":[[360,"","C%sT",null]],"America/Havana":[[300,"Cuba","C%sT",null]],"America/Port-au-Prince":[[300,"Haiti","E%sT",null]],"America/Puerto_Rico":[[240,"-","AST",null]],"America/Argentina/Buenos_Aires":[[180,"","-03/-02",null]],"America/Sao_Paulo":[[180,"Brazil","-03/-02",null]],"America/Santiago":[[240,"Chile","-04/-03",null]],"America/Punta_Arenas":[[180,"-","-03",null]],"America/Bogota":[[300,"","-05/-04",null]],"America/Asuncion":[[240,"Para","-04/-03",null]],"Atlantic/South_Georgia":[[120,"-","-02",null]],"America/Caracas":[[240,"-","-04",null]],UTC:"Etc/UTC",WET:"Europe/London",CET:"Europe/Brussels",EET:"Europe/Moscow","America/Toronto":"America/New_York","Europe/Amsterdam":"Europe/Brussels","Europe/Athens":"Europe/Bucharest","Europe/Copenhagen":"Europe/Brussels","Europe/Madrid":"Europe/Brussels","Europe/Paris":"Europe/Brussels","Europe/Sarajevo":"Europe/Belgrade","Europe/Stockholm":"Europe/Brussels","Europe/Zurich":"Europe/Berlin","Asia/Kuala_Lumpur":"Asia/Singapore","Asia/Shanghai":"Asia/Hong_Kong"},rules:{Morocco:[[2013,2018,"-","Oct","lastSun",[3,0,0,null],0,"-"],[2014,2018,"-","Mar","lastSun",[2,0,0,null],60,"-"],[2018,"only","-","May","13",[3,0,0,null],0,"-"],[2018,"only","-","Jun","17",[2,0,0,null],60,"-"],[2019,"only","-","May","5",[3,0,0,null],-60,"-"],[2019,"only","-","Jun","9",[2,0,0,null],0,"-"],[2020,"only","-","Apr","19",[3,0,0,null],-60,"-"],[2020,"only","-","May","31",[2,0,0,null],0,"-"],[2021,"only","-","Apr","11",[3,0,0,null],-60,"-"],[2021,"only","-","May","16",[2,0,0,null],0,"-"],[2022,"only","-","Mar","27",[3,0,0,null],-60,"-"],[2022,"only","-","May","8",[2,0,0,null],0,"-"],[2023,"only","-","Mar","19",[3,0,0,null],-60,"-"],[2023,"only","-","Apr","30",[2,0,0,null],0,"-"],[2024,"only","-","Mar","10",[3,0,0,null],-60,"-"],[2024,"only","-","Apr","14",[2,0,0,null],0,"-"],[2025,"only","-","Feb","23",[3,0,0,null],-60,"-"],[2025,"only","-","Apr","6",[2,0,0,null],0,"-"],[2026,"only","-","Feb","15",[3,0,0,null],-60,"-"],[2026,"only","-","Mar","22",[2,0,0,null],0,"-"]],EUAsia:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],Iran:[[2017,2019,"-","Mar","21",[24,0,0,null],60,"-"],[2017,2019,"-","Sep","21",[24,0,0,null],0,"-"],[2020,"only","-","Mar","20",[24,0,0,null],60,"-"],[2020,"only","-","Sep","20",[24,0,0,null],0,"-"],[2021,2022,"-","Mar","21",[24,0,0,null],60,"-"],[2021,2022,"-","Sep","21",[24,0,0,null],0,"-"]],Zion:[[2013,"max","-","Mar","Fri>=23",[2,0,0,null],60,"D"],[2013,"max","-","Oct","lastSun",[2,0,0,null],0,"S"]],Jordan:[[2014,2021,"-","Mar","lastThu",[24,0,0,null],60,"S"],[2014,2022,"-","Oct","lastFri",[0,0,0,"s"],0,"-"],[2022,"only","-","Feb","lastThu",[24,0,0,null],60,"S"]],Lebanon:[[1993,"max","-","Mar","lastSun",[0,0,0,null],60,"S"],[1999,"max","-","Oct","lastSun",[0,0,0,null],0,"-"]],Syria:[[2012,2022,"-","Mar","lastFri",[0,0,0,null],60,"S"],[2009,2022,"-","Oct","lastFri",[0,0,0,null],0,"-"]],AS:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],AN:[[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"],[2008,"max","-","Oct","Sun>=1",[2,0,0,"s"],60,"D"]],Fiji:[[2014,2018,"-","Nov","Sun>=1",[2,0,0,null],60,"-"],[2015,2021,"-","Jan","Sun>=12",[3,0,0,null],0,"-"],[2019,"only","-","Nov","Sun>=8",[2,0,0,null],60,"-"],[2020,"only","-","Dec","20",[2,0,0,null],60,"-"]],NZ:[[2007,"max","-","Sep","lastSun",[2,0,0,"s"],60,"D"],[2008,"max","-","Apr","Sun>=1",[2,0,0,"s"],0,"S"]],Chatham:[[2007,"max","-","Sep","lastSun",[2,45,0,"s"],60,"-"],[2008,"max","-","Apr","Sun>=1",[2,45,0,"s"],0,"-"]],WS:[[2012,2021,"-","Apr","Sun>=1",[4,0,0,null],0,"-"],[2012,2020,"-","Sep","lastSun",[3,0,0,null],60,"-"]],Eire:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],0,"-"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],-60,"-"]],EU:[[1981,"max","-","Mar","lastSun",[1,0,0,"u"],60,"S"],[1996,"max","-","Oct","lastSun",[1,0,0,"u"],0,"-"]],US:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Canada:[[2007,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2007,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Mexico:[[2002,2022,"-","Apr","Sun>=1",[2,0,0,null],60,"D"],[2002,2022,"-","Oct","lastSun",[2,0,0,null],0,"S"]],Cuba:[[2012,"max","-","Nov","Sun>=1",[0,0,0,"s"],0,"S"],[2013,"max","-","Mar","Sun>=8",[0,0,0,"s"],60,"D"]],Haiti:[[2017,"max","-","Mar","Sun>=8",[2,0,0,null],60,"D"],[2017,"max","-","Nov","Sun>=1",[2,0,0,null],0,"S"]],Brazil:[[2016,2019,"-","Feb","Sun>=15",[0,0,0,null],0,"-"],[2018,"only","-","Nov","Sun>=1",[0,0,0,null],60,"-"]],Chile:[[2016,2018,"-","May","Sun>=9",[3,0,0,"u"],0,"-"],[2016,2018,"-","Aug","Sun>=9",[4,0,0,"u"],60,"-"],[2019,"max","-","Apr","Sun>=2",[3,0,0,"u"],0,"-"],[2019,2021,"-","Sep","Sun>=2",[4,0,0,"u"],60,"-"],[2022,"only","-","Sep","Sun>=9",[4,0,0,"u"],60,"-"],[2023,"max","-","Sep","Sun>=2",[4,0,0,"u"],60,"-"]],Para:[[2010,"max","-","Oct","Sun>=1",[0,0,0,null],60,"-"],[2013,"max","-","Mar","Sun>=22",[0,0,0,null],0,"-"]]}})},k=t=>{var e,i;function a(t,i,a){var r;t.layout.crosshair||(e.ChartEngine.crosshairY=0,e.ChartEngine.crosshairX=0,t.cx=t.backOutX(0),E.Q7y(12),t.cy=t.backOutY(E.o1b("0",0)),t.findHighlights(null,!0),e.ChartEngine.crosshairY=a,e.ChartEngine.crosshairX=i,r=t.container.getBoundingClientRect(),t.top=r.top,t.left=r.left,t.right=t.left+t.width,t.bottom=t.top+t.height,t.cx=t.backOutX(i),t.cy=t.backOutY(a),t.currentPanel&&t.currentPanel.chart.dataSet&&(t.crosshairTick=t.tickFromPixel(t.cx,t.currentPanel.chart),t.crosshairValue=t.adjustIfNecessary(t.currentPanel,t.crosshairTick,t.valueFromPixel(t.cy,t.currentPanel))),t.headsUpHR()),t.findHighlights(!0),t.draw()}(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).ChartEngine.prototype.touchSingleClick=function(t,i,r){var n,s;return n=this,s=arguments,function(){E.X8U(),function(){var t,n,o;if(!this.cancelTouchSingleClick){if(this.runPrepend("touchSingleClick",s))return;if(this.editingAnnotation)return;if(this.clicks={},!this.displayCrosshairs)return;if(!this.displayInitialized)return;if(""!==this.openDialog)return;if(i<this.left||i>this.right||r<this.top||r>this.bottom)return;t=this.crossYActualPos,n=this.crossXActualPos,this.currentPanel=this.whichPanel(t),o=this.currentVectorParameters.vectorType,e.Drawing&&o&&e.Drawing[o]&&(new e.Drawing[o]).dragToDraw||(this.drawingClick(this.currentPanel,n,t)||a(this,i,r),this.currentVectorParameters.vectorType||this.activeMarker&&this.activeMarker.click({cx:n,cy:t,panel:this.currentPanel})||this.dispatch("tap",{stx:this,panel:this.currentPanel,x:n,y:t}))}this.runAppend("touchSingleClick",s)}.apply(n,s)}},e.ChartEngine.prototype.touchDoubleClick=function(t,i,r){var n,s,o,l;if(n="to",n+="uchDoub",n+="leCli",n+="ck",!this.runPrepend(n,arguments)&&!this.editingAnnotation)return e.ChartEngine.drawingLine?(s="continu",s+="ous",this.currentVectorParameters.vectorType===s&&(o=this.crossYActualPos,l=this.crossXActualPos,this.currentPanel=this.whichPanel(o),this.drawingClick(this.currentPanel,l,o),e.ChartEngine.completeDrawing(this)),this.undo()):void(this.activeDrawing||(a(this,i,r),this.activeMarker&&this.activeMarker.doubleClick({cx:i,cy:r,panel:this.currentPanel})||this.dispatch("doubleTap",{stx:this,finger:t,x:i,y:r}),this.runAppend("touchDoubleClick",arguments)))},e.ChartEngine.prototype.startProxy=function(t){this.touchPointerType=t.pointerType,"touch"==this.touchPointerType?(this.mouseMode=!1,this.touches[this.touches.length]={pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY},this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY}],1==this.touches.length&&(this.gesturePointerId=t.pointerId),this.touchstart(t)):this.mouseMode=!0},e.ChartEngine.prototype.moveProxy=function(t){t.pointerType&&"touch"!=t.pointerType?this.mouseMode=!0:(E.X8U(),this.mouseMode=!1,this.touchmove(t))},e.ChartEngine.prototype.endProxy=function(t){var e;if("to","u","ch","touch"==this.touchPointerType){this.mouseMode=!1,e=this.touches.length;for(var i=0;i<this.touches.length;i++)if(this.touches[i].pointerId==t.pointerId){this.touches.splice(i,1);break}if(i==e)return this.touches=[],this.grabbingScreen=!1,void(this.touching=!1);this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY}],this.touchend(t)}else this.mouseMode=!0},e.ChartEngine.prototype.msMouseMoveProxy=function(t){!this.touches.length&&this.mouseMode&&(E.X8U(),this.mousemove(t))},e.ChartEngine.prototype.msMouseDownProxy=function(t){this.mouseMode&&this.mousedown(t)},e.ChartEngine.prototype.msMouseUpProxy=function(t){E.X8U(),this.mouseMode&&this.mouseup(t)},e.ChartEngine.prototype.iosMouseMoveProxy=function(t){E.X8U(),this.touching||this.mousemove(t)},e.ChartEngine.prototype.iosMouseDownProxy=function(t){this.touching?this.mouseMode=!1:(this.mouseMode=!0,this.mousedown(t))},e.ChartEngine.prototype.iosMouseUpProxy=function(t){this.touching||this.mouseup(t)},e.ChartEngine.prototype.touchmove=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,I,N,O,H,R,z,j,U,B,V,W,Q=E;if(i="to",i+="uc",i+="h",i+="move",this.displayInitialized&&""===this.openDialog&&!0!==e.ChartEngine.ignoreTouch){a=[],(!this.overYAxis||this.controls&&this.controls.crossX&&"none"!=this.controls.crossX.style.display)&&(t&&t.preventDefault&&t.cancelable&&this.captureTouchEvents&&t.preventDefault(),t&&t.stopPropagation()),r=(new Date).getTime();var{down:[Y]}=this.pointerEvents;if(!(r-Y.time<25)){if(t.pointerType||(t.pointerType=this.touchPointerType),e.isSurface){if(this.mouseMode)return;t.pointerId||(t.pointerId=this.gesturePointerId);for(var q=0;q<this.touches.length;q++)if(this.touches[q].pointerId==t.pointerId){if(n=Math.abs(this.touches[q].pageX-t.clientX),s=Math.abs(this.touches[q].pageY-t.clientY),Q.J4P(43),!Math.sqrt(Q.m92(n,s,s,n)))return;if(r-Y.time<50)return;if(this.touches[q].pageX==t.clientX&&this.touches[q].pageY==t.clientY)return;this.touches[q].pageX=this.touches[q].clientX=t.clientX,this.touches[q].pageY=this.touches[q].clientY=t.clientY;break}if(0===q?this.movedPrimary=!0:this.movedSecondary=!0,q==this.touches.length)return;this.changedTouches=[{pointerId:t.pointerId,pageX:t.clientX,pageY:t.clientY,clientX:t.clientX,clientY:t.clientY}],a=this.touches.length?this.touches:this.changedTouches}else a=t.touches,this.changedTouches=t.changedTouches;if(!(1==a.length&&e.withinRadius(this.clicks,{x:a[0].clientX,y:a[0].clientY},4)||(o=this.crosshairXOffset,l=this.crosshairYOffset,h=this.currentVectorParameters.vectorType&&""!==this.currentVectorParameters.vectorType,c=!this.layout.crosshair&&!h&&!this.touchNoPan,("pen"==t.pointerType||c||this.activeDrawing&&"freeform"==this.activeDrawing.name)&&(o=l=0),this.runPrepend(i,arguments)))){if(e.ChartEngine.resizingPanel)return u=(p=a[0]).clientX,d=p.clientY,Q.J4P(1),void this.mousemoveinner(Q.o1b(o,u),Q.o1b(l,d));if(-1!=this.moveB&&(this.touchMoveTime=new Date),this.moveA=this.moveB,this.moveB=a[0].pageX,1!=a.length||this.twoFingerStart){if(2==a.length){if(!this.allowZoom||this.activeDrawing&&!this.allowDrawingZoom)return;if(!this.displayCrosshairs)return;if(b=(v=a[0]).clientX,x=v.clientY,C=(S=a[1]).clientX,A=S.clientY,Q.Q7y(150),g=Math.sqrt(Q.o1b(C,b,b,x,A,A,x,C)),this.pinchingCenter=(Math.min(b,C)-Math.max(b,C))/2,D=Math.round(this.gestureStartDistance-g),c&&(this.pinchingScreen=5),this.clearPixelCache(),this.pinchingScreen<2){if(e.isSurface&&(!this.movedPrimary||!this.movedSecondary))return;if(b<this.pt.x1&&C<this.pt.x2||b>this.pt.x1&&C>this.pt.x2||x<this.pt.y1&&A<this.pt.y2||x>this.pt.y1&&A>this.pt.y2)Q.Q7y(34),this.pinchingScreen=Q.m92("0",0);else if(this.pinchingScreen++,this.pinchingScreen<2)return}if(this.pt={x1:b,x2:C,y1:x,y2:A},0===this.pinchingScreen)this.grabMode="pan",Q.J4P(1),this.mousemoveinner(Q.m92(o,b),Q.o1b(l,x)),this.gestureStartDistance=g;else if(this.grabStartValues){if(k=Math.asin((Math.max(A,x)-Math.min(A,x))/g),Math.abs(D)<12&&!c){w=-1938278955,M=1225548874,T=2;for(var X=1;Q.o0j(X.toString(),X.toString().length,9440)!==w;X++)this.moveCount--,T+=2;if(Q.c0F(T.toString(),T.toString().length,78799)!==M&&this.moveCount++,4==this.moveCount)return this.pinchingScreen=0,void(this.moveCount=0)}else this.moveCount=0;if(k<1||!this.goneVertical&&k<1.37){if(!this.currentPanel)return;if(F=this.currentPanel.chart,this.goneVertical=!1,g=this.pt.x2-this.pt.x1,P=this.grabStartValues.t2-this.grabStartValues.t1||1,_=this.grabStartValues.t1+P/2,Q.Q7y(10),L=Math.abs(Q.m92(P,g)),!1===F.allowScrollFuture&&!1===F.allowScrollPast&&(L=Math.max(L,F.width/F.dataSet.length)),I=this.layout.candleWidth,this.setCandleWidth(L,F),F.maxTicks<this.minimumZoomTicks)return void this.setCandleWidth(I,F);this.micropixels=0,N=this.pixelFromTick(Math.round(_),F),Q.Q7y(8);var Z=Q.o1b(8,6);O=this.pt.x1-this.left+Math.round(g/Z),Q.J4P(7),H=Q.m92(O,N),Q.Q7y(10),R=Q.o1b(L,H),z=Math.round(R),F.scroll-=z,Q.Q7y(7),this.microscroll=Q.o1b(R,z),this.micropixels=L*this.microscroll,this.draw()}else if(j=this.grabStartYAxis,this.goneVertical=!0,j){if(j.zoom=this.grabStartZoom+(this.gestureStartDistance-g),this.grabStartZoom<j.height){Q.J4P(2),U=-Q.m92("1900197543",1),B=69706901,V=2;for(var J=1;Q.o0j(J.toString(),J.toString().length,95414)!==U;J++){if(j.zoom>=j.height){Q.Q7y(1);var G=Q.m92(1,0);j.zoom=j.height-G}V+=2}Q.c0F(V.toString(),V.toString().length,3875)!==B&&j.zoom<=j.height&&(j.zoom=j.height%0)}else if(j.zoom<=j.height){Q.Q7y(17);var K=Q.m92(4,3,0);j.zoom=j.height+K}this.draw()}this.updateChartAccessories()}}else if(3==a.length&&e.ChartEngine.allowThreeFingerTouch){if(!this.displayCrosshairs)return;W=a[0].clientX,g=this.grabStartX-W,Q.Q7y(55);var $=Q.o1b(80,10,790);this.grabEndPeriodicity=this.grabStartPeriodicity+Math.round(g/$),this.grabEndPeriodicity<1&&(this.grabEndPeriodicity=1)}}else u=(m=a[0]).clientX,d=m.clientY,this.pinchingScreen=0,Q.J4P(1),this.mousemoveinner(Q.m92(o,u),Q.o1b(l,d)),f=this.whichPanel(d),y=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=d<=this.top+y&&d>=y-this.xaxisHeight+this.top&&this.insideChart,this.overYAxis=!!f&&((u>=f.right||u<=f.left)&&this.insideChart);this.runAppend("touchmove",arguments)}}}},e.ChartEngine.prototype.touchstart=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P=E;if(i="to",i+="uc",i+="hstart",!e.ChartEngine.ignoreTouch&&(e.isSurface?(this.movedPrimary=!1,this.movedSecondary=!1):(this.touchingEvent&&clearTimeout(this.touchingEvent),this.touching=!0,this.touches=t.touches,this.changedTouches=t.changedTouches),r=this.crosshairXOffset,n=this.crosshairYOffset,"pen"==this.touchPointerType&&(r=n=0),!this.runPrepend(i,arguments))){var _,L,I,{layout:N}=this,{vectorType:O}=this.currentVectorParameters;if(s=N.crosshair&&""!==O||O,this.manageTouchAndMouse&&t&&t.preventDefault&&t.cancelable&&this.captureTouchEvents&&t.preventDefault(),this.hasDragged=!1,this.doubleFingerMoves=0,P.Q7y(42),this.moveCount=P.m92(32,"0"),this.twoFingerStart=!1,1==this.touches.length||2==this.touches.length){if(this.touchMoveTime=Date.now(),d=this.touches[0],h=d.clientX,c=d.clientY,this.moveA=h,this.moveB=-1,""===this.openDialog&&(this.registerPointerEvent({x:h,y:c,time:this.touchMoveTime},"down"),1==this.changedTouches.length&&(this.clicks={x:this.changedTouches[0].pageX,y:this.changedTouches[0].pageY})),p=this.container.getBoundingClientRect(),this.top=p.top,this.left=p.left,this.right=this.left+this.width,this.bottom=this.top+this.height,1==this.touches.length&&(this.crossXActualPos=this.backOutX(h),this.crossYActualPos=this.backOutY(c),this.currentPanel=this.whichPanel(this.crossYActualPos)),this.currentPanel||(this.currentPanel=this.chart.panel),u=this.currentPanel,h>=this.left&&h<=this.right&&c>=this.top&&c<=this.bottom){this.insideChart=!0,g=!0===this.xAxisAsFooter?this.chart.canvasHeight:this.chart.panel.bottom,this.overXAxis=c<=this.top+g&&c>=this.top+g-this.xaxisHeight,this.overYAxis=h>=this.left+u.right||h<=this.left+u.left,m=-1,this.cy=this.backOutY(c),this.cx=this.backOutX(h),this.crosshairTick=this.tickFromPixel(this.cx,u.chart),this.crosshairValue=this.adjustIfNecessary(u,this.crosshairTick,this.valueFromPixel(this.cy,this.currentPanel));for(var H=0;H<this.drawingObjects.length;H++)if((f=this.drawingObjects[H]).highlighted){if(m<0&&(m=H),y=f.highlighted,this.findHighlights(!0),H==m&&f.highlighted&&!f.permanent)return void this.activateRepositioning(f);this.anyHighlighted=!0,f.highlighted=y}}else this.insideChart=!1;if(!this.insideChart||s||"floating"===N.headsUp||N.headsUp&&N.headsUp.floating||O||this.touchNoPan){if(this.grabbingScreen=!1,this.insideChart&&u.subholder===t.target&&(k=this.currentVectorParameters.vectorType,e.Drawing&&k&&e.Drawing[k]&&(new e.Drawing[k]).dragToDraw))return this.userPointerDown=!0,e.ChartEngine.crosshairX=h,e.ChartEngine.crosshairY=c,u&&u.chart.dataSet&&(this.crosshairTick=this.tickFromPixel(this.backOutX(e.ChartEngine.crosshairX),this.currentPanel.chart),this.crosshairValue=this.adjustIfNecessary(u,this.crosshairTick,this.valueFromPixel(this.backOutY(e.ChartEngine.crosshairY),this.currentPanel))),this.drawingClick(u,this.backOutX(h),this.backOutY(c)),void this.headsUpHR()}else{r=n=0;var{baselineHelper:R}=this;if(R.size&&this.findBaselineHandle(t,!0))return;if(this.controls.anchorHandles){v=Object.values(this.controls.anchorHandles),b=!1;for(var z=0;z<v.length;z++){x=v[z];var{handle:j,sd:U}=x;S=this.resolveX(this.cx),C=this.resolveY(this.cy);var{left:B,top:V,right:W,bottom:Q}=j.getBoundingClientRect();A=this.preferences.highlightsTapRadius,P.J4P(7),(D=e.boxIntersects(P.o1b(A,B),V,P.o1b(A,W,P.Q7y(1)),Q,S,C,S,C))&&(this.repositioningAnchorSelector={sd:U},j.classList.add("stx-grab"),b=!0),x.highlighted=D}if(b)return}for(o in this.panels)if((l=this.panels[o]).highlighted)return void this.grabHandle(l);this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),u.chart.spanLock=!1,this.yToleranceBroken=!1,P.Q7y(1),this.grabStartX=P.m92(r,h),P.Q7y(1),this.grabStartY=P.o1b(n,c),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=u.chart.scroll,this.grabStartScrollY=u.yAxis.scroll,this.grabStartPanel=this.currentPanel,this.swipeStart&&this.swipeStart(u.chart),this.grabStartYAxis=this.whichYAxis(u,this.backOutX(h)),this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,setTimeout((L=this,P.F3j(),function(){P.F3j(),L.grabbingHand()}),100)}1==this.touches.length&&(s?O||u.subholder!==t.target||(P.J4P(1),this.mousemoveinner(P.m92(r,h),P.m92(n,c))):(this.mouseTimer=Date.now(),this.longHoldTookEffect=!1,(this.longHoldTime||0===this.longHoldTime)&&this.startLongHoldTimer((_=this,()=>a(_,h,c)))))}if(2==this.touches.length){if(this.cancelLongHold=!0,this.swipe.end=!0,!this.displayCrosshairs&&!this.touchNoPan||!this.insideChart)return;for(o in P.J4P(42),M=(w=this.touches[P.m92(0,"1")]).clientX,T=w.clientY,this.panels)if((l=this.panels[o]).highlighted)return void this.grabHandle(l);u=this.currentPanel,P.J4P(150),this.gestureStartDistance=Math.sqrt(P.o1b(M,h,h,c,T,T,c,M)),this.pt={x1:h,x2:M,y1:c,y2:T},this.grabbingScreen=!0,this.disableBackingStoreDuringTouch&&this.disableBackingStore(),u.chart.spanLock=!1,P.Q7y(1),this.grabStartX=P.o1b(r,h),P.J4P(1),this.grabStartY=P.o1b(n,c),this.grabStartMicropixels=this.micropixels,this.grabStartScrollX=u.chart.scroll,this.grabStartScrollY=u.yAxis.scroll,this.grabStartPanel=u,this.swipeStart&&this.swipeStart(u.chart),this.grabStartCandleWidth=N.candleWidth,this.grabStartYAxis=this.whichYAxis(u,this.backOutX((h+M)/2))||u.yAxis,this.grabStartZoom=this.grabStartYAxis?this.grabStartYAxis.zoom:0,this.grabStartPt=this.pt,this.grabStartValues={x1:this.pt.x1,x2:this.pt.x2,y1:this.valueFromPixel(this.pt.y1-this.top,u),y2:this.valueFromPixel(this.pt.y2-this.top,u),t1:this.tickFromPixel(this.pt.x1-this.left,u.chart),t2:this.tickFromPixel(this.pt.x2-this.left,u.chart)},this.twoFingerStart=!0,setTimeout((I=this,P.X8U(),function(){I.grabbingHand()}),100)}else if(3==this.touches.length){if(!this.displayCrosshairs)return;F=this.touches[0].clientX,this.grabStartX=F,this.grabStartPeriodicity=N.periodicity}this.runAppend("touchstart",arguments)}},e.ChartEngine.prototype.touchend=function(t){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y=E;if(!e.ChartEngine.ignoreTouch&&(this.swipe.end=!0,e.isSurface||(this.touches=t.touches,this.changedTouches=t.changedTouches),!this.runPrepend("touchend",arguments))){var v,{touches:b,layout:x}=this,{vectorType:S}=this.currentVectorParameters;if(i=x.crosshair&&""!==S||S,this.cancelLongHold=!0,b.length<=1&&i&&(b.length&&this.twoFingerStart||(this.grabbingScreen=!1)),y.X8U(),b.length&&(this.grabStartX=-1,this.grabStartY=-1),a=this.pinchingScreen,this.disableBackingStoreDuringTouch&&this.reconstituteBackingStore(),b.length){if(e.ChartEngine.resizingPanel)return}else{if(this.touchingEvent=setTimeout((v=this,function(){v.touching=!1}),500),e.ChartEngine.resizingPanel&&(this.releaseHandle(),1!==this.changedTouches.length||this.grabStartY!==this.changedTouches[0].clientY))return;this.pinchingScreen=null,this.pinchingCenter=null,this.goneVertical=!1,this.grabbingScreen=!1,this.grabMode="",this.highlightedDraggable&&(this.dragPlotOrAxis&&this.dragPlotOrAxis(this.cx,this.cy),this.currentPanel=this.whichPanel(this.cy)),this.grabStartYAxis=null,this.displayDragOK(),this.doDisplayCrosshairs(),this.updateChartAccessories()}if(r=b.length+1,1===this.changedTouches.length){if(n=Date.now(),s=this.changedTouches[0],o=this.backOutY(s.pageY)+this.crosshairYOffset,l=this.backOutX(s.pageX)+this.crosshairXOffset,c=(h=this.currentPanel)&&h.subholder===t.target,this.repositioningDrawing)return this.changeOccurred("vector"),e.clearCanvas(this.chart.tempCanvas,this),this.activateRepositioning(null),this.draw(),void(i||this.findHighlights(!1,!0));if(this.repositioningBaseline)return u="stx-g",u+="ra",u+="b",this.repositioningBaseline=null,this.controls.baselineHandle.classList.remove(u),(d=this.mainSeriesRenderer).params.baseline&&d.params.type,void this.draw();if(this.repositioningAnchorSelector){if(!this.repositioningAnchorSelector.hoverTick){p=347506707,g=1486170209,m=2;for(var C=1;y.c0F(C.toString(),C.toString().length,69301)!==p;C++)this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(l/this.crosshairXOffset,this.chart),m+=2;y.c0F(m.toString(),m.toString().length,30645)!==g&&(this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(l/this.crosshairXOffset,this.chart)),this.repositioningAnchorSelector.hoverTick=this.tickFromPixel(l-this.crosshairXOffset,this.chart)}return f=this.repositioningAnchorSelector.sd,e.Studies.repositionAnchor(this,f),this.repositioningAnchorSelector=null,this.controls.anchorHandles[f.uniqueId].highlighted=!1,e.Studies.displayAnchorHandleAndLine(this,f,this.chart.dataSegment),void Object.values(this.controls.anchorHandles).forEach((({handle:t})=>(y.F3j(),t.classList.remove("stx-grab"))))}if(""===this.openDialog&&this.registerPointerEvent({x:s.clientX,y:s.clientY,time:n},"up"),this.isDoubleClick(!0)&&(c||this.overYAxis||this.overXAxis))this.touchDoubleClick(r,this.clicks.x,this.clicks.y),this.resetClickState();else{if(!(e.Drawing&&S&&e.Drawing[S]&&(new e.Drawing[S]).dragToDraw)){y.Q7y(151);var A=y.m92(39,339,5,11),{up:[D],down:[k]}=this.pointerEvents,w=A;e.withinRadius(k,D,w)&&n-k.time<750&&!this.longHoldTookEffect&&(!this.hasDragged||i)&&setTimeout(this.touchSingleClick(r,this.clicks.x,this.clicks.y),this.doubleClickTime+1)}if(this.userPointerDown=!1,e.Drawing&&this.activeDrawing&&this.activeDrawing.dragToDraw&&c)return void this.drawingClick(h,l,o)}}else this.displayCrosshairs&&(-1==this.grabEndPeriodicity||isNaN(this.grabEndPeriodicity)||((e.ChartEngine.isDailyInterval(this.layout.interval)||this.allowIntradayNMinute)&&this.setPeriodicity({period:this.grabEndPeriodicity,interval:this.layout.interval}),this.grabEndPeriodicity=-1));this.changedTouches.length&&((!i&&!this.currentVectorParameters.vectorType&&1==r||this.twoFingerStart&&!a&&!this.touches.length)&&(this.swipeRelease&&this.swipeRelease(),this.findHighlights(!1,!0)),a&&this.continuousZoom&&(this.continuousZoom.execute(),this.continuousZoom.execute(!0))),b.length||(this.twoFingerStart=!1),this.runAppend("touchend",arguments)}},i=!1,e.ChartEngine.prototype.mousemoveinner=e.ChartEngine.prototype.mousemoveinner||function(t,e){E.F3j(),i||console.error("touch feature requires activating movement feature."),i=!0}},w=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Visualization=e.Visualization||function(t){t?(E.F3j(),"function"==typeof t.renderFunction?(this.container=null,this.attributes=t,this.data=null,this.object=null):console.log("CIQ.Visualization() missing renderFunction property in attributes.")):console.log("CIQ.Visualization() missing attributes argument.")},e.extend(e.Visualization.prototype,{destroy:function(t){var i;i=this.container||{},e.resizeObserver(i,null,i.resizeHandle),i.autoGenerated?(i.remove(),delete this.container):i.innerHTML="",t||(this.attributes=null,this.container=null,this.data=null,this.object=null,this.destroy=this.draw=this.setAttributes=function(){},this.updateData=function(){E.F3j()})},draw:function(t){var i,a,r,n,s,o,l=E;this.data&&"object"==typeof this.data?(i=this.attributes||{},a=i.document||document,l.F3j(),"string"==typeof(r=i.container||this.container)&&(r=a.querySelector(r)),r||((r=document.createElement("div")).style.height=r.style.width="300px",a.body.appendChild(r),r.autoGenerated=!0),i.stx&&(n=i.stx.chart.canvasShim,i.useCanvasShim&&n&&n!==r&&n!==r.parentNode&&(r.autoGenerated||((r=r.cloneNode()).id="",r.autoGenerated=!0),n.appendChild(r))),this.container&&this.container!==r&&this.destroy(!0),r.resizeHandle||(s=function(t){return l.X8U(),function(){l.X8U(),t.data&&t.container&&a.body.contains(t.container)&&t.draw.call(t,!0)}},r.resizeHandle=e.resizeObserver(r,s(this))),this.container=r,this.attributes=i,(o=(i=e.ensureDefaults({container:this.container},this.attributes)).renderFunction(Object.values(this.data).sort((function(t,e){return l.X8U(),t.index<e.index?-1:t.index>e.index?1:0})),i))&&(i.id&&(o.id=i.id),(t||i.forceReplace)&&(this.container.innerHTML="",this.container.appendChild(o))),this.attributes=i,this.object=o):console.log("CIQ.Visualization.draw() missing data.")},setAttributes:function(t,e){var i,a,r;if("objec","t","st","r","in","g","for","ceReplace",i=["renderFunction","container","stx","useCanvasShim","id","forceReplace"],a=!1,r=t,"string"==typeof t&&((r={})[t]=e),"object"==typeof r)for(var n in r)this.attributes[n]!==r[n]&&-1!==i.indexOf(n)&&(a=!0),this.attributes[n]=r[n];this.draw(a)},updateData:function(t,i){var a,r,n;for(a in E.F3j(),"updat","e","del","ete","r","ep","lac","e",n=Array.isArray(t)?t.reduce((function(t,e){return t[e.name]=e,t}),{}):e.shallowClone(t))r=n[a],"[object Object]"!==Object.prototype.toString.call(r)&&(n[a]={value:r}),n[a].name||(n[a].name=a),n[a].value||(n[a].value=0);switch(i||(i="replace"),i.toLowerCase()){case"delete":for(a in n)delete this.data[a];break;case"replace":this.data={};case"update":case"add":for(a in n)for(var s in this.data[a]||(this.data[a]={name:a}),r=n[a].value,"[object Number]"==Object.prototype.toString.call(r)?(this.data[a].value&&"update"!=i||(this.data[a].value=0),this.data[a].value+=r):this.data[a].value=r,n[a])"v","al","u","e","value"!==s&&(this.data[a][s]=n[a][s]);break;default:console.log("Invalid or missing action.  Valid values are 'add', 'delete', 'replace', or 'update'.")}return this.draw(this.attributes.forceReplace),this}}),e.ChartEngine.prototype.embedVisualization=function(t){var i;t||(t={}),i=2;for(var a=1;-1053387591!==E.c0F(a.toString(),a.toString().length,81385);a++)t.stx=this,i+=2;return 576601523!==E.c0F(i.toString(),i.toString().length,65337)&&(t.stx=this),t.useCanvasShim=!0,t.translator=function(e){return t.stx.translateIf(e)},t.document=this.container.ownerDocument,new e.Visualization(t)}},M=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Me","dian ","Price",e.Studies.calculateTypicalPrice=function(t,e){var i,a,r,n,s,o=E;if("Me","d ","Pri","ce",i=e.chart.scrubbed,a=e.days,i.length<a+1)e.overlay||(e.error=!0);else{for(var l in r=e.name,o.F3j(),e.outputs)o.J4P(15),r=o.o1b(l,r," ");n="hlc/3","Med Price"==e.type?n="hl/2":"Weighted Close"==e.type&&(n="hlcc/4"),o.Q7y(34),s=o.o1b("0",32),e.startFrom<=a&&(e.startFrom=0);for(var h=e.startFrom;h<i.length;h++){if(h&&i[h-1][r])o.Q7y(7),s=i[h-o.o1b(15,16)][r]*a;s+=i[h][n],h>=a&&(o.J4P(7),s-=i[o.o1b(a,h)][n],o.Q7y(10),i[h][r]=o.o1b(a,s))}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Med Price":{name:"Median Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}}})):("medianPrice feature requires firs","t act","ivating ","studies feature.",console.error("medianPrice feature requires first activating studies feature."))},T=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("fi","e","ld",e.Studies.calculateRateOfChange=function(t,e){var i,a,r,n,s,o,l,h=E;if(h.F3j(),"C","lose",(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{for(var c in(a=e.inputs.Field)&&"field"!=a||(a="Close"),e.parameters.isVolume&&(a="Volume"),r=e.name,e.outputs)h.Q7y(15),r=h.o1b(c,r," ");(n=e.inputs["Center Line"])?(h.Q7y(35),n=parseInt(n,h.o1b(2,"10"))):n=0;for(var u=Math.max(e.startFrom,e.days);u<i.length;u++)"ob","jec","t","obj","ec","t",(s=i[u][a])&&"object"==typeof s&&(s=s[e.subField]),(o=i[u-e.days][a])&&"object"==typeof o&&(o=o[e.subField]),"Momentum"==e.type?(h.Q7y(17),i[u][r]=h.m92(n,o,s)):(l=o)&&(h.J4P(152),i[u][r]=h.o1b(l,1,100,n,s))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Price ROC":{name:"Price Rate of Change",calculateFN:e.Studies.calculateRateOfChange,inputs:{Period:14,Field:"field"}},Momentum:{name:"Momentum Indicator",calculateFN:e.Studies.calculateRateOfChange,inputs:{Period:14},centerline:0}})):("momentum feat","ure requires first activating ","studies feature.",console.error("momentum feature requires first activating studies feature."))},F=t=>{var e,i=E;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i.F3j(),e.Studies?("Price Relat","ive",e.Studies.initPriceRelative=function(t,a,r,n,s,o){var l,h;return h=[(l=e.Studies.initializeFN(t,a,r,n,s,o)).inputs["Comparison Symbol"].toUpperCase()],i.X8U(),e.Studies.fetchAdditionalInstruments(t,l,h),l},e.Studies.calculatePriceRelative=function(t,a){var r,n,s,o,l,h;if("Compariso","n Symbol",r=a.chart.scrubbed,(n=a.inputs["Comparison Symbol"].toUpperCase())||(n=a.study.inputs["Comparison Symbol"]),(s={})[o=(o=t.chart.symbol||"").replace(/[=+\-*\\%]/g,"")]=r.slice(a.startFrom),s[o].length){o!=n&&(s[n]=null),i.Q7y(84),l=e.computeEquationChart(i.m92("[","]",n,o,"]/["),s),i.X8U(),i.Q7y(12),h=i.o1b("0",0);for(var c=a.startFrom;c<r.length&&h<l.length;c++){for(;h<l.length&&r[c].DT.getTime()>l[h].DT.getTime();)h++;r[c].DT.getTime()<l[h].DT.getTime()||(r[c]["Result "+a.name]=l[h].Close,h++)}}},e.Studies.displayVsComparisonSymbol=function(t,a,r){var n,s,o,l;if(n=a.inputs["Comparison Symbol"].toUpperCase(),!t.getSeries({symbol:n,chart:a.chart}).length)return":"," ",void t.displayErrorAsWatermark(a.panel,t.translateIf(a.study.name)+": "+t.translateIf("Not Available"));i.X8U(),o=(s={skipTransform:t.panels[a.panel].name!=a.chart.name,panelName:a.panel,band:"Result "+a.name,threshold:a.study.centerline,yAxis:a.getYAxis(t),gapDisplayStyle:!0}).yAxis?s.yAxis.flipped:t.panels[a.panel].yAxis.flipped,l=.3,!a.highlight&&t.highlightedDraggable&&(l*=.3);for(var h=r.length-1;h>=0;h--)if(r[h]&&r[h][n])return e.Studies.displaySeriesAsLine(t,a,r),void((a.study.centerline||0===a.study.centerline)&&(a.outputs.Gain&&e.preparePeakValleyFill(t,e.extend(s,{direction:o?-1:1,color:e.Studies.determineColor(a.outputs.Gain),opacity:l})),a.outputs.Loss&&e.preparePeakValleyFill(t,e.extend(s,{direction:o?1:-1,color:e.Studies.determineColor(a.outputs.Loss),opacity:l}))))},e.Studies.fetchAdditionalInstruments=function(t,a,r,n){var s,o,l,h,c,u;if(t.quoteDriver)for(s=t.panels[a.panel].chart,a.symbols=r,o=0;o<r.length;o++)"s","tud","y",l=h=r[o],"object"==typeof h?l=h.symbol:h={symbol:l},c={symbol:l,symbolObject:h,bucket:"study",studyName:a.name,chartName:s.name,action:"add-study"},e.extend(c,n),u=c.loadData,t.currentlyImporting&&(c.loadData=!1),a.series||(a.series={}),a.series[l]=t.addSeries(null,c,d),a.series[l].parameters.loadData=u;else console.log("CIQ.Studies.fetchAdditionalInstruments: No quotefeed to fetch symbol");function d(){i.X8U(),t.createDataSet(),t.draw()}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"P Rel":{name:"Price Relative",initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePriceRelative,centerline:0,inputs:{"Comparison Symbol":"SPY"},deferUpdate:!0}})):("priceRelat","ive feature requ","ires first activating st","udies feature.",console.error("priceRelative feature requires first activating studies feature."))},P=t=>{var e,i,a=E;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,a.X8U(),i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,e.Studies?("#f","ff69e","#85","c99e","#FF0","0","0","0","#e1e1","e","1",e.Studies.calculateVWAP=function(t,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v;if("A","V","WA","P",!(r.parameters.state||{}).interactiveAdd){var{inputs:b,name:x,chart:S}=r,{market:C}=S;if(n="AVWAP"===r.type,(s=S.scrubbed).length)if(n||!e.ChartEngine.isDailyInterval(t.layout.interval)){if(o="hlc/3",n&&((o=b.Field)&&"field"!=o||(o=b.Field="hlc/3",t.changeOccurred("layout"))),l=null,h=0,c=0,u=0,d=!1,r.startFrom>1&&("_","V"," ",h=s[r.startFrom-1]["_V "+x]||0,c=s[r.startFrom-1]["_VxP "+x]||0,u=s[r.startFrom-1]["_VxP2 "+x]||0),n){"Anch","or Selector","An","c","hor"," Time";var{market_tz:A}=C.market_def||{},[,D,k,w]=(b["Anchor Date"]||"").match(/^(\d{4})-?(\d{2})-?(\d{2})$/)||[],[,M=0,T=0,F=0]=(b["Anchor Time"]||"").match(/^(\d{2}):?(\d{2}):?(\d{2})?$/)||[];if(![D,k,w].every((t=>(a.F3j(),t||0===t))))return void(r.error="Invalid Anchor Date");a.Q7y(7),p=new i.Date(D,a.o1b(1,k),w,M,T,F,A||""),!r.startFrom&&p>=s[0].DT&&(r.startFrom=t.tickFromDate(p,t.chart,null,!0)),b["Anchor Selector"]?e.Studies.initAnchorHandle(t,r):e.Studies.removeAnchorHandle(t,r)}for(var P=r.startFrom;P<s.length;P++)if("_","SD","VWA","P ","_","VxP"," ",n||(null===l&&(l=e.Studies.getMarketOffset({stx:t,localQuoteDate:s[P].DT,shiftToDateBoundary:!0})),s[P-1]&&s[P-1].DT&&(g=new Date(new Date(+s[P].DT).setMilliseconds(s[P].DT.getMilliseconds()+l)),new Date(new Date(+s[P-1].DT).setMilliseconds(s[P-1].DT.getMilliseconds()+l)).getDate()!==g.getDate()&&t.chart.market.isMarketDate(g)&&(l=null,h=c=u=0))),m=s[P][o],f=s[P].Volume,n&&!f&&(f=1),h+=f,a.Q7y(2),c+=a.m92(f,m),a.Q7y(153),u+=a.o1b(m,f,m),n||h){a.Q7y(1),s[P][a.o1b(x,"_V ")]=h,a.J4P(1),s[P][a.m92(x,"_VxP ")]=c,a.Q7y(1),s[P][a.o1b(x,"_VxP2 ")]=u,a.Q7y(1),y=s[P][a.m92(x,"_SDVWAP ")]=Math.sqrt(Math.max(0,u/h-Math.pow(c/h,2))),a.Q7y(1),v=s[P][a.o1b(x,"VWAP ")]=a.m92(h,c,a.J4P(10));for(var _=1;_<=3;_++)a.J4P(0),s[P][a.o1b(_,x,"SDVWAP","+ ")]=a.m92(_,y,v,a.J4P(40)),a.Q7y(0),s[P][a.o1b(_,x,"SDVWAP","- ")]=a.o1b(y,_,v,a.Q7y(154));d=!0}for(var L in r.outputMap)0!==L.indexOf("VWAP")&&delete r.outputMap[L];for(var E=1;E<=3;E++)"",")"," Standard"," D","eviation (",b["Display "+E+" Standard Deviation ("+E+")"]&&("+"," ",a.Q7y(0),r.outputMap[a.m92(E,x,"SDVWAP","+ ")]=a.o1b(" Standard Deviation (",")",E,E),a.Q7y(0),r.outputMap[a.m92(E,x,"SDVWAP","- ")]=a.o1b(" Standard Deviation (",")",E,E));n||d||(r.error="VWAP Requires Volume")}else r.error="VWAP is Intraday Only"}},e.Studies.initAnchoredVWAP=function(t,i,a,r,n,s){var o,l;n.state||(n.state={});var{interactiveAdd:h,interactiveAddCB:c,state:u}=n;if((o=!(a["Anchor Date"]||a["Anchor Time"]))&&(u.interactiveAdd||t.repositioningAnchorSelector))return"abort";var{dataSegment:d}=t.chart;if(d&&o&&!h)for(var p=0;p<d.length;p++)if(d[p]){"A","n","chor ","Date";var{DT:g}=d[p];a["Anchor Date"]=e.dateToStr(g,"YYYY-MM-dd"),a["Anchor Time"]=e.dateToStr(g,"HH:mm:ss");break}return o&&h?u.interactiveAdd=!0:(delete u.interactiveAdd,delete n.interactiveAdd,c&&setTimeout(c)),l=e.Studies.initializeFN(t,i,a,r,n,s),u.interactiveAdd?("addAV","W","A","P",t.repositioningAnchorSelector={sd:l,tapToAdd:!0},t.dispatch("notification","addAVWAP")):t.dispatch("notification","removeAVWAP"),l},e.Studies.displayVWAP=function(t,i,a){var r,n,s,o,l,h,c;e.Studies.displaySeriesAsLine(t,i,a),r=i.inputs["Display 1 Standard Deviation (1)"],n=i.inputs["Display 2 Standard Deviation (2)"],s=i.inputs["Display 3 Standard Deviation (3)"],(r||n||s)&&i.inputs.Shading&&("V","WAP ",o=t.panels[i.panel],l={opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:o.name!=i.chart.name,yAxis:i.getYAxis(t)},!i.highlight&&t.highlightedDraggable&&(l.opacity*=.3),h="VWAP "+i.name,c="VWAP "+i.name,r&&("SD","V","WAP1+ ","SDV","W","AP1+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP1+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP1- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP1- "+i.name]])},l)),h="SDVWAP1+ "+i.name,c="SDVWAP1- "+i.name),n&&(e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP2+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP2- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP2- "+i.name]])},l)),h="SDVWAP2+ "+i.name,c="SDVWAP2- "+i.name),s&&("SDVWA","P3","- ","SD","VWA","P3+ ","SDVW","AP3+ ",e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP3+ "+i.name,bottomBand:h,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3+ "+i.name]])},l)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"SDVWAP3- "+i.name,bottomBand:c,color:e.Studies.determineColor(i.outputs[i.outputMap["SDVWAP3- "+i.name]])},l)))),(i.anchorHandle||(i.parameters.state||{}).interactiveAdd)&&e.Studies.displayAnchorHandleAndLine(t,i,a)},e.Studies.removeAnchoredVWAP=function(t,i){t.dispatch("notification","removeAVWAP"),e.Studies.removeAnchorHandle(t,i)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{AVWAP:{name:"Anchored VWAP",overlay:!0,calculateFN:e.Studies.calculateVWAP,seriesFN:e.Studies.displayVWAP,initializeFN:e.Studies.initAnchoredVWAP,removeFN:e.Studies.removeAnchoredVWAP,inputs:{Field:"field","Anchor Date":"","Anchor Time":"","Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1,"Anchor Selector":!0},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2,interactiveAdd:!0}},attributes:{"Anchor Date":{placeholder:"yyyy-mm-dd"},"Anchor Time":{placeholder:"hh:mm:ss",step:1}}},VWAP:{name:"VWAP",overlay:!0,calculateFN:e.Studies.calculateVWAP,seriesFN:e.Studies.displayVWAP,inputs:{"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1,Shading:!1},outputs:{VWAP:"#FF0000","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"},parameters:{init:{opacity:.2}}}})):console.error("vwap feature requires first activating studies feature.")},_=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateZigZag=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y=E;if((i=e.chart.scrubbed)&&i.length){a=e.highLowChart,r=null,y.X8U(),n=null,s=e.inputs["Distance(%)"],o=0,l=0,h=0,c=null,u=null,d=0;for(var v=Math.min(i.length-1,e.startFrom);v>=0;v--)if(d=v,i[v]["_state "+e.name]){r=(p=i[v]["_state "+e.name])[0],n=p[1],o=p[2],l=p[3],h=p[4],c=p[5],u=p[6];break}for(var b=d;b<i.length;b++){if("Clo","se",g=i[b][a?"High":"Close"],m=i[b][a?"Low":"Close"],null===n||n<g)if(n=g,o<0&&(r=m),y.J4P(155),c=y.o1b(n,32,s,"1",100),o>-1){if(null!==u&&n>u){"L","o","w","Re","sul","t ",i[l]["Result "+e.name]=i[l][a?"Low":"Close"],S(h,l),o=-1,r=m,h=l,l=b;continue}}else l=b;if(null===r||r>m)if(r=m,o>0&&(n=g),y.J4P(156),u=y.o1b(s,r,100,1),o<1){if(null!==c&&r<c){i[l]["Result "+e.name]=i[l][a?"High":"Close"],S(h,l),o=1,n=g,h=l,l=b;continue}}else l=b}i[l]["Result "+e.name]=i[l][a?1==o?"Low":"High":"Close"],i[l]["_state "+e.name]=[r,n,o,l,h,c,u],S(h,l),y.Q7y(27);var x=y.o1b(14,1,12);for(f=i.length-x;f>l;){if(i[f].Close||0===i[f].Close){"L","o","w","Res","ul","t"," ",i[f]["Result "+e.name]=i[f][a?1==o?"High":"Low":"Close"];break}f--}S(l,f)}function S(t,a){for(var r=t+1;r<a;r++)i[r]["ShadowResult "+e.name]=(i[a]["Result "+e.name]-i[t]["Result "+e.name])*(r-t)/(a-t)+i[t]["Result "+e.name],delete i[r]["Result "+e.name]}},e.Studies.displayZigZag=function(t,i,a){var r,n,s,o,l;r=t.chart.highLowBars,i.highLowChart!=r&&(i.highLowChart=r,i.startFrom=0,i.study.calculateFN(t,i)),n=t.chart;for(var h=0;h<a.length;h++)(s=a[h])&&("Resu","lt ",s["_shadowCopy "+i.name]&&("_sha","dowC","o","py ",delete s["Result "+i.name],delete s["_shadowCopy "+i.name]),s["Result "+i.name]||("Re","sult ",s.transform&&delete s.transform["Result "+i.name]));o=a[0],E.Q7y(3);var c=E.m92(35,17,19);l=a[a.length-c],o&&o["ShadowResult "+i.name]&&("_","sh","ado","wCopy ","R","esu","lt ",o["Result "+i.name]=o["ShadowResult "+i.name],o.transform&&(o.transform["Result "+i.name]=n.transformFunc(t,n,o["ShadowResult "+i.name])),o["_shadowCopy "+i.name]=1),l&&l["ShadowResult "+i.name]&&("R","esul","t ",l["Result "+i.name]=l["ShadowResult "+i.name],l.transform&&(l.transform["Result "+i.name]=n.transformFunc(t,n,l["ShadowResult "+i.name])),l["_shadowCopy "+i.name]=1),e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{ZigZag:{name:"ZigZag",overlay:!0,seriesFN:e.Studies.displayZigZag,calculateFN:e.Studies.calculateZigZag,inputs:{"Distance(%)":10},parameters:{init:{label:!1}},attributes:{"Distance(%)":{min:.1,step:.1}}}})):console.error("zigzag feature requires first activating studies feature.")},L.Pz,L.rx,L.hM,L.$$,L.$I},431:(t,e,i)=>{"use strict";i(549);var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q,X,Z,J,G,K,$,tt,et,it,at,rt,nt,st,ot,lt,ht,ct,ut,dt,pt,gt,mt,ft,yt,vt,bt=i(73),xt=i(266),St=i(807),Ct=i(824);function At(){}bt.Pz.activateImports(xt.r,xt.rt,xt.VO,xt.i3,xt.H,xt.ag,xt.Tl,xt.PP,xt.mD,xt.tb,xt.hA,xt.Kn,xt.ac,xt.BN,xt.yP,xt.tO,xt.$L,xt.l0,xt.rS,xt.Dg,xt.Fq,xt.aN,xt.e4,xt.yN,xt.qe,xt.KY,xt.TO,St.xA,St.Xc,St.dK,St.yR,St.bZ,St.BG,St._s,St.Md,Ct.mu,Ct.g,Ct.hf,Ct.tT,Ct.lv,Ct.bK,Ct.T5,Ct.Jv,Ct.Zk,Ct.xv,Ct.lc,Ct.vI,Ct.oK,Ct.wd,Ct.WZ,Ct.pN,Ct.ZC,Ct.gc,Ct.l3,Ct.xD,Ct.nP,Ct.cu,Ct.j1,Ct.R_,Ct.JA,Ct.yn,Ct.Pb,Ct.W7,Ct._m,Ct.P5,Ct.Jh,Ct.Ed,Ct.GI,Ct.ec,Ct.cH,Ct.DG,Ct.Gv,Ct.KX,Ct.AR,Ct.Iv,Ct.M7,Ct.bR,Ct.HX,Ct.sN,Ct.$L,Ct.Kk,Ct.n$,Ct.kg,Ct.It,Ct.Vf,Ct.q2,Ct.Xf,Ct.Vm,Ct.rd,Ct.B7,Ct.np,Ct.OQ,Ct.ZN,Ct.Sj,Ct.Yw,Ct.uI,Ct.tk,Ct.P8,Ct.Bt,Ct.HN,Ct.LN,Ct.hZ,Ct.VG,null),At[395775]=function(){for(var t=2;9!==t;)switch(t){case 5:var e;try{for(var i=2;6!==i;)switch(i){case 4:i="undefined"==typeof sK48U?3:9;break;case 5:e.sK48U=e,i=4;break;case 2:Object.defineProperty(Object.prototype,"FdFUf",{get:function(){for(;;)return this},configurable:!0}),e=FdFUf,i=5;break;case 3:throw"";case 9:delete e.sK48U,delete Object.prototype.FdFUf,i=6}}catch(t){e=window}return e;case 1:return globalThis;case 2:t="object"==typeof globalThis?1:5}}(),function(t){function e(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].Array}}function i(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].Function}}for(var a=2;98!==a;)switch(a){case 31:r[89]="",r[89]="x",r[70]="",r[70]="",r[70]="ract",r[50]="",r[39]="abst",a=41;break;case 64:r[17]=8,r[17]=1,r[99]=0,r[47]=r[71],a=60;break;case 78:n(o,"charCodeAt",r[17],r[87]),a=104;break;case 2:var r=[arguments];r[9]="",r[9]="fo",r[5]="",a=3;break;case 3:r[5]="4W",r[8]="",r[8]="",r[8]="d",r[3]="",r[3]="D",a=13;break;case 72:r[97]=r[89],r[97]+=r[66],r[97]+=r[73],r[55]=r[33],a=68;break;case 102:n(l,r[55],r[99],r[97]),a=101;break;case 21:r[73]="",r[73]="my",r[66]="",r[66]="5u",r[33]="__opti",a=31;break;case 104:n(s,"test",r[17],r[30]),a=103;break;case 13:r[6]="",r[7]="R",r[6]="p44",r[2]="es",r[4]="",r[4]="__r",r[1]="",a=17;break;case 100:n(e,"push",r[17],r[57]),a=99;break;case 52:r[40]="",r[12]="1",r[40]="T",r[94]="",r[94]="Q$",a=47;break;case 56:r[57]+=r[20],r[81]=r[58],r[81]+=r[46],r[81]+=r[84],r[86]=r[50],r[86]+=r[39],r[86]+=r[70],a=72;break;case 101:n(l,r[86],r[99],r[81]),a=100;break;case 47:r[92]="2Ne",r[71]="",r[71]="U",r[17]=4,a=64;break;case 89:r[32]+=r[78],r[93]=r[4],r[93]+=r[2],r[93]+=r[85],a=85;break;case 17:r[1]="E4m",r[69]="",r[85]="idual",r[69]="",a=26;break;case 41:r[50]="__",r[84]="",r[84]="dZO",r[58]="",a=37;break;case 26:r[78]="Q",r[69]="e",r[54]="",r[64]="I",r[54]="miz",a=21;break;case 79:var n=function(t,e,i,a){for(var n=2;5!==n;)if(2===n){var s=[arguments];h(r[0][0],s[0][0],s[0][1],s[0][2],s[0][3]),n=5}};a=78;break;case 37:r[58]="k1",r[20]="",r[46]="n",r[20]="KYg_",a=52;break;case 68:r[55]+=r[54],r[55]+=r[69],r[32]=r[1],r[32]+=r[64],a=89;break;case 85:r[30]=r[6],r[30]+=r[3],r[30]+=r[7],r[87]=r[8],a=81;break;case 60:r[47]+=r[92],r[47]+=r[94],r[57]=r[40],r[57]+=r[12],a=56;break;case 81:r[87]+=r[5],r[87]+=r[9],a=79;break;case 103:n(l,r[93],r[99],r[32]),a=102;break;case 99:n(i,"apply",r[17],r[47]),a=98}function s(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].RegExp}}function o(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0].String}}function l(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];return i[0][0]}}function h(t,e,i,a,r){for(var n=2;6!==n;)switch(n){case 2:var s=[arguments];s[1]="P",s[5]="define",s[2]="roperty",s[8]=!0,s[8]=!0,s[8]=!1,n=7;break;case 7:try{for(var o=2;13!==o;)switch(o){case 4:o=s[3].hasOwnProperty(s[0][4])&&s[3][s[0][4]]===s[3][s[0][2]]?3:9;break;case 6:s[6].enumerable=s[8];try{for(var l=2;3!==l;)if(2===l)s[9]=s[5],s[9]+=s[1],s[9]+=s[2],s[0][0].Object[s[9]](s[3],s[0][4],s[6]),l=3}catch(t){}o=13;break;case 2:s[6]={},s[4]=(0,s[0][1])(s[0][0]),s[3]=[s[4],s[4].prototype][s[0][3]],o=4;break;case 3:return;case 9:s[3][s[0][4]]=s[3][s[0][2]],s[6].set=function(t){for(var e=2;5!==e;)if(2===e){var i=[arguments];s[3][s[0][2]]=i[0][0],e=5}},s[6].get=function(){for(var t=2;13!==t;)switch(t){case 3:e[6]="",e[6]="unde",e[4]=e[6],e[4]+=e[7],e[4]+=e[3],t=14;break;case 14:return typeof s[3][s[0][2]]==e[4]?void 0:s[3][s[0][2]];case 2:var e=[arguments];e[7]="fin",e[3]="ed",e[6]="",t=3}},o=6}}catch(t){}n=6}}}(At[395775]),At[433530]=!1,At.q7W=function(){return"function"==typeof At[306616].a4Ya$z6?At[306616].a4Ya$z6.apply(At[306616],arguments):At[306616].a4Ya$z6},At.T4K=function(){return"function"==typeof At[306616].a4Ya$z6?At[306616].a4Ya$z6.apply(At[306616],arguments):At[306616].a4Ya$z6},At[441074]=164,At.t7L=function(){return"function"==typeof At[120247].A7y3mUZ?At[120247].A7y3mUZ.apply(At[120247],arguments):At[120247].A7y3mUZ},At[86001]=At[120247],At.Z1$=function(){return"function"==typeof At[589718].c2sk5jt?At[589718].c2sk5jt.apply(At[589718],arguments):At[589718].c2sk5jt},At[395775].T5oo=At,At[306616]=function(){for(var t=2;9!==t;)switch(t){case 2:var e=[arguments];e[9]=void 0,e[2]={},t=4;break;case 4:return e[2].a4Ya$z6=function(){for(var t=2;90!==t;)switch(t){case 73:i[68][i[33]]=i[11],i[20].T1KYg_(i[68]),t=71;break;case 43:i[31]={},i[31].N_5=["j2j"],i[31].v_o=function(){return/\u0074\x72\u0075\x65/.p44DR(function(){return"aaa".includes("a")}+[])},i[18]=i[31],t=39;break;case 45:i[1].T1KYg_(i[2]),t=65;break;case 5:return 51;case 63:i[16]="d1H",i[27]="N_5",i[33]="J9b",i[96]="v_o",t=59;break;case 65:i[20]=[],i[66]="Y2z",t=63;break;case 57:t=i[72]<i[1].length?56:69;break;case 69:t=function(t){for(var e=2;22!==e;)switch(e){case 2:var a=[arguments];e=1;break;case 4:a[8]={},a[9]=[],a[4]=0,e=8;break;case 1:e=0===a[0][0].length?5:4;break;case 17:a[4]=0,e=16;break;case 13:a[8][a[2][i[41]]]=function(){for(var t=2;9!==t;)if(2===t){var e=[arguments];return e[1]={},e[1].h=0,e[1].t=0,e[1]}}.U2NeQ$(this,arguments),e=12;break;case 14:e=void 0===a[8][a[2][i[41]]]?13:11;break;case 15:a[3]=a[9][a[4]],a[7]=a[8][a[3]].h/a[8][a[3]].t,e=26;break;case 18:a[1]=!1,e=17;break;case 6:a[2]=a[0][0][a[4]],e=14;break;case 5:return;case 7:e=a[4]<a[0][0].length?6:18;break;case 25:a[1]=!0,e=24;break;case 19:a[4]++,e=7;break;case 12:a[9].T1KYg_(a[2][i[41]]),e=11;break;case 8:a[4]=0,e=7;break;case 26:e=a[7]>=.5?25:24;break;case 16:e=a[4]<a[9].length?15:23;break;case 11:a[8][a[2][i[41]]].t+=!0,e=10;break;case 10:e=a[2][i[33]]===i[66]?20:19;break;case 20:a[8][a[2][i[41]]].h+=!0,e=19;break;case 24:a[4]++,e=16;break;case 23:return a[1]}}(i[20])?68:67;break;case 68:t=68;break;case 4:i[1]=[],i[4]={},i[4].N_5=["j2j"],t=8;break;case 14:i[5].N_5=["j2j"],i[5].v_o=function(){return/\x78\x78/.p44DR(function(){return"x".repeat(2)}+[])},i[3]=i[5],i[6]={},i[6].N_5=["j2j"],i[6].v_o=function(){return!/\x79/.p44DR(function(){return"xy".substring(0,1)}+[])},i[7]=i[6],t=18;break;case 58:i[72]=0,t=57;break;case 53:i[1].T1KYg_(i[64]),i[1].T1KYg_(i[3]),i[1].T1KYg_(i[82]),i[1].T1KYg_(i[7]),t=49;break;case 29:i[84].N_5=["Y33"],i[84].v_o=function(){return"function"==typeof k1ndZO},i[57]=i[84],t=43;break;case 77:i[34]=0,t=76;break;case 8:i[4].v_o=function(){return!/\u0079/.p44DR(function(){return"x y".slice(0,1)}+[])},i[9]=i[4],i[5]={},t=14;break;case 1:t=e[9]?5:4;break;case 39:i[99]={},i[99].N_5=["Y33"],i[99].v_o=function(){var t=!1,e=[];try{for(var i in console)e.T1KYg_(i);t=0===e.length}catch(t){}return t},i[24]=i[99],i[1].T1KYg_(i[24]),t=53;break;case 59:i[41]="N4U",t=58;break;case 25:i[79].v_o=function(){return"function"==typeof x5umy},i[64]=i[79],i[67]={},t=22;break;case 22:i[67].N_5=["j2j"],i[67].v_o=function(){return/\u0039\u0037/.p44DR(function(){return"aa".charCodeAt(1)}+[])},i[55]=i[67],i[98]={},t=33;break;case 67:return e[9]=21,32;case 75:i[68]={},i[68][i[41]]=i[77][i[27]][i[34]],t=73;break;case 70:i[72]++,t=57;break;case 33:i[98].N_5=["j2j"],i[98].v_o=function(){return/\x74\x72\u0075\x65/.p44DR(function(){return"x".startsWith("x")}+[])},i[82]=i[98],i[84]={},t=29;break;case 71:i[34]++,t=76;break;case 2:var i=[arguments];t=1;break;case 18:i[8]={},i[8].N_5=["Y33"],i[8].v_o=function(){return"function"==typeof E4mIQ},i[2]=i[8],i[79]={},i[79].N_5=["Y33"],t=25;break;case 76:t=i[34]<i[77][i[27]].length?75:70;break;case 56:i[77]=i[1][i[72]];try{i[11]=i[77][i[96]]()?i[66]:i[16]}catch(t){i[11]=i[16]}t=77;break;case 49:i[1].T1KYg_(i[55]),i[1].T1KYg_(i[18]),i[1].T1KYg_(i[9]),i[1].T1KYg_(i[57]),t=45}},e[2]}}(),At.R2a=function(){return"function"==typeof At[120247].G6w99Zc?At[120247].G6w99Zc.apply(At[120247],arguments):At[120247].G6w99Zc},At[591592]=522,At.H3A=function(){return"function"==typeof At[120247].A7y3mUZ?At[120247].A7y3mUZ.apply(At[120247],arguments):At[120247].A7y3mUZ},At[120247]={G6w99Zc:function(){var t,e=arguments;switch(a){case 2:t=e[1]+e[0];break;case 127:t=(e[3]-e[2])/e[0]*e[4]+e[1];break;case 24:t=e[1]*e[2]-e[0];break;case 22:t=e[1]-(e[2]-e[0]);break;case 123:t=e[1]+e[2]-e[0]+e[3]+e[4];break;case 136:t=(e[0]+e[4])/e[3]+e[1]-e[2];break;case 77:t=e[2]-e[0]*(e[1]-e[3]);break;case 99:t=e[0]-e[2]+e[3]-e[1];break;case 68:t=e[1]*e[0]/e[3]+e[2];break;case 55:t=(e[1]-e[0])/e[3]+e[2]+e[4];break;case 105:t=e[0]/e[2]/e[1]*e[4]+e[3];break;case 34:t=+e[0]*e[3]-e[1]-e[2];break;case 64:t=e[4]+e[2]+e[3]-e[0]-e[1];break;case 66:t=(e[5]-e[6])*(e[2]-e[3])/(e[1]-e[4])+e[0];break;case 121:t=(e[4]+e[2]+e[1])/e[0]-e[3];break;case 114:t=e[1]/e[2]+e[0]+e[3];break;case 25:t=-e[2]/e[0]+e[3]-e[4]+e[1];break;case 36:t=e[4]/e[1]-e[3]+e[2]-e[0];break;case 78:t=-e[2]+e[0]+e[1]-e[3];break;case 141:t=e[0]+e[1]*(e[2]-e[3]);break;case 59:t=e[1]<e[0];break;case 172:t=e[0]==e[1];break;case 45:t=-e[0]-e[1]-e[3]+e[2];break;case 132:t=(e[3]-e[0]-e[2])/e[4]+e[1];break;case 144:t=e[2]*e[1]+e[3]+e[0];break;case 80:t=e[2]*(+e[3]*e[4]+e[1])/+e[0];break;case 176:t=e[0]+e[2]-e[3]-e[1]+e[4];break;case 18:t=e[2]-e[1]*e[0];break;case 41:t=-e[0]+e[2]+e[1];break;case 17:t=e[2]+e[0]*e[1];break;case 26:t=e[0]*e[2]/e[1]-e[3];break;case 125:t=(e[2]-e[1])*e[3]-e[0];break;case 7:t=e[3]-e[0]+e[1]+e[2];break;case 151:t=e[0]/(e[2]*e[3])<=e[1];break;case 1:t=e[0]+e[2]-e[1];break;case 152:t=(e[4]-e[3])/e[2]*e[0]-e[1];break;case 133:t=(e[2]-e[1]-e[4])*e[0]-e[3];break;case 169:t=e[1]-e[0]*e[3]-e[2];break;case 147:t=e[2]+e[1]+e[0]-e[4]+e[3];break;case 142:t=e[0]-e[1]+e[2]-e[3]+e[4];break;case 164:t=+e[1]*e[0];break;case 138:t=(-e[4]*e[1]+e[2])*e[3]-e[0];break;case 128:t=(e[3]/e[1]+e[2])*e[0]-e[4];break;case 92:t=e[2]-e[3]/(e[0]>>e[1]);break;case 139:t=e[0]*(e[3]/e[2]-e[1]);break;case 148:t=e[0]/e[4]-e[1]-e[2]+e[3];break;case 160:t=(e[3]-e[1])/e[2]-e[4]+e[0];break;case 110:t=-e[1]+e[3]+e[2]+e[0];break;case 31:t=e[3]+e[0]-e[2]+e[1];break;case 101:t=e[3]+e[2]+e[4]+e[0]+e[1]+e[5]+e[6]+e[7];break;case 27:t=e[3]/e[0]*e[2]-e[4]-e[1];break;case 173:t=e[2]+e[0]/e[3]+e[1];break;case 106:t=(e[0]-e[1])/e[2]/e[3]+e[4];break;case 95:t=(e[1]+e[3]*e[0])/e[2];break;case 13:t=e[2]/e[0]+e[1];break;case 76:t=e[0]+(e[1]-e[2])/e[3];break;case 62:t=(e[2]+e[1])/e[0]*e[4]-e[3];break;case 159:t=e[0]*e[3]*e[4]+e[1]-e[2];break;case 124:t=(e[0]+e[3])*e[2]-e[4]-e[1];break;case 135:t=e[2]*e[1]*e[0];break;case 50:t=(e[4]-e[0])/(e[1]-e[3])>e[2];break;case 48:t=e[2]+e[1]+e[3]-e[0];break;case 28:t=e[1]+e[3]-e[0]+e[4]-e[2];break;case 97:t=e[0]!==e[1];break;case 9:t=e[1]^e[0];break;case 165:t=e[1]*-e[0];break;case 84:t=e[0]/e[2]+e[1]+e[3]-e[4];break;case 120:t=e[3]*e[4]*e[2]+(e[6]-e[1]*e[0])*e[5];break;case 166:t=e[0]*-+e[1];break;case 145:t=-e[0]*e[1]+e[2]-e[3]+e[4];break;case 82:t=(e[2]-e[3]*e[0])/e[1];break;case 32:t=e[2]*e[1]<e[0];break;case 23:t=(e[2]-e[1])/e[0];break;case 6:t=e[1]-e[0]+e[2];break;case 29:t=e[3]-e[0]+e[4]+e[2]-e[1];break;case 49:t=(e[3]/e[1]-e[4])/e[2]+e[0];break;case 104:t=(e[1]-(e[3]+e[2]))/e[0];break;case 72:t=e[3]/e[1]*e[0]-e[2];break;case 0:t=e[0]-e[1];break;case 137:t=e[1]-e[3]/(e[4]+e[2]/e[0]);break;case 73:t=(-e[0]*e[1]-e[4])/e[3]-e[2];break;case 168:t=(e[0]-e[2]-e[1])*e[4]+e[3];break;case 122:t=(-e[1]/e[4]+e[2])*e[3]+e[0];break;case 4:t=e[0]+e[3]-e[2]-e[1];break;case 63:t=(e[4]*e[0]-e[2])*e[3]-e[1];break;case 153:t=e[1]>e[0];break;case 89:t=e[2]/e[0]*e[1];break;case 158:t=(e[4]/e[3]-e[1])*e[0]+e[2];break;case 103:t=e[4]*e[3]-e[1]+e[0]-e[2];break;case 5:t=(e[0]+e[1])/e[2];break;case 93:t=(e[3]*e[0]+e[1])/+e[2];break;case 33:t=e[2]+(e[1]-e[0]);break;case 117:t=e[0]*e[1]*e[3]-e[2];break;case 30:t=e[1]*e[2]+e[0]-e[3];break;case 130:t=e[0]*e[2]/(e[3]+e[1]);break;case 118:t=e[1]/e[2]-e[0]+e[4]+e[3];break;case 150:t=(e[1]%(e[2]|e[0])+e[3])*e[4];break;case 170:t=e[0]+e[3]*e[2]+e[1];break;case 74:t=e[0]/+e[1];break;case 149:t=e[2]-e[0]+e[1]-e[4]-e[3];break;case 161:t=(e[0]-e[1])*e[4]*e[2]-e[3];break;case 116:t=+e[1]*e[2]/e[0];break;case 119:t=(e[2]+e[0])*e[1];break;case 52:t=-e[0]-e[2]+e[1];break;case 131:t=-e[3]*e[1]/e[2]+e[0];break;case 35:t=e[2]*e[1]-e[3]-e[0];break;case 111:t=e[0]/e[2]+e[4]-e[3]-e[1];break;case 65:t=(-e[1]+e[3])*e[0]+e[2];break;case 70:t=e[0]-+e[1];break;case 157:t=+e[0]-+e[1]/(e[3]+e[2]);break;case 67:t=(e[3]+e[2])*e[0]-e[1];break;case 115:t=-e[1]/e[2]+e[0];break;case 102:t=e[3]/e[2]/e[1]-e[0];break;case 163:t=e[0]+ +e[1]*e[2];break;case 20:t=e[1]-e[0]-e[2];break;case 88:t=e[2]/(e[0]*e[3]*e[1]);break;case 16:t=e[1]*e[0];break;case 162:t=e[1]-(e[0]>>e[2]);break;case 38:t=e[0]>>e[1];break;case 107:t=e[2]+e[3]+e[1]+e[0];break;case 156:t=(e[4]*e[3]+e[1])/e[0]-e[2];break;case 174:t=e[1]/e[0]+e[3]-e[2];break;case 71:t=(e[3]-e[4]+e[1])*e[2]+e[0];break;case 112:t=e[1]/e[0]*e[3]+e[2];break;case 87:t=e[1]/(e[0]>>e[2]);break;case 40:t=e[1]*e[4]+e[3]-e[2]-e[0];break;case 100:t=(e[0]+e[3])/e[2]-e[1];break;case 85:t=e[0]-(e[2]|e[1]);break;case 58:t=-e[3]/e[0]/e[2]+e[1];break;case 57:t=(e[3]+e[2])*e[0]/e[4]+e[1];break;case 91:t=e[3]+e[1]/(e[0]|e[2]);break;case 126:t=(-e[3]+e[2])*e[4]+e[1]-e[0];break;case 83:t=e[1]+e[0]+e[2];break;case 12:t=-e[0]+e[1];break;case 3:t=(e[0]+e[2])/+e[1];break;case 56:t=e[1]*e[3]/e[0]/e[4]+e[2];break;case 98:t=e[1]+ +e[0];break;case 108:t=e[2]-e[0]-e[3]+e[1]-e[4];break;case 146:t=e[4]/e[3]/e[1]+e[2]+e[0];break;case 53:t=e[1]*e[2]+e[0];break;case 37:t=-e[1]*e[0]+e[2];break;case 175:t=e[0]+(e[3]/e[1]-e[2]/e[4]);break;case 69:t=(e[3]-e[0])/e[1]+e[2];break;case 79:t=e[0]*(e[1]+e[2])/e[3];break;case 113:t=e[2]-e[0]-e[3]-e[1];break;case 15:t=(-e[4]-e[2])/e[1]-e[3]+e[0];break;case 75:t=+e[0]/(e[1]*e[2]);break;case 42:t=e[0]-e[1]/e[2];break;case 143:t=(e[1]-e[0]+e[4])*e[3]-e[2];break;case 94:t=(e[1]*e[0]+e[3])/e[2];break;case 54:t=e[4]/e[3]*e[1]+e[0]+e[2];break;case 43:t=e[2]+e[1]/e[0];break;case 171:t=e[2]+e[3]*(e[4]*e[1])+e[0];break;case 61:t=(-e[0]-e[2])*e[1]+e[3];break;case 14:t=e[1]/(e[0]/e[2]);break;case 46:t=e[2]/e[3]/e[0]+e[1];break;case 60:t=(e[3]-e[0])/(e[1]-e[2]);break;case 86:t=e[0]/e[2]-e[1];break;case 140:t=(-e[1]/e[2]-e[0])/e[3]+e[4];break;case 8:t=e[0]/e[1];break;case 51:t=e[2]/e[1]-e[0]+e[3];break;case 129:t=(e[3]*e[0]+e[4])*e[1]-e[2];break;case 47:t=(e[3]+e[0])/e[2]+e[1];break;case 10:t=e[4]-e[1]-e[2]+e[3]+e[0];break;case 134:t=(-e[4]*e[3]+e[1])*e[2]+e[0];break;case 155:t=(e[4]+e[2]+e[3])/e[0]+e[1];break;case 44:t=e[2]-e[3]/(e[1]|e[0]);break;case 39:t=e[0]-e[1]-e[2]+e[3];break;case 19:t=e[1]<<e[0];break;case 167:t=(e[1]-e[0])*e[2]+e[3];break;case 154:t=e[0]*(e[2]+e[1]);break;case 21:t=e[1]|e[0];break;case 90:t=-e[3]+e[2]-e[0]+e[1];break;case 96:t=e[1]*e[2]/e[0];break;case 11:t=(e[3]+e[4]+e[1]+e[0])/+e[2];break;case 81:t=(e[0]*e[4]-e[5]*e[3])/(e[2]*e[6]-e[1]);break;case 109:t=-e[1]+e[2]-e[0]}return t},A7y3mUZ:function(t){a=t}},At.s_7=function(){return"function"==typeof At[120247].G6w99Zc?At[120247].G6w99Zc.apply(At[120247],arguments):At[120247].G6w99Zc},At[589718]=(r=function(t,e){var i=65535&e;return((e-i)*t|0)+(i*t|0)|0},{c2sk5jt:function(t,e,i){for(var a=3432918353,n=461845907,s=i,o=-4&e,l=0;l<o;l+=4){var h=255&t.d4Wfo(l)|(255&t.d4Wfo(l+1))<<8|(255&t.d4Wfo(l+2))<<16|(255&t.d4Wfo(l+3))<<24;h=r(h,a),s=5*(s=(524287&(s^=h=r(h=(131071&h)<<15|h>>>17,n)))<<13|s>>>19)+3864292196|0}switch(h=0,e%4){case 3:h=(255&t.d4Wfo(o+2))<<16;case 2:h|=(255&t.d4Wfo(o+1))<<8;case 1:h|=255&t.d4Wfo(o),h=r(h,a),s^=h=r(h=(131071&h)<<15|h>>>17,n)}return s^=e,s=r(s^=s>>>16,2246822507),s=r(s^=s>>>13,3266489909),s^=s>>>16}}),At.v0U=function(){return"function"==typeof At[589718].c2sk5jt?At[589718].c2sk5jt.apply(At[589718],arguments):At[589718].c2sk5jt},At[359843]=!0,n=t=>{var e,i=At;function a(t){return t>.001?Number(t.toFixed(4)):t}(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Renderer.Aggregations=function(t){var e;this.construct(t),e=this.params,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,i.q7W(),this.isAggregation=!0,e.highlightable=!1,"_main_series"!=e.name&&("Ag","gregations are only allowed on main series.",console.warn("Aggregations are only allowed on main series."),e.invalid=!0)},e.inheritsFrom(e.Renderer.Aggregations,e.Renderer.OHLC,!1),e.Renderer.Aggregations.requestNew=function(t,a){var r,n,s;i.q7W(),r=null;for(var o=0;o<t.length;o++)switch("renk","o","heik","inashi","p","an","df",n=t[o]){case"kagi":case"pandf":r=n;break;case"heikinashi":case"linebreak":case"rangebars":case"renko":r="candle";break;default:return null}return null===r?null:((s=new e.Renderer["candle"==r?"OHLC":"Aggregations"]({params:e.extend(a,{type:r})})).isAggregation=!0,s)},e.Renderer.Aggregations.prototype.drawIndividualSeries=function(t,e){var a,r,n,s;if(!e.invalid){if(i.T4K(),a=this.stx,r={colors:[]},"kagi"==e.type){i.H3A(0),n=-i.R2a("1535096118",0),-106408323,s=2;for(var o=1;i.Z1$(o.toString(),o.toString().length,34076)!==n;o++)"st","x_kagi_down",a.drawKagiSquareWave(t.panel,"stx_kagi_down","stx_kagi_up",e),r.colors.push(a.getCanvasColor("stx_kagi_down")),r.colors.push(a.getCanvasColor("stx_kagi_down")),s+=2;-106408323!==i.v0U(s.toString(),s.toString().length,53045)&&("st","x_ka","gi_do","wn","stx","_","kagi_up",a.drawKagiSquareWave(t.panel,"stx_kagi_up","stx_kagi_down",e),r.colors.push(a.getCanvasColor("stx_kagi_up")),r.colors.push(a.getCanvasColor("stx_kagi_down")))}else"pandf"==e.type&&("s","tx_pandf_","up",a.drawPointFigureChart(t.panel,"stx_pandf_up","X",e),r.colors.push(a.getCanvasColor("stx_pandf_up")),a.drawPointFigureChart(t.panel,"stx_pandf_down","O",e),r.colors.push(a.getCanvasColor("stx_pandf_down")));return r}},e.ChartEngine.prototype.setAggregationType=function(t){var a;i.q7W(),this.layout.chartType="candle",!1!==(a=this.chart).baseline.userLevel&&(a.baseline.userLevel=a.baseline.defaultLevel,a.panel.yAxis.scroll=e.ChartEngine.YAxis.prototype.scroll),this.layout.aggregationType=t,this.setMainSeriesRenderer(),a.canvas&&(this.createDataSet(),this.draw()),this.changeOccurred("layout")},e.ChartEngine.prototype.drawKagiSquareWave=function(t,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k;s=t.chart,this.startClip(t.name),o=s.dataSegment,l=s.context,(h=t.yAxis).flipped&&(c=a,a=r,r=c),u=this.canvasStyle(a),d=this.canvasStyle(r),this.canvasColor(a),n.border_color_up&&(l.strokeStyle=n.border_color_up),p=l.strokeStyle,this.canvasColor(r),n.border_color_down&&(l.strokeStyle=n.border_color_down),g=l.strokeStyle,m=1,u.width&&parseInt(u.width,10)<=25&&(m=Math.max(1,e.stripPX(u.width))),f=1,d.width&&parseInt(d.width,10)<=25&&(f=Math.max(1,e.stripPX(d.width))),this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),i.t7L(1);var w=i.R2a(0,12,13);y=s.dataSet.length-s.scroll-w,v=!0,b=null,x=null,i.H3A(2);var M=i.R2a(1,0);i.T4K(),S=t.left-.5*this.layout.candleWidth+this.micropixels-M;for(var T=0;T<=o.length;T++)if(S+=this.layout.candleWidth,C=o[T]){if(C.cache&&!s.pixelCacheExpired||(C.cache={}),C.projection)break;x=C.kagiTrend,h.flipped&&(x*=-1),C.transform&&s.transformFunc&&(A=C.kagiPrevOpen,(C=C.transform).kagiPrevOpen=s.transformFunc(this,s,A)),D=C.cache,i.t7L(2),((k=i.R2a(T,y))<t.cacheLeft||k>t.cacheRight||!D.kagiOpen)&&(D.kagiOpen=h.semiLog?h.height*(1-(Math.log(Math.max(C.Open,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C.Open)*h.multiplier,D.kagiClose=h.semiLog?h.height*(1-(Math.log(Math.max(C.Close,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C.Close)*h.multiplier,h.flipped?(D.kagiOpen=h.bottom-D.kagiOpen,D.kagiClose=h.bottom-D.kagiClose):(D.kagiOpen+=h.top,D.kagiClose+=h.top)),D.kagiClose,b=h.semiLog?h.height*(1-(Math.log(Math.max(C.kagiPrevOpen,0))/Math.LN10-h.logLow)/h.logShadow):(h.high-C.kagiPrevOpen)*h.multiplier,h.flipped?b=h.bottom-b:b+=h.top,v?(l.moveTo(y>=0?t.left:Math.floor(S),D.kagiOpen),l.lineTo(Math.floor(S),D.kagiOpen),D.kagiClose<D.kagiOpen?(l.strokeStyle=p,l.lineWidth=m):(l.strokeStyle=g,l.lineWidth=f)):-1!=x&&D.kagiClose<b&&b<D.kagiOpen?(l.lineTo(Math.floor(S),b),l.stroke(),l.beginPath(),l.moveTo(Math.floor(S),b),l.strokeStyle=p,l.lineWidth=m):1!=x&&D.kagiClose>b&&b>D.kagiOpen&&(l.lineTo(Math.floor(S),b),l.stroke(),l.beginPath(),l.moveTo(Math.floor(S),b),l.strokeStyle=g,l.lineWidth=f),l.lineTo(Math.floor(S),D.kagiClose),T+1<o.length&&l.lineTo(Math.floor(S+this.layout.candleWidth),D.kagiClose),v=!1}l.stroke(),this.endClip(),l.lineWidth=1,s.pixelCacheExpired=!1},e.ChartEngine.prototype.drawPointFigureChart=function(t,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_;function L(t,e,a){i.t7L(3),l.moveTo(i.s_7(t,"2",e),i.s_7(a,x,c,i.t7L(1))),i.H3A(2),l.bezierCurveTo(i.s_7(p,e),i.s_7(a,x,c,i.t7L(1)),i.R2a(p,e,i.t7L(2)),i.R2a(a,x,u,b,i.H3A(4)),i.R2a(t,e,2,i.H3A(5)),i.R2a(a,x,u,b,i.H3A(4))),i.t7L(0),i.q7W(),l.bezierCurveTo(i.s_7(t,d),i.R2a(a,x,u,b,i.t7L(4)),i.s_7(t,d,i.H3A(0)),i.R2a(a,x,c,i.H3A(1)),i.s_7(t,e,2,i.t7L(5)),i.R2a(a,x,c,i.H3A(1)))}s=t.chart,this.startClip(t.name),o=s.dataSegment,l=s.context,this.canvasColor(a),"X"==r&&n.border_color_up?l.strokeStyle=n.border_color_up:"O"==r&&n.border_color_down&&(l.strokeStyle=n.border_color_down),h=this.canvasStyle(a),c=parseInt(h.paddingTop,10),u=parseInt(h.paddingBottom,10),d=parseInt(h.paddingLeft,10),p=parseInt(h.paddingRight,10),h.width&&parseInt(h.width,10)<=25?l.lineWidth=Math.max(1,e.stripPX(h.width)):l.lineWidth=2,this.highlightedDraggable&&(l.globalAlpha*=.3),l.beginPath(),g=this.chart.state.aggregation.box,i.t7L(0);var E=i.s_7(10,9);function I(t,e,a){i.t7L(2),l.moveTo(i.s_7(d,t),i.R2a(u,a,x,i.H3A(6))),i.H3A(0),l.lineTo(i.s_7(e,p),i.s_7(b,c,x,a,i.H3A(7))),i.t7L(2),l.moveTo(i.R2a(d,t),i.s_7(b,c,x,a,i.H3A(7))),i.H3A(0),l.lineTo(i.s_7(e,p),i.s_7(u,a,x,i.H3A(6)))}m=s.dataSet.length-s.scroll-E,f=t.yAxis,b=g*f.multiplier,i.q7W(),i.H3A(8),x=i.R2a(b,2),S=this.layout.candleWidth,i.H3A(2);var N=i.s_7(1,0);C=t.left-S+this.micropixels-N;for(var O=0;O<o.length;O++)if(C+=S,A=o[O]){if(A.cache&&!s.pixelCacheExpired||(A.cache={}),A.projection)break;if(D=A.pfOpen,k=A.pfClose,w=A.pfTrend,M=A.pfStepBack,A.transform&&s.transformFunc&&(A=A.transform,D=s.transformFunc(this,s,D),k=s.transformFunc(this,s,k)),T=A.cache,i.t7L(2),((F=i.s_7(O,m))<t.cacheLeft||F>t.cacheRight||!T.pfOpen)&&(f.flipped?(T.pfOpen=f.bottom-(f.high-D)*f.multiplier,T.pfClose=f.bottom-(f.high-k)*f.multiplier):(T.pfOpen=(f.high-D)*f.multiplier+f.top,T.pfClose=(f.high-k)*f.multiplier+f.top)),P=Math.round(C),i.t7L(2),_=Math.round(i.R2a(S,C)),y=Math.abs(Math.round((k-D)/g)),v=T.pfOpen,r==M&&("X"==M?(i.t7L(0),I(P,_,i.s_7(v,b))):"O"==M&&(i.t7L(2),L(P,_,i.R2a(b,v)))),r==w)for(;y>=0;y--)"X"==r?(I(P,_,v),v-=f.flipped?-b:b):"O"==r&&(L(P,_,v),v+=f.flipped?-b:b)}l.stroke(),this.endClip(),i.H3A(9),l.lineWidth=i.s_7(0,"1"),s.pixelCacheExpired=!1},e.ChartEngine.calculateAggregation=function(t,a,r,n){var s,o,l;return i.q7W(),"renk","o","line","break",s="heik",s+="inash",s+="i",l=t.layout,[s,"heikenashi"].indexOf(a)>-1?o=e.calculateHeikinAshi(t,r,n):"rangebars"==a?o=e.calculateRangeBars(t,r,l.rangebars,n):"kagi"==a?o=e.calculateKagi(t,r,l.kagi,n):"linebreak"==a?o=e.calculateLineBreak(t,r,l.priceLines,n):"renko"==a?o=e.calculateRenkoBars(t,r,l.renko,n):"pandf"==a&&(o=e.calculatePointFigure(t,r,l.pandf,n)),o},e.calculateHeikinAshi=function(t,e,a){var r,n,s,o,l,h,c,u,d,p,g;if(!e.length)return e;a||(a=[]),r=[];for(var m=0;m<e.length;m++)if(n=e[m]){i.t7L(0);var f=i.s_7(6,5);if(!(s=r[r.length-f])&&!m){i.t7L(10);var y=i.s_7(2,4,13,16,0);s=a[a.length-y]}s||(s=n),o=n.Close,l=(l=n.Open)||0===l?l:o,h=(h=n.High)||0===h?h:o,c=(c=n.Low)||0===c?c:o,u=(u=s.Open)||0===u?u:s.Close,i.t7L(2);var v=i.R2a(2,0);for(var b in d=(u+s.Close)/v,i.H3A(11),p=i.R2a(o,c,"4",l,h),g={DT:n.DT,displayDate:n.displayDate,Date:n.Date,Open:d,Close:p,High:Math.max(h,Math.max(d,p)),Low:Math.min(c,Math.min(d,p)),Volume:n.Volume,iqPrevClose:s.Close},n)g[b]||0===g[b]||(g[b]=n[b]);r.push(g)}return r},e.calculateKagi=function(t,a,r,n){var s,o,l,h,c,u,d,p,g;if(!a.length)return a;if(n||(n=[]),s=t.layout,o=t.chart,r=parseFloat(r),o.defaultChartStyleConfig.kagi=e.ChartEngine.isDailyInterval(s.interval)?4:.4,(isNaN(r)||r<=0)&&(r=o.defaultChartStyleConfig.kagi,e.Market.Symbology.isForexSymbol(o.symbol)&&(r/=4),null!==s.kagi)){s.kagi=null,1211568278,-1735736526,l=2;for(var m=1;1211568278!==i.v0U(m.toString(),m.toString().length,59313);m++)"l","ayo","ut",t.changeOccurred("layout"),l+=2;-1735736526!==i.Z1$(l.toString(),l.toString().length,97760)&&t.changeOccurred("")}r/=100,h=[],i.H3A(0);var f=i.s_7(1,0);u=(c=n[n.length-f])?c.DT:0;for(var y=0;y<a.length;y++)if((d=a[y])&&(c||(i.t7L(0),c=a[i.R2a(y,1)]),c)){if((p=c.Open||0===c.Open?c.Open:c.Close)>c.Close){if(d.Close>c.Close*(1+r))d.Open=c.Close;else if(c.Close>d.Close&&(c.Close=d.Close),c.Volume+=d.Volume,y<a.length-1)continue}else if(p<c.Close){if(d.Close<c.Close*(1-r))d.Open=c.Close;else if(c.Close<d.Close&&(c.Close=d.Close),c.Volume+=d.Volume,y<a.length-1)continue}else if(c.Close=d.Close,c.Volume+=d.Volume,y<a.length-1)continue;for(var v in g={DT:c.DT,displayDate:c.displayDate,Date:c.Date,Open:c.Open,Close:c.Close,High:Math.max(c.Open,c.Close),Low:Math.min(c.Open,c.Close),Volume:c.Volume,iqPrevClose:c.iqPrevClose},c)g[v]||0===g[v]||(g[v]=c[v]);h.length?g.kagiPrevOpen=h[h.length-1].Open:g.kagiPrevOpen=g.Open,g.Close>g.kagiPrevOpen&&g.kagiPrevOpen>g.Open?g.kagiTrend=1:g.Close<g.kagiPrevOpen&&g.kagiPrevOpen<g.Open&&(g.kagiTrend=-1),u<g.DT&&h.push(g),c=d,o.currentQuote={Close:d.Close}}return h},e.calculateLineBreak=function(t,e,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v;if(!e.length)return e;r||(r=[]),n=t.layout,i.T4K(),(s=t.chart).defaultChartStyleConfig.priceLines=3,a=parseInt(a,10),isNaN(a)||a<=0?(a=s.defaultChartStyleConfig.priceLines,null!==n.priceLines&&(n.priceLines=null,t.changeOccurred("layout"))):a>10&&(n.priceLines=a=10),l=(o=r.slice(-a)).length,h=0;t:for(var b=0;b<e.length;b++)if(c=e[b]){h+=c.Volume,i.H3A(12);var x=i.R2a(8,9);if((u=o[o.length-"1"*x])||(u={Open:c.Open,Close:c.Open,High:c.Open,Low:c.Open}),d=u.Close,p=(p=u.High)||0===p?p:d,g=(g=u.Low)||0===g?g:d,m=(m=u.Open)||0===m?m:d,f={DT:c.DT,displayDate:c.displayDate,Date:c.Date,Close:c.Close,Volume:h,iqPrevClose:d},s.currentQuote={Close:c.Close},c.Close>d&&u.Close>m);else if(c.Close<d&&u.Close<m);else if(c.Close>p){for(y=2;y<=a;y++)if((v=o[o.length-y])&&c.Close<=v.High)continue t}else{if(!(c.Close<g))continue;for(y=2;y<=a;y++)if((v=o[o.length-y])&&c.Close>=v.Low)continue t}for(var S in c.Close<u.Close?f.Open=Math.min(m,d):f.Open=Math.max(m,d),f.Low=Math.min(f.Open,f.Close),f.High=Math.max(f.Open,f.Close),c)f[S]||0===f[S]||(f[S]=c[S]);o.push(f),h=0}return o.slice(l)},i.T4K(),e.getMaxRenkoBarsPerRecord=function(t){return i.T4K(),200},e.calculateRenkoBars=function(t,r,n,s,o){var l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E;if(!r.length)return[];if(s||(s=[]),l=t.layout,c=n,(u=(h=t.chart).state.aggregation)||(u=h.state.aggregation={}),d=Math.min(300,r.length),!u.minMax){"Hi","gh",1647927133,-1282181822,p=2;for(var I=1;1647927133!==i.Z1$(I.toString(),I.toString().length,11571);I++)"L","o","w",u.minMax=t.determineMinMax(r.slice(r.length*d),["Low","High","Low"]),p+=2;-1282181822!==i.Z1$(p.toString(),p.toString().length,75775)&&(u.minMax=t.determineMinMax(r.slice(r.length*d),["Low","High","Low"])),u.minMax=t.determineMinMax(r.slice(r.length-d),["Close","High","Low"])}i.H3A(0);var N=i.R2a(18,17);i.H3A(13);var O=i.R2a(51,31,51);function H(t,e){var i;for(var a in t=Number(t.toFixed(8)),e=Number(e.toFixed(8)),i={DT:D.DT,displayDate:D.displayDate,Date:D.Date,Open:t,Close:e,High:Math.max(t,e),Low:Math.min(t,e),Volume:0,iqPrevClose:t!=e?t:null},D)i[a]||0===i[a]||(i[a]=D[a]);S.push(i)}if(g=u.minMax[N]-u.minMax["0"<<O],!(m=t.panels[h.name].height))return[];if(f=s.length>0,i.t7L(14),y=a(i.R2a(m,g,30)),v=e.getMaxRenkoBarsPerRecord(h.symbolObject),o&&(b=r.reduce(((t,e)=>{var i;return(i=Math.abs(e.Close-e.iqPrevClose))>t?i:t}),0),i.t7L(8),u.minAutoRenko=a(i.s_7(b,v))),h.defaultChartStyleConfig.renko=u.minAutoRenko||y,null===n||isNaN(n)||n<=0)n=h.defaultChartStyleConfig.renko,null!==l.renko&&(l.renko=null,t.changeOccurred("layout"));else if(i.H3A(8),n=Math.max(n,i.s_7(g,m)),l.renko!==n){-1819248231,1853063821,x=2;for(var R=1;-1819248231!==i.v0U(R.toString(),R.toString().length,95791);R++)l.renko=n,t.changeOccurred("layout"),x+=2;1853063821!==i.Z1$(x.toString(),x.toString().length,21311)&&(l.renko=n,t.changeOccurred(""))}if(S=[],C=null,A=null,i.T4K(),D=null,s.length){i.t7L(15);var z=i.R2a(31,1,8,16,6);C=(k=s[s.length-z]).Low-n,A=k.High+n}for(var j=0;j<r.length;j++)if(w=r[j]){if(C||A||(M=w.Open||0===w.Open?w.Open:w.Close,T=Math.floor(M/n)*n,F=isNaN(T)?M:T,i.t7L(0),C=i.s_7(F,n),i.t7L(2),A=i.s_7(n,F)),i.H3A(16),P=i.R2a(v,n),_=!l.renko,L=C-w.Close,E=w.Close-A,_&&(L>P||E>P)&&!o&&!f)return e.calculateRenkoBars(t,r,c,s,!0);for(;;)if(D||(D=w),w.Close<=C)i.H3A(2),H(i.R2a(n,C),C),i.H3A(17),A=i.s_7(2,n,C),C-=n,D=null;else{if(!(w.Close>=A))break;i.t7L(0),H(i.s_7(A,n),A),i.t7L(18),C=i.R2a(n,2,A),A+=n,D=null}h.currentQuote=w}return C<r[r.length-1].Close&&C+n>r[r.length-1].Close?(i.t7L(2),H(i.s_7(n,C),r[r.length-1].Close)):A>r[r.length-1].Close&&A-n<r[r.length-1].Close&&(i.t7L(0),H(i.R2a(A,n),r[r.length-1].Close)),S},e.calculateRangeBars=function(t,e,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k;if("Lo","w",!e.length)return e;function w(t,e){for(;;){if("unde","fined",y||(y=t),p<e){if(p=Math.min(e,g),i.H3A(0),m=Math.max(m,i.R2a(p,r)),e<g)break}else if(p>=e&&(p=Math.max(e,m),i.t7L(2),g=Math.min(g,i.R2a(r,p)),e>m))break;if(void 0===p)return"Uh oh undefin","ed in calculateRangeB","ars:processMov","e",void console.log("Uh oh undefined in calculateRangeBars:processMove");M(p),y=null,T()}}function M(t){var e;for(var a in(e={DT:y.DT,displayDate:y.displayDate,Date:y.Date,Open:Number(f.toFixed(8)),Close:Number(t.toFixed(8)),High:Number(g.toFixed(8)),Low:Number(m.toFixed(8)),Volume:0}).iqPrevClose=e.Open,i.T4K(),y)e[a]||0===e[a]||(e[a]=y[a]);d.push(e)}function T(){i.t7L(2),g=i.s_7(r,p),i.t7L(0),m=i.R2a(p,r),f=p}if(n||(n=[]),s=t.layout,(l=(o=t.chart).state.aggregation)||(l=o.state.aggregation={}),h=Math.min(300,e.length),l.minMax||(l.minMax=t.determineMinMax(e.slice(e.length-h),["Close","High","Low"])),c=l.minMax[1]-l.minMax[0],!(u=t.panels[o.name].height))return[];i.q7W(),i.H3A(14),o.defaultChartStyleConfig.range=a(i.R2a(u,c,30)),null===r||isNaN(r)||r<0?(r=o.defaultChartStyleConfig.range,null!==s.range&&("l","a","you","t",s.range=null,t.changeOccurred("layout"))):(i.H3A(8),r=Math.max(r,i.s_7(c,u)),s.range!==r&&("la","yout",s.range=r,t.changeOccurred("layout"))),d=[],p=null,g=null,m=null,f=null,y=null;for(var F=0;F<e.length;F++)if(v=e[F]){if(i.H3A(0),b=e[i.R2a(F,1)],!F){if(!b){i.t7L(4);var P=i.s_7(0,3,8,12);b=n[n.length-P]}b&&((p=b.Close)||0===p)&&T()}b&&(x=v.Close,S=v.Open,C=v.High,A=v.Low,(x||0===x)&&(S=S||0===S?S:x,C=C||0===C?C:x,A=A||0===A?A:x,p||0===p||(D=Math.floor(S/r)*r,p=isNaN(D)?S:D,T(),w(b,S)),F&&w(v,S),C-S<S-A?(C&&w(v,C),A&&w(v,A)):(A&&w(v,A),C&&w(v,C)),w(v,x),F==e.length-1&&x!=f&&(k=g,i.H3A(2),g=i.R2a(r,m),i.H3A(0),m=i.R2a(k,r),M(x))))}return d},e.calculatePointFigure=function(t,a,r,n){var s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;if(!a.length)return a;function M(t,e,a,r,n){t.High=Math.max(e,t.High),t.Low=Math.min(a,t.Low),i.T4K(),t.Close=r,t.Volume+=n}if(n||(n=[]),s=t.layout,(l=(o=t.chart).state.aggregation)||(l=o.state.aggregation={}),o.defaultChartStyleConfig.box=1,o.defaultChartStyleConfig.reversal=3,r||(r={}),(h=r.box)||(s.pandf&&null!==s.pandf.box&&(s.pandf.box=null,t.changeOccurred("layout")),h=o.defaultChartStyleConfig.box,(c=a[a.length-1].Close)&&(c<.25?h=.0625:c<1?h=.125:c<5?h=.25:c<20?h=.5:c<100?(i.H3A(19),h=i.R2a(0,"1")):h=c<200?2:c<500?4:c<1e3?5:c<25e3?50:500),e.ChartEngine.isDailyInterval(s.interval)||(h/=10),e.Market.Symbology.isForexSymbol(o.symbol)&&(c&&(c<1?h=.001:c<2?h=.002:c<50?h=.02:c<200&&(h=.2)),e.ChartEngine.isDailyInterval(s.interval)&&(h*=10)),o.defaultChartStyleConfig.box=h),i.q7W(),h=parseFloat(h),isNaN(h)||h<=0){s.pandf&&null!==s.pandf.box&&(s.pandf.box=null,t.changeOccurred("layout")),i.H3A(9),u=i.s_7(0,"402799692"),1179685045,d=2;for(var T=1;i.Z1$(T.toString(),T.toString().length,55873)!==u;T++)o.defaultChartStyleConfig.box=h=3,d+=2;1179685045!==i.v0U(d.toString(),d.toString().length,60512)&&(o.defaultChartStyleConfig.box=h=1)}function F(t,e){for(var i in t)e[i]||0===e[i]||(e[i]=t[i]);return e}(p=Math.ceil(parseFloat(r.reversal)))>0&&p>r.reversal?("lay","o","u","t",s.pandf.reversal=p,t.changeOccurred("layout")):(isNaN(p)||p<=0)&&(s.pandf&&null!==s.pandf.reversal&&(s.pandf.reversal=null,t.changeOccurred("layout")),p=o.defaultChartStyleConfig.reversal),l.box=h,p*=h,g=1e-8,m=(h.toString()+".").split(".")[1].length,f=[],y=0;for(var P=0;P<a.length;P++)if(b=a[P])if(y+=b.Volume,S=b.Close,C=(C=b.Open)||0===C?C:S,A=(A=b.High)||0===A?A:S,D=(D=b.Low)||0===D?D:S,f.length||n.length){i.t7L(20);var _=i.s_7(11,12,0);(x=f[f.length-_])||(x=e.clone(n[n.length-1])),"O"==x.pfTrend?(D<=x.pfClose-h?(x.pfClose=Number((Math.ceil(D/h-g)*h).toFixed(m)),"O"==x.pfStepBack&&(x.pfStepBack=null),M(x,A,D,S,y)):A>=x.pfClose+p?(k=x.pfClose+h,w=Number((Math.floor(A/h+g)*h).toFixed(m)),v=L(b,C,A,D,S,y,x.pfClose,k,w),k==w&&(v.pfStepBack="X"),"O"==x.pfStepBack?(x.pfOpen=k,x.pfClose=w,x.pfTrend="X",M(x,A,D,S,y)):((v=F(b,v)).pfTrend="X",f.push(v))):M(x,A,D,S,y),y=0):"X"==x.pfTrend&&(A>=x.pfClose+h?(x.pfClose=Number((Math.floor(A/h+g)*h).toFixed(m)),"X"!=x.pfStepBack&&"-"!=x.pfStepBack||(x.pfStepBack=null),M(x,A,D,S,y)):D<=x.pfClose-p?(k=x.pfClose-h,w=Number((Math.ceil(D/h-g)*h).toFixed(m)),v=L(b,C,A,D,S,y,x.pfClose,k,w),k==w&&(v.pfStepBack="O"),"X"==x.pfStepBack||"-"==x.pfStepBack?(x.pfOpen=k,x.pfClose=w,x.pfTrend="O",M(x,A,D,S,y),k!=w&&"-"==x.pfStepBack&&(x.pfStepBack=null)):((v=F(b,v)).pfTrend="O",f.push(v))):M(x,A,D,S,y),y=0)}else(v=F(b,L(b,C,A,D,S,y,A+h,Number((Math.ceil(D/h-g)*h).toFixed(m)),Number((Math.floor(A/h+g)*h).toFixed(m))))).pfTrend="X",v.pfOpen==v.pfClose&&(v.pfStepBack="-"),f.push(v),y=0;function L(t,e,i,a,r,n,s,o,l){return{DT:t.DT,Date:t.Date,pfOpen:o,pfClose:l,Open:e,Close:r,High:i,Low:a,Volume:n,iqPrevClose:s}}return f}},s=t=>{var e,i,a=At;a.T4K(),e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,e.Drawing?("pa","tt","e","rn","I","V","I","I","I","parame","ters","p","attern","colo","r","l","ineWidt","h","f","illCo","lor","to","treturn","a","nn","pe","rcent","De","lta","B","ars","li","neW","idth","1","pat","t","er","n","li","neWidth","f","ill","Col","or","line","Width","t","z","p","t","fi","ll","Col","or","c","o","lor","p","atte","rn","line","W","idth","f","il","l","Color",e.Drawing.ray=function(){this.name="ray"},e.inheritsFrom(e.Drawing.ray,e.Drawing.line),e.Drawing.ray.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),e.ChartEngine.isDailyInterval(this.stx.layout.interval)&&this.d0B&&this.setPoint(1,this.d1B,this.v1B,t.chart))},e.Drawing.continuous=function(){a.T4K(),this.name="continuous",this.dragToDraw=!1,this.maxSegments=null},e.inheritsFrom(e.Drawing.continuous,e.Drawing.segment),e.Drawing.continuous.prototype.click=function(t,i,r){var n,s,o,l;if(s=(n=this.stx).panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,r)?(n.undo(),!0):(this.setPoint(1,i,r,s.chart),o=new(0,e.Drawing.segment),l=this.serialize(n),o.reconstruct(n,l),n.addDrawing(o),n.changeOccurred("vector"),n.draw(),o++,!!(this.maxSegments&&this.segment>this.maxSegments)||(a.t7L(21),this.setPoint(a.s_7(0,"0"),i,r,s.chart),!1)):(this.setPoint(0,i,r,s.chart),this.penDown=!0,!1)},e.Drawing.ellipse=function(){a.T4K(),this.name="ellipse"},e.inheritsFrom(e.Drawing.ellipse,e.Drawing.BaseTwoPoint),e.Drawing.ellipse.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;a.T4K(),r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),!r||this.field&&!n||(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),a.t7L(22),c=a.s_7(s,s,o),u=o,d=l,p=h,a.H3A(22),g=a.s_7(l,l,h),a.t7L(23),m=a.s_7(6,g,p),(f=this.lineWidth)||(f=1.1),("auto"==(y=this.color)||e.isTransparent(y))&&(y=this.getLineColor()),this.highlighted&&.1==f&&(f=1.1),v=this.fillColor,t.beginPath(),t.moveTo(c,d),a.t7L(2),t.bezierCurveTo(c,a.s_7(m,p),u,a.s_7(m,p),u,d),a.H3A(0),t.bezierCurveTo(u,a.R2a(g,m),c,a.R2a(g,m),c,d),v&&!e.isTransparent(v)&&"auto"!=v&&(t.fillStyle=v,t.globalAlpha=.2,t.fill(),t.globalAlpha=1),y&&"none"!=this.pattern&&(t.strokeStyle=y,t.lineWidth=f,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(f,this.pattern)),t.lineDashOffset=0),t.stroke()),t.closePath(),this.highlighted&&("p","1",b="p1"==this.highlighted,this.littleCircle(t,o,h,b)))},e.Drawing.ellipse.prototype.intersected=function(t,i,r){var n,s,o,l,h,c;if(!this.p0||!this.p1)return null;if(this.pointIntersection(this.p1[0],this.p1[1],r))return"d","r","a","g","p","1",this.highlighted="p1",{action:"drag",point:"p1"};n=this.p0[0]-(this.p1[0]-this.p0[0]),s=this.p1[0],o=this.p1[1],a.t7L(24);var u=a.s_7(31,2,16);a.t7L(1);var d=a.R2a(4,9,6);a.t7L(25);var p=a.R2a(5,9,15,7,12);l=this.p0[u]-(this.p1[d]-this.p0[p]);var{x0:g,x1:m,y0:f,y1:y,cy0:v,cy1:b}=r;if(g>Math.max(n,s)||m<Math.min(n,s))return!1;a.T4K();var{field:x,panelName:S,stx:C}=this;return x&&(h=C.panels[S],c=C.getYAxisByField(h,x),f=this.valueFromPixel(v,h,c),y=this.valueFromPixel(b,h,c)),!(y>Math.max(l,o)||f<Math.min(l,o))&&(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)})},e.Drawing.ellipse.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.ellipse.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.field=e.fld,a.T4K(),this.adjust()},e.Drawing.ellipse.prototype.serialize=function(){return a.q7W(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}},e.Drawing.channel=function(){this.name="channel",a.T4K(),this.dragToDraw=!1,this.p2=null},e.inheritsFrom(e.Drawing.channel,e.Drawing.segment),e.Drawing.channel.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.channel.prototype.move=function(t,e,i){var r;if(this.penDown){if(this.copyConfig(),null===this.p2)this.p1=[e,i];else{a.t7L(26);var n=a.s_7(9,9,12,11);r=i-(this.p1[n]-this.p0[1])/(this.p1[0]-this.p0[0])*(e-this.p1[0]),this.p2=[this.p1[0],r]}this.render(t)}},e.Drawing.channel.prototype.click=function(t,e,i){var r,n;if(n=(r=this.stx).panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(e,i)?(r.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.penDown=!1,!0):(this.setPoint(1,e,i,n.chart),a.T4K(),this.p0[0]==this.p1[0]?(this.p1=null,!1):(this.p2=[this.p1[0],this.p1[1]],!1)):(this.setPoint(0,e,i,n.chart),this.penDown=!0,!1)},e.Drawing.channel.prototype.boxIntersection=function(t,e,i){var r,n,s,o,{p0:l,p1:h,p2:c}=this;if(!l||!h||!c)return!1;var{x0:u,x1:d,y0:p,y1:g,cy0:m,cy1:f}=i;if(u>Math.max(l[0],h[0])||d<Math.min(l[0],h[0]))return!1;var{field:y,panelName:v,stx:b}=this;y&&(r=b.panels[v],n=b.getYAxisByField(r,y),p=this.valueFromPixel(m,r,n),g=this.valueFromPixel(f,r,n)),a.H3A(20);var x=a.s_7(6,20,13);a.T4K(),a.t7L(1);var S=a.R2a(0,7,8);a.t7L(27);var C=a.R2a(17,10,16,17,5);a.H3A(12);var A=a.R2a(13,14);s=(h[0]-l[0])*((c[x]<l[S]?g:p)-l[C])-(h[1]-l[A])*(t-l[0]),a.t7L(28);var D=a.R2a(10,10,22,20,3);a.t7L(29);var k=a.s_7(14,28,16,20,7);a.H3A(30);var w=a.R2a(8,11,12,139);a.t7L(6);var M=a.s_7(15,0,16);a.H3A(0);var T=a.s_7(13,12);a.t7L(31);var F=a.s_7(5,13,17,0);return o=(c[0]-l[0])*((c[D]>l[k]?g:p)-(l[w]+c[M]-h[T]))-(h[1]-l[F])*(t-l[0]),a.H3A(32),a.R2a(0,o,s)},e.Drawing.channel.prototype.intersected=function(t,i,r){var n;if(!this.p0||!this.p1||!this.p2)return null;for(var s in n={0:this.p0,1:this.p1,2:this.p2})if(this.pointIntersection(n[s][0],n[s][1],r))return a.t7L(2),this.highlighted=a.s_7(s,"p"),{action:"drag",point:"p"+s};return this.boxIntersection(t,i,r)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),p2:e.clone(this.p2),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.channel.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y;i=this.stx,a.T4K(),r=i.panels[this.panelName],n=i.getYAxisByField(r,this.field),!r||this.field&&!n||(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=null,this.p2&&(c=this.pixelFromValue(r,this.p2[0],this.p2[1],n)),u=this.lineWidth,d=this.getLineColor(),p=this.fillColor,this.p2&&p&&!e.isTransparent(p)&&"auto"!=p&&(t.beginPath(),t.moveTo(s,l),t.lineTo(o,h),t.lineTo(o,c),a.t7L(33),t.lineTo(s,a.R2a(h,c,l)),t.closePath(),t.globalAlpha=.2,t.fillStyle=p,t.fill(),t.globalAlpha=1),g={pattern:this.pattern,lineWidth:u},(this.penDown||this.highlighted)&&"none"==this.pattern&&(g.pattern="dotted"),i.plotLine(s,o,l,h,d,"segment",t,r,g),this.p2&&(a.H3A(33),i.plotLine(s,o,a.R2a(h,c,l),c,d,"segment",t,r,g)),this.highlighted&&(m="p0"==this.highlighted,f="p1"==this.highlighted,y="p2"==this.highlighted,this.littleCircle(t,s,l,m),this.littleCircle(t,o,h,f),this.littleCircle(t,o,c,y)))},e.Drawing.channel.prototype.reposition=function(t,e,i,r){var n,s,o;e&&(n=this.stx.panels[this.panelName],s=e.tick-i,a.T4K(),o=e.value-r,"move"==e.action?(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.setPoint(1,e.p1[0]-s,e.p1[1]-o,n.chart),this.setPoint(2,e.p2[0]-s,e.p2[1]-o,n.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),this.setPoint(2,this.p2[0],this.p2[1],n.chart),this.render(t)))},e.Drawing.channel.prototype.adjust=function(){var t,e,i;a.t7L(9),t=a.R2a(0,"1355910953"),e=2;for(var r=1;a.Z1$(r.toString(),r.toString().length,42605)!==t;r++){if(-(i=this.stx.panels[this.panelName]))return;this.setPoint(1,this.d0,this.v0,i.chart),this.setPoint(2,this.d1,this.v1,i.chart),this.setPoint(9,this.d1,this.v2,i.chart),e+=2}if(55556483!==a.Z1$(e.toString(),e.toString().length,15525)){if(!(i=this.stx.panels[this.panelName]))return;this.setPoint(0,this.d0,this.v0,i.chart),this.setPoint(1,this.d1,this.v1,i.chart),this.setPoint(2,this.d1,this.v2,i.chart)}},e.Drawing.channel.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.v2=e.v2,this.field=e.fld,this.adjust()},e.Drawing.channel.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},e.Drawing.pitchfork=function(){this.name="pitchfork",this.dragToDraw=!1,this.p2=null},e.inheritsFrom(e.Drawing.pitchfork,e.Drawing.channel),e.Drawing.pitchfork.prototype.configs=["color","lineWidth","pattern"],e.Drawing.pitchfork.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[e,i]:this.p2=[e,i],this.render(t))},e.Drawing.pitchfork.prototype.intersected=function(t,i,r){var n,s;if(!this.p0||!this.p1||!this.p2)return null;for(var o in n={0:this.p0,1:this.p1,2:this.p2},a.T4K(),n)if(this.pointIntersection(n[o][0],n[o][1],r))return"d","r","a","g",a.H3A(2),this.highlighted=a.s_7(o,"p"),{action:"drag",point:"p"+o};s=this.rays;for(var l=0;l<s.length;l++)if("s","e","gmen","t",this.lineIntersection(t,i,r,l?"ray":"segment",s[l][0],s[l][1],!0))return this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),p2:e.clone(this.p2),tick:t,value:this.valueOnDrawingAxis(t,i)};return null},e.Drawing.pitchfork.prototype.render=function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if(i=(e=this.stx).panels[this.panelName],r=e.getYAxisByField(i,this.field),i&&(!this.field||r)){(n=this.p2)||(n=this.p1),s=e.pixelFromTick(this.p0[0],i.chart),o=e.pixelFromTick(this.p1[0],i.chart),l=e.pixelFromTick(n[0],i.chart),h=this.pixelFromValue(i,this.p0[0],this.p0[1],r),c=this.pixelFromValue(i,this.p1[0],this.p1[1],r),u=this.pixelFromValue(i,n[0],n[1],r),d=this.lineWidth,p=this.getLineColor(),g={pattern:this.pattern,lineWidth:d},m=50,a.H3A(34),f=a.R2a("2",c,u,h),a.t7L(35),(y=a.R2a(l,s,2,o))<0&&(m*=-1),a.t7L(8),f*=a.s_7(m,y),a.t7L(3),this.rays=[[[o,c],[l,u]],[[s,h],[a.R2a(o,"2",l),a.s_7(c,u,2,a.H3A(5))]]],o==l&&c==u||(a.H3A(0),this.rays.push([[o,c],[a.s_7(o,m),a.R2a(c,f)]],[[l,u],[a.s_7(l,m),a.s_7(u,f)]]));for(var A=0;A<this.rays.length;A++)v=this.rays[A],b=A?"ray":"segment",e.plotLine(v[0][0],v[1][0],v[0][1],v[1][1],p,b,t,i,g);this.highlighted&&("p","2",x="p0"==this.highlighted,S="p1"==this.highlighted,C="p2"==this.highlighted,this.littleCircle(t,s,h,x),this.littleCircle(t,o,c,S),this.littleCircle(t,l,u,C))}},e.Drawing.pitchfork.prototype.adjust=function(){var t;t=this.stx.panels[this.panelName],a.q7W(),t&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setPoint(2,this.d2,this.v2,t.chart))},e.Drawing.pitchfork.prototype.reconstruct=function(t,e){a.T4K(),this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.d2=e.d2,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.tzo2=e.tzo2,this.v0=e.v0,this.v1=e.v1,this.v2=e.v2,this.field=e.fld,this.adjust()},e.Drawing.pitchfork.prototype.serialize=function(){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field}},e.Drawing.gartley=function(){this.name="gartley",this.dragToDraw=!1,this.maxSegments=4,this.shape=null,this.points=[]},e.inheritsFrom(e.Drawing.gartley,e.Drawing.continuous),e.Drawing.gartley.prototype.check=function(t,e){if(!e)return!0;if(t[0]>=e[0]||t[1]==e[1])return!1;if(1==this.segment)t[1]<e[1]?this.shape="M":this.shape="W";else if(2==this.segment){if("M"==this.shape&&t[1]<e[1])return!1;if("W"==this.shape&&t[1]>e[1])return!1;if((e[1]-t[1])/(this.points[0][1]-t[1])<.618)return!1;if((e[1]-t[1])/(this.points[0][1]-t[1])>=.786)return!1}else if(3==this.segment){if("M"==this.shape&&t[1]>e[1])return!1;if("W"==this.shape&&t[1]<e[1])return!1;if((e[1]-t[1])/(this.points[1][1]-t[1])<.618)return!1;if((e[1]-t[1])/(this.points[1][1]-t[1])>=.786)return!1}else if(4==this.segment){if("M"==this.shape&&(t[1]<e[1]||e[1]<this.points[0][1]))return!1;if("W"==this.shape&&(t[1]>e[1]||e[1]>this.points[0][1]))return!1;if((this.points[1][1]-e[1])/(this.points[1][1]-this.points[2][1])<1.27)return!1;if((this.points[1][1]-e[1])/(this.points[1][1]-this.points[2][1])>=1.618)return!1}return!0},e.Drawing.gartley.prototype.click=function(t,e,i){var r;if(r=this.stx.panels[this.panelName]){if(a.q7W(),this.copyConfig(),!this.penDown)return this.setPoint(0,e,i,r.chart),this.pts=[],this.penDown=!0,this.segment=1,!1;if(this.accidentalClick(e,i))return this.penDown=!0,!1;if(this.check(this.p0,this.p1)){if(1==this.segment&&this.points.push(this.p0),this.points.push(this.p1),a.H3A(19),this.setPoint(a.s_7(32,"1"),e,i,r.chart),this.segment++,this.segment>this.maxSegments)return this.setPoint(0,this.points[0][0],this.points[0][1],r.chart),this.penDown=!1,!0;this.pts.push(this.d1,this.tzo1,this.v1),this.setPoint(0,e,i,r.chart)}return!1}},e.Drawing.gartley.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if("non","e",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)){if(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),2==this.segment)this.drawDropZone(t,.618*this.points[0][1]+.382*this.p0[1],.786*this.points[0][1]+.214*this.p0[1],this.p0[0]);else if(3==this.segment)this.drawDropZone(t,.618*this.points[1][1]+.382*this.p0[1],.786*this.points[1][1]+.214*this.p0[1],this.p0[0]);else if(4==this.segment){a.t7L(0);var x=a.R2a(5,4);a.t7L(36);var S=a.R2a(7,4,14,10,20);a.t7L(37);var C=a.s_7(16,1,17);a.H3A(2);var A=a.s_7(1,0);a.H3A(12);var D=a.R2a(8,9);c="1.618"*x*this.points[S][C]-.618*this.points[A][D],c="M"==this.shape?Math.max(c,this.points[0][1]):Math.min(c,this.points[0][1]),this.drawDropZone(t,c,1.27*this.points[2][1]-.27*this.points[1][1],this.p0[0])}if(u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u},(this.penDown||this.highlighted)&&"none"==this.pattern&&(p.pattern="dotted"),this.segment<=this.maxSegments&&i.plotLine(s,o,l,h,d,this.name,t,r,p),g=this.fillColor,m=[],this.points.length){"aut","o",t.beginPath();for(var k=1;k<this.points.length&&k<=4;k++)f=i.pixelFromTick(this.points[k-1][0],r.chart),y=i.pixelFromTick(this.points[k][0],r.chart),v=this.pixelFromValue(r,this.points[k-1][0],this.points[k-1][1],n),b=this.pixelFromValue(r,this.points[k][0],this.points[k][1],n),1==k&&m.push(f,v),m.push(y,b),i.plotLine(f,y,v,b,d,this.name,t,r,p);if(2!=this.points.length&&4!=this.points.length||m.push(o,h),this.points[2]&&m.push(i.pixelFromTick(this.points[2][0],r.chart),this.pixelFromValue(r,this.points[2][0],this.points[2][1],n)),g&&"auto"!=g&&!e.isTransparent(g)){for(var w=0;w<m.length;w+=2)0===w&&t.moveTo(m[0],m[1]),t.lineTo(m[w],m[w+1]);t.fillStyle=g,t.globalAlpha=.2,t.closePath(),t.fill(),t.globalAlpha=1}}}},e.Drawing.gartley.prototype.lineIntersection=function(t,i,r,n){var s,o;if(s=this.points,o=this.stx.panels[this.panelName],s.length!=this.maxSegments+1||!o)return!1;for(var l=0;l<s.length-1;l++)if(e.Drawing.BaseTwoPoint.prototype.lineIntersection.call(this,t,i,r,"segment",s[l],s[l+1]))return!0;return a.q7W(),!1},e.Drawing.gartley.prototype.boxIntersection=function(t,e,i){var a,r;if(!this.p0||!this.p1)return!1;if(i.x0>Math.max(this.p0[0],this.p1[0])||i.x1<Math.min(this.p0[0],this.p1[0]))return!1;a=Math.min(this.p0[1],this.p1[1]),r=Math.max(this.p0[1],this.p1[1]);for(var n=0;n<this.points.length;n++)a=Math.min(a,this.points[n][1]),r=Math.max(r,this.points[n][1]);return!(i.y1>r||i.y0<a)},e.Drawing.gartley.prototype.reposition=function(t,e,i,r){var n,s,o;if(e&&(n=this.stx.panels[this.panelName],s=e.tick-i,a.q7W(),e.tick=i,o=e.value-r,e.value=r,"move"==e.action)){this.pts=[];for(var l=0;l<this.points.length;l++)this.points[l][0]-=s,this.points[l][1]-=o,this.setPoint(1,this.points[l][0],this.points[l][1],n.chart),l&&l<this.points.length-1&&this.pts.push(this.d1,this.tzo1,this.v1),this.points[l]=this.p1;this.setPoint(0,this.points[0][0],this.points[0][1],n.chart),this.render(t)}},e.Drawing.gartley.prototype.configs=["color","fillColor","lineWidth","pattern"],e.Drawing.gartley.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(this.reconstructPoints(),this.setPoint(0,this.d0,this.v0,t.chart),this.points.unshift(this.p0),this.setPoint(1,this.d1,this.v1,t.chart),this.points.push(this.p1))},e.Drawing.gartley.prototype.reconstructPoints=function(){var t,i;if(a.q7W(),t=this.stx.panels[this.panelName]){this.points=[];for(var r=0;r<this.pts.length;r+=3)(i=e.strToDateTime(this.pts[r])).setMinutes(i.getMinutes()+Number(this.pts[r+1])-i.getTimezoneOffset()),this.points.push([this.stx.tickFromDate(e.yyyymmddhhmmssmmm(i),t.chart),this.pts[r+2]])}},e.Drawing.gartley.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,a.T4K(),this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.field=e.fld,this.pts=e.pts.split(","),this.adjust()},e.Drawing.gartley.prototype.serialize=function(){return a.q7W(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,pts:this.pts.join(",")}},e.Drawing.freeform=function(){a.q7W(),this.name="freeform",this.splineTension=.3,this.dragToDraw=!0},e.inheritsFrom(e.Drawing.freeform,e.Drawing.segment),e.Drawing.freeform.prototype.measure=function(){},e.Drawing.freeform.prototype.intersected=function(t,i,a){var r,n;var{x0:s,x1:o,y0:l,y1:h,cy0:c,cy1:u}=a;if(s>this.hiX||o<this.lowX)return!1;var{field:d,panelName:p,stx:g}=this;return d&&(r=g.panels[p],n=g.getYAxisByField(r,d),l=this.valueFromPixel(c,r,n),h=this.valueFromPixel(u,r,n)),!(h>this.hiY||l<this.lowY)&&(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),tick:t,value:this.valueOnDrawingAxis(t,i)})},e.Drawing.freeform.prototype.reposition=function(t,e,i,r){var n,s,o;e&&(a.T4K(),n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-r,"move"==e.action&&(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.adjust(),this.render(t)))},e.Drawing.freeform.prototype.click=function(t,i,r){var n,s,o,l;if("a","u","to",s=(n=this.stx).panels[this.panelName])return o=n.getYAxisByField(s,this.field)||s.yAxis,!1===this.penDown?(this.copyConfig(),this.startX=Math.round(n.resolveX(n.pixelFromTick(i,s.chart))),this.startY=Math.round(n.resolveY(this.pixelFromValue(s,i,r,o))),l=n.dateFromTick(i,s.chart,!0),this.d0=e.yyyymmddhhmmssmmm(l),this.tzo0=l.getTimezoneOffset(),this.v0=r,this.p0=[e.ChartEngine.crosshairX-this.startX,e.ChartEngine.crosshairY-this.startY],this.nodes=[this.p0[0],this.p0[1]],this.pNodes=[this.p0],this.candleWidth=n.layout.candleWidth,this.multiplier=o.multiplier,this.interval=n.layout.interval,this.periodicity=n.layout.periodicity,this.tempSplineTension=this.splineTension,this.splineTension=-1,n.container.ownerDocument.body.style.cursor="pointer",this.penDown=!0,!1):(this.penDown=!1,this.splineTension=this.tempSplineTension,n.container.ownerDocument.body.style.cursor="auto",a.q7W(),2===this.nodes.length&&n.undo(),!0)},e.Drawing.freeform.prototype.move=function(t,i,r){var n,s,o,l;if(this.penDown)return s=(n=this.stx).panels[this.panelName],o=n.getYAxisByField(s,this.field)||s.yAxis,l=n.dateFromTick(i,s.chart,!0),this.d1=e.yyyymmddhhmmssmmm(l),this.tzo1=l.getTimezoneOffset(),this.v1=r,this.p1=[e.ChartEngine.crosshairX-this.startX,o.flipped?this.startY-e.ChartEngine.crosshairY:e.ChartEngine.crosshairY-this.startY],this.pNodes.length>2&&(this.p1[0]==this.pNodes[this.pNodes.length-2][0]&&this.p1[0]==this.pNodes[this.pNodes.length-1][0]?(this.pNodes.length--,a.t7L(21),this.nodes.length-=a.s_7(2,"2")):this.p1[1]==this.pNodes[this.pNodes.length-2][1]&&this.p1[1]==this.pNodes[this.pNodes.length-1][1]&&(this.pNodes.length--,this.nodes.length-=2)),this.nodes.push(this.p1[0],this.p1[1]),this.pNodes.push(this.p1),this.render(t),!1},e.Drawing.freeform.prototype.intervalRatio=function(t,i,r,n,s,o){var l;function h(t,i){return e.Market.Symbology.isForexSymbol(i)?1440:(a.T4K(),390)}if(l=0,t==i)l=1;else if(isNaN(t)||isNaN(i))if(isNaN(t)){if("month"==t)"w","e","e","k","week"==i?l=c(s,o):"day"==i?l=d(s,o):isNaN(i)||(l=d(s,o)*h(0,o)/i);else if("week"==t){if("d","a","y","mo","n","t","h","month"==i)a.H3A(20),l=a.s_7(3,5,1)/c(s,o);"day"==i?l=u(s,o):isNaN(i)||(l=u(s,o)*h(0,o)/i)}else if("day"==t){if("m","onth","week"==i)a.H3A(0),l=a.R2a(7,6)/u(s,o);else"month"==i?l=1/d(s,o):isNaN(i)||(l=h(0,o)/i)}}else isNaN(t)||("d","a","y","mon","th","month"==i?l=t/(d(s,o)*h(0,o)):"week"==i?l=t/(u(s,o)*h(0,o)):"day"==i&&(l=t/h(0,o)));else a.t7L(8),l=a.R2a(t,i);function c(t,e){return a.q7W(),5}function u(t,e){return a.T4K(),5}function d(t,e){return a.t7L(38),a.s_7("30",32)}return a.H3A(8),l*=a.s_7(r,n)},e.Drawing.freeform.prototype.render=function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m;if(i=(e=this.stx).panels[this.panelName],r=e.getYAxisByField(i,this.field),i&&(!this.field||r)&&(r=r||i.yAxis,0!==(n=this.intervalRatio(this.interval,e.layout.interval,this.periodicity,e.layout.periodicity,this.d0,i.chart.symbol)))){s=e.layout.candleWidth/this.candleWidth,o=r.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,i.chart),l=e.pixelFromTick(this.p0[0],i.chart),h=this.pixelFromValue(i,this.p0[0],this.p0[1],r),c=[],u=this.lineWidth,d=this.getLineColor(),p={pattern:this.pattern,lineWidth:u};for(var f=0;f<this.pNodes.length;f++){g=n*s*this.pNodes[f][0]+l,a.H3A(39);var y=a.s_7(0,17,17,35);m=o*this.pNodes[f][y],r.flipped?(a.t7L(0),m=a.R2a(h,m)):m+=h,c.push(g,m)}c.length&&(this.splineTension<0?e.connectTheDots(c,d,this.name,t,i,p):e.plotSpline(c,this.splineTension,d,this.name,t,!0,p))}},e.Drawing.freeform.prototype.adjust=function(){var t,e,i,r,n,s,o,l,h,c;if(e=(t=this.stx).panels[this.panelName]){i=[this.nodes[0],this.nodes[1]],this.pNodes=[i],this.lowX=this.nodes[0],this.hiX=this.nodes[0],this.lowY=this.nodes[1],this.hiY=this.nodes[1];for(var u=2;u<this.nodes.length;u+=2)a.t7L(2),r=[this.nodes[u],this.nodes[a.R2a(1,u)]],this.pNodes.push(r),this.lowX=Math.min(this.lowX,r[0]),this.hiX=Math.max(this.hiX,r[0]),this.lowY=Math.max(this.lowY,r[1]),this.hiY=Math.min(this.hiY,r[1]);0!==(n=this.intervalRatio(this.interval,t.layout.interval,this.periodicity,t.layout.periodicity,this.d0,e.chart.symbol))&&(s=t.getYAxisByField(e,this.field)||e.yAxis,o=t.layout.candleWidth/this.candleWidth,l=s.multiplier/this.multiplier,this.setPoint(0,this.d0,this.v0,e.chart),h=t.pixelFromTick(this.p0[0],e.chart),c=this.pixelFromValue(e,this.p0[0],this.p0[1],s),this.lowX=t.tickFromPixel(Math.floor(n*o*this.lowX)+h,e.chart),this.hiX=t.tickFromPixel(Math.ceil(n*o*this.hiX)+h,e.chart),s.flipped?(this.lowY=this.valueFromPixel(c-Math.floor(l*this.lowY),e,s),this.hiY=this.valueFromPixel(c-Math.ceil(l*this.hiY),e,s)):(this.lowY=this.valueFromPixel(Math.floor(l*this.lowY)+c,e,s),this.hiY=this.valueFromPixel(Math.ceil(l*this.hiY)+c,e,s)))}},e.Drawing.freeform.prototype.serialize=function(){return a.T4K(),{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,cw:Number(this.candleWidth.toFixed(4)),mlt:Number(this.multiplier.toFixed(4)),d0:this.d0,tzo0:this.tzo0,v0:this.v0,inter:this.interval,pd:this.periodicity,nodes:this.nodes,fld:this.field}},e.Drawing.freeform.prototype.reconstruct=function(t,e){this.stx=t,this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.candleWidth=e.cw,this.multiplier=e.mlt,this.d0=e.d0,this.tzo0=e.tzo0,this.v0=e.v0,this.interval=e.inter,this.periodicity=e.pd,this.nodes=e.nodes,this.field=e.fld,this.adjust()},e.Drawing.callout=function(){this.name="callout",this.arr=[],this.w=0,this.h=0,this.padding=5,this.text="",this.ta=null,this.border=!1,this.fontSize=12,this.font={},this.stemEntry="",a.t7L(21),this.defaultWidth=a.s_7(32,"35")},e.inheritsFrom(e.Drawing.callout,e.Drawing.annotation),e.Drawing.callout.prototype.configs=["color","fillColor","lineWidth","pattern","font"],e.Drawing.callout.prototype.copyConfig=function(t){e.Drawing.copyConfig(this,t),a.T4K(),this.borderColor=this.color},e.Drawing.callout.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),this.p0=[e,i],this.render(t))},e.Drawing.callout.prototype.onChange=function(t){var i,r;a.T4K(),this.stx.panels[this.panelName]&&(i=t.target,this.w=i.clientWidth,this.h=i.clientHeight,r=this.context||this.stx.chart.tempCanvas.context,e.clearCanvas(r.canvas,this.stx),this.render(r),this.edit(r))},e.Drawing.callout.prototype.repositionTextArea=function(t){var i;a.t7L(1);var r=a.s_7(0,16,18);i=this.defaultWidth*r+this.whitespace+this.padding,i=Math.max(this.w,i),a.H3A(13);var n=a.s_7(16,1,16);t.style.left=e.stripPX(t.style.left)-(isNaN(i)?this.defaultWidth*n:i/2)+"px",this.ta=t},e.Drawing.callout.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(this.context=t,s=i.pixelFromTick(this.p0[0],r.chart),o=this.pixelFromValue(r,this.p0[0],this.p0[1],n),!isNaN(o))){t.font=this.fontString,t.textBaseline="top",l=s,h=o,a.H3A(40);var D=a.R2a(102,10,5,9,10);c=this.w/D,a.H3A(2);var k=a.s_7(1,0);if(u=this.h/("2"*k),this.penDown){a.t7L(41);var w=a.s_7(9,6,5);c=this.defaultWidth+this.whitespace/2+this.padding/w,u=this.fontSize+this.fontModifier}if((d=this.lineWidth)||(d=1.1),p=this.getLineColor(),g=this.getLineColor(this.borderColor),b=Math.min(Math.min(c,u)/2,8),this.stem&&("c","m",this.stem.t?(m=i.pixelFromTick(this.stem.t),y=this.pixelFromValue(r,this.stem.t,this.stem.v,n)):this.stem.x&&(m=l,y=h,l+=this.stem.x,h+=this.stem.y),x="",m>=l+c?(a.t7L(2),f=a.s_7(c,l),x="r"):m>l-c&&m<l+c?(f=l,x="c"):m<=l-c&&(a.H3A(0),f=a.s_7(l,c),x="l"),y>=h+u?(a.H3A(2),v=a.R2a(u,h),x+="b"):y>h-u&&y<h+u?(v=h,x+="m"):y<=h-u&&(a.H3A(0),v=a.s_7(h,u),x+="t"),this.stemEntry=x,"cm"!=x&&(m=Math.round(m),f=Math.round(f),y=Math.round(y),v=Math.round(v))),this.highlighted?("stx_anno","ta","tion_highligh","t_bg",i.canvasColor("stx_annotation_highlight_bg",t)):this.fillColor?(t.fillStyle=this.fillColor,t.globalAlpha=.7):this.stem&&(t.fillStyle=i.containerColor),t.strokeStyle=g,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(d,this.pattern)),t.lineDashOffset=0),g){"l","b",t.beginPath(),t.lineWidth=d,a.t7L(1),t.moveTo(a.s_7(l,b,c),a.s_7(h,u,a.H3A(0))),"rt"!=this.stemEntry?(a.t7L(2),t.quadraticCurveTo(a.R2a(c,l),a.s_7(h,u,a.H3A(0)),a.s_7(c,l,a.H3A(2)),a.s_7(u,h,b,a.H3A(6)))):(t.lineTo(m,y),a.H3A(2),t.lineTo(a.R2a(c,l),a.s_7(u,h,b,a.H3A(6)))),a.t7L(2),t.lineTo(a.R2a(c,l),a.s_7(h,b,2,a.t7L(42))),"rm"==this.stemEntry&&t.lineTo(m,y),a.t7L(2),t.lineTo(a.s_7(c,l),a.R2a(2,b,h,a.H3A(43))),a.H3A(2),t.lineTo(a.s_7(c,l),a.s_7(h,b,u,a.H3A(1))),"rb"!=this.stemEntry?(a.H3A(2),t.quadraticCurveTo(a.s_7(c,l),a.R2a(u,h,a.t7L(2)),a.R2a(l,b,c,a.H3A(1)),a.s_7(u,h,a.H3A(2)))):(t.lineTo(m,y),a.t7L(1),t.lineTo(a.R2a(l,b,c),a.R2a(u,h,a.H3A(2)))),a.H3A(43),t.lineTo(a.s_7(2,b,l),a.R2a(u,h,a.H3A(2))),"cb"==this.stemEntry&&t.lineTo(m,y),a.H3A(42),t.lineTo(a.s_7(l,b,2),a.R2a(u,h,a.t7L(2))),a.H3A(6),t.lineTo(a.s_7(c,l,b),a.R2a(u,h,a.H3A(2))),"lb"!=this.stemEntry?(a.t7L(0),t.quadraticCurveTo(a.R2a(l,c),a.R2a(u,h,a.H3A(2)),a.R2a(l,c,a.H3A(0)),a.s_7(h,b,u,a.t7L(1)))):(t.lineTo(m,y),a.H3A(0),t.lineTo(a.s_7(l,c),a.s_7(h,b,u,a.t7L(1)))),a.t7L(0),t.lineTo(a.R2a(l,c),a.R2a(2,b,h,a.t7L(43))),-1263871275,1183364739,S=2;for(var M=1;-1263871275!==a.Z1$(M.toString(),M.toString().length,86607);M++)""===this.stemEntry&&t.lineTo(m,y),S+=2;if(1183364739!==a.Z1$(S.toString(),S.toString().length,26292)&&("l","m","lm"==this.stemEntry&&t.lineTo(m,y)),a.t7L(0),t.lineTo(a.s_7(l,c),a.R2a(2,"2",h,b,a.t7L(44))),a.t7L(0),t.lineTo(a.s_7(l,c),a.R2a(u,h,b,a.t7L(6))),"lt"!=this.stemEntry)a.t7L(0),t.quadraticCurveTo(a.s_7(l,c),a.s_7(h,u,a.H3A(0)),a.s_7(c,l,b,a.t7L(6)),a.R2a(h,u,a.t7L(0)));else{-508886583,1761717888,C=2;for(var T=1;-508886583!==a.v0U(T.toString(),T.toString().length,2509);T++)t.lineTo(m,y),a.H3A(21),C+=a.s_7(0,"2");1761717888!==a.v0U(C.toString(),C.toString().length,69102)&&t.lineTo(m,y),a.H3A(6),t.lineTo(a.s_7(c,l,b),a.R2a(h,u,a.t7L(0)))}a.t7L(42),t.lineTo(a.s_7(l,b,2),a.R2a(h,u,a.H3A(0))),"ct"==this.stemEntry&&t.lineTo(m,y),a.t7L(43),t.lineTo(a.s_7(2,b,l),a.s_7(h,u,a.t7L(0))),a.H3A(1),t.lineTo(a.R2a(l,b,c),a.R2a(h,u,a.H3A(0))),t.fill(),t.globalAlpha=1,"none"!=this.pattern&&t.stroke()}if(this.highlighted?("stx","_anno","tation_highlight",i.canvasColor("stx_annotation_highlight",t)):t.fillStyle=p,h+=this.padding,!this.ta)for(var F=0;F<this.arr.length;F++)t.fillText(this.arr[F],l-c+this.padding,h-u),h+=this.fontSize;t.textBaseline="alphabetic",this.highlighted&&!this.noHandles&&(A="p0"==this.highlighted,this.littleCircle(t,m,y,A))}},e.Drawing.callout.prototype.click=function(t,e,i){var a;if(!this.stx.overXAxis&&!this.stx.overYAxis)return a=this.stx.panels[this.panelName],this.copyConfig(),this.setPoint(0,e,i,a.chart),this.penDown?(this.adjust(),this.edit(t),this.penDown=!1,!1):(this.stem={d:this.d0,v:this.v0},this.penDown=!0,this.adjust(),!1)},e.Drawing.callout.prototype.reposition=function(t,e,i,r){var n,s,o,l;if(e){if(a.q7W(),n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-r,e.stem)"drag"==e.action?this.stem={d:this.stx.dateFromTick(i,n.chart,!0),v:r}:"move"==e.action&&(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.stem={d:this.stx.dateFromTick(this.stx.tickFromDate(e.stem.d,n.chart)-s),v:e.stem.v-o}),this.adjust();else{-760790208,-711884548,l=2;for(var h=1;-760790208!==a.v0U(h.toString(),h.toString().length,35947);h++)this.setPoint(9,e.p0[1]+s,e.p0[7]+o,n.chart),l+=2;-711884548!==a.v0U(l.toString(),l.toString().length,16580)&&this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart)}this.render(t)}},e.Drawing.callout.prototype.lineIntersection=function(t,i,r,n){var s,o,l,h,c,u,d,p,g,m,f;if(s=this.stem,o=this.p0,h=(l=this.stx).panels[this.panelName],!o||!s||!h)return!1;if(c=s.t||l.tickFromDate(s.d,h.chart),u={x0:o[0],x1:c,y0:o[1],y1:s.v},p=(d=this.boxToPixels(l,this.panelName,u,l.getYAxisByField(h,this.field))).x0,g=d.y0,m=d.x1,f=d.y1,a.q7W(),"string"==typeof this.stemEntry){if(this.stemEntry.indexOf("l")>-1){a.H3A(45);var y=a.R2a(10,17,38,9);p-=this.w/y}else if(this.stemEntry.indexOf("r")>-1){a.t7L(37);var v=a.s_7(10,7,72);p+=this.w/v}if(this.stemEntry.indexOf("t")>-1){a.H3A(46);var b=a.R2a(1,1,10,10);g-=this.h/b}else if(this.stemEntry.indexOf("b")>-1){a.H3A(47);var x=a.R2a(20,1,21,1);g+=this.h/x}}return e.boxIntersects(r.cx0,r.cy0,r.cx1,r.cy1,p,g,m,f,n)},e.Drawing.callout.prototype.intersected=function(t,i,r){var n,s,o,l,h,c,u,d,p,g;if(a.q7W(),s=(n=this.stx).panels[this.panelName],!this.p0)return null;if(this.pointIntersection(this.stem.t,this.stem.v,r)){"p","0",this.highlighted="p0",-1139790876,-1555838744,2;for(var m=1;-1139790876!==a.Z1$(m.toString(),m.toString().length,48893);m++)return{action:"",stem:!1};return-1555838744!==a.v0U(2..toString(),2..toString().length,65498)?{action:"",stem:!0}:{action:"drag",stem:!0}}a.H3A(20);var f=a.R2a(12,32,18);o=n.pixelFromTick(this.p0[0],s.chart)-this.w/f,l=n.getYAxisByField(s,this.field),a.t7L(48);var y=a.R2a(22,8,9,6);a.t7L(49);var v=a.R2a(13,10,1,20,13);if(h=this.pixelFromValue(s,this.p0[0],this.p0[y],l)-this.h/v,c=o+this.w,u=h+this.h,this.stem&&this.stem.x&&(o+=this.stem.x,c+=this.stem.x,h+=this.stem.y,u+=this.stem.y),d=n.pixelFromTick(t,s.chart),p=n.pixelFromValueAdjusted(s,t,i),d+r.r>=o&&d-r.r<=c&&p+r.r>=h&&p-r.r<=u){this.highlighted=!0,-1867244211,-966316490,a.t7L(21),g=a.s_7(0,"2");for(var b=1;-1867244211!==a.v0U(b.toString(),b.toString().length,64412);b++)return{p0:e.clone(this.p0),tick:t,value:this.valueOnDrawingAxis(t,i)};if(-966316490!==a.v0U(g.toString(),g.toString().length,69851))return{p0:e.clone(this.p0),tick:t,value:this.valueOnDrawingAxis(t,i)}}return this.lineIntersection(t,i,r,"segment")?(this.highlighted=!0,{action:"move",stem:e.clone(this.stem),p0:e.clone(this.p0),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.fibonacci=function(){a.T4K(),this.name="fibonacci",this.configurator="fibonacci"},e.inheritsFrom(e.Drawing.fibonacci,e.Drawing.BaseTwoPoint),e.Drawing.fibonacci.mapping={trend:"t",color:"c",parameters:"p",pattern:"pt",opacity:"o",lineWidth:"lw",level:"l",extendLeft:"e",printLevels:"pl",printValues:"pv",timezone:"tz",display:"d"},e.Drawing.fibonacci.prototype.recommendedLevels=[-.618,-.382,0,.382,.5,.618,1,1.382,1.618],e.Drawing.fibonacci.prototype.configs=["color","fillColor","lineWidth","pattern","parameters"],e.Drawing.fibonacci.prototype.initializeSettings=function(t){var e,i;if(a.T4K(),(e=this.recommendedLevels)&&!t.currentVectorParameters.fibonacci.fibsAlreadySet){i=t.currentVectorParameters.fibonacci.fibs;for(var r=0;r<i.length;r++){delete i[r].display;for(var n=0;n<e.length;n++)i[r].level==e[n]&&(i[r].display=!0)}}},e.Drawing.fibonacci.prototype.setOuter=function(){var t,i,r,n,s,o,l,h,c,u,d,p,g,m,f;if(i=(t=this.stx).panels[this.panelName]){r=Math.max(this.p0[1],this.p1[1]),n=Math.min(this.p0[1],this.p1[1]),a.H3A(0),s=a.s_7(r,n),this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)},a.q7W(),o=t.pixelFromTick(this.p0[0],i.chart),l=t.pixelFromTick(this.p1[0],i.chart),h=t.getYAxisByField(i,this.field),c=this.pixelFromValue(i,this.p0[0],this.p0[1],h),u=this.pixelFromValue(i,this.p1[0],this.p1[1],h),d=0,p=1;for(var y=0;y<this.parameters.fibs.length;y++)(g=this.parameters.fibs[y]).level>=d&&g.level<=p||!g.display||(m=this.pixelFromValue(i,this.p0[0],u<c?r-s*g.level:n+s*g.level,h),f=e.xIntersection({x0:o,x1:l,y0:c,y1:u},m),g.level<d?(d=g.level,this.outer.p1[1]=this.valueFromPixel(m,i,h),this.outer.p1[0]=t.tickFromPixel(f,i.chart)):g.level>p&&(p=g.level,this.outer.p0[1]=this.valueFromPixel(m,i,h),this.outer.p0[0]=t.tickFromPixel(f,i.chart)))}},e.Drawing.fibonacci.prototype.click=function(t,i,r){var n;if(a.q7W(),n=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(this.accidentalClick(i,r)||(this.setPoint(1,i,r,n.chart),this.setOuter(),this.parameters=e.clone(this.parameters),this.penDown=!1),!0):(this.setPoint(0,i,r,n.chart),this.penDown=!0,!1)},e.Drawing.fibonacci.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=Math.max(this.p0[1],this.p1[1]),o=Math.min(this.p0[1],this.p1[1]),l=n.flipped?o-s:s-o,h=i.pixelFromTick(this.p0[0],r.chart),c=i.pixelFromTick(this.p1[0],r.chart),u=this.pixelFromValue(r,this.p0[0],this.p0[1],n),d=this.pixelFromValue(r,this.p1[0],this.p1[1],n),p=Math.min(d,u),g=Math.max(d,u),a.t7L(0),m=a.s_7(g,p),a.t7L(50),f=a.s_7(u,c,0,h,d),y={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=y),v=this.getLineColor(this.parameters.trend.color),a.q7W(),t.textBaseline="middle",i.canvasFont("stx_yaxis",t),a.t7L(2);var z=a.R2a(13,51);b=t.measureText("161.8%").width+("10"<<z),x=Number.MAX_VALUE,S=Number.MAX_VALUE,a.t7L(51);var j=a.s_7(12,17,17,10);C=Number.MAX_VALUE*j,a.H3A(52);var U=a.s_7(18,25,8);A=Number.MAX_VALUE*U,D=this.getLineColor(),this.rays=[];for(var B=0;B<this.parameters.fibs.length;B++)if("a","u","to","a","uto","au","t","o",t.textAlign="left",t.fillStyle=D,(k=this.parameters.fibs[B]).display){if(w=this.pixelFromValue(r,this.p0[0],d<u?s-l*k.level:o+l*k.level,n),M=e.xIntersection({x0:h,x1:c,y0:u,y1:d},w),T=this.parameters.extendLeft?0:M,F=r.left+r.width,this.parameters.printLevels){a.H3A(31);var V=a.s_7(19,935,4,50);a.t7L(12);var W=a.s_7(2,12);a.H3A(53);var Q=a.R2a(3815,425,11);a.H3A(47);var Y=a.R2a(20,4208,4220,8420);a.t7L(54);a.s_7(4,8,5668,5676,5676);a.t7L(6);var q=a.R2a(2,2580,5162);a.H3A(10);a.R2a(5773,11,15,20,481);a.t7L(55);a.s_7(19,58,7,13,570);a.H3A(56);var X=a.R2a(15048,15048,1880,7,7);a.t7L(57);var Z=a.R2a(15,8467,11,8465,127140);P=Math.round(k.level*V)/W+(Q==Y?!(q>=264.09)||X==Z:"%"),F-=b,this.parameters.printValues&&(t.fillStyle=D,i.canvasFont("stx_yaxis",t)),F<T&&(t.textAlign="right"),t.fillText(P,F,w),F<T?F+=5:F-=5}this.parameters.printValues&&M<r.width&&(_=this.valueFromPixel(w,r,n),_=n.priceFormatter?n.priceFormatter(i,r,_):i.formatYAxisPrice(_,r,null,n),t==i.chart.context&&i.endClip(),i.createYAxisLabel(r,_,w,this.getLineColor(null,!0),null,t,n),t==i.chart.context&&i.startClip(r.name)),("auto"==(L=k.color)||e.isTransparent(L))&&(L=this.getLineColor()),("auto"==(E=k.color)||e.isTransparent(E))&&(E=this.fillColor),("auto"==E||e.isTransparent(E))&&(E=i.defaultColor),t.fillStyle=E,I=e.clone(k.parameters),this.highlighted&&(I.opacity=1),i.plotLine(T,F,w,w,L,"segment",t,r,I),this.rays.push([[T,w],[F,w]]),t.globalAlpha=.05,t.beginPath(),t.moveTo(F,w),t.lineTo(T,w),T?t.lineTo(c,d):t.lineTo(T,d),t.lineTo(F,d),void 0!==E&&t.fill(),t.globalAlpha=1,w<S&&(x=M,S=w),w>A&&(C=M,A=w)}for(var J=0;J<=1;J++)N=f?g-m*J:p+m*J,(N=Math.round(N))<S&&(x=e.xIntersection({x0:h,x1:c,y0:u,y1:d},N),S=N),N>A&&(C=e.xIntersection({x0:h,x1:c,y0:u,y1:d},N),A=N);O=e.clone(this.parameters.trend.parameters),this.highlighted&&(O.opacity=1),i.plotLine(x,C,S,A,v,"segment",t,r,O),this.highlighted&&("p","0",H="p0"==this.highlighted,R="p1"==this.highlighted,this.littleCircle(t,h,u,H),this.littleCircle(t,c,d,R))}},e.Drawing.fibonacci.prototype.reposition=function(t,i,a,r){i&&(e.Drawing.BaseTwoPoint.prototype.reposition.apply(this,arguments),this.adjust())},e.Drawing.fibonacci.prototype.intersected=function(t,i,r){var n,s,o,l,h,c;if(n=this.p0,s=this.p1,!n||!s)return null;for(var u in o={0:n,1:s})if(this.pointIntersection(o[u][0],o[u][1],r))return"dra","g",a.t7L(2),this.highlighted=a.R2a(u,"p"),{action:"drag",point:"p"+u};if(l=this.outer,h=this.rays,!(c=l&&this.lineIntersection(t,i,r,"segment",l.p0,l.p1)))for(var d=0;d<h.length;d++)if(this.lineIntersection(t,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return a.q7W(),c?(this.highlighted=!0,{action:"move",p0:e.clone(n),p1:e.clone(s),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.fibonacci.prototype.reconstruct=function(t,i){i=e.replaceFields(i,e.reverseObject(e.Drawing.fibonacci.mapping)),this.stx=t,this.parameters=i.parameters,this.parameters||(this.parameters=e.clone(this.stx.currentVectorParameters.fibonacci)),this.color=i.col,this.fillColor=i.fc,this.panelName=i.pnl,this.d0=i.d0,this.d1=i.d1,this.d2=i.d2,this.tzo0=i.tzo0,this.tzo1=i.tzo1,this.tzo2=i.tzo2,this.v0=i.v0,this.v1=i.v1,this.v2=i.v2,this.field=i.fld,this.adjust()},e.Drawing.fibonacci.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(this.setPoint(0,this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),this.setOuter())},e.Drawing.fibonacci.prototype.serialize=function(){var t;return t={name:this.name,parameters:this.parameters,pnl:this.panelName,col:this.color,fc:this.fillColor,d0:this.d0,d1:this.d1,d2:this.d2,tzo0:this.tzo0,tzo1:this.tzo1,tzo2:this.tzo2,v0:this.v0,v1:this.v1,v2:this.v2,fld:this.field},e.replaceFields(t,e.Drawing.fibonacci.mapping)},e.Drawing.retracement=function(){var t,e;a.q7W(),a.t7L(0),t=-a.s_7("1341425921",0),e=2;for(var i=1;a.Z1$(i.toString(),i.toString().length,78106)!==t;i++)this.name="",e+=2;-1442579377!==a.Z1$(e.toString(),e.toString().length,90219)&&(this.name="retracement")},e.inheritsFrom(e.Drawing.retracement,e.Drawing.fibonacci),e.Drawing.fibprojection=function(){a.T4K(),this.name="fibprojection",this.dragToDraw=!1,this.p2=null},e.inheritsFrom(e.Drawing.fibprojection,e.Drawing.fibonacci),a.H3A(0),e.Drawing.fibprojection.prototype.recommendedLevels=[a.s_7("0",0),a.R2a(1,"0.618",a.H3A(16)),1,1.272,1.618,2.618,a.s_7("4.236",0,a.t7L(0))],e.Drawing.fibprojection.prototype.click=function(t,i,r){var n,s;if(s=(n=this.stx).panels[this.panelName])return this.copyConfig(),this.penDown?this.accidentalClick(i,r)?(n.undo(),!0):null!==this.p2?(this.setPoint(2,this.p2[0],this.p2[1],s.chart),this.parameters=e.clone(this.parameters),!0):(this.setPoint(1,i,r,s.chart),a.T4K(),this.p2=[this.p1[0],this.p1[1]],!1):(this.setPoint(0,i,r,s.chart),this.penDown=!0,!1)},e.Drawing.fibprojection.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_;if("stx_","ya","xi","s","mi","d","dle",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){a.t7L(0);var L=a.s_7(12,11);a.H3A(29);var E=a.R2a(5,19,8,7,10);s=this.p1[L]-this.p0[E],o=i.pixelFromTick(this.p0[0],r.chart),l=i.pixelFromTick(this.p1[0],r.chart),h=this.pixelFromValue(r,this.p0[0],this.p0[1],n),c=this.pixelFromValue(r,this.p1[0],this.p1[1],n),u=null,d=null,this.p2&&(u=i.pixelFromTick(this.p2[0],r.chart),d=this.pixelFromValue(r,this.p2[0],this.p2[1],n)),p={color:"auto",parameters:{pattern:"solid",opacity:.25,lineWidth:1}},this.parameters.trend||(this.parameters.trend=p),g=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",i.canvasFont("stx_yaxis",t),a.H3A(58);var I=a.s_7(5,12,1,10);if(m=t.measureText("161.8%").width+I,f=this.getLineColor(),this.p2){-487853095,-1544127950,y=2;for(var N=1;-487853095!==a.v0U(N.toString(),N.toString().length,31364);N++)this.rays=[],y+=2;-1544127950!==a.v0U(y.toString(),y.toString().length,12419)&&(this.rays=[]),this.rays=[];for(var O=0;O<this.parameters.fibs.length;O++)if("segmen","t","au","to",t.textAlign="left",t.fillStyle=f,(v=this.parameters.fibs[O]).display){if(b=this.pixelFromValue(r,this.p2[0],this.p2[1]+s*v.level,n),x=e.xIntersection({x0:o,x1:l,y0:h,y1:c},b),S=this.parameters.extendLeft?0:o,C=r.left+r.width,this.parameters.printLevels){"ri","g","h","t",a.t7L(13);var H=a.R2a(1,500,500);a.t7L(13);var R=a.s_7(1,9,1);A=Math.round(v.level*H)/R+"%",C-=m,this.parameters.printValues&&(t.fillStyle=f,i.canvasFont("stx_yaxis",t)),C<S&&(t.textAlign="right"),t.fillText(A,C,b),C<S?C+=5:C-=5}this.parameters.printValues&&x<r.width&&(D=this.valueFromPixel(b,r,n),D=n.priceFormatter?n.priceFormatter(i,r,D):i.formatYAxisPrice(D,r,null,n),t==i.chart.context&&i.endClip(),i.createYAxisLabel(r,D,b,this.getLineColor(null,!0),null,t,n),t==i.chart.context&&i.startClip(r.name)),("auto"==(k=v.color)||e.isTransparent(k))&&(k=this.getLineColor()),("auto"==(w=v.color)||e.isTransparent(w))&&(w=this.fillColor),("auto"==w||e.isTransparent(w))&&(w=i.defaultColor),t.fillStyle=w,M=e.clone(v.parameters),this.highlighted&&(M.opacity=1),i.plotLine(S,C,b,b,k,"segment",t,r,M),this.rays.push([[S,b],[C,b]]),t.globalAlpha=.05,t.beginPath(),t.moveTo(C,b),t.lineTo(S,b),S?t.lineTo(o,d):t.lineTo(S,d),t.lineTo(C,d),void 0!==w&&t.fill(),t.globalAlpha=1}}T=e.clone(this.parameters.trend.parameters),this.highlighted&&(T.opacity=1),i.plotLine(o,l,h,c,g,"segment",t,r,T),this.p2&&i.plotLine(l,u,c,d,g,"segment",t,r,T),this.highlighted&&("p","2","p","1",F="p0"==this.highlighted,P="p1"==this.highlighted,_="p2"==this.highlighted,this.littleCircle(t,o,h,F),this.littleCircle(t,l,c,P),this.littleCircle(t,u,d,_))}},e.Drawing.fibprojection.prototype.move=function(t,e,i){this.penDown&&(this.copyConfig(),null===this.p2?this.p1=[e,i]:this.p2=[e,i],a.q7W(),this.render(t))},e.Drawing.fibprojection.prototype.reposition=function(t,e,i,r){var n,s,o;e&&(n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-r,"move"==e.action?(this.setPoint(0,e.p0[0]-s,e.p0[1]-o,n.chart),this.setPoint(1,e.p1[0]-s,e.p1[1]-o,n.chart),this.setPoint(2,e.p2[0]-s,e.p2[1]-o,n.chart),this.render(t)):"drag"==e.action&&(this[e.point]=[i,r],this.setPoint(0,this.p0[0],this.p0[1],n.chart),this.setPoint(1,this.p1[0],this.p1[1],n.chart),a.t7L(9),this.setPoint(a.R2a(0,"2"),this.p2[0],this.p2[1],n.chart),this.render(t)))},e.Drawing.fibprojection.prototype.intersected=function(t,i,r){var n,s,o,l,h,c;if(n=this.p0,s=this.p1,a.T4K(),o=this.p2,!n||!s||!o)return null;for(var u in l={0:n,1:s,2:o})if(this.pointIntersection(l[u][0],l[u][1],r))return"d","ra","g",a.H3A(2),this.highlighted=a.R2a(u,"p"),{action:"drag",point:"p"+u};if(h=this.rays,!(c=this.lineIntersection(t,i,r,"segment",n,s)||this.lineIntersection(t,i,r,"segment",s,o)))for(var d=0;d<h.length;d++)if(this.lineIntersection(t,i,r,"ray",h[d][0],h[d][1],!0)){c=!0;break}return c?(this.highlighted=!0,{action:"move",p0:e.clone(n),p1:e.clone(s),p2:e.clone(o),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.fibprojection.prototype.adjust=function(){var t;(t=this.stx.panels[this.panelName])&&(a.H3A(16),this.setPoint(a.s_7(1,"0"),this.d0,this.v0,t.chart),this.setPoint(1,this.d1,this.v1,t.chart),a.T4K(),this.setPoint(2,this.d2,this.v2,t.chart))},e.Drawing.fibarc=function(){a.q7W(),this.name="fibarc"},e.inheritsFrom(e.Drawing.fibarc,e.Drawing.fibonacci),a.t7L(0),e.Drawing.fibarc.prototype.recommendedLevels=[.382,a.s_7("0.5",0),.618,1],e.Drawing.fibarc.prototype.setOuter=function(){var t,i,r,n,s,o,l,h,c;(i=(t=this.stx).panels[this.panelName])&&(this.outer={p0:e.clone(this.p0),p1:e.clone(this.p1)},r=t.getYAxisByField(i,this.field),n=this.pixelFromValue(i,this.p0[0],this.p0[1],r),s=this.pixelFromValue(i,this.p1[0],this.p1[1],r),o=t.pixelFromTick(this.p0[0],i.chart),l=t.pixelFromTick(this.p1[0],i.chart),a.H3A(24),h=a.s_7(s,2,n),c=e.xIntersection({x0:o,x1:l,y0:n,y1:s},h),this.outer.p0[1]=this.valueFromPixel(h,i,r),this.outer.p0[0]=t.tickFromPixel(c,i.chart))},e.Drawing.fibarc.prototype.intersected=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y;if("m","o","ve","seg","ment",s=(n=this.stx).panels[this.panelName]){if(o=this.p0,l=this.p1,h=this.outer,!o||!l)return null;for(var v in c={0:o,1:l})if(this.pointIntersection(c[v][0],c[v][1],r))return"dr","a","g",a.t7L(2),this.highlighted=a.s_7(v,"p"),{action:"drag",point:"p"+v};return u=this.valueOnDrawingAxis(t,i),this.lineIntersection(t,u,r,"segment",h.p0,h.p1)?(this.highlighted=!0,{action:"move",p0:e.clone(o),p1:e.clone(l),tick:t,value:u}):(d=n.getYAxisByField(s,this.field),p={x0:o[0],x1:l[0],y0:o[1],y1:l[1]},g=this.boxToPixels(n,this.panelName,p,d),m={x:Math.abs(Math.sqrt(2)*(g.x1-g.x0)),y:Math.abs(Math.sqrt(2)*(g.y1-g.y0))},f=n.pixelFromTick(t,s.chart),y=n.pixelFromValueAdjusted(s,t,i),f+r.r<g.x1-m.x||f-r.r>g.x1+m.x?null:(a.T4K(),y+r.r<g.y1-m.y||y-r.r>g.y1+m.y||g.y0<g.y1&&y-r.r>g.y1||g.y0>g.y1&&y+r.r<g.y1?null:(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:u})))}},e.Drawing.fibarc.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k;if("mid","dle",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),a.H3A(59),c=a.s_7(l,h),a.t7L(60),u=Math.abs(a.s_7(l,o,s,h)),d=this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",i.canvasFont("stx_yaxis",t),p=this.getLineColor();for(var w=0;w<this.parameters.fibs.length;w++)if("n","o","n","e","a","ut","o",t.fillStyle=p,!((g=this.parameters.fibs[w]).level<0)&&g.display){a.t7L(6);var M=a.R2a(9,0,10);a.t7L(12);var T=a.R2a(19,20);a.t7L(61);var F=a.R2a(7,10,8,152);m=Math.abs(this.p1[M]-this.p0[T])*Math.sqrt(F)*g.level,a.H3A(26);var P=a.R2a(14,38,19,6);a.t7L(62);var _=a.s_7(1,11,0,100,9);a.t7L(2);var L=a.s_7(1,0);a.t7L(12);var E=a.R2a(8,7);a.H3A(6);var I=a.R2a(17,9,9);if(f=this.p1[P]+m*(c?_:L)*(n.flipped?E:I),y=this.pixelFromValue(r,this.p0[0],f,n),v=e.xIntersection({x0:s,x1:o,y0:l,y1:h},y),this.parameters.printLevels){t.textAlign="center",a.t7L(13);var N=a.R2a(190,9,190);a.t7L(2);a.s_7(2459,351);a.t7L(20);var O=a.s_7(3,177858,167974);a.H3A(1);a.R2a(44050,35243,3);a.t7L(63);var H=a.s_7(8,329653,5,17,2498);a.t7L(64);a.s_7(10,30,4,18,1016);b=Math.round(1e3*g.level)/N+(O!=H?"%":788.61),this.parameters.printValues&&("st","x_yax","i","s",t.fillStyle=p,i.canvasFont("stx_yaxis",t)),t.fillText(b,o,Math.round(y-5))}t.textAlign="left",this.parameters.printValues&&v<r.width&&(x=f,x=n.priceFormatter?n.priceFormatter(i,r,x):i.formatYAxisPrice(x,r,null,n),t==i.chart.context&&i.endClip(),i.createYAxisLabel(r,x,y,this.getLineColor(null,!0),null,t,n),t==i.chart.context&&i.startClip(r.name)),("auto"==(S=g.color)||e.isTransparent(S))&&(S=this.getLineColor()),t.strokeStyle=S,("auto"==(C=g.color)||e.isTransparent(C))&&(C=this.fillColor),("auto"==C||e.isTransparent(C))&&(C=i.defaultColor),t.fillStyle=C,t.globalAlpha=this.highlighted?1:g.parameters.opacity,t.lineWidth=g.parameters.lineWidth,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(t.lineWidth,g.parameters.pattern)),t.lineDashOffset=0),t.save(),t.beginPath(),a.t7L(8),t.scale(a.s_7(1,u),1),a.H3A(16),t.arc(a.R2a(u,o),h,Math.abs(y-h),0,Math.PI,!c),"none"!=this.pattern&&t.stroke(),a.t7L(0),t.globalAlpha=a.s_7("0.05",0),t.fill(),t.restore(),t.setLineDash&&t.setLineDash([]),t.globalAlpha=1}a.q7W(),t.textAlign="left",A=e.clone(this.parameters.trend.parameters),this.highlighted&&(A.opacity=1),a.t7L(24),i.plotLine(o,a.R2a(o,2,s),h,a.R2a(h,2,l),d,"segment",t,r,A),this.highlighted&&("p","0",D="p0"==this.highlighted,k="p1"==this.highlighted,this.littleCircle(t,s,l,D),this.littleCircle(t,o,h,k))}},e.Drawing.fibfan=function(){this.name="fibfan"},e.inheritsFrom(e.Drawing.fibfan,e.Drawing.fibonacci),e.Drawing.fibfan.prototype.recommendedLevels=[0,.382,.5,.618,1],e.Drawing.fibfan.prototype.setOuter=function(){},e.Drawing.fibfan.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=Math.min(h,l),u=Math.max(h,l),a.t7L(0),d=a.R2a(u,c),a.H3A(50),p=a.R2a(l,o,0,s,h),this.getLineColor(this.parameters.trend.color),t.textBaseline="middle",i.canvasFont("stx_yaxis",t),a.t7L(30);var _=a.R2a(19,1,7,16);g=t.measureText("161.8%").width+_,m=Number.MAX_VALUE,a.t7L(65);var L=a.R2a(19,16,208,5);f=Number.MAX_VALUE*L,y=this.getLineColor(),this.rays=[];for(var E=0;E<this.parameters.fibs.length;E++)if("le","ft",t.fillStyle=y,(v=this.parameters.fibs[E]).display&&(b=this.pixelFromValue(r,this.p0[0],(this.p0[1]-this.p1[1])*v.level+this.p1[1],n),x=e.xIntersection({x0:o,x1:o,y0:l,y1:h},b),S=r.left,o>s&&(S+=r.width),a.t7L(66),C=a.R2a(l,x,b,l,s,S,s),!(s>S-(this.parameters.printLevels?g+5:0)&&o>s||s<S+(this.parameters.printLevels?g+5:0)&&o<s))){if(this.parameters.printLevels){a.H3A(6);var I=a.s_7(15,4,12);a.t7L(67);var N=a.R2a(15,500,9,25);a.H3A(24);var O=a.R2a(120202,6678,19);a.t7L(2);a.R2a(9,600);a.t7L(51);var H=a.R2a(2,3542,17710,8852);a.H3A(68);a.s_7(15,441,8813,735);a.t7L(69);var R=a.s_7(13,1,25,1785);A=Math.round(v.level*("1000"*I))/N+(399.83!==O?"%":H<=626.78&&R),o>s?(S-=g,t.textAlign="left"):("r","ight",S+=g,t.textAlign="right"),this.parameters.printValues&&("s","tx_","yax","is",t.fillStyle=y,i.canvasFont("stx_yaxis",t)),a.H3A(66),C=a.R2a(l,x,b,l,s,S,s),t.fillText(A,S,C),o>s?S-=5:S+=5}t.textAlign="left",this.parameters.printValues&&x<r.width&&(D=this.valueFromPixel(b,r,n),D=n.priceFormatter?n.priceFormatter(i,r,D):i.formatYAxisPrice(D,r,null,n),t==i.chart.context&&i.endClip(),i.createYAxisLabel(r,D,b,this.getLineColor(null,!0),null,t,n),t==i.chart.context&&i.startClip(r.name)),("auto"==(k=v.color)||e.isTransparent(k))&&(k=this.getLineColor()),("auto"==(w=v.color)||e.isTransparent(w))&&(w=this.fillColor),("auto"==w||e.isTransparent(w))&&(w=i.defaultColor),t.fillStyle=w,this.parameters.printLevels&&(a.t7L(66),C=a.s_7(l,x,b,l,s,S,s)),M=e.clone(v.parameters),this.highlighted&&(M.opacity=1),i.plotLine(s,S,l,C,k,"segment",t,r,M),this.rays.push([[s,l],[S,C]]),t.globalAlpha=.05,t.beginPath(),t.moveTo(S,C),t.lineTo(s,l),t.lineTo(S,l),t.fill(),t.globalAlpha=1,b<m&&(m=b),b>f&&(f=b)}for(var z=0;z<=1;z++)T=p?u-d*z:c+d*z,(T=Math.round(T))<m&&(m=T),T>f&&(f=T);this.highlighted&&(F="p0"==this.highlighted,P="p1"==this.highlighted,this.littleCircle(t,s,l,F),this.littleCircle(t,o,h,P))}},e.Drawing.fibtimezone=function(){this.name="fibtimezone"},e.inheritsFrom(e.Drawing.fibtimezone,e.Drawing.fibonacci),e.Drawing.fibtimezone.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;var{stx:C}=this;if(i=C.panels[this.panelName],r=C.getYAxisByField(i,this.field),i&&(!this.field||r)&&(r=r||i.yAxis,this.p1)){var{chart:A,left:D,width:k}=i,{p0:w,p1:M,parameters:T,highlighted:F}=this;n=C.pixelFromTick(w[0],A),s=C.pixelFromTick(M[0],A),o=this.pixelFromValue(i,w[0],w[1],r),l=this.pixelFromValue(i,M[0],M[1],r),h=[1,0],c=this.getLineColor(T.trend.color),t.textBaseline="middle",C.canvasFont("stx_yaxis",t),20,u=this.p1[0]-this.p0[0],d=this.getLineColor(),t.textAlign="center",p=n,a.H3A(16),g=a.R2a(1,"0");var{top:P}=r;m=r.bottom;var{printLevels:_,timezone:L}=T;for(("auto"==(f=L.color)||e.isTransparent(f))&&(f=this.getLineColor()),("auto"==(y=L.color)||e.isTransparent(y))&&(y=this.fillColor),("auto"==y||e.isTransparent(y))&&(y=C.defaultColor),_&&(a.t7L(70),m-=a.s_7(20,"7")),v=e.clone(T.timezone.parameters),F&&(v.opacity=1);"segm","en","t",p=C.pixelFromTick(w[0]+g*u,A),!(n<s&&p>D+k||n>s&&p<D);){_&&(t.fillStyle=d,t.fillText(s>n?g:-1*g,p,m+7)),t.fillStyle=y,C.plotLine(p,p,0,m,f,"segment",t,i,v),t.globalAlpha=.05,t.beginPath(),t.moveTo(n,P),t.lineTo(p,P),t.lineTo(p,m),t.lineTo(n,m),t.fill(),t.globalAlpha=1,a.H3A(12);var E=a.s_7(12,13);if(g=h[0]+h[E],h.unshift(g),!u)break}t.textAlign="left",C.plotLine(n,s,o,l,c,"segment",t,i,v),this.highlighted?("p","1","p","0",b="p0"==F,x="p1"==F,this.littleCircle(t,n,o,b),this.littleCircle(t,s,l,x)):(S=this.valueFromPixel(i.height/2,i,r),this.setPoint(0,w[0],S,A),this.setPoint(1,M[0],S,A))}},e.Drawing.fibtimezone.prototype.intersected=function(t,i,r){var n,s,o,l;if("s","egmen","t",n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return a.t7L(2),this.highlighted=a.s_7(h,"p"),{action:"drag",point:"p"+h};return this.lineIntersection(t,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?("m","o","v","e",this.highlighted=!0,{action:"move",p0:e.clone(n),p1:e.clone(s),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},e.Drawing.arrow_v0=function(){this.name="arrow",a.q7W(),a.H3A(21),this.dimension=[11,a.s_7(11,"11")],a.t7L(0),this.points=[["M",3,0,"L",a.s_7("7",0),0,"L",7,5,"L",a.s_7(2,"10",a.t7L(21)),5,"L",5,a.s_7(1,"10",a.t7L(16)),"L",0,5,"L",3,5,"L",3,0]]},e.inheritsFrom(e.Drawing.arrow_v0,e.Drawing.shape),e.Drawing.xcross=function(){this.name="xcross",this.dimension=[7,7],a.H3A(19),a.q7W(),this.points=[["M",1,0,"L",a.s_7(96,"3"),2,"L",5,0,"L",6,1,"L",4,3,"L",6,5,"L",5,6,"L",3,4,"L",a.R2a(1,"1",a.H3A(16)),6,"L",0,5,"L",2,3,"L",0,1,"L",1,0]]},e.inheritsFrom(e.Drawing.xcross,e.Drawing.shape),e.Drawing.check=function(){this.name="check",this.dimension=[8,9],a.H3A(9),this.points=[["M",1,a.R2a(0,"5"),"L",0,6,"L",a.R2a("2",0,a.H3A(0)),8,"L",a.R2a(0,"7",a.t7L(21)),1,"L",a.s_7(1,"6",a.H3A(16)),0,"L",2,6,"L",1,5]]},e.inheritsFrom(e.Drawing.check,e.Drawing.shape),e.Drawing.star=function(){var t;this.name="star",this.dimension=[12,12],this.points=[["M",0,4,"L",4,4,"L",5.5,0,"L",7,4,"L",11,4,"L",8,7,"L",9,11,"L",5.5,9,"L",2,11,"L",3,7,"L",0,4]],t=2;for(var e=1;1498904671!==a.v0U(e.toString(),e.toString().length,90912);e++)t+=2;a.Z1$(t.toString(),t.toString().length,6158)},e.inheritsFrom(e.Drawing.star,e.Drawing.shape),e.Drawing.heart=function(){this.name="heart",this.dimension=[23,20],a.t7L(21),this.points=[["M",11,3,"B",11,2.4,10,0,6,0,"B",0,0,0,7.5,0,7.5,"B",0,a.R2a(10,"11"),4,15.4,11,19,"B",18,15.4,22,11,a.s_7(0,"22",a.H3A(19)),7.5,"B",22,7.5,22,0,16,0,"B",13,0,11,2.4,11,3]]},e.inheritsFrom(e.Drawing.heart,e.Drawing.shape),e.Drawing.focusarrow=function(){a.T4K(),this.name="focusarrow",this.dimension=[7,5],a.t7L(19),this.points=[["M",0,0,"L",2,2,"L",0,4,"L",0,a.R2a(64,"0")],["M",6,0,"L",4,2,"L",a.R2a(1,"6",a.H3A(16)),4,"L",6,0]]},e.inheritsFrom(e.Drawing.focusarrow,e.Drawing.shape),e.Drawing.crossline=function(){this.name="crossline"},e.inheritsFrom(e.Drawing.crossline,e.Drawing.vertical),e.extend(e.Drawing.crossline.prototype,{spanPanels:!1,measure:function(){},accidentalClick:function(t,e){return a.q7W(),!1},adjust:function(){var t;(t=this.stx.panels[this.panelName])&&(a.q7W(),this.setPoint(0,this.d0,this.v0,t.chart),this.p1=e.clone(this.p0))},intersected:function(t,i,a){var r;return"l","in","e",this.p0&&this.p1?(this.p1[0]+=1,r=this.lineIntersection(t,i,a,"line"),this.p1=e.clone(this.p0),r||(this.p1[1]+=1,r=this.lineIntersection(t,i,a,"line"),this.p1=e.clone(this.p0),r)?(this.highlighted=!0,this.pointIntersection(this.p0[0],this.p0[1],a)&&(this.highlighted="p0"),{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}):null):null},render:function(t){var r,n,s,o,l,h,c,u,d,p,g,m,f;if(n=(r=this.stx).panels[this.panelName],s=r.getYAxisByField(n,this.field),n&&(!this.field||s||this.spanPanels)){if(s=s||n.yAxis,o=r.pixelFromTick(this.p0[0],n.chart),l=this.pixelFromValue(n,this.p0[0],this.p0[1],s),h=this.getLineColor(),a.q7W(),c={pattern:this.pattern,lineWidth:this.lineWidth},this.spanPanels&&this.panelName!=this.originPanelName||(a.t7L(2),r.plotLine(o,a.s_7(100,o),l,l,h,"horizontal",t,n,c)),a.t7L(2),r.plotLine(o,o,l,a.R2a(100,l),h,"vertical",t,n,c),this.axisLabel&&!this.repositioner&&(r.endClip(),this.spanPanels&&this.panelName!=this.originPanelName||(u=this.p0[1],n.chart.transformFunc&&(u=n.chart.transformFunc(r,n.chart,u)),u=s.priceFormatter?s.priceFormatter(r,n,u):r.formatYAxisPrice(u,n,null,s),r.createYAxisLabel(n,u,l,h,null,null,s)),r.startClip(n.name),this.p0[0]>=0&&!r.chart.xAxis.noDraw&&(!this.spanPanels||n.yAxis.bottom!==n.bottom))){if(d=r.dateFromTick(this.p0[0],n.chart,!0),e.ChartEngine.isDailyInterval(r.layout.interval))a.H3A(21),d.setHours(0,a.R2a(0,"0"),0,0);else{a.H3A(2);var y=a.R2a(750,250);g=d.getSeconds()*y+d.getMilliseconds(),i.Date&&r.displayZone&&(p=new i.Date(d.getTime(),r.displayZone),d=new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes()),d=new Date(d.getTime()+g))}m=e.mmddhhmm(e.yyyymmddhhmm(d)),n.chart.xAxis.formatter?m=n.chart.xAxis.formatter(d,this.name,null,null,m):this.stx.internationalizer&&(m=e.displayableDate(r,r.chart,d)),r.endClip(),r.createXAxisLabel({panel:n,txt:m,x:o,backgroundColor:h,color:null,pointed:!0,padding:2}),r.startClip(n.name)}!this.highlighted||this.spanPanels&&this.panelName!=this.originPanelName||("p","0",f="p0"==this.highlighted,this.littleCircle(t,o,l,f))}}},!0),e.Drawing.speedarc=function(){this.name="speedarc",this.printLevels=!0},e.inheritsFrom(e.Drawing.speedarc,e.Drawing.segment),e.extend(e.Drawing.speedarc.prototype,{defaultOpacity:.25,configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){var t;t=this.stx.currentVectorParameters,this.color=t.currentColor,this.fillColor=t.fillColor,this.lineWidth=t.lineWidth,a.q7W(),this.pattern=t.pattern},intersected:function(t,i,r){var n,s,o,l,h,c;if(!this.p0||!this.p1)return null;for(var u in n={0:this.p0,1:this.p1})if(this.pointIntersection(n[u][0],n[u][1],r))return a.H3A(2),this.highlighted=a.R2a(u,"p"),{action:"drag",point:"p"+u};if(s=this.valueOnDrawingAxis(t,i),this.lineIntersection(t,i,r,this.name))return this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:s};a.t7L(13);var d=a.R2a(5,95,5);return o=this.p1[0]-(this.p0[0]-this.p1["0">>d]),l=this.p0[0],h=this.p1[1],a.T4K(),c=this.p0[1],t>Math.max(o,l)||t<Math.min(o,l)||s>Math.max(c,h)||s<Math.min(c,h)?null:(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:s})},render:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,this.p1)){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),a.H3A(59),c=a.s_7(l,h),a.t7L(60),u=Math.abs(a.s_7(l,o,s,h)),d=this.getLineColor(),t.strokeStyle=d,("auto"==(p=this.fillColor)||e.isTransparent(p))&&(p=i.defaultColor),t.fillStyle=p,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(this.lineWidth,this.pattern)),t.lineDashOffset=0),i.canvasFont("stx_yaxis",t);for(var S=1;S<3;S++){"no","n","e",a.t7L(71);var C=a.R2a(61,4,4,0,19);a.t7L(41);var A=a.R2a(15,4,12);a.t7L(0);var D=a.R2a(17,15);a.H3A(0);var k=a.s_7(60,57);g=Math.abs(this.p1[C]-this.p0[A])*Math.sqrt(D)*S/k,a.t7L(72);var w=a.R2a(11,16,10,16);a.t7L(0);var M=a.s_7(0,1);a.H3A(12);var T=a.s_7(10,11);a.H3A(73);var F=a.s_7(8,2,0,19,3);a.H3A(51);var P=a.s_7(20,3,9,18);m=this.p1[w]+g*(c?M:T)*(n.flipped?F:P),f=this.pixelFromValue(r,this.p0[0],m,n),t.save(),t.beginPath(),a.H3A(8),t.scale(a.R2a(1,u),1),a.H3A(16),t.arc(a.R2a(u,o),h,Math.abs(f-h),0,Math.PI,!c),t.globalAlpha=this.highlighted?1:this.defaultOpacity,"none"!=this.pattern&&t.stroke(),t.globalAlpha=.1,t.fill(),t.restore(),t.globalAlpha=1,this.printLevels&&(t.fillStyle=d,t.textAlign="center",a.t7L(2),y=a.s_7("/3",S),t.fillText(y,o,Math.round(f-5)),t.fillStyle=p)}t.textAlign="left",v={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},i.plotLine(s,o,l,h,d,"segment",t,r,v),t.setLineDash&&t.setLineDash([]),this.highlighted&&("p","0",b="p0"==this.highlighted,x="p1"==this.highlighted,this.littleCircle(t,s,l,b),this.littleCircle(t,o,h,x))}},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,a.q7W(),this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.field=e.fld,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field}}},!0),e.Drawing.speedline=function(){this.name="speedline",a.T4K(),this.printLevels=!0},e.inheritsFrom(e.Drawing.speedline,e.Drawing.speedarc),e.extend(e.Drawing.speedline.prototype,{intersected:function(t,i,r){var n,s,o,l,h;if(n=this.p0,s=this.p1,!n||!s)return null;for(var c in o={0:n,1:s})if(this.pointIntersection(o[c][0],o[c][1],r))return a.H3A(2),this.highlighted=a.s_7(c,"p"),{action:"drag",point:"p"+c};l=2;for(var u=1;-2025806489!==a.v0U(u.toString(),u.toString().length,58208);u++)h=this.rays,l+=2;-1480987151!==a.v0U(l.toString(),l.toString().length,42932)&&(h=this.rays),h=this.rays;for(var d=0;d<h.length;d++)if("r","ay",this.lineIntersection(t,i,r,"ray",h[d][0],h[d][1],!0))return this.highlighted=!0,{action:"move",p0:e.clone(n),p1:e.clone(s),tick:t,value:this.valueOnDrawingAxis(t,i)};return null},render:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;if("2","/","3","stx_",a.T4K(),"ya","xis",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&this.p1){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),i.canvasFont("stx_yaxis",t),c=this.getLineColor(),t.strokeStyle=c,("auto"==(u=this.fillColor)||e.isTransparent(u))&&(u=i.defaultColor),t.fillStyle=u,d={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},m=["1","2/3","1/3","3/2","3"],a.t7L(74),f=[1,a.R2a(2,"3"),a.s_7("1","3",1,a.H3A(75)),a.s_7(3,2,a.H3A(8)),3],y=[],this.rays=[];for(var M=0;M<f.length;M++)(v=f[M])>1&&!this.extension||(b=this.pixelFromValue(r,this.p0[0],this.p0[1]-(this.p0[1]-this.p1[1])*v,n),v>1?(x=e.xIntersection({x0:s,x1:o,y0:l,y1:b},h),y.push(x)):(x=e.xIntersection({x0:o,x1:o,y0:l,y1:h},b),y.push(b)),S=v>1?x:o,C=v>1?h:b,this.confineToGrid||(S=r.left,o>s&&(S+=r.width),a.H3A(66),C=a.s_7(l,o,b,l,s,S,s)),this.printLevels&&(1!=v||this.extension)&&(t.fillStyle=c,A=0,a.H3A(9),D=a.s_7(0,"0"),l>h?("botto","m",D=-5,t.textBaseline="bottom"):("t","o","p",D=5,t.textBaseline="top"),s>o?(A=5,t.textAlign="right"):("lef","t",A=-5,t.textAlign="left"),v>1?t.fillText(m[M],x+(this.confineToGrid?0:A),h):t.fillText(m[M],o,b+(this.confineToGrid?0:D)),t.fillStyle=u),i.plotLine(s,S,l,C,c,"segment",t,r,d),1==v&&(p=S,g=C),this.rays.push([[s,l],[S,C]]),t.globalAlpha=.1,t.beginPath(),t.moveTo(S,C),t.lineTo(s,l),t.lineTo(p,g),t.fill(),t.globalAlpha=1);t.textAlign="left",t.textBaseline="middle",this.confineToGrid&&(t.globalAlpha=.3,t.beginPath(),a.H3A(0),t.strokeRect(s,l,a.s_7(o,s),a.s_7(h,l)),t.moveTo(s,y[1]),t.lineTo(o,y[1]),t.moveTo(s,y[2]),t.lineTo(o,y[2]),this.extension&&(t.moveTo(y[3],l),t.lineTo(y[3],h),t.moveTo(y[4],l),t.lineTo(y[4],h)),t.stroke(),t.globalAlpha=1),this.highlighted&&("p","1","p","0",k="p0"==this.highlighted,w="p1"==this.highlighted,this.littleCircle(t,s,l,k),this.littleCircle(t,o,h,w))}}},!0),e.Drawing.gannfan=function(){this.name="gannfan",a.T4K(),this.printLevels=!0},e.inheritsFrom(e.Drawing.gannfan,e.Drawing.speedline),e.extend(e.Drawing.gannfan.prototype,{render:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;if("mi",a.q7W(),"ddle","l","e","f","t",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&this.p1){s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),i.canvasFont("stx_yaxis",t),c=this.getLineColor(),t.strokeStyle=c,("auto"==(u=this.fillColor)||e.isTransparent(u))&&(u=i.defaultColor),t.fillStyle=u,d={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},a.H3A(38),m=[1,2,a.R2a("3",0),a.R2a("4",0,a.t7L(38)),8,a.R2a(1,2,a.t7L(8)),a.R2a(1,3,a.t7L(8)),a.R2a(1,4,a.H3A(8)),a.R2a(1,"8",a.t7L(74))],this.rays=[];for(var k=0;k<m.length;k++)f=m[k],a.t7L(76),y=a.R2a(s,o,s,f),a.H3A(77),v=a.R2a(f,l,l,h),b=r.left,o>s&&(b+=r.width),a.H3A(66),x=a.R2a(l,o,v,l,s,b,s),this.printLevels&&(t.fillStyle=c,S=0,C=0,l>h?("to","p",C=5,t.textBaseline="top"):(C=-5,t.textBaseline="bottom"),s>o?(a.t7L(21),S=a.s_7(0,"5"),t.textAlign="left"):(S=-5,t.textAlign="right"),f>1?(a.H3A(2),t.fillText(a.s_7("x1",f),a.s_7(S,y),h)):(a.t7L(43),t.fillText(a.s_7(f,1,"1x"),o,a.s_7(C,v,a.H3A(2)))),t.fillStyle=u),i.plotLine(s,b,l,x,c,"segment",t,r,d),this.rays.push([[s,l],[b,x]]),1==f&&(p=b,g=x),t.globalAlpha=.1,t.beginPath(),t.moveTo(b,x),t.lineTo(s,l),t.lineTo(p,g),t.fill(),t.globalAlpha=1;t.textAlign="left",t.textBaseline="middle",this.highlighted&&("p","0",A="p0"==this.highlighted,D="p1"==this.highlighted,this.littleCircle(t,s,l,A),this.littleCircle(t,o,h,D))}}},!0),e.Drawing.timecycle=function(){this.name="timecycle",this.printLevels=!0},e.inheritsFrom(e.Drawing.timecycle,e.Drawing.speedarc),e.extend(e.Drawing.timecycle.prototype,{intersected:function(t,i,r){var n,s,o,l;if(n=this.p0,s=this.p1,o=this.stx.panels[this.panelName],!n||!s||!o)return null;for(var h in l={0:n,1:s})if(this.pointIntersection(l[h][0],l[h][1],r))return a.t7L(2),this.highlighted=a.s_7(h,"p"),{action:"drag",point:"p"+h};return this.lineIntersection(t,i,r,"segment")||r.x0<=this.p0[0]&&r.x1>=n[0]?(this.highlighted=!0,{action:"move",p0:e.clone(n),p1:e.clone(s),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},render:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C;if("l","ef","t","ce","n","te","r",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(n=n||r.yAxis,a.q7W(),this.p1)){for(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),l=this.pixelFromValue(r,this.p0[0],this.p0[1],n),h=this.pixelFromValue(r,this.p1[0],this.p1[1],n),c=0,t.textBaseline="middle",i.canvasFont("stx_yaxis",t),20,u=this.p1[0]-this.p0[0],t.textAlign="center",d=s,p=n.top,g=n.bottom,m=this.getLineColor(),("auto"==(f=this.fillColor)||e.isTransparent(f))&&(f=i.defaultColor),this.printLevels&&(a.t7L(70),g-=a.R2a(20,"7")),y={pattern:this.pattern,lineWidth:this.lineWidth,opacity:this.highlighted?1:this.defaultOpacity},v=[],t.save(),t.fillStyle=f,t.globalAlpha=.05;d=i.pixelFromTick(this.p0[0]+c*u,r.chart),c++,!(s<o&&d>r.left+r.width||s>o&&d<r.left)&&(d<r.left||d>r.left+r.width||(t.beginPath(),t.moveTo(s,p),t.lineTo(d,p),t.lineTo(d,g),t.lineTo(s,g),t.fill(),v.push({c,x:d}),u)););t.globalAlpha=1,b=0;for(var A=0;A<v.length;A++)if(i.plotLine(v[A].x,v[A].x,0,g,m,"segment",t,r,y),this.printLevels){t.fillStyle=m,a.t7L(78);var D=a.s_7(20,18,16,19);i.chart.context.measureText(v[A].c).width+D<i.layout.candleWidth+b?(t.fillText(v[A].c,v[A].x,g+7),b=0):b+=i.layout.candleWidth}t.restore(),t.textAlign="left",i.plotLine(s,o,l,h,m,"segment",t,r,y),this.highlighted?(x="p0"==this.highlighted,S="p1"==this.highlighted,this.littleCircle(t,s,l,x),this.littleCircle(t,o,h,S)):(C=this.valueFromPixel(r.height/2,r,n),this.setPoint(0,this.p0[0],C,r.chart),this.setPoint(1,this.p1[0],C,r.chart))}}},!0),e.Drawing.regression=function(){this.name="regression"},e.inheritsFrom(e.Drawing.regression,e.Drawing.segment),e.extend(e.Drawing.regression.prototype,{configs:["color","lineWidth","pattern","active1","color1","lineWidth1","pattern1","active2","color2","lineWidth2","pattern2","active3","color3","lineWidth3","pattern3"],copyConfig:function(t){var i;e.Drawing.copyConfig(this,t),i=this.stx.currentVectorParameters,this.active1=!!i.active1,this.active2=!!i.active2,this.active3=!!i.active3,this.color1=i.color1||"auto",this.color2=i.color2||"auto",this.color3=i.color3||"auto",this.lineWidth1=i.lineWidth1,this.lineWidth2=i.lineWidth2,this.lineWidth3=i.lineWidth3,this.pattern1=i.pattern1,this.pattern2=i.pattern2,this.pattern3=i.pattern3},$controls:['cq-cvp-controller[cq-cvp-header="1"]','cq-cvp-controller[cq-cvp-header="2"]','cq-cvp-controller[cq-cvp-header="3"]'],click:function(t,e,i){var r,n,s;if(!(e<0)){a.T4K(),1139200946,-351895491,r=2;for(var o=1;1139200946!==a.v0U(o.toString(),o.toString().length,64378);o++)this.copyConfig(),n=this.stx,r+=2;return-351895491!==a.v0U(r.toString(),r.toString().length,59807)&&(this.copyConfig(),n=this.stx),s=n.panels[this.panelName],this.penDown?(this.accidentalClick(e,i)||(a.H3A(0),this.setPoint(a.R2a("1",0),e,i,s.chart),this.penDown=!1),!0):(this.setPoint(0,e,i,s.chart),this.isAllowed(n,this.field)?(this.penDown=!0,!1):(n.undo(),!0))}},getYValue:function(t){var i,r,n,s,o,l,h,c;if(r=(i=this.stx).chart.dataSet[t],n=i.chart.dataSet[t],a.T4K(),!r)return null;if(s=i.panels[this.panelName],o=i.getYAxisByField(s,this.field)||s.yAxis,i.charts[s.name]&&s.chart.transformFunc&&o==s.yAxis&&(n=r.transform),!n)return null;if(l=null,h=null,c=i.defaultPlotField||"Close",this.field){if(!(h=e.existsInObjectChain(n,this.field)))return null;l=h=h.obj[h.member],r!=n&&(l=(l=e.existsInObjectChain(r,this.field)).obj[l.member]),"object"==typeof h&&(h=h[c],l=l[c])}else h=n[c],l=r[c];return{transformed:h,untransformed:l}},render:function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N;if("s","eg","m","ent",i=(e=this.stx).panels[this.panelName],r=e.getYAxisByField(i,this.field),i&&(!this.field||r)&&this.p1&&!(this.p0[0]<0||this.p1[0]<0||(n=e.pixelFromTick(this.p0[0],i.chart),s=e.pixelFromTick(this.p1[0],i.chart),n<i.left&&s<i.left||n>i.right&&s>i.right))){o=[],l=[],h=0,c=0,u=0,d=0,p=Math.min(this.p1[0],this.p0[0]),a.t7L(0);var O=a.R2a(20,19);g=Math.max(this.p1[0],this.p0[0])+O,a.H3A(0),m=a.R2a(g,p);for(var H=p;H<g;H++)(f=this.getYValue(H))&&(o.push(f.transformed),l.push(f.untransformed));for(y=o.length,a.H3A(79),v=a.R2a(y,y,1,2),b=Math.pow(v,2),a.t7L(80),x=a.R2a("3",1,v,"2",y),H=0;H<y;H++)u+=y*o[H]-h,h+=o[H],d+=y*l[H]-c,c+=l[H];if(a.H3A(81),S=a.s_7(y,b,y,h,u,v,x),a.H3A(82),C=a.s_7(v,y,h,S),a.t7L(81),A=a.R2a(y,b,y,c,d,v,x),a.H3A(82),D=a.s_7(v,y,c,S),this.p0[0]<this.p1[0]?(k=C,a.t7L(53),w=a.s_7(C,S,m),this.p0[1]=D,a.t7L(53),this.p1[1]=a.R2a(D,A,m)):(a.H3A(53),k=a.R2a(C,S,m),w=C,a.H3A(53),this.p0[1]=a.R2a(D,A,m),this.p1[1]=D),M=e.pixelFromTransformedValue(k,i,r),T=e.pixelFromTransformedValue(w,i,r),F=this.getLineColor(),P={pattern:this.pattern,lineWidth:this.lineWidth},e.plotLine(n,s,M,T,F,"segment",t,i,P),a.H3A(0),e.plotLine(n,n,a.s_7(M,20),a.R2a(20,M,a.t7L(2)),F,"segment",t,i,P),a.H3A(0),e.plotLine(s,s,a.R2a(T,20),a.s_7(20,T,a.H3A(2)),F,"segment",t,i,P),this.active1||this.active2||this.active3){for(a.t7L(8),_=a.R2a(h,y),L=0,H=0;H<y;H++)L+=Math.pow(o[H]-_,2);a.t7L(8),E={context:t,panel:i,points:{0:{x:n,v:k},1:{x:s,v:w}},stddev:Math.sqrt(a.s_7(L,y)),yAxis:r},this.lines={},this.active1&&(this.renderStddev("1","p",E),this.renderStddev("1","n",E)),this.active2&&(this.renderStddev("2","p",E),this.renderStddev("2","n",E)),this.active3&&(this.renderStddev("3","p",E),this.renderStddev("3","n",E))}this.highlighted?("p","0",I="p0"==this.highlighted,N="p1"==this.highlighted,this.littleCircle(t,n,M,I),this.littleCircle(t,s,T,N)):(this.pixelX=[n,s],this.pixelY=[M,T])}},renderStddev:function(t,e,i){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A;a.t7L(83),r=a.R2a(t,"stddev",e),a.t7L(2),n=a.s_7(t,"color"),a.H3A(2),s=a.R2a(t,"pattern"),a.H3A(2),o=a.R2a(t,"lineWidth"),h=(l=i.points)[0].v,c=l[1].v,u=i.stddev,d="n"===e?-1*t:1*t,p=this.stx,g=i.panel,m=i.yAxis,f={name:r,color:this.getLineColor(this[n]),type:"segment",y0:p.pixelFromTransformedValue(h+u*d,g,m),y1:p.pixelFromTransformedValue(c+u*d,g,m),params:{pattern:this[s],lineWidth:this[o]}},this.lines&&(this.lines[r]=f),y=i.context,v=l[0].x,b=l[1].x,p.plotLine(v,b,f.y0,f.y1,f.color,f.type,y,g,f.params),p.plotLine(v,v,f.y0-10,f.y0+10,f.color,f.type,y,g,f.params),p.plotLine(b,b,f.y1-10,f.y1+10,f.color,f.type,y,g,f.params),a.H3A(2),x=a.s_7("",t),S=Math.max(v,b)+5,C=v<b?f.y1:f.y0,y.fillStyle=f.color,y.save(),y.textBaseline="middle",y.fillText(x,S,C),y.restore(),i.formatPrice&&this.axisLabel&&!this.highlighted&&!this.penDown&&(v>=g.chart.left&&v<=g.chart.right||b>=g.chart.left&&b<=g.chart.right)&&(a.t7L(17),A=a.s_7(u,d,v<b?c:h),p.endClip(),p.createYAxisLabel(g,i.formatPrice(A,m),C,f.color,null,y,m),p.startClip(g.name))},intersected:function(t,i,r){var n,s,o,l,h,c,u;if(a.q7W(),!this.pixelX||!this.pixelY)return null;if(n=this.repositionIntersection(t,i))return n;s={0:this.pixelX,1:this.pixelY};for(var d=0;d<2;d++)if(this.pointIntersection(s[0][d],s[1][d],r,!0))return"dr","a","g",a.t7L(2),this.highlighted=a.R2a(d,"p"),{action:"drag",point:"p"+d};if(o=this,l=this.pixelX[0],h=this.pixelX[1],!(u=(c=function(e){var a,n;return a=[l,e.y0],n=[h,e.y1],o.lineIntersection(t,i,r,o.name,a,n,!0)})({y0:this.pixelY[0],y1:this.pixelY[1]}))&&this.lines)for(var p in this.lines)if(c(this.lines[p])){u=!0;break}return u?("m","ove",this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},repositionIntersection:function(t,i){return!(!this.p0||!this.p1)&&(!(this!=this.stx.repositioningDrawing||!this.highlighted)&&(!0===this.highlighted?{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}:{action:"drag",point:this.highlighted}))},lineIntersection:function(t,i,r,n,s,o,l){var h;return l?(s||(s=this.p0),o||(o=this.p1),!(!s||!o)&&(this.stx,void 0!==r.cx0&&(h={x0:s[0],x1:o[0],y0:s[1],y1:o[1]},e.boxIntersects(r.cx0,r.cy0,r.cx1,r.cy1,h.x0,h.y0,h.x1,h.y1)))):(a.H3A(2),console.log(a.R2a(" lineIntersection must accept p0 and p1 in pixels.  Please verify and set isPixels=true.",n)),!1)},boxIntersection:function(t,e,i){return a.T4K(),!(i.cx0>Math.max(this.pixelX[0],this.pixelX[1])||i.cx1<Math.min(this.pixelX[0],this.pixelX[1]))&&!(!this.stx.repositioningDrawing&&(i.cy1<this.pixelY[0]||i.cy0>this.pixelY[1]))},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.color1=e.col1,this.color2=e.col2,this.color3=e.col3,this.active1=e.dev1,this.active2=e.dev2,this.active3=e.dev3,this.panelName=e.pnl,this.pattern=e.ptrn,this.pattern1=e.ptrn1,this.pattern2=e.ptrn2,this.pattern3=e.ptrn3,this.lineWidth=e.lw,this.lineWidth1=e.lw1,this.lineWidth2=e.lw2,this.lineWidth3=e.lw3,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.field=e.fld,this.adjust()},serialize:function(){return a.T4K(),{name:this.name,pnl:this.panelName,dev1:this.active1,dev2:this.active2,dev3:this.active3,col:this.color,col1:this.color1,col2:this.color2,col3:this.color3,ptrn:this.pattern,ptrn1:this.pattern1,ptrn2:this.pattern2,ptrn3:this.pattern3,lw:this.lineWidth,lw1:this.lineWidth1,lw2:this.lineWidth2,lw3:this.lineWidth3,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),e.Drawing.average=function(){a.q7W(),this.name="average"},e.inheritsFrom(e.Drawing.average,e.Drawing.regression),e.extend(e.Drawing.average.prototype,{configs:e.Drawing.regression.prototype.configs.concat("axisLabel"),measure:function(){var t,i,r,n,s,o,l;a.T4K(),t=this.stx,this.p0&&this.p1&&(".mMeasu","re",t.setMeasure(0,!1,this.p0[0],this.p1[0],!0,this.name),i=[],r="",this.active1&&i.push("1"),this.active2&&i.push("2"),this.active3&&i.push("3"),i.length&&(r="&ensp;"+i.join(", ")+" &sigma;"),n=(t.drawingContainer||document).querySelector(".mMeasure"),o=(s=t.controls.mSticky)&&s.querySelector(".mStickyInterior"),n&&(n.innerHTML+=r),o&&((l=[]).push(t.translateIf(e.capitalize(this.name))),l.push(t.translateIf(this.field||t.defaultPlotField||"Close")),l.push(o.innerHTML+r),o.innerHTML=l.join("<br>")))},render:function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A;if("s","e","g","ment","s","egment",e=this.stx,i=e.panels[this.panelName],r=e.getYAxisByField(i,this.field),i&&(!this.field||r)&&(r=r||i.yAxis,this.p1&&!(this.p0[0]<0||this.p1[0]<0||(n=e.pixelFromTick(this.p0[0],i.chart),s=e.pixelFromTick(this.p1[0],i.chart),n<i.left&&s<i.left||n>i.right&&s>i.right)))){o=Math.min(this.p1[0],this.p0[0]),a.t7L(84);var D=a.s_7(21,7,21,6,13);for(l=Math.max(this.p1[0],this.p0[0])+D,h=0,c=[],u=o;u<l;u++)null!==(d=this.getYValue(u))&&(h+=d.transformed,c.push(d));if(a.T4K(),p=c.length){if(a.H3A(8),g=a.s_7(h,p),m=e.pixelFromTransformedValue(g,i,r),f=this.getLineColor(),y={pattern:this.pattern,lineWidth:this.lineWidth},e.plotLine(n,s,m,m,f,"segment",t,i,y),a.t7L(70),e.plotLine(n,n,a.R2a(m,"20"),a.s_7(0,"20",m,a.t7L(33)),f,"segment",t,i,y),a.H3A(85),e.plotLine(s,s,a.R2a(m,16,"20"),a.R2a(20,m,a.H3A(2)),f,"segment",t,i,y),!this.axisLabel||this.highlighted||this.penDown||(n>=i.chart.left&&n<=i.chart.right||s>=i.chart.left&&s<=i.chart.right)&&(e.endClip(),e.createYAxisLabel(i,w(g,r),m,f,null,t,r),e.startClip(i.name)),this.active1||this.active2||this.active3){for(v=0,u=0;u<p;u++)d=c[u],v+=Math.pow(d.transformed-g,2);if(a.t7L(8),b=Math.sqrt(a.s_7(v,p)),x={context:t,formatPrice:w,panel:i,points:{0:{x:n,v:g},1:{x:s,v:g}},stddev:b,yAxis:r},this.lines={},this.active1){this.renderStddev("1","p",x),1140400034,1770282518,S=2;for(var k=1;1140400034!==a.Z1$(k.toString(),k.toString().length,25412);k++)this.renderStddev(1712594,!0,x),S+=2;1770282518!==a.v0U(S.toString(),S.toString().length,60102)&&this.renderStddev("1","n",x)}this.active2&&(this.renderStddev("2","p",x),this.renderStddev("2","n",x)),this.active3&&(this.renderStddev("3","p",x),this.renderStddev("3","n",x))}this.highlighted?(C="p0"==this.highlighted,A="p1"==this.highlighted,this.littleCircle(t,n,m,C),this.littleCircle(t,s,m,A)):(this.pixelX=[n,s],this.pixelY=[m,m])}}function w(t,r){a.q7W(),t=r&&r.priceFormatter?r.priceFormatter(e,i,t):e.formatYAxisPrice(t,i,null,r);for(var n=1;1337399350!==a.Z1$(n.toString(),n.toString().length,94370);n++)return t;if(-789600873!==a.Z1$(2..toString(),2..toString().length,45940))return t}},reconstruct:function(t,i){this.axisLabel=i.al,a.q7W(),e.Drawing.regression.prototype.reconstruct.call(this,t,i)},serialize:function(){var t;return t=e.Drawing.regression.prototype.serialize.call(this),a.T4K(),t.al=this.axisLabel,t}},!0),e.Drawing.measurementline=function(){this.name="measurementline",this.validFields=["Open","High","Low","Close"],this.defaultField="Close",this.spanPanels=!0,this.fontSize=14,a.H3A(86);var t=a.s_7(9,8,1);this.lineHeight=this.fontSize+"2"*t,this.fontFamily="Helvetica, sans-serif",a.H3A(9),this.padding=a.s_7(0,"10"),this.calloutWidth=200,this.calloutHeight=100,this.stem={x:15,y:0}},e.inheritsFrom(e.Drawing.measurementline,e.Drawing.regression),e.extend(e.Drawing.measurementline.prototype,{configs:["color","fillColor","lineWidth","pattern","parameters","axisLabel"],copyConfig:function(t){var i;e.Drawing.copyConfig(this,t),i=this.stx.currentVectorParameters,this.parameters={calloutOnHover:i.measurementline.calloutOnHover,displayGroups:{...i.measurementline.displayGroups}}},$controls:[],initializeSettings:function(t){t.currentVectorParameters.alwaysMagnetize=!0},measure:function(){var t,i,a;this.p0&&this.p1&&(".mStic","k","y","Interior",this.stx.setMeasure(this.p0[1],this.p1[1],this.p0[0],this.p1[0],!0),(i=(t=this.stx.controls.mSticky)&&t.querySelector(".mStickyInterior"))&&("<","b","r",">",(a=[]).push(this.stx.translateIf(e.capitalize("Measurement Line"))),a.push(i.innerHTML),i.innerHTML=a.join("<br>")))},getDifference:function(t,e){var i,r;return i=this.stx,r=(r=Math.round(Math.abs(t-e)*i.chart.roundit)/i.chart.roundit).toFixed(i.chart.yAxis.printDecimalPlaces),a.q7W(),this.internationalizer&&(r=this.internationalizer.numbers.format(r)),r},getPercent:function(t,e){var i;return i=0,0!==t?(a.H3A(23),i=a.R2a(t,t,e)):i=null,i},formatPercent:function(t){if(Math.abs(t)>.1)a.t7L(16),t=Math.round(a.R2a(100,t));else if(Math.abs(t)>.01){a.t7L(2);var e=a.R2a(944,56);a.H3A(48);var i=a.s_7(27,10,8,19);t=Math.round(t*e)/i}else{a.H3A(24);var r=a.R2a(908,112,9);t=Math.round(1e4*t)/r}return this.internationalizer?(a.t7L(87),t=this.internationalizer.percent.format(a.s_7("100",t,0))):(a.H3A(2),t=a.s_7("%",t)),t},calloutDataGroups:[{id:"bars",label:"Bars",getOutput(t){var{start:e,end:i}=t;return{label:this.label||"",value:""+(i-e)}}},{id:"delta",label:"Delta",getOutput(t){var e,i;var{startPrice:r,endPrice:n}=t;return a.T4K(),i=null===(e=t.getPercent(r,n))?"N/A":t.formatPercent(e),{label:this.label||"",value:t.getDifference(r,n)+" ("+i+")"}}},{id:"annpercent",label:"Annualized %",getOutput(t){var e,i,r,n,s,o,l;a.q7W();var{stx:h,p0:c,p1:u,startPrice:d,endPrice:p}=t;return e=h.panels[t.panelName],r="N/A",null!==(i=t.getPercent(d,p))&&(n=h.dateFromTick(c[0],e.chart,!0),s=0,o=h.dateFromTick(u[0],e.chart,!0).getTime()-n.getTime(),a.H3A(88),l=a.R2a(1e3,24,o,3600),a.t7L(89),s=a.s_7(l,i,365),r=t.formatPercent(s.toFixed(2))),{label:this.label||"",value:r}}},{id:"totreturn",label:"TotalReturn",getOutput(t){return{label:this.label||"",value:""}}},{id:"volume",label:"Volume",getOutput(t){a.T4K();var{volume:i}=t;return{label:this.label||"",value:""+e.commas(i)}}},{id:"studies",label:"Studies",getOutput(t){var e,i,r,{stx:n,records:s}=t;for(var o in e=[],n.layout.studies)if(!n.layout.studies[o].signalData)for(var l in n.layout.studies[o].outputMap)if(l){i=s[0][l],a.t7L(52);var h=a.s_7(3,13,9);r=s[s.length-h][l],i&&r&&e.push({label:l,value:t.getDifference(i,r)})}return e}}],getcalloutData:function(){var t,e,i,r,n,s,o,l,h;t=this.stx,e=[],i=this.p0[0],a.H3A(30);var c=a.s_7(14,21,13,286);r=this.p1[0]+c,n=[],s=0;for(var u=i;u<r;u++)(o=t.chart.dataSet[u])&&(n.push(o),o.Volume&&(s+=o.Volume));if(!n.length)return e;l=n[0][this.field0||this.defaultField],a.t7L(90);var d=a.s_7(13,14,19,19);return h=n[n.length-d][this.field1||this.defaultField],this.start=i,this.end=r,this.startPrice=l,this.endPrice=h,this.records=n,this.volume=s,a.T4K(),e.push({label:this.getAxisLabelText(this.p0[0]),value:(this.field0||this.defaultField)[0]+": "+l}),e.push({label:this.getAxisLabelText(this.p1[0]),value:(this.field1||this.defaultField)[0]+": "+h}),this.calloutDataGroups.forEach((t=>{a.q7W(),this.parameters.displayGroups[t.id]&&(e=e.concat(t.getOutput(this)))})),e},getAxisLabelText:function(t){var e;return a.T4K(),e=this.getDateFromTick(t),this.formatDate(e)},intersected:function(t,i,r){var n,s,o;if(!this.pixelX||!this.pixelY)return null;if(this.pointIntersection(this.pixelX[2],this.pixelY[2],r,!0))return"dr","a","g",this.highlighted="p2",{action:"drag",point:"p2"};if(this.parameters.calloutOnHover){a.H3A(16),n=a.s_7(1,"1992313774"),-231255700,s=2;for(var l=1;a.Z1$(l.toString(),l.toString().length,72585)!==n;l++){var{x0:h,x1:c}=r;a.H3A(16),s+=a.R2a(1,"2")}if(-231255700!==a.Z1$(s.toString(),s.toString().length,44362))var{x0:h,x1:c}=r;var{x0:h,x1:c}=r;(o=!(h>Math.max(this.p0[0],this.p1[0])||c<Math.min(this.p0[0],this.p1[0])))!==this.showCallout&&(this.showCallout=o,this.stx.draw())}return e.Drawing.regression.prototype.intersected.call(this,t,i,r)},reposition:function(t,i,a,r){var n,s,o;if("p","2","d","r","a","g",i){if(n=i.p0&&i.p0[0]||null,s=i.p1&&i.p1[0]||null,o=a-i.tick||0,!this.stx.chart.dataSet[a]||null!==n&&!this.stx.chart.dataSet[n+o]||null!==s&&!this.stx.chart.dataSet[s+o])return this.render(t),null;e.Drawing.regression.prototype.reposition.call(this,t,i,a,r),"drag"==i.action&&"p2"==i.point&&this.setPoint(2,this.p0[0],r,this.stx.panels[this.panelName].chart)}},adjust:function(){var t,e,i,r,n;this.panelName="chart",this.field=null;var{stx:s}=this;if(t=s.panels[this.panelName],e=s.getYAxisByField(t,this.field),a.H3A(9),this.setPoint(a.s_7(0,"0"),this.d0,this.v0,t.chart),a.T4K(),this.setPoint(1,this.d1,this.v1,t.chart),!this.repositioner&&this.p0[0]>this.p1[0]){var[o,l]=this.p0;i=this.field0,this.setPoint(0,this.p1[0],this.p1[1],s.panels[this.panelName].chart),this.field0=this.field1,this.setPoint(1,o,l,s.panels[this.panelName].chart),this.field1=i}s.chart.dataSet[this.p0[0]]&&(this.v0=this.p0[1]=s.chart.dataSet[this.p0[0]][this.field0||this.defaultField]),s.chart.dataSet[this.p1[0]]&&(this.v1=this.p1[1]=s.chart.dataSet[this.p1[0]][this.field1||this.defaultField]),this.d2&&this.v2?this.setPoint(2,this.d2,this.v2,s.panels[this.panelName].chart):(r=this.pixelFromValue(t,this.p0[0],s.chart.dataSet[this.p0[0]][this.field0||this.defaultField],e),a.H3A(2),n=this.valueFromPixel(a.R2a(15,r),t,s.getYAxisByField(t,this.field)),a.t7L(19),this.setPoint(a.s_7(0,"2"),this.p0[0],n,s.panels[this.panelName].chart))},click:function(t,e,i){var r;this.copyConfig();var{stx:n}=this;return r=n.panels[this.panelName],!!n.chart.dataSet[e]&&(this.penDown?(this.accidentalClick(e,i)||(a.T4K(),this.setPoint(1,e,i,r.chart),this.field1=this.validFields.includes(n.magneticHold)?n.magneticHold:this.defaultField,this.penDown=!1),!0):(this.setPoint(0,e,i,r.chart),this.field0=this.validFields.includes(n.magneticHold)?n.magneticHold:this.defaultField,this.penDown=!0,!1))},reconstruct:function(t,e){this.stx=t,a.T4K(),this.color=e.col,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.v0=e.v0,this.v1=e.v1,this.field=e.fld,this.d2=e.d2,this.v2=e.v2,this.field0=e.fld0||this.defaultField,this.field1=e.fld1||this.defaultField,this.fillColor=e.fc,this.axisLabel=e.al,this.parameters=e.param,this.pixelX=e.px,this.pixelY=e.py,this.adjust()},serialize:function(t,e){return{name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,v0:this.v0,v1:this.v1,fld:this.field,d2:this.d2,v2:this.v2,fld0:this.field0,fld1:this.field1,fc:this.fillColor,al:this.axisLabel,param:this.parameters,px:this.pixelX,py:this.pixelY}},render:function(t){var e,i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b;if(i=(e=this.stx).panels[this.panelName],this.field=null,r=e.getYAxisByField(i,this.field),i&&(!this.field||r)&&this.p1&&(a.T4K(),!(this.p0[0]<0||this.p1[0]<0||(n=e.pixelFromTick(this.p0[0],i.chart),s=e.pixelFromTick(this.p1[0],i.chart),o=e.pixelFromTick(this.p0[0],i.chart),n<i.left&&s<i.left||n>i.right&&s>i.right)))){if(l=e.chart.dataSet[this.p0[0]],h=e.chart.dataSet[this.p1[0]],c=l?this.pixelFromValue(i,this.p0[0],l[this.field0||this.defaultField],r):null,u=h?this.pixelFromValue(i,this.p1[0],h[this.field1||this.defaultField],r):null,d=this.p2?this.pixelFromValue(i,this.p2[0],this.p2[1],r):0,p=this.fillColor||e.containerColor,t.fillStyle=p,t.globalAlpha=.25,g=this.getLineColor(),m={pattern:this.pattern,lineWidth:this.lineWidth},c&&u&&(a.t7L(0),t.fillRect(n,0,a.s_7(s,n),i.bottom)),a.t7L(9),t.globalAlpha=a.s_7(0,"1"),!c||!u||this.spanPanels&&this.panelName!=this.originPanelName||e.plotLine(n,s,c,u,g,"segment",t,i,m),c&&(a.t7L(70),e.plotLine(n,n,a.s_7(c,"20"),a.s_7(20,c,a.H3A(2)),g,"line",t,i,m)),u&&(a.t7L(70),e.plotLine(s,s,a.R2a(u,"20"),a.R2a(20,u,a.t7L(2)),g,"line",t,i,m)),this.axisLabel&&!this.repositioner&&!this.penDown&&this.p0[0]>=0&&this.p1[0]>=0&&!e.chart.xAxis.noDraw&&(!this.spanPanels||i.yAxis.bottom!==i.bottom)){for(var x of(f=[[n,this.getAxisLabelText(this.p0[0])],[s,this.getAxisLabelText(this.p1[0])]],e.endClip(),f))e.createXAxisLabel({panel:i,txt:x[1],x:x[0],backgroundColor:g,color:null,pointed:!0,padding:2});e.startClip(i.name)}this.spanPanels&&this.panelName!=this.originPanelName||(this.drawCallout(t),this.highlighted?("p","0",y="p0"==this.highlighted,v="p1"==this.highlighted,b="p2"==this.highlighted,this.littleCircle(t,n,c,y),this.littleCircle(t,s,u,v),this.littleCircle(t,o,d,b)):(this.pixelX=[n,s,o],this.pixelY=[c,u,d]))}},drawCallout:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;if((!this.parameters.calloutOnHover||this.showCallout)&&(r=(i=this.stx).panels[this.panelName],this.p2&&(n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&(this.context=t,s=i.pixelFromTick(this.p0[0],r.chart),o=this.pixelFromValue(r,this.p2[0],this.p2[1],n),!isNaN(o)&&(l=this.getcalloutData()).length)))){h=l.reduce((function(t,e){return t.label.length>e.label.length?t:e})).label,a.T4K(),c=l.reduce((function(t,e){return t.value.length>e.value.length?t:e})).value,this.calloutWidth=(h.length+c.length)*(.6*this.fontSize)+2*this.padding,a.t7L(1);var b=a.s_7(16,22,8);this.calloutHeight=l.length*this.lineHeight+this.padding*b,t.font=this.fontString,t.textBaseline="top",a.t7L(12);var x=a.s_7(6,8);u=this.calloutWidth/x,a.H3A(12);var S=a.R2a(18,20);if(d=this.calloutHeight/S,(o<r.yAxis.top+d||o>r.yAxis.bottom-d)&&(o=Math.min(Math.max(o,r.yAxis.top+d),r.yAxis.bottom-d),this.p2[1]=this.valueFromPixel(o,r,n)),(p=this.lineWidth)||(p=1.1),this.getLineColor(),g=this.getLineColor(this.borderColor),y=Math.min(Math.min(u,d)/4,5),m=Math.round(s),f=Math.round(o),s-=u+this.stem.x,o-=this.stem.y,a.t7L(2),Math.round(a.R2a(u,s)),Math.round(o),this.highlighted)i.canvasColor("stx_annotation_highlight_bg",t);else if(this.fillColor)t.fillStyle=this.fillColor,t.globalAlpha=.7;else if(this.stem){1350516501,-2089580775,v=2;for(var C=1;1350516501!==a.Z1$(C.toString(),C.toString().length,22061);C++)t.fillStyle=i.containerColor,v+=2;-2089580775!==a.v0U(v.toString(),v.toString().length,8538)&&(t.fillStyle=i.containerColor)}t.strokeStyle=g,t.setLineDash&&(t.setLineDash(e.borderPatternToArray(p,this.pattern)),t.lineDashOffset=0),g&&(t.beginPath(),t.lineWidth=p,a.t7L(1),t.moveTo(a.s_7(s,y,u),a.R2a(o,d,a.t7L(0))),a.t7L(2),t.quadraticCurveTo(a.s_7(u,s),a.s_7(o,d,a.H3A(0)),a.s_7(u,s,a.H3A(2)),a.s_7(d,o,y,a.H3A(6))),a.t7L(2),t.lineTo(a.R2a(u,s),a.s_7(o,y,2,a.H3A(42))),t.lineTo(m,f),a.H3A(2),t.lineTo(a.R2a(u,s),a.R2a("2",y,2,o,a.t7L(91))),a.t7L(2),t.lineTo(a.R2a(u,s),a.R2a(o,y,d,a.t7L(1))),a.t7L(2),t.quadraticCurveTo(a.R2a(u,s),a.s_7(d,o,a.H3A(2)),a.s_7(s,y,u,a.t7L(1)),a.R2a(d,o,a.t7L(2))),a.t7L(43),t.lineTo(a.R2a(2,y,s),a.R2a(d,o,a.t7L(2))),a.H3A(92),t.lineTo(a.R2a("2",64,s,y),a.s_7(d,o,a.H3A(2))),a.t7L(6),t.lineTo(a.s_7(u,s,y),a.s_7(d,o,a.t7L(2))),a.t7L(0),t.quadraticCurveTo(a.s_7(s,u),a.R2a(d,o,a.H3A(2)),a.s_7(s,u,a.H3A(0)),a.R2a(o,y,d,a.t7L(1))),a.t7L(0),t.lineTo(a.s_7(s,u),a.s_7(2,y,o,a.H3A(43))),a.H3A(0),t.lineTo(a.R2a(s,u),a.R2a(o,y,2,a.H3A(42))),a.H3A(0),t.lineTo(a.R2a(s,u),a.s_7(d,o,y,a.t7L(6))),a.H3A(0),t.quadraticCurveTo(a.R2a(s,u),a.s_7(o,d,a.t7L(0)),a.R2a(u,s,y,a.t7L(6)),a.R2a(o,d,a.H3A(0))),a.H3A(42),t.lineTo(a.s_7(s,y,2),a.R2a(o,d,a.t7L(0))),a.H3A(43),t.lineTo(a.s_7(2,y,s),a.s_7(o,d,a.t7L(0))),a.H3A(1),t.lineTo(a.R2a(s,y,u),a.s_7(o,d,a.H3A(0))),t.fill(),t.globalAlpha=1,"none"!=this.pattern&&t.stroke()),this.highlighted?i.canvasColor("stx_annotation_highlight",t):("t","ranspar","ent",t.fillStyle="transparent"===this.fillColor?i.getCanvasColor():e.chooseForegroundColor(this.fillColor)),o+=this.padding,l.forEach((e=>{var r,n,{label:l,value:h}=e;r=t.font,t.textAlign="start",t.font="bold "+this.fontSize+"px "+this.fontFamily,t.fillText(i.translateIf(l)+": ",s-u+this.padding,o-d),t.textAlign="end",t.font=this.fontSize+"px "+this.fontFamily,t.fillText(h,s+u-this.padding,o-d),t.textAlign="start",t.font=r,n=2;for(var c=1;243661767!==a.Z1$(c.toString(),c.toString().length,28290);c++)o-=this.lineHeight,n+=2;-1829994926!==a.v0U(n.toString(),n.toString().length,11957)&&(o*=this.lineHeight),o+=this.lineHeight})),t.textBaseline="alphabetic"}}},!0),e.Drawing.quadrant=function(){a.q7W(),this.name="quadrant"},e.inheritsFrom(e.Drawing.quadrant,e.Drawing.regression),e.extend(e.Drawing.quadrant.prototype,{configs:["color","fillColor","lineWidth","pattern"],copyConfig:function(){var t;t=this.stx.currentVectorParameters,this.color=t.currentColor,this.fillColor=t.fillColor,a.T4K(),this.lineWidth=t.lineWidth,this.pattern=t.pattern},$controls:[],render:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D;if("t","iro","ne","quadr","a","nt","tiron","e","s","egm","en","t","ti","r","on","e",r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)&&this.p1&&(s=i.pixelFromTick(this.p0[0],r.chart),o=i.pixelFromTick(this.p1[0],r.chart),!(s<r.left&&o<r.left||s>r.right&&o>r.right))){l=null,h=null;for(var k=Math.max(0,Math.min(this.p1[0],this.p0[0]));k<=Math.min(i.chart.dataSet.length-1,Math.max(this.p1[0],this.p0[0]));k++)null!==(c=this.getYValue(k))&&((null===l||c.transformed>l)&&(l=c.transformed),(null===h||c.transformed<h)&&(h=c.transformed));if(u=i.pixelFromTransformedValue(l,r,n),a.t7L(93),d=i.pixelFromTransformedValue(a.R2a(l,h,"4",3),r,n),a.t7L(94),p=i.pixelFromTransformedValue(a.s_7(l,2,3,h),r,n),a.t7L(5),g=i.pixelFromTransformedValue(a.R2a(l,h,2),r,n),a.t7L(95),m=i.pixelFromTransformedValue(a.s_7(h,l,3,2),r,n),a.t7L(95),f=i.pixelFromTransformedValue(a.R2a(h,l,4,3),r,n),y=i.pixelFromTransformedValue(h,r,n),this.p0[1]=0,this.p1[1]=!1,v=this.getLineColor(),("auto"==(b=this.fillColor)||e.isTransparent(b))&&(b=i.defaultColor),t.fillStyle=b,x={pattern:this.pattern,lineWidth:this.lineWidth},i.plotLine(s,o,u,u,v,"segment",t,r,x),i.plotLine(s,o,y,y,v,"segment",t,r,x),"quadrant"==this.name?("s","egme","n","t",i.plotLine(s,o,d,d,v,"segment",t,r,x),i.plotLine(s,o,f,f,v,"segment",t,r,x)):"tirone"==this.name&&(i.plotLine(s,o,p,p,v,"segment",t,r,x),i.plotLine(s,o,m,m,v,"segment",t,r,x)),i.plotLine(s,s,u,y,v,"segment",t,r,x),i.plotLine(o,o,u,y,v,"segment",t,r,x),i.plotLine(s,o,g,g,v,"segment",t,r,e.extend(x,{opacity:"tirone"==this.name?.2:1})),t.globalAlpha=.1,t.beginPath(),a.t7L(0),t.fillRect(s,u,a.s_7(o,s),a.s_7(y,u)),"quadrant"==this.name?(a.t7L(0),t.fillRect(s,d,a.R2a(o,s),a.s_7(f,d))):"tirone"==this.name&&(a.H3A(0),t.fillRect(s,p,a.s_7(o,s),a.R2a(m,p))),t.globalAlpha=1,this.highlighted)"p","0",A="p0"==this.highlighted,D="p1"==this.highlighted,this.littleCircle(t,s,g,A),this.littleCircle(t,o,g,D);else{"t","i","ron","e","quad","ra","n","t",-910828973,a.H3A(9),S=-a.s_7(0,"1488438236"),C=2;for(var w=1;-910828973!==a.v0U(w.toString(),w.toString().length,55976);w++)this.pixelX=[s,o],this.pixelY=[u,y,g],"quadrant"==this.name&&this.pixelY.push(d,f),"tirone"!==this.name&&this.pixelY.push(p,m),C+=2;a.v0U(C.toString(),C.toString().length,88254)!==S&&(this.pixelX=[s,o],this.pixelY=[u,y,g],"quadrant"===this.name&&this.pixelY.push(d,f),"quadrant"==this.name&&this.pixelY.push(p,m)),this.pixelX=[s,o],this.pixelY=[u,y,g],"quadrant"===this.name&&this.pixelY.push(d,f),"tirone"===this.name&&this.pixelY.push(p,m)}}},intersected:function(t,i,r){var n,s,{pixelX:o,pixelY:l}=this;if(!o||!l)return null;if(n=this.repositionIntersection(t,i))return n;for(var h=0;h<2;h++)if(this.pointIntersection(o[h],l[2],r,!0))return a.H3A(2),this.highlighted=a.R2a(h,"p"),{action:"drag",point:"p"+h};return s=[],o.forEach((t=>{a.T4K(),s.push({p0:[t,l[0]],p1:[t,l[1]]})})),l.forEach((t=>{a.q7W(),s.push({p0:[o[0],t],p1:[o[1],t]})})),s.some((({p0:e,p1:n})=>{a.T4K();for(var s=1;1880734922!==a.Z1$(s.toString(),s.toString().length,76656);s++)return this.lineIntersection(t,i,r,this.name,e,n,!1);if(1074167930!==a.v0U(2..toString(),2..toString().length,62602))return this.lineIntersection(t,i,r,this.name,e,n,!0)}))?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:this.valueOnDrawingAxis(t,i)}):null},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,a.T4K(),this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.field=e.fld,this.adjust()},serialize:function(){return a.T4K(),{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field}}},!0),e.Drawing.tirone=function(){this.name="tirone"},e.inheritsFrom(e.Drawing.tirone,e.Drawing.quadrant),e.Drawing.volumeprofile=function(){this.name="volumeprofile"},e.inheritsFrom(e.Drawing.volumeprofile,e.Drawing.regression),e.extend(e.Drawing.volumeprofile.prototype,{configs:["color","fillColor","lineWidth","pattern","parameters"],copyConfig:function(){this.color=this.stx.currentVectorParameters.currentColor,this.fillColor=this.stx.currentVectorParameters.fillColor,this.lineWidth=this.stx.currentVectorParameters.lineWidth,this.pattern=this.stx.currentVectorParameters.pattern,this.priceBuckets=this.stx.currentVectorParameters.volumeProfile.priceBuckets},$controls:[],getYValue:null,isAllowed:function(t,e){return a.T4K(),!e||"object"==typeof t.getFirstLastDataRecord(t.chart.dataSegment,e)[e]},render:function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q;var{stx:X}=this,{dataSet:Z}=X.chart;if(i=X.panels[this.panelName],r=X.getYAxisByField(i,this.field),i&&(!this.field||r)&&this.p1&&(r=r||i.yAxis,n=X.pixelFromTick(this.p0[0],i.chart),s=X.pixelFromTick(this.p1[0],i.chart),!(n<i.left&&s<i.left||n>i.right&&s>i.right))){var{flipped:J}=r;o=null,l=null,h=Math.min(this.p1[0],this.p0[0]),c=Math.max(this.p1[0],this.p0[0]);for(var G=h;G<=c;G++)if((u=Z[G])[this.field]&&(u=u[this.field]),u){var{High:K,Low:$}=u;(null===o||K>o)&&(o=K),(null===l||$<l)&&(l=$)}var{priceBuckets:tt}=this;a.H3A(23),d=a.R2a(tt,l,o),p=[],J&&([o,l]=[l,o]),g=J?-1:1;for(var et=l,it=0;it<=tt&&(p.push([et,0]),l!==o);et+=d*g,it++);m=0;for(var at=h;at<=c;at++)if(((f=Z[at])[this.field]||0===f[this.field])&&(f=f[this.field]),f){var{High:rt,Low:nt,Volume:st}=f;if(st||0===st){y=[],v=p[0][0],b=null;for(var ot=1;ot<p.length;ot++)b=p[ot][0],(nt>=v&&nt<=b||rt>=v&&rt<=b||nt<v&&rt>b)&&y.push(ot),v=b;if(y.length){x=st/y.length;for(var lt=0;lt<y.length;lt++)(S=p[y[lt]][1]+=x)>m&&(m=S)}}}(C=0===m&&p.length>1)&&("Not enou","gh data to render the Volume Profile","cha","rt",X.displayErrorAsWatermark("chart",X.translateIf("Not enough data to render the Volume Profile"))),A=t=>Math.round(t)+.5,D=(c-h)*X.layout.candleWidth,a.t7L(1);var ht=a.R2a(0,18,19);k=A(X.pixelFromTick(h))-ht,a.t7L(2),w=A(a.R2a(D,k)),a.t7L(76),M=this.pixelFromValue(i,h,a.s_7(l,o,l,2),r),T=k;var[ct]=p[0];F=this.getLineColor();var{fillColor:ut}=this;("auto"===ut||e.isTransparent(ut))&&(ut=X.defaultColor),t.fillStyle=ut,P={pattern:this.pattern,lineWidth:this.lineWidth},_=0,a.H3A(16),L=a.s_7(1,"0"),E=(t,e)=>(a.q7W(),[_,L]=[t,e]),I=(e,r,n)=>{n||X.plotLine(_,e,L,r,F,"segment",t,i,P),a.T4K(),[_,L]=[e,r]},(this.highlighted||C)&&("s","egment",X.plotLine(k,w,M,M,X.defaultColor,"segment",t,i,Object.assign({},P,{opacity:.3})));for(var dt=1;dt<p.length;dt++){var[pt,gt]=p[dt];gt?(a.t7L(96),N=a.R2a(m,gt,D),a.H3A(2),O=A(a.R2a(N,k)),H=A(this.pixelFromValue(i,h,pt,r)),R=A(this.pixelFromValue(i,h,ct,r)),z=Math.max(H,r.top),j=Math.min(R,r.bottom),a.H3A(97),U=a.s_7(H,z),a.H3A(97),B=a.s_7(R,j),z<=r.bottom&&j>=r.top&&(this.highlighted||(a.H3A(16),t.globalAlpha=a.s_7(1,"0.3")),E(k,j),I(k,z),I(O,z,U),I(O,j),O>T&&I(T,j,B),t.globalAlpha=.2,a.t7L(0),t.fillRect(k,z,a.R2a(O,k),a.s_7(j,z)),t.globalAlpha=1),T=O):T=k,ct=pt}this.highlighted&&("p","1",V="p0"===this.highlighted,W="p1"===this.highlighted,Y=(Q=this.p0[0]>this.p1[0])?W:V,q=Q?V:W,this.littleCircle(t,k,M,Y),this.littleCircle(t,w,M,q)),a.t7L(2),this.pixelX=[k,a.R2a(D,k)],this.pixelY=[this.pixelFromValue(i,h,o,r),this.pixelFromValue(i,h,l,r),M],a.t7L(0),this.p0[a.s_7("1",0)]=0,this.p1[1]=!1}},intersected:function(t,i,r){var n,{p0:s,p1:o,stx:l}=this;if(!s||!o)return null;var[,,h]=this.pixelY||[];if(void 0!==h){if(a.q7W(),n=this.repositionIntersection(t,i))return n;for(var[c,[u]]of[[0,s],[1,o]])if(this.pointIntersection(l.pixelFromTick(u),h,r,!0))return a.t7L(2),this.highlighted=a.s_7(c,"p"),{action:"drag",point:"p"+c};return this.boxIntersection(t,i,r)?(this.highlighted=!0,{action:"move",p0:e.clone(this.p0),p1:e.clone(this.p1),tick:t,value:i}):null}},reconstruct:function(t,e){this.stx=t,this.color=e.col,this.fillColor=e.fc,this.panelName=e.pnl,this.pattern=e.ptrn,this.lineWidth=e.lw,this.d0=e.d0,this.d1=e.d1,this.tzo0=e.tzo0,this.tzo1=e.tzo1,this.field=e.fld,this.priceBuckets=e.pb,this.adjust()},serialize:function(){return{name:this.name,pnl:this.panelName,col:this.color,fc:this.fillColor,ptrn:this.pattern,lw:this.lineWidth,d0:this.d0,d1:this.d1,tzo0:this.tzo0,tzo1:this.tzo1,fld:this.field,pb:this.priceBuckets}}},!0),e.Drawing.elliottwave=function(){this.name="elliottwave",this.lastPoint=0,this.points=[],this.pts=[],this.dx=0,this.dy=-20,a.T4K(),this.dragToDraw=!1,this.annotationPoints=[],this.edit=null},e.inheritsFrom(e.Drawing.elliottwave,e.Drawing.annotation),e.Drawing.elliottwave.defaultTemplate={impulse:["I","II","III","IV","V"],corrective:["A","B","C"],decoration:"enclosed",showLines:!0},e.Drawing.elliottwave.prototype.initializeSettings=function(t){t.currentVectorParameters.waveParameters=e.clone(e.Drawing.elliottwave.defaultTemplate)},e.Drawing.elliottwave.prototype.configs=["color","lineWidth","lineColor","pattern","font","waveParameters"],e.Drawing.elliottwave.prototype.$controls=["br[cq-wave-parameters]","cq-wave-parameters"],e.Drawing.elliottwave.prototype.construct=function(t,e){var i;this.stx=t,this.panelName=e.name,i=t.currentVectorParameters,a.q7W(),Object.assign(this,i.waveParameters)},e.Drawing.elliottwave.prototype.serialize=function(){var t;a.q7W(),t={};for(var i=0;i<this.points.length;i++)"t","z","o",a.H3A(2),t[a.R2a(i,"d")]=this[a.s_7(i,"d")],a.H3A(2),t[a.R2a(i,"tzo")]=this[a.s_7(i,"tzo")],a.H3A(2),t[a.s_7(i,"v")]=this[a.s_7(i,"v")];return t.annotations=this.annotationPoints.join(","),Object.assign({name:this.name,pnl:this.panelName,col:this.color,ptrn:this.pattern,lw:this.lineWidth,mxSeg:this.maxSegments,show:this.showLines,decor:this.decoration,dx:this.dx,dy:this.dy,trend:this.trend,fld:this.field,fnt:e.removeNullValues(e.replaceFields(this.font,{style:"st",size:"sz",weight:"wt",family:"fl"}))},t)},e.Drawing.elliottwave.prototype.reconstruct=function(t,i){this.stx=t,this.color=i.col,this.panelName=i.pnl,this.pattern=i.ptrn,this.lineWidth=i.lw,this.font=e.replaceFields(i.fnt,{st:"style",sz:"size",wt:"weight",fl:"family"}),this.decoration=i.decor,this.showLines=i.show,this.dx=i.dx,this.dy=i.dy,this.trend=i.trend,this.field=i.fld,this.annotationPoints=i.annotations.split(","),"enclosed"===i.decor&&this.calculateRadius(t.chart.tempCanvas.context),this.maxSegments=i.mxSeg,this.reconstructPoints(i),this.adjust()},e.Drawing.elliottwave.prototype.reconstructPoints=function(t){var i,r,n;if(a.T4K(),i=this.stx.panels[this.panelName])for(var s=0;s<this.annotationPoints.length;s++)"t","z","o",a.H3A(2),this[a.s_7(s,"d")]=t[a.R2a(s,"d")],a.t7L(2),this[a.R2a(s,"v")]=t[a.R2a(s,"v")],a.t7L(2),this[a.R2a(s,"tzo")]=t[a.R2a(s,"tzo")],r=e.strToDateTime(t["d"+s]),n=this.stx.tickFromDate(r,i.chart),this.points.push([n,t["v"+s]])},e.Drawing.elliottwave.prototype.calculateRadius=function(t){var e,i;this.getFontString(),a.q7W(),t.font=this.fontString,e=0;for(var r=0;r<this.annotationPoints.length;r++)e<(i=t.measureText(this.annotationPoints[r]).width)&&(e=i);this.enclosedRadius=e},e.Drawing.elliottwave.prototype.check=function(t,e,i){var r,n;if(a.t7L(0),(r=this.points[a.R2a(i,1)])&&t<=r[0])return!1;if(1===i&&2===this.points.length)return!0;return a.q7W(),a.t7L(98),!((n=this.points[a.R2a("1",i)])&&t>=n[0])&&!!function(t){a.T4K();for(var e=2;e<t.length;e++)if(Math.sign(t[e][1]-t[e-1][1])==Math.sign(t[e-1][1]-t[e-2][1]))return!1;return!0}(this.points)},e.Drawing.elliottwave.prototype.move=function(t,e,i){this.copyConfig(),a.H3A(99);var r=a.s_7(11,9,18,17);this.points[this.lastPoint+r]=[e,i],this.render(t)},e.Drawing.elliottwave.prototype.adjust=function(){var t,i;if(t=this.stx.panels[this.panelName])for(var r=0;this.maxSegments+1>r;r++)a.t7L(2),i=this[a.R2a(r,"d")],this.setPoint(r,i,this["v"+r],t.chart),this.points[r][0]=this.stx.tickFromDate(e.strToDateTime(i),t.chart),a.H3A(2),this.points[r][1]=this[a.R2a(r,"v")]},e.Drawing.elliottwave.prototype.click=function(t,e,i){var r;if(r=this.stx.panels[this.panelName])return this.copyConfig(),this.penDown?(a.T4K(),this.accidentalClick(e,i)?(this.penDown=!0,!1):!!(this.check(e,i,this.lastPoint+1)&&(this.lastPoint++,this.setPoint(this.lastPoint,e,i,r.chart),1===this.lastPoint&&(this.trend=Math.sign(this.v1-this.v0)),this.segment++,this.segment>=this.maxSegments))&&(this.penDown=!1,!0)):(this.setPoint(0,e,i,r.chart),this.points.push(this.p0),this.penDown=!0,this.segment=0,this.lastPoint=0,this.impulse&&(this.annotationPoints=this.annotationPoints.concat(this.impulse)),this.corrective&&(this.annotationPoints=this.annotationPoints.concat(this.corrective)),this.annotationPoints.unshift("0"),"enclosed"===this.decoration&&this.calculateRadius(t),this.maxSegments=this.annotationPoints.length-1,this.trend=1,!1)},e.Drawing.elliottwave.prototype.render=function(t){var i,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F;if(r=(i=this.stx).panels[this.panelName],n=i.getYAxisByField(r,this.field),r&&(!this.field||n)){if(n=n||r.yAxis,s=this.annotationPoints,a.T4K(),o=this.pattern?e.borderPatternToArray(this.lineWidth,this.pattern):[],this.getFontString(),t.font=this.fontString,t.textAlign="center",t.textBaseline="middle",t.lineWidth=this.lineWidth,this.fontString!==this.lastFontString&&this.calculateRadius(t),this.lastFontString=this.fontString,l=this.getLineColor(),t.fillStyle=t.strokeStyle=l,t.save(),t.setLineDash(o),h=this.dx,c=this.dy,u=this.points,d=this.pts,p=!this.showLines&&this.highlighted,g=u.length,this.penDown&&this.segment){a.H3A(6);var P=a.R2a(13,0,15);m=this.trend*(g%P-.5)<0,this.drawDropZone(t,u[g-2][1],i.priceFromPixel(n[m?"top":"bottom"],r,n),u[g-2][0])}else"string"==typeof this.highlighted&&i.repositioningDrawing&&("m","i","n",f=parseInt(this.highlighted.substring(1,this.highlighted.length),10),m=this.trend*(f%2-.5)>0,a.t7L(0),y=u[a.s_7(f,1)],a.H3A(2),v=u[a.R2a(1,f)],b=f>0?y[1]:v[1],v&&(b=Math[m?"max":"min"](b,v[1])),this.drawDropZone(t,b,i.priceFromPixel(n[m?"top":"bottom"],r,n),y?y[0]:null,v?v[0]:null));for(var _=0;_<g;_++)x=u[_],S=i.pixelFromTick(x[0],r.chart),C=this.pixelFromValue(r,x[0],x[1],i.getYAxisByField(r,this.field)),d[_]=[S,C];if(_=0,this.showLines||p){for(t.beginPath(),p&&(t.globalAlpha=.3);_<d.length;_++)t.lineTo(d[_][0],d[_][1]);t.stroke(),_=0}for(t.restore();_<g;_++){"enc","los","ed",A=_%2?h:-h,D=_%2?c:-c,A*=this.trend,D*=this.trend,n.flipped&&(A*=-1,D*=-1),w=(k=d[_])[2]=k[0]+A,a.H3A(100);var L=a.R2a(0,1,1,2);M=k[3]=k[L]+D,T=this.enclosedRadius||8,F=s[_],"parentheses"===this.decoration&&(a.H3A(83),F=a.s_7(F,"(",")")),t.fillText(F,w,M),"enclosed"===this.decoration&&(t.beginPath(),t.arc(w,M,T,0,2*Math.PI,!1),t.stroke()),this.highlighted&&(t.save(),this.littleCircle(t,this.pts[_][0],this.pts[_][1],this.highlighted==="p"+_),t.restore())}}},e.Drawing.elliottwave.prototype.reposition=function(t,e,i,r){var n,s,o,l,h;if("m","o","v","e",e){if(n=this.stx.panels[this.panelName],s=e.tick-i,o=e.value-r,"move"===e.action)for(var c=0;e.points.length>c;c++){l=e.points[c],this.setPoint(c,l[0]-s,l[1]-o,n.chart),a.t7L(6);var u=a.R2a(20,0,21);this.points[c]=[l[0]-s,l[u]-o]}"drag"===e.action&&(h=e.point,this.points[h]=[i,r],this.check(i,r,h)&&this.setPoint(h,i,r,n.chart)),a.T4K(),this.render(t)}},e.Drawing.elliottwave.prototype.intersected=function(t,i,r){var n,s;if(!this.p0||!this.p1)return null;for(var o=0;this.points.length>o;o++){if(s=this.points[o],this.pointIntersection(s[0],s[1],r))return a.H3A(2),this.highlighted=a.s_7(o,"p"),{action:"drag",point:o,tick:t,value:this.valueOnDrawingAxis(t,i)};this.points[o+1]&&this.lineIntersection(t,i,r,"segment",s,this.points[o+1])&&(this.highlighted=!0,n={action:"move",points:e.clone(this.points),tick:t,value:this.valueOnDrawingAxis(t,i)})}return n},e.Drawing.elliottwave.prototype.measure=function(){var t,i,r,n,s;if(this.points.length>=2){t=this.points,this.stx.setMeasure(t[0][1],t[t.length-1][1],t[0][0],t[t.length-1][0],!0),1517725770,1565139261,a.H3A(19),i=a.R2a(0,"2");for(var o=1;1517725770!==a.Z1$(o.toString(),o.toString().length,9383);o++)r=this.stx.controls.mSticky,i+=2;1565139261!==a.Z1$(i.toString(),i.toString().length,79309)&&(r=this.stx.controls.mSticky),(n=r&&r.querySelector(".mStickyInterior"))&&((s=[]).push(this.stx.translateIf(e.capitalize("Elliott Wave"))),this.getYValue&&s.push(this.stx.translateIf(this.field||this.stx.defaultPlotField||"Close")),s.push(n.innerHTML),n.innerHTML=s.join("<br>"))}},e.Drawing.printProjection=function(t,i,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S;if(a.T4K(),(n=i.arr).length>1){s=n[0][0],-1858871807,-343985505,o=2;for(var C=1;-1858871807!==a.v0U(C.toString(),C.toString().length,86528);C++)l=Math.round(t.chart.maxTicks-3923),o+=2;-343985505!==a.v0U(o.toString(),o.toString().length,28469)&&(l=Math.round(.75*t.chart.maxTicks));for(var A=1;A<n.length;A++){for(a.H3A(0),h=n[a.s_7(A,1)][0],c=n[A][0],u=e.strToDateTime(h),d=e.strToDateTime(c).getTime(),p=t.standardMarketIterator(u),g=0;u.getTime()<d;)u=p.next(),g+=1;if((m=e.strToDateTime(h).getTime())>e.strToDateTime(r[r.length-1].Date).getTime())f=r.length-1,g+=1;else for(f=r.length-1;f>=0&&!(m<=e.strToDateTime(r[f].Date).getTime());f--);y={x0:0,x1:g,y0:r[f].Close,y1:n[A][1]},s=e.strToDateTime(h),p=t.standardMarketIterator(s),v=!1;for(var D=0;D<=g;D++)if("minut","e",v?s=p.next():v=!0,!(s.getTime()<=r[r.length-1].DT.getTime())){(b=e.yIntersection(y,D))||(b=0),a.H3A(1);var k=a.R2a(9998,14,16);if(0===(x=Math.round(1e4*b)/k)&&(x=n[A][1]),S={Date:e.yyyymmddhhmmssmmm(s),DT:s,Open:x,Close:x,High:x,Low:x,Volume:0,Adj_Close:x,Split_Close:x,projection:!0},"minute"==t.layout.interval&&l--<0)break;r[r.length]=S}}}}):console.error("drawingAdvanced feature requires first activating drawing feature.")},o=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).computeEquationChart?(e.formatEquation=function(t){var e,i,a,r,n,s=At;e="",i=[],a="",r=!1;for(var o=1;o<t.length;o++)"["!=(n=t[o])||r?"]"==n&&r?(r=!1,""!==a&&(i.push(a),s.H3A(83),e+=s.R2a(a,"[","]")),a=""):r?a+=n:"+"==n||"-"==n||"*"==n||"/"==n||":"==n||"%"==n||"("==n||")"==n?(""!==a&&isNaN(a)?(i.push(a),s.H3A(83),e+=s.R2a(a,"[","]")):e+=a,":"==n&&(n="/"),e+=n,a=""):" "!=n&&(a+=n):r=!0;return""!==a&&isNaN(a)?(i.push(a),s.t7L(83),e+=s.s_7(a,"[","]")):e+=a,{equation:e,symbols:i}},e.fetchEquationChart=function(t,i){var a,r,n,s,o;At.q7W(),r=(a=e.formatEquation(t.symbol)).symbols,n=[],s=t.stx,t.stx=null;for(var l=0;l<r.length;l++)(o=e.shallowClone(t)).stx=s,o.symbol=r[l],o.symbolObject={symbol:r[l]},n.push(o);t.stx=s,s.quoteDriver.multiFetch(n,(function(r){var s,o,l,h,c;s={},At.T4K(),t.loadMoreReplace=!0,o={charge:0};for(var u=0;u<r.length;u++){if((l=r[u]).dataCallback.error)return void i({error:l.dataCallback.error});s[l.params.symbol]=l.dataCallback.quotes,t.loadMoreReplace=t.loadMoreReplace&&l.params.loadMoreReplace,t.moreToLoad=t.moreToLoad||l.dataCallback.moreAvailable,(h=l.dataCallback.attribution)&&(h.charge&&(o.charge+=h.charge),o.source=h.source,void 0===o.exchange?o.exchange=h.exchange:o.exchange!=h.exchange&&(o.exchange=""))}if(n.length||!t.loadMore&&!t.update)try{c=e.computeEquationChart(a.equation,s),i({quotes:c,moreAvailable:t.moreToLoad,attribution:o})}catch(t){var d;d={error:"Invalid equation: "+a.equation},t.name&&"NoException"==t.name&&(d.suppressAlert=!0),i(d)}}))}):("equationsAdvanced feature requires f","irst"," activating equations feature.",console.error("equationsAdvanced feature requires first activating equations feature."))},l=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Marker?e.Marker.Performance||(e.ChartEngine.prototype.removeDOMMarker=function(t){i.q7W(),console.warn("CIQ.ChartEngine#removeDOMMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance#remove instead."),e.Marker.Performance.prototype.removeDOMMarker.call(t.params.node,t)},e.ChartEngine.prototype.drawMarkers=function(){console.warn("CIQ.ChartEngine#drawMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),i.q7W(),e.Marker.Performance.drawMarkers(this)},e.ChartEngine.prototype.calculateMarkerStyles=function(t,i){console.warn("CIQ.ChartEngine#calculateMarkerStyles is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.calculateStyles instead."),e.Marker.Performance.calculateMarkerStyles(this,t,i)},e.ChartEngine.prototype.drawCircleMarker=function(t,i,a){console.warn("CIQ.ChartEngine#drawCircleMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCircleMarker instead."),e.Marker.Performance.drawCircleMarker(t,i,a)},e.ChartEngine.prototype.drawSquareMarker=function(t,i,a){console.warn("CIQ.ChartEngine#drawSquareMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawSquareMarker instead."),e.Marker.Performance.drawSquareMarker(t,i,a)},e.ChartEngine.prototype.drawCalloutMarker=function(t,a,r){var n,s;i.t7L(16),n=i.R2a(1,"377777298"),s=2,i.T4K();for(var o=1;1998963655!==i.v0U(o.toString(),o.toString().length,95025);o++)console.warn("CIQ.ChartEngine#drawCalloutMarker is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawCalloutMarker instead."),e.Marker.Performance.drawCalloutMarker(t,a,r),s+=2;i.Z1$(s.toString(),s.toString().length,82426)!==n&&(console.warn(""),e.Marker.Performance.drawCalloutMarker(t,a,r))},e.ChartEngine.prototype.drawMarkerStem=function(t,i,a){console.warn("CIQ.ChartEngine#drawMarkerStem is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkerStem instead."),e.Marker.Performance.drawMarkerStem(t,i,a)},e.ChartEngine.prototype.positionDOMMarkers=function(){i.q7W(),console.warn("CIQ.ChartEngine#positionDOMMarkers is scheduled for deprecation in a future release\n Please use CIQ.Marker.Performance.drawMarkers instead."),e.Marker.Performance.drawMarkers(this)},e.Marker.Performance=function(t){var a,r,n,s,o,l,h,c;i.T4K(),this.params={displayCategory:!0,displayStem:!0,invert:!1,story:"",headline:""},e.extend(this.params,t),a=this.template=document.createElement("TEMPLATE"),i.t7L(101),a.innerHTML=i.s_7('<div class="stx-marker stx-performance-marker stx-marker-expand"><h4></h4><p></p></div>',"</div>",'<div class="stx-visual">','<div class="stx-marker highlight">','<div class="stx-marker-content">',"</div>",'<div class="stx-stem"></div>',"</div>"),(n=(r=this.template.content.cloneNode(!0)).querySelector(".stx-marker")).classList.add(t.type),n.classList.add(t.category),t.size&&n.classList.add(t.size),s=r.querySelector(".stx-visual"),o=r.querySelector(".stx-marker-expand"),l=r.querySelector("h4"),h=r.querySelector("p"),l.innerText=this.params.headline,h.innerText=this.params.story,this.hasText=!!t.headline||!!t.story,this.deferAttach=!0,this.node=r.firstChild,this.node.params=this.params,this.visual=s,this.expand=o,"callout"===t.type&&(c=o.removeChild(l),r.querySelector(".stx-marker-content").insertBefore(c,o))},e.inheritsFrom(e.Marker.Performance,e.Marker.NodeCreator,!1),e.Marker.Performance.consolidateExpanded=function(t){var e,a,r,n;if((e=t.markerHelper.highlighted).length){a=t.activeMarker,i.T4K(),a.consolidated||(a.consolidated=[]);for(var s=e.length-1;s>=0;s--)a!==e[s]&&(r=o(e[s]))&&(n="<consolidated><br><br>"+r.innerHTML.replace(/<consolidated>.*<\/consolidated>/g,"")+"</consolidated>",o(a).innerHTML+=n);a.stxNodeCreator.quickCache(a)}function o(t){var e;return(e=t.params.node.expand)?(i.q7W(),e.querySelector(".marker_content")||e):null}},e.Marker.Performance.reconstituteExpanded=function(t){i.T4K(),t.markerHelper.highlighted.length&&t.activeMarker&&Array.from(t.activeMarker.params.node.expand.querySelectorAll("consolidated")).forEach((t=>t.remove()))},e.Marker.Performance.drawMarkers=function(t){var e,a,r,n,s,o;i.q7W(),e=t.getMarkerArray("all"),a=t.chart;for(var l=0;l<e.length;l++)n=(r=e[l]).stxNodeCreator,s=a.dataSegment[0].tick,o=a.dataSegment[a.dataSegment.length-1].tick,s<=r.tick<=o&&n&&n.drawMarker&&n.drawMarker(r)},e.Marker.Performance.calculateMarkerStyles=function(t,e,a){var r,n,s,o,l;if((n=(r=t.container.ownerDocument).querySelector(".stx-marker-templates"))||((n=document.createElement("DIV")).style.visibility="hidden",n.style.left="-1000px",r.body.append(n)),n.appendChild(e.node),s=getComputedStyle(e.stxNodeCreator.visual),!t.styles.stx_marker_stem){909124539,-784633760,o=2;for(var h=1;909124539!==i.v0U(h.toString(),h.toString().length,95494);h++)l=getComputedStyle(e.node.querySelector(".stx-stem")),t.styles.stx_marker_stem=t.cloneStyle(l),o+=2;-784633760!==i.v0U(o.toString(),o.toString().length,7983)&&(l=getComputedStyle(e.node.querySelector("")),t.styles.stx_marker_stem=t.cloneStyle(l))}t.styles[a]=t.cloneStyle(s),n.removeChild(e.node)},e.Marker.Performance.drawCircleMarker=function(t,a,r){var n,s,o,l,h,c,u;s=(n=t.params.stx).chart.context,o=r.x,l=r.y,h=r.radius,c=n.emojify(r.label),u=r.color?r.color:a.backgroundColor,s.save(),s.beginPath(),s.setLineDash([]),s.lineWidth=1,s.fillStyle=u,s.strokeStyle=u,s.textAlign="center",i.H3A(4);var d=i.R2a(204,185,12,5);i.H3A(102);var p=i.R2a(15,1,1,17);i.H3A(69),i.T4K();var g=i.s_7(15,1,10,6);s.font="normal bold "+Math.min(d,p*(h+g))+"px Roboto, Helvetica, sans-serif",s.arc(o,l,h,0,2*Math.PI,!1),s.fill(),s.stroke(),s.closePath(),c&&(s.fillStyle=e.chooseForegroundColor(s.fillStyle),i.t7L(2),s.fillText(c,o,i.s_7(1,l))),(t.highlight||t.active)&&(e.isTransparent(u)&&(s.strokeStyle=n.defaultColor),s.beginPath(),i.H3A(2),s.arc(o,l,i.R2a(4,h),0,2*Math.PI,!1),s.stroke(),s.closePath()),s.restore()},e.Marker.Performance.drawSquareMarker=function(t,a,r){var n,s,o,l,h,c,u,d;if(s=(n=t.params.stx).chart.context,o=r.x,l=r.y,h=r.half,c=n.emojify(r.label),u=r.color?r.color:a.backgroundColor,i.t7L(16),d=i.s_7(2,h),s.setLineDash([]),s.lineWidth=1,s.fillStyle=u,s.strokeStyle=u,s.save(),s.beginPath(),"diamond"===t.node.params.type&&(s.translate(o,l),s.rotate(Math.PI/4),s.translate(-o,-l),h/=1.42,i.H3A(16),d=i.s_7(2,h)),i.t7L(0),s.fillRect(i.s_7(o,h),i.s_7(l,h),d,d),(t.highlight||t.active)&&(i.t7L(20),s.strokeRect(i.s_7(h,o,4),i.R2a(h,l,4,i.t7L(20)),i.s_7(8,d,i.H3A(2)),i.R2a(8,d,i.H3A(2)))),s.closePath(),s.restore(),c){s.save(),s.textAlign="center",i.t7L(103);var p=i.R2a(14,6,4,4,2);i.t7L(78);var g=i.s_7(16,19,5,28);s.font="normal bold "+Math.min(p,g*h)+"px Roboto, Helvetica, sans-serif",s.fillStyle=e.chooseForegroundColor(s.fillStyle),i.t7L(2),s.fillText(c,o,i.s_7(1,l)),s.restore()}},e.Marker.Performance.drawCalloutMarker=function(t,e,a){var r,n,s,o,l,h,c,u,d,p,g,m;n=(r=t.params.stx).chart.context,s=t.params,a.x,o=a.y,l=a.half,h=a.midWidth,c=r.emojify(a.headline),u=a.color?a.color:e.backgroundColor,d=2*l||25,p=Math.round(n.measureText(c).width),g=h?2*h:p+8,n.beginPath(),n.setLineDash([]),n.lineWidth=1,n.fillStyle=u,n.strokeStyle=u,n.font="normal bold 12px Roboto, Helvetica, sans-serif",n.rect(s.box.x0,s.box.y0,g,d),n.fill(),i.q7W(),n.stroke(),n.closePath(),n.beginPath(),n.fillStyle=t.highlight||t.active?"rgba(255,255,255,0.8)":"rgba(255,255,255,0.65)",i.H3A(104),m=i.R2a(2,g,20,p),n.rect(s.box.x0+m,o-l,p+40,22),n.fill(),n.stroke(),n.closePath(),n.fillStyle="black",n.fillText(c,s.box.x0+m+10,o)},e.Marker.Performance.drawTextMarker=function(t,e,a){var r,n,s,o,{stx:l}=t.params,h=l.chart.context,{x:c,y:u}=a,d=a.radius;r=l.emojify(a.label),h.save(),h.textAlign="center",i.H3A(0);i.R2a(16655,13324);i.q7W(),i.H3A(1);var p=i.s_7(1028,11,13);i.t7L(105);i.R2a(742,1,106,715,3);i.H3A(0);var g=i.R2a(4641,4368);i.t7L(0);i.s_7(49250,39400);i.t7L(86);var m=i.s_7(11052,1228,6);i.t7L(7);var f=i.R2a(3,3,2360,1180);i.H3A(24);i.R2a(44991,4090,13);i.H3A(100);var y=i.s_7(890,20,1,18);i.H3A(29);var v=i.R2a(7,19,11,8,8);i.t7L(69);i.s_7(6,6505,382,6511);i.t7L(106);var b=i.R2a(520,10,5,51,6232);i.t7L(39);var x=i.s_7(0,11,6,19);h.font=e.fontStyle+(8590>=p?" ":607.49)+e.fontWeight+(g===m?617.11:!(f>y)||("617"*v<b?" ":"k"))+d*x+"px "+e.fontFamily,h.fillStyle=a.color||l.defaultColor,h.fillText(r,c,u),(t.highlight||t.active)&&(n=Math.round(h.measureText(r).width),i.H3A(8),s=i.s_7(n,2),o=4.5,h.strokeStyle=a.color||l.defaultColor,h.beginPath(),h.strokeRect(Math.floor(c)-s-o,Math.floor(u)-d-o,2*(s+o),2*(d+o)),h.stroke(),h.closePath()),h.restore()},e.Marker.Performance.drawMarkerStem=function(t,a,r){var n,s,o,l,h;n=t.params.stx.chart.context;var{x:c}=r;n.beginPath(),n.strokeStyle=a.borderLeftColor,n.setLineDash([1,1]),s=e.stripPX(a.height),o=r.invert?t.params.box.y0:t.params.box.y1,l=r.invert?t.params.box.y0-s:t.params.box.y1+s,n.moveTo(c,o),n.lineTo(c,l),n.stroke(),h=2;for(var u=1;-738852257!==i.v0U(u.toString(),u.toString().length,48642);u++)n.closePath(),i.H3A(0),h+=i.s_7("2",0);-859086195!==i.v0U(h.toString(),h.toString().length,97059)&&n.closePath()},e.Marker.Performance.prototype.drawMarker=function(t){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M;if("c","irc","le","stx_m","arker_","au","to",a=t.params,(r=t.params.stx)&&(n=r.chart.dataSegment)&&n.length&&!(s=r.panels[t.params.panelName]).hidden&&(o=t.params.yAxis||s.yAxis,!(l=t.stxNodeCreator.params).hide)){h=l.type,c=l.category,u=l.headline,d=l.displayCategory,p=l.color,g=l.displayLabel,m=l.invert,f=l.size,"auto"===p&&(p=r.defaultColor),i.t7L(107),y=i.R2a(c,"_","stx_marker_",h),f&&(i.t7L(2),y+=i.s_7(f,"_")),r.styles[y]||e.Marker.Performance.calculateMarkerStyles(r,t,y),v=t.style=r.styles[y],b=r.styles.stx_marker_stem,i.t7L(41);var T=i.s_7(3,4,9);x=parseInt(v.height,T)/2,i.H3A(63);var F=i.s_7(8,854,16,4,29);i.H3A(1);var P=i.R2a(0,10,12);S=parseInt(v.width,F)/P,"diamond"===h&&(x*=1.42,S*=1.42),C=l.displayStem?parseInt(b.height,10)+parseInt(b.marginBottom,10):0,i.H3A(17),A=i.s_7(x,2,C),D=a.offset||0,k=r.pixelFromTick(t.tick),w=a.node.calculateYPosition({marker:t,panel:s,yAxis:o,height:A,half:x,offset:D,stemHeight:C,inverted:m,field:a.field,x:k}),(t.tick||0===t.tick)&&(a.box={x0:k-(S||x),y0:w-x,x1:k+(S||x),y1:w+x,midY:x,midX:S||x,stemHeight:C},c=d?c[0].toUpperCase():"",r.startClip(s.name),M={x:k,y:w,half:x,radius:x,label:g||c,midWidth:S,headline:u,color:p},"circle"===h?e.Marker.Performance.drawCircleMarker(t,v,M):"square"===h||"diamond"===h?e.Marker.Performance.drawSquareMarker(t,v,M):"callout"===h?e.Marker.Performance.drawCalloutMarker(t,v,M):"text"===h?e.Marker.Performance.drawTextMarker(t,v,M):(i.H3A(83),console.warn(i.s_7(h,"Marker type: "," is unsupported with canvas markers!\nSupported Styles are Square, Diamond, Circle, and Callout."))),l.displayStem&&e.Marker.Performance.drawMarkerStem(t,b,{x:k,y:w,invert:m}),r.endClip(),t.attached&&this.positionPopUpNode(t))}},e.Marker.Performance.prototype.positionPopUpNode=function(t){var e,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;if(t.attached&&t.params.box){if(a=(e=t.params).stx,r=e.box,n=t.params.node.expand,s=a.chart.dataSet,o=a.chart.dataSegment,l=a.panels[e.panelName],t.tick){c=[s[o[0]&&o[0].tick-1],s[o[0]&&o[0].tick-2]],u=a.getFirstLastDataRecord(c.concat(o),"Date"),i.t7L(108);var S=i.R2a(2,16,0,10,3);i.H3A(109);var C=i.R2a(10,6,17);i.t7L(6);var A=i.s_7(7,2,6);d=[s[o[o.length-S].tick+C],s[o[o.length-A].tick+2]],p=a.getFirstLastDataRecord(o.concat(d),"Date",!0),h=u.DT<=s[t.tick].DT&&s[t.tick].DT<=p.DT&&t.params.box.y0<=l.yAxis.bottom&&t.params.box.y1>=l.yAxis.top}else h=!1;if(t.highlight||t.active||(h=!1),n.style.visibility=h?"":"hidden",h){""!==n.style.height&&(n.style.height=""),g=n.rects,i.H3A(2);var D=i.s_7(2,0);if(m=g.height/D,y=t.node.params.infoOffset||0,f=t.node.params.infoOnLeft?r.x0-g.width-y<l.left?r.x1+y:r.x0-g.width-y:r.x0+g.width>l.right?r.x0-g.width-y:r.x1+y,f-=a.chart.left,v=e.avoidFlush?5:0,b=r.y0-m>=l.yAxis.top?r.y0+r.midY-m:l.yAxis.top+v,!e.avoidFlush&&r.y1+r.stemHeight===l.yAxis.bottom&&g.height>r.y1-r.y0+r.stemHeight&&(b=r.y1-g.height+r.stemHeight),r.y1+m>l.yAxis.bottom&&(b=l.yAxis.bottom-g.height-v),g.height>l.yAxis.height){b=l.yAxis.top+v,i.H3A(110);var k=i.s_7(3,18,2,15);n.style.height=l.yAxis.height-k*v+"px"}b-=l.yAxis.top,x="translateX("+Math.floor(f)+"px) translateY("+Math.floor(b)+"px) translateZ(0)",n.style.transform=x,n.transform={translateX:f,translateY:b}}}},e.Marker.Performance.prototype.quickCache=function(t){var i,a,r;i=t.params.node.expand,a=t.style,r=e.stripPX(a.marginLeft)+e.stripPX(a.marginRight)+e.stripPX(a.borderRight)+e.stripPX(a.borderLeft),i.rects=i.getBoundingClientRect(),i.scrollBarWidth=i.rects.width-i.clientWidth-r},e.Marker.Performance.prototype.calculateYPosition=function(t){var e,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w;if("t","op_lane","t","o","p","above","_","cand","le","va","l","ue","no","n","e",e=t.marker,a=t.panel,r=t.yAxis,n=t.height,s=t.half,o=t.offset,l=t.stemHeight,h=t.inverted,c=t.field,d=(u=e.params.stx).chart,p=u.chart.highLowBars,i.q7W(),(g=d.dataSet[e.tick])&&(c&&(g=g[c]),g)){if("number"==typeof g&&((g={Close:g})[d.defaultPlotField]=g.Close,p=!1),m=u.getBarBounds(g,!!c),f=p?m[r.flipped?"low":"high"]:g[d.defaultPlotField],y=p?m[r.flipped?"high":"low"]:g[d.defaultPlotField],v=e.params.yPositioner,isNaN(f)){i.t7L(0);var M=i.s_7(21,20);f=(r.high+r.low)/("2"*M)}if(isNaN(y)){i.t7L(111);var T=i.s_7(18,2,2,10,4);y=(r.high+r.low)/("2"*T)}if(x=0,"none"!=v){i.t7L(1);var F=i.s_7(6,14,7);S=v.indexOf("_lane")>F,C=u.markerHelper.placementMap,i.t7L(39);var P=i.R2a(8,5,9,7);i.H3A(2);var _=i.R2a(4152,277);i.H3A(62);var L=i.s_7(1,9,1848,20465,15);i.H3A(107);var E=i.s_7(1105,20,87,8);A=v+("296"*P<404.91?271.96!=_?"|":L:E)+a.name,S&&void 0===C[A]&&(C[A]=2),i.t7L(2);i.s_7(11,316);i.H3A(112);var I=i.s_7(148,740,8874,2);i.H3A(24);var N=i.R2a(33209,8298,5);i.H3A(13);i.s_7(159,951,954);i.H3A(113);var O=i.R2a(16,4403,4755,19);i.H3A(114);var H=i.s_7(12,9721,1,5);i.H3A(39);var R=i.R2a(88,5,4,1071);void 0===C[D=A+(I>=871.63?2490<=N?"-":66.88>=O?902.43:H:R)+(S?e.params.label:t.x)]&&(C[D]=S?C[A]:0,i.t7L(17),C[A]+=i.s_7("2",1,n)),x=C[D],S||(i.H3A(2),C[D]+=i.R2a(1,n))}switch(v){case"value":if(e.params.y||0===e.params.y){b=u.pixelFromPrice(e.params.y,a,r)-.5*n+s,-1207519557,i.t7L(16),k=i.R2a(1,"1160079997"),i.H3A(0),w=i.R2a("2",0);var z=1;if(i.Z1$(z.toString(),z.toString().length,2308),i.Z1$(w.toString(),w.toString().length,40108)!==k)break}case"above_candle":b=u.pixelFromPrice(f,a,r)-s-(!h&&l||o)-x;break;case"below_candle":b=u.pixelFromPrice(y,a,r)+s+(h&&l||o)+x;break;case"on_candle":i.H3A(6);var j=i.R2a(20,12,10);b=u.pixelFromPrice((f+y)/j,a,r)-.5*n+s;break;case"top":case"top_lane":b=a.yAxis.top+s+(h&&l||o)+x;break;case"bottom":case"bottom_lane":b=a.yAxis.bottom-s-(!h&&l||o)-x}return Math.round(2*b)/2}},e.Marker.Performance.prototype.prepareForHolder=function(t){var e,a;return i.q7W(),e=this.expand,a=t.params.stx,e.classList.add(this.params.type),e.classList.add(this.params.category),a.markerHelper.domMarkers.push(t),e},e.Marker.Performance.prototype.addToHolder=function(t){var a,r;function n(e){i.T4K(),r.activeMarker=t,r.activeMarker.click({cx:e.clientX,cy:e.clientY,panel:r.currentPanel}),e.stopPropagation()}a=this.expand,r=t.params.stx,e.Marker.Performance.reconstituteExpanded(r),e.Marker.Performance.consolidateExpanded(r),this.quickCache(t),a.clickClosure||(a.addEventListener("mousedown",n),a.addEventListener("touchstart",n,{passive:!1}),a.clickClosure=n)},e.Marker.Performance.prototype.remove=function(t){var e,a,r,n;(e=t.params.stx)&&(i.q7W(),e.markerHelper.domMarkers&&(-1!=(a=e.markerHelper.domMarkers.indexOf(t))&&e.markerHelper.domMarkers.splice(a,1),t.attached&&("c","l","i","ck",r=e.panels[t.params.panelName],(n=t.params.node.expand).parentNode===r.subholder&&r.subholder.removeChild(n),n.removeEventListener("click",n.clickClosure))))},e.Marker.Performance.prototype.click=function(t){var e;if(i.T4K(),this.hasText){arguments.length>1&&(t={cx:arguments[0],cy:arguments[1],marker:arguments[2],panel:arguments[3]});var{cx:a,marker:r}=t,{stx:n}=r.params;if(e=!1,r.attached){var{expand:s}=this;if(s.rects&&s.transform&&s.rects.width-s.scrollBarWidth+s.transform.translateX<n.backOutX(a)&&n.backOutX(a)<s.rects.width+s.transform.translateX)return;this.remove(r)}else n.addToHolder(r),e=!0;r.attached=!r.attached,r.active=!r.active,e&&r.stxNodeCreator.positionPopUpNode(r)}}):("highPerformanc","eMarkers feature requires first activating ","markers feature.",console.error("highPerformanceMarkers feature requires first activating markers feature."))},h=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Renderer.OHLC.requestNew=function(t,i){var a,r,n,s,o,l,h;a=null,r=i.hlc,At.q7W(),n=i.colored,s=i.hollow,o=i.volume,l=i.histogram;for(var c=0;c<t.length;c++)switch("hol","low","vo","lume","b","a","r",h=t[c]){case"bar":case"candle":a=h;break;case"volume":o=!0;break;case"hollow":s=!0;break;case"colored":n=!0;break;case"histogram":"c","a","nd","le",l=!0,a="candle";break;case"hlc":r=!0,a="bar";break;default:return null}return null===a?null:new e.Renderer.OHLC({params:e.extend(i,{type:a,hlc:r,colored:n,hollow:s,volume:o,histogram:l})})},e.Renderer.OHLC.getChartParts=function(t,e){var i;return"st","x_holl",At.T4K(),"ow_cand","le_even","st","x_ho","llow_candle_dow","n","ca","ndl","e","fill_col","or_even","fill_c","ol","or_","down","fill_co","lor_up","stx_h","ol","low_candle_u","p","hol","low","border","_color","_d","own","s","hadow","fill_col","or","_d","own","c","and","le","stx_cand","l","e_up","candl","e","border_color_do","wn","st","x_c","andle_shadow_up","border_colo","r_up","can","d","le","border_col","or_dow","n","b","a","r","b","a","r","border_color_eve","n","b","order_co","l","or_up","histo","g","r","am",1,2,4,8,32,[{type:"histogram",drawType:"histogram",style:"stx_histogram_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_down",condition:i=16,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"histogram",drawType:"histogram",style:"stx_histogram_even",condition:32,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0,useBorderStyleProp:!0},{type:"bar",drawType:"bar",style:t||"stx_bar_chart",border:"border_color",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_up",condition:e?8:1,border:"border_color_up",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_down",condition:e?i:2,border:"border_color_down",useColorInMap:!0},{type:"bar",drawType:"bar",style:"stx_bar_even",condition:e?32:4,border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"candle",drawType:"shadow",style:"stx_candle_shadow",border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_up",condition:8,border:"border_color_up"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_down",condition:i,border:"border_color_down"},{type:"candle",drawType:"shadow",style:"stx_candle_shadow_even",condition:32,border:"border_color_even",skipIfPass:!0},{type:"candle",drawType:"candle",style:"stx_candle_up",condition:8,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0,useBorderStyleProp:!0},{type:"candle",drawType:"candle",style:"stx_candle_down",condition:i,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0,useBorderStyleProp:!0},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_up",condition:1,border:"border_color_up"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_down",condition:2,border:"border_color_down"},{type:"hollow",drawType:"shadow",style:"stx_hollow_candle_even",condition:4,border:"border_color_even",skipIfPass:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:17,fill:"fill_color_up",border:"border_color_up",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:18,fill:"fill_color_down",border:"border_color_down",useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:20,fill:"fill_color_even",border:"border_color_even",skipIfPass:!0,useColorInMap:!0},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_up",condition:9,fill:"fill_color_up",border:"border_color_up"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_down",condition:10,fill:"fill_color_down",border:"border_color_down"},{type:"hollow",drawType:"candle",style:"stx_hollow_candle_even",condition:12,fill:"fill_color_even",border:"border_color_even"}]},e.Renderer.Bars=function(t){var e;this.construct(t),(e=this.params).type="bar",this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.hlc=e.volume=e.hollow=e.histogram=!1},e.inheritsFrom(e.Renderer.Bars,e.Renderer.OHLC,!1),e.Renderer.HLC=function(t){var e;At.q7W(),this.construct(t),(e=this.params).type="bar",e.hlc=!0,this.highLowBars=this.barsHaveWidth=this.standaloneBars=!0,e.volume=e.hollow=e.histogram=!1},e.inheritsFrom(e.Renderer.HLC,e.Renderer.Bars,!1),e.Renderer.Shading=function(t){At.T4K(),this.construct(t),this.beenSetup=!1,this.errTimeout=null,this.params.useChartLegend=!1,this.shading=[],"rangechannel"==this.params.type&&(this.highLowBars=!0)},e.inheritsFrom(e.Renderer.Shading,e.Renderer.Lines,!1),e.Renderer.Shading.requestNew=function(t,i){var a,r,n;a=null,r=null,At.T4K();for(var s=0;s<t.length;s++)"rangechannel"==(n=t[s])?a="rangechannel":"step"==n&&(r=!0);return null===a?null:new e.Renderer.Shading({params:e.extend(i,{type:a,step:r})})},e.Renderer.Shading.prototype.setShading=function(t){t.constructor!=Array&&(t=[t]),this.shading=t},e.Renderer.Shading.prototype.draw=function(){var t,i,a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v=At;for("ra","ngechan","nel","r","angechannel",t=this.stx,i=this.params,a=t.panels[i.panel].chart,"rangechannel"==i.type&&(this.beenSetup?this.seriesParams.length>2&&this.removeSeries(this.seriesParams[2].id):("S","h","adin","g","Shad","ing","Hi","gh",this.beenSetup=!0,i.display=this.seriesParams[0].display,i.yAxis=this.seriesParams[0].yAxis,r=this.seriesParams[0].color||"auto","",(n=this.seriesParams[0].symbol)&&(v.H3A(2),v.s_7(".",n)),this.removeAllSeries(!0),s=i.name,t.addSeries(null,{symbol:n,loadData:!!n,field:"High",renderer:"Shading",name:s,style:"stx_line_up",display:i.display,shareYAxis:!0}),t.addSeries(null,{symbol:n,loadData:!!n,field:"Low",renderer:"Shading",name:s,style:"stx_line_down",display:i.display,shareYAxis:!0}),this.setShading({primary:this.seriesParams[0].id,secondary:this.seriesParams[1].id,color:r}))),this.shading||this.errTimeout||(console.log("Warning: no shading scheme set.  Use myRenderer.setShading(scheme) to set."),o=this,this.errTimeout=setTimeout((function(){o.errTimeout=null}),1e4)),l={},h=0;h<this.seriesParams.length;h++)c={},a.series[this.seriesParams[h].id]&&(c=e.clone(a.series[this.seriesParams[h].id].parameters)),l[this.seriesParams[h].id]={parameters:e.extend(e.extend(c,i),this.seriesParams[h]),yValueCache:this.caches[this.seriesParams[h].id]};function b(t){var e,i,a;return(e=l[t])?(i=e.parameters.field,a=e.parameters.subField,v.t7L(2),v.R2a(a?"."+a:"",i)):t}for(h in t.drawSeries(a,l,i.yAxis,this),a.legend&&"rangechannel"==i.type&&("stx","_line_","up",a.legend.colorMap||(a.legend.colorMap={}),u=i.display,d=[t.getCanvasColor("stx_line_up"),t.getCanvasColor("stx_line_down")],a.legend.colorMap[u]={color:d,display:u,isBase:this==t.mainSeriesRenderer}),l)this.caches[h]=l[h].yValueCache;for(h=0;h<this.shading.length;h++)"au","to",g=(p=this.shading[h]).color,"auto"==p.color&&(g=t.defaultColor),p.primary||(p.primary="Close"),!p.secondary&&this.seriesParams[0]&&(p.secondary=this.seriesParams[0].field),p.secondary&&(l[p.primary]||"Close"==p.primary)&&l[p.secondary]&&("Close"==p.primary&&i.yAxis&&i.yAxis!=a.yAxis||(m=b(p.primary).split("."),f=b(p.secondary).split("."),((y={topBand:m[0],topSubBand:m[1],topColor:p.greater||g||t.containerColor,topAxis:i.yAxis,bottomBand:f[0],bottomSubBand:f[1],bottomColor:p.lesser||g||t.containerColor,bottomAxis:"Close"==p.primary?null:i.yAxis,tension:i.tension||a.tension,opacity:.1,step:i.step}).topColor||y.bottomColor)&&(!i.highlight&&t.highlightedDraggable&&(v.H3A(0),y.opacity*=v.s_7("0.3",0)),e.fillIntersecting(t,i.panel,y))))},e.Renderer.Histogram=function(t){this.construct(t),this.params.type="histogram",this.barsHaveWidth=this.standaloneBars=!0,this.params.yAxis&&(this.params.bindToYAxis=!0,"number"==typeof this.params.yAxis.baseline&&(this.params.yAxis.baseline={value:this.params.yAxis.baseline}))},e.inheritsFrom(e.Renderer.Histogram,e.Renderer,!1),e.Renderer.Histogram.prototype.adjustYAxis=function(){var t;(t=this.params.yAxis)&&!t.baseline&&(t.min=0,At.T4K(),t.highValue/=this.params.heightPercentage||1)},e.Renderer.Histogram.prototype.draw=function(){var t,i,a,r,n;if("s","t","ack","ed",(t=e.clone(this.params)).type=t.subtype,this.useSum="stacked"==t.subtype,t.yAxis&&t.yAxis!=this.stx.chart.yAxis||(t.bindToYAxis=!0),this.stx.drawHistogram(t,this.seriesParams),(i=t.yAxis&&t.yAxis.baseline)&&i.color){"des","tinati","on-o","ver",a=this.stx.panels[this.params.panel],r=this.stx.pixelFromPrice(i.value,a,this.params.yAxis)-.5,-803960555,1680577187,n=2;for(var s=1;-803960555!==At.Z1$(s.toString(),s.toString().length,35249);s++)this.stx.plotLine({x0:a.left,x1:a.right,y0:r,y1:r,color:i.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:i.pattern&&"line",lineWidth:i.lineWidth&&7,opacity:i.opacity&&302,globalCompositeOperation:"line"}),n+=2;1680577187!==At.Z1$(n.toString(),n.toString().length,58090)&&("li","ne","lin","e",this.stx.plotLine({x0:a.left,x1:a.right,y0:r,y1:r,color:i.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:i.pattern||"line",lineWidth:i.lineWidth||8,opacity:i.opacity||845,globalCompositeOperation:"line"})),this.stx.plotLine({x0:a.left,x1:a.right,y0:r,y1:r,color:i.color,type:"line",context:a.chart.context,confineToPanel:a,pattern:i.pattern||"solid",lineWidth:i.lineWidth||1,opacity:i.opacity||.8,globalCompositeOperation:"destination-over"})}},e.Renderer.Histogram.prototype.getBasis=function(t,e,i){var a,r,n,s;a=2;for(var o=1;588304009!==At.v0U(o.toString(),o.toString().length,4188);o++)r=0,a+=2;if(1832273670!==At.Z1$(a.toString(),a.toString().length,32956)&&(r=1),t&&this.useSum)for(var l=0;l<this.seriesParams.length&&("obje","ct",(n=this.seriesParams[l].field)!==e);l++)(s=t[n])&&"object"==typeof s&&(s=s[i||this.seriesParams[l].subField||this.stx.chart.defaultPlotField||"Close"]),s&&(r+=s);return At.T4K(),r},e.Renderer.Heatmap=function(t){this.construct(t),this.params.type="heatmap",this.params.highlightable=!1,this.barsHaveWidth=this.standaloneBars=!0},e.inheritsFrom(e.Renderer.Heatmap,e.Renderer,!1),e.Renderer.Heatmap.requestNew=function(t,i){var a;At.T4K(),a=null;for(var r=0;r<t.length;r++)"heatmap"==t[r]&&(a="heatmap");return null===a?null:new e.Renderer.Heatmap({params:e.extend(i,{type:a})})},e.Renderer.Heatmap.prototype.draw=function(){At.q7W(),this.stx.drawHeatmap(e.clone(this.params),this.seriesParams)},e.Renderer.Scatter=function(t){At.q7W(),this.construct(t),this.standaloneBars=this.barsHaveWidth=!0,this.bounded=!0},e.inheritsFrom(e.Renderer.Scatter,e.Renderer.Lines,!1),e.Renderer.Scatter.requestNew=function(t,i){var a;a=null;for(var r=0;r<t.length;r++)"s","catte","r","scatterplot"==t[r]&&(a="scatter");return null===a?null:new e.Renderer.Scatter({params:e.extend(i,{type:a})})},e.Renderer.Scatter.prototype.drawIndividualSeries=function(t,e){var i,a;return"Error, Scatter renderer r","equir","e","s customChart.js",i=this.stx.panels[e.panel]||t.panel,At.T4K(),a={colors:[]},this.stx.scatter?a=this.stx.scatter(i,e):console.warn("Error, Scatter renderer requires customChart.js"),a}},c=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateAccumulationDistribution=function(t,e){var a,r,n,s,o;i.T4K(),a=e.chart.scrubbed;for(var l=e.startFrom;l<a.length;l++)if("Res","u","l","t ",l){if((r=a[l]).futureTick)break;i.t7L(0),n=a[i.s_7(l,1)],s=0,r.Close>n.Close?s=r.Close-Math.min(r.Low,n.Close):r.Close<n.Close&&(s=r.Close-Math.max(r.High,n.Close)),e.inputs["Use Volume"]&&(s*=r.Volume),(o=n["Result "+e.name])||(o=0),o+=s,isNaN(r.Close)||(r["Result "+e.name]=o)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"W Acc Dist":{name:"Accumulation/Distribution",calculateFN:e.Studies.calculateAccumulationDistribution,inputs:{"Use Volume":!1}}})):console.error("accumulationDistribution feature requires first activating studies feature.")},u=t=>{var e,i;if((e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies){e.Studies.calculateADX=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y=At;if(e.Studies.calculateStudyATR(t,i),a=i.chart.scrubbed,r=i.days,(n=parseInt(i.inputs["Smoothing Period"],10))||0===n||(n=r),a.length<i.days+1)i.error=!0;else{y.q7W(),s=0,o=0,l=0,h=0;for(var v=Math.max(1,i.startFrom);v<a.length;v++){if("-D","I ","_sm+DM"," ",c=a[v],u=Math.max(0,c.High-a[v-1].High),y.t7L(21),u>(d=Math.max(y.R2a(0,"0"),a[v-1].Low-c.Low))?d=0:u=d>u?0:d=0,v<=r)o+=u,l+=d,s+=c["True Range "+i.name];else{y.t7L(52);var b=y.R2a(14,24,9);y.H3A(4);var x=y.R2a(0,7,7,15);o=a[v-b]["_sm+DM "+i.name]*(r-x)/r+u,y.H3A(115);var S=y.R2a(2,17,17);y.t7L(37);var C=y.R2a(8,16,129);l=a[v-S]["_sm-DM "+i.name]*(r-C)/r+d,y.H3A(35);var A=y.s_7(10,4,7,17);y.t7L(1);var D=y.s_7(0,3,4);s=a[v-A]["_smTR "+i.name]*(r-D)/r+c["True Range "+i.name]}if(c["_sm+DM "+i.name]=o,c["_sm-DM "+i.name]=l,c["_smTR "+i.name]=s,!(v<r)){if(y.t7L(96),p=y.s_7(s,100,o),y.t7L(116),g=y.R2a(s,"100",l),m=100*Math.abs(p-g)/(p+g),c["+DI "+i.name]=p,c["-DI "+i.name]=g,!1!==i.inputs.Series&&n)if(v<r+n-1){if(v==i.startFrom)for(var k=r;k<i.startFrom;k++){"-DI"," ",y.t7L(13),h+=y.R2a(1,93,7)*Math.abs(a[k]["+DI "+i.name]-a[k]["-DI "+i.name])/(a[k]["+DI "+i.name]+a[k]["-DI "+i.name])}h+=m}else if(v==r+n-1)y.H3A(8),c["ADX "+i.name]=y.R2a(h,n);else{y.t7L(117);var w=y.s_7(9,6,593,11);c["ADX "+i.name]=(a[v-w]["ADX "+i.name]*(n-1)+m)/n}if(i.inputs.Histogram){if("+","D","I"," ","-D","I"," ","+","DI ","_","h","ist",f=i.name+"_hist",!c["+DI "+i.name]&&0!==c["+DI "+i.name])continue;if(!c["-DI "+i.name]&&0!==c["-DI "+i.name])continue;c[f]=c["+DI "+i.name]-c["-DI "+i.name],!1===i.inputs.Series&&("-","D","I"," ",c["+DI "+i.name]=null,c["-DI "+i.name]=null),i.outputMap[f]=""}}}}},e.Studies.displayADX=function(t,i,a){var r,n,s,o,l,h,c;At.q7W(),r=i.underlay?.3:i.inputs.Series?.4:1,i.inputs.Series&&i.inputs.Shading&&("-","D","I"," ","+","DI"," ",n="+DI "+i.name,s="-DI "+i.name,o=e.Studies.determineColor(i.outputs[i.outputMap[n]]),l=e.Studies.determineColor(i.outputs[i.outputMap[s]]),h=i.getYAxis(t),c={topBand:n,bottomBand:s,topColor:o,bottomColor:l,skipTransform:t.panels[i.panel].name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&t.highlightedDraggable&&(c.opacity*=.3),e.fillIntersecting(t,i.panel,c)),i.inputs.Histogram&&e.Studies.createHistogram(t,i,a,!1,r),!1!==i.inputs.Series?e.Studies.displaySeriesAsLine(t,i,a):i.inputs.Series||i.inputs.Histogram||t.displayErrorAsWatermark(i.panel,t.translateIf(i.name)+": "+t.translateIf("Nothing to display"))},-537419825,-1793115220,i=2;for(var a=1;-537419825!==At.Z1$(a.toString(),a.toString().length,8641);a++)"#00FF","00",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{ADX:{name:"ADX/DMS",calculateFN:e.Studies.calculateADX,seriesFN:e.Studies.displayADX,inputs:{Period:14,"Smoothing Period":14,Series:!0,Shading:!1,Histogram:!1},outputs:{"+DI":"#00FF00","-DI":"#FF0000",ADX:"auto","Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}}),i+=2;-1793115220!==At.v0U(i.toString(),i.toString().length,13610)&&("-","D","I",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{ADX:{name:"+DI",calculateFN:e.Studies.calculateADX,seriesFN:e.Studies.displayADX,inputs:{Period:92,"Smoothing Period":51,Series:!1,Shading:!0,Histogram:!0},outputs:{"+DI":"-DI","-DI":"#FF0000",ADX:"Positive Bar","Positive Bar":"Smoothing Period","Negative Bar":"#FF0000"}}}))}else"adx ","feature requires fi","rst activating"," studies feature.",console.error("adx feature requires first activating studies feature.")},d=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#FF","000","0","#00D","D00","#FF0","000",e.Studies.calculateAlligator=function(t,a){var r,n,s,o,l;if(r={J:Number(a.inputs["Jaw Period"]),T:Number(a.inputs["Teeth Period"]),L:Number(a.inputs["Lips Period"])},(n=a.chart.scrubbed).length<Math.max(r.J,r.T,r.L)+1)a.error=!0;else{("Gator"===a.type||a.inputs["Show Lines"])&&("L","i","ps","welles wild","er",e.Studies.MA("welles wilder",r.J,"hl/2",a.inputs["Jaw Offset"],"Jaw",t,a),e.Studies.MA("welles wilder",r.T,"hl/2",a.inputs["Teeth Offset"],"Teeth",t,a),e.Studies.MA("welles wilder",r.L,"hl/2",a.inputs["Lips Offset"],"Lips",t,a));for(var h=a.startFrom;h<n.length;h++)if(n[h]&&("Gator"==a.type&&("_","h","is","t2","J","a","w ",s=n[h]["Jaw "+a.name],o=n[h]["Lips "+a.name],((l=n[h]["Teeth "+a.name])||0===l)&&((s||0===s)&&(i.H3A(0),n[h][a.name+"_hist1"]=Math.abs(i.s_7(s,l))),(o||0===o)&&(i.H3A(0),n[h][a.name+"_hist2"]=-Math.abs(i.s_7(l,o)))),a.outputMap={},a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""),a.inputs["Show Fractals"])){if(!(n[h-2]&&n[h-1]&&n[h]&&n[h+1]&&n[h+2]))continue;n[h-2].High&&n[h-1].High&&n[h].High&&n[h+1].High&&n[h+2].High&&n[h].High>n[h-1].High&&n[h].High>n[h-2].High&&n[h].High>n[h+1].High&&n[h].High>n[h+2].High&&("Fractal High"," ",n[h]["Fractal High "+a.name]=1),n[h-2].Low&&n[h-1].Low&&n[h].Low&&n[h+1].Low&&n[h+2].Low&&n[h].Low<n[h-1].Low&&n[h].Low<n[h-2].Low&&n[h].Low<n[h+1].Low&&n[h].Low<n[h+2].Low&&("Fract","al Low ",n[h]["Fractal Low "+a.name]=1)}}},e.Studies.displayAlligator=function(t,a,r){var n;function s(e,a){var s,l;i.T4K(),l=t.chart.panel.yAxis.flipped,"high"==e?(n.fillStyle=t.defaultColor,n.textBaseline=l?"top":"bottom",s=t.pixelFromPrice(r[a].High),n.fillText(l?"":"",t.pixelFromBar(o,t.chart)-n.measureText("").width/2+1,l?s+5:s-5)):"low"==e&&("t","o","p",n.fillStyle=t.defaultColor,n.textBaseline=l?"bottom":"top",s=t.pixelFromPrice(r[a].Low),n.fillText(l?"":"",t.pixelFromBar(o,t.chart)-n.measureText("").width/2+1,l?s-5:s+5))}if("Sho","w Lines",n=a.getContext(t),a.inputs["Show Lines"]&&e.Studies.displaySeriesAsLine(t,a,r),a.inputs["Show Fractals"]){t.startClip(),n.globalAlpha=a.underlay?.3:1,!a.highlight&&t.highlightedDraggable&&(i.H3A(16),n.globalAlpha*=i.s_7(1,"0.3"));for(var o=2;o<r.length-2;o++)r[o]&&("lo","w","hig","h",r[o]["Fractal High "+a.name]&&s("high",o),r[o]["Fractal Low "+a.name]&&s("low",o));t.endClip()}},e.Studies.displayGator=function(t,a,r){var n,s,o,l,h,c,u,d,p;n=t.panels[a.panel],s=a.getContext(t),o=a.getYAxis(t),l=t.pixelFromPrice(0,n,o),i.H3A(71);var g=i.R2a(79,6,11,0,13);(h=t.layout.candleWidth-g)<2&&(h=1),c=e.Studies.determineColor(a.outputs["Increasing Bar"]),u=e.Studies.determineColor(a.outputs["Decreasing Bar"]),t.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),s.fillStyle="#CCCCCC",t.startClip(a.panel),!a.highlight&&t.highlightedDraggable&&(s.globalAlpha*=.3);for(var m=0;m<r.length;m++)if(d=r[m],i.H3A(0),p=r[i.s_7(m,1)],d)for(var f=1;f<=2;f++)"_his","t",p||(p=t.getPreviousBar(t.chart,a.name+"_hist"+f,m)),p?Math.abs(p[a.name+"_hist"+f])<Math.abs(d[a.name+"_hist"+f])?s.fillStyle=c:Math.abs(p[a.name+"_hist"+f])>Math.abs(d[a.name+"_hist"+f])&&(s.fillStyle=u):s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(t.pixelFromBar(m,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(t.pixelFromPrice(d[a.name+"_hist"+f],n,o)-l));t.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Alligator:{name:"Alligator",overlay:!0,seriesFN:e.Studies.displayAlligator,calculateFN:e.Studies.calculateAlligator,inputs:{"Show Lines":!0,"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3,"Show Fractals":!1},outputs:{Jaw:"#0000FF",Teeth:"#FF0000",Lips:"#00DD00"}},Gator:{name:"Gator Oscillator",seriesFN:e.Studies.displayGator,calculateFN:e.Studies.calculateAlligator,inputs:{"Jaw Period":13,"Jaw Offset":8,"Teeth Period":8,"Teeth Offset":5,"Lips Period":5,"Lips Offset":3},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0}})):console.error("alligator feature requires first activating studies feature.")},p=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#0","0DD00",e.Studies.calculateAroon=function(t,e){var a,r,n,s,o,l,h,c,u,d,p,g;if((a=e.chart.scrubbed).length<e.days+1)e.error=!0;else{if(r=0,i.H3A(16),n=i.R2a(1,"0"),s=null,o=null,e.startFrom>0){i.H3A(118);var m=i.R2a(6,6,2,2,2);(l=a[e.startFrom-m]["_state "+e.name])&&(r=l[0],n=l[1],s=l[2],o=l[3])}for(var f=e.startFrom;f<a.length&&("_stat","e ","Aroo","n D","ow","n ",!(c=a[f]).futureTick);f++){if(null===s&&(s=c.High),null===o&&(o=c.Low),(s=Math.max(s,c.High))==c.High)i.t7L(9),r=i.s_7(0,"0");else if(++r>e.days)for(s=c.High,r=0,h=1;h<=e.days;h++)(s=Math.max(s,a[f-h].High))==a[f-h].High&&(r=h);if((o=Math.min(o,c.Low))==c.Low)n=0;else if(++n>e.days)for(o=c.Low,n=0,h=1;h<=e.days;h++)(o=Math.min(o,a[f-h].Low))==a[f-h].Low&&(n=h);u=!isNaN(c.High),d=!isNaN(c.Low),i.t7L(13);var y=i.R2a(25,98,50);i.t7L(7),p=y*(i.s_7(9,6,4,0)-r/e.days),u&&(c["Aroon Up "+e.name]=p),g=100*(1-n/e.days),d&&(c["Aroon Down "+e.name]=g),u&&d&&(c["Aroon Oscillator "+e.name]=c["Aroon Up "+e.name]-c["Aroon Down "+e.name]),c["_state "+e.name]=[r,n,s,o]}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Aroon:{name:"Aroon",range:"0 to 100",calculateFN:e.Studies.calculateAroon,outputs:{"Aroon Up":"#00DD00","Aroon Down":"#FF0000"}},"Aroon Osc":{name:"Aroon Oscillator",calculateFN:e.Studies.calculateAroon,outputs:{"Aroon Oscillator":"auto"}}})):console.error("aroon feature requires first activating studies feature.")},g=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("au","to","STA","RC Ban","d","s","ATR Ban","ds","Av","e","rage True Range",e.Studies.calculateATRBands=function(t,i){var a;e.Studies.calculateStudyATR(t,i),(a=i.inputs.Field)&&"field"!=a||(a="Close"),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Shift,a,"ATR "+i.name)},e.Studies.calculateSTARCBands=function(t,i){At.q7W(),e.Studies.calculateStudyATR(t,i),e.Studies.MA("simple",i.inputs["MA Period"],"Close",0,"_MA",t,i),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Multiplier,"_MA "+i.name,"ATR "+i.name)},e.Studies.calculateATRStops=function(t,i){var a,r,n,s,o,l,h,c,u=At;if(a=i.chart.scrubbed){e.Studies.calculateStudyATR(t,i),r=i.inputs.HighLow;for(var d=Math.max(i.startFrom-1,1);d<a.length-1;d++)"All S","tops ","A","TR"," ","Buy"," ","Stops ",n=a[d],u.t7L(0),s=a[u.R2a(d,1)],(o=n["Buy Stops "+i.name])||(o=n["Sell Stops "+i.name]),o||(o=0),n&&s&&(h=l=n.Close,c=n["ATR "+i.name]*i.inputs.Multiplier,n.Close>o&&s.Close>o?(r&&(l=n.High),u.H3A(0),h=Math.max(o,u.s_7(l,c))):n.Close<=o&&s.Close<=o?(r&&(l=n.Low),u.t7L(2),h=Math.min(o,u.s_7(c,l))):n.Close>o?(r&&(l=n.High),u.H3A(0),h=u.s_7(l,c)):n.Close<=o&&(r&&(l=n.Low),u.t7L(2),h=u.R2a(c,l)),l<=h?(u.t7L(2),a[u.R2a(1,d)]["Buy Stops "+i.name]=h,u.H3A(2),delete a[u.s_7(1,d)]["Sell Stops "+i.name]):l>h&&(u.t7L(2),a[u.R2a(1,d)]["Sell Stops "+i.name]=h,u.H3A(2),delete a[u.s_7(1,d)]["Buy Stops "+i.name]),u.H3A(98),a[u.R2a("1",d)]["All Stops "+i.name]=h);i.referenceOutput="All Stops",i.outputMap={},u.T4K(),i.outputMap["All Stops "+i.name]=""}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{ATR:{name:"Average True Range",calculateFN:e.Studies.calculateStudyATR,outputs:{ATR:"auto"}},"ATR Bands":{name:"ATR Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateATRBands,inputs:{Period:5,Field:"field",Shift:3,"Channel Fill":!0},outputs:{"ATR Bands Top":"auto","ATR Bands Bottom":"auto","ATR Bands Channel":"auto"},attributes:{Shift:{min:.1,step:.1}}},"STARC Bands":{name:"STARC Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateSTARCBands,inputs:{Period:15,"MA Period":5,Multiplier:1.3,"Channel Fill":!0},outputs:{"STARC Bands Top":"auto","STARC Bands Median":"auto","STARC Bands Bottom":"auto"},attributes:{Multiplier:{min:.1,step:.1}}},"ATR Trailing Stop":{name:"ATR Trailing Stops",overlay:!0,seriesFN:e.Studies.displayPSAR2,calculateFN:e.Studies.calculateATRStops,inputs:{Period:21,Multiplier:3,"Plot Type":["points","squarewave"],HighLow:!1},outputs:{"Buy Stops":"#FF0000","Sell Stops":"#00FF00"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("atr feature requires first activating studies feature.")},m=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#","00DD00",e.Studies.calculateAwesomeOscillator=function(t,i){var a;if("_","h","is","t","_","MA34","s","i","mple",(a=i.chart.scrubbed).length<33)i.error=!0;else{At.t7L(0),At.q7W(),e.Studies.MA("simple",5,"hl/2",At.R2a("0",0),"_MA5",t,i),e.Studies.MA("simple",34,"hl/2",0,"_MA34",t,i);for(var r=Math.max(i.startFrom,33);r<a.length;r++)"_M","A34 ","_","MA","5"," ",a[r]&&(a[r][i.name+"_hist"]=a[r]["_MA5 "+i.name]-a[r]["_MA34 "+i.name]);i.outputMap={},i.outputMap[i.name+"_hist"]=""}},e.Studies.displayAwesomeOscillator=function(t,i,a){var r,n,s,o,l,h,c,u,d,p=At;p.T4K(),r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),o=t.pixelFromPrice(0,r,s),p.H3A(6);var g=p.s_7(4,5,1);(l=t.layout.candleWidth-g)<2&&(l=1),h=e.Studies.determineColor(i.outputs["Increasing Bar"]),c=e.Studies.determineColor(i.outputs["Decreasing Bar"]),t.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),n.fillStyle="#CCCCCC",t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3);for(var m=0;m<a.length;m++)"_hi","st","_h","ist",u=a[m],p.t7L(0),(d=a[p.R2a(m,1)])||(d=t.getPreviousBar(t.chart,i.name+"_hist",m)),u&&(d&&(d[i.name+"_hist"]<u[i.name+"_hist"]?n.fillStyle=h:d[i.name+"_hist"]>u[i.name+"_hist"]&&(n.fillStyle=c)),u.candleWidth&&(l=Math.floor(Math.max(1,u.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(m,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(t.pixelFromPrice(u[i.name+"_hist"],r,s)-o)));t.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Awesome:{name:"Awesome Oscillator",seriesFN:e.Studies.displayAwesomeOscillator,calculateFN:e.Studies.calculateAwesomeOscillator,inputs:{},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):("awesomeOscillator feature requires first activating s","tudies feature.",console.error("awesomeOscillator feature requires first activating studies feature."))},f=t=>{var e;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,At.q7W(),e.Studies?("m","a",e.Studies.calculateBalanceOfPower=function(t,i){var a,r;if(At.T4K(),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var n=i.startFrom;n<a.length;n++)"_","R","at","io ",(r=a[n])["_Ratio "+i.name]=r.Close-r.Open,r.High-r.Low!=0&&(r["_Ratio "+i.name]/=r.High-r.Low);e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Ratio "+i.name,0,"Result",t,i)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Bal Pwr":{name:"Balance of Power",range:"-1 to 1",centerline:0,calculateFN:e.Studies.calculateBalanceOfPower,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("balanceOfPower feature requires first activating studies feature.")},y=t=>{var e;At.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Bollinge","r Bandwidth","a","u","t","o","a","uto","B","oll","inger ","%b","fie","ld",e.Studies.calculateBollinger=function(t,i){var a;(a=i.inputs.Field)&&"field"!=a||(a="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"_MA",t,i),i.std=new e.Studies.StudyDescriptor(i.name,"STD Dev",i.panel),i.std.chart=i.chart,i.std.startFrom=i.startFrom,At.T4K(),i.std.days=i.days,i.std.inputs={Field:a,"Standard Deviations":1,Type:i.inputs["Moving Average Type"]},i.std.outputs={"_STD Dev":null},e.Studies.calculateStandardDeviation(t,i.std),e.Studies.calculateGenericEnvelope(t,i,i.inputs["Standard Deviations"],"_MA "+i.name,"_STD Dev "+i.name),"Boll %b"==i.type&&(i.zoneOutput="%b")},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Bollinger Bands":{name:"Bollinger Bands",overlay:!0,calculateFN:e.Studies.calculateBollinger,seriesFN:e.Studies.displayChannel,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"Bollinger Bands Top":"auto","Bollinger Bands Median":"auto","Bollinger Bands Bottom":"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll %b":{name:"Bollinger %b",calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{"%b":"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:0,studyOverSoldColor:"auto"}},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Boll BW":{name:"Bollinger Bandwidth",calculateFN:e.Studies.calculateBollinger,inputs:{Period:20,Field:"field","Standard Deviations":2,"Moving Average Type":"ma"},outputs:{Bandwidth:"auto"},attributes:{"Standard Deviations":{min:.1,step:.1}}}})):console.error("bollinger feature requires first activating studies feature.")},v=t=>{var e,i,a=At;a.t7L(21),e=a.R2a(2,"2");for(var r=1;597514603!==a.v0U(r.toString(),r.toString().length,55855);r++)i=""===+_CIQ?_CIQ:t.CIQ,e+=2;a.T4K(),1238174392!==a.Z1$(e.toString(),e.toString().length,82371)&&(i="undefined"!=typeof _CIQ?_CIQ:t.CIQ),i.Studies?(i.Studies.calculateCCI=function(t,e){var r,n,s;if("M","A",(r=e.chart.scrubbed).length<e.days+1)e.error=!0;else{i.Studies.MA("simple",e.days,"hlc/3",0,"MA",t,e),a.q7W();for(var o=Math.max(e.startFrom,e.days-1);o<r.length;o++)if("Res","ult ",n=r[o]){s=0;for(var l=0;l<e.days;l++)s+=Math.abs(r[o-l]["hlc/3"]-n["MA "+e.name]);s/=e.days,Math.abs(s)<1e-8?n["Result "+e.name]=0:n["Result "+e.name]=(n["hlc/3"]-n["MA "+e.name])/(.015*s)}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{CCI:{name:"Commodity Channel Index",calculateFN:i.Studies.calculateCCI,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:100,studyOverBoughtColor:"auto",studyOverSoldValue:-100,studyOverSoldColor:"auto"}},attributes:{Period:{min:2}}}})):console.error("cci feature requires first activating studies feature.")},b=t=>{var e,i,a=At;a.T4K(),a.t7L(38),e=a.s_7("2",32);for(var r=1;-126550632!==a.Z1$(r.toString(),r.toString().length,29638);r++)"u","n","def","ined",i="undefined"!=typeof _CIQ?_CIQ:t.CIQ,e+=2;630336433!==a.Z1$(e.toString(),e.toString().length,92418)&&(i=""===-_CIQ?_CIQ:t.CIQ),i.Studies?(i.Studies.calculateCenterOfGravity=function(t,e){var i,r,n,s,o;if("Cl","os","e",(i=e.chart.scrubbed).length<e.days)e.error=!0;else{(r=e.inputs.Field)&&"field"!=r||(r="Close"),a.q7W();for(var l=Math.max(e.startFrom,e.days-1);l<i.length;l++){n=0,s=0;for(var h=0;h<e.days;h++)a.t7L(0),o=i[a.s_7(l,h)][r],a.t7L(119),n-=a.s_7(1,o,h),s+=o;s&&(a.t7L(8),i[l]["Result "+e.name]=a.R2a(n,s))}}},i.Studies.studyLibrary=i.extend(i.Studies.studyLibrary,{COG:{name:"Center Of Gravity",calculateFN:i.Studies.calculateCenterOfGravity,inputs:{Period:10,Field:"field"}}})):console.error("centerOfGravity feature requires first activating studies feature.")},x=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("m","a","Ch","aikin Volat","ility",e.Studies.calculateChaikinMoneyFlow=function(t,e){var a,r,n,s;if((a=e.chart.scrubbed).length<e.days)e.error=!0;else{r=0,i.T4K(),n=0,i.t7L(12);var o=i.s_7(12,13);(s=a[e.startFrom-o])&&(s["_sumMF "+e.name]&&(r=s["_sumMF "+e.name]),s["_sumV "+e.name]&&(n=s["_sumV "+e.name]));for(var l=e.startFrom;l<a.length;l++){if(a[l].High==a[l].Low)a[l]["_MFV "+e.name]=0;else{i.H3A(24);var h=i.R2a(46,8,6);a[l]["_MFV "+e.name]=a[l].Volume*(h*a[l].Close-a[l].High-a[l].Low)/(a[l].High-a[l].Low)}r+=a[l]["_MFV "+e.name],n+=a[l].Volume,l>e.days-1&&("_M","F","V"," ",r-=a[l-e.days]["_MFV "+e.name],(n-=a[l-e.days].Volume)&&(i.t7L(8),a[l]["Result "+e.name]=i.s_7(r,n))),a[l]["_sumMF "+e.name]=r,a[l]["_sumV "+e.name]=n}}},e.Studies.calculateChaikinVolatility=function(t,a){var r,n,s;if(i.q7W(),"_","M","A",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{for(n=a.startFrom;n<r.length&&!r[n].futureTick;n++)r[n]["_High-Low "+a.name]=r[n].High-r[n].Low;for(e.Studies.MA(a.inputs["Moving Average Type"],a.days,"_High-Low "+a.name,0,"_MA",t,a),(s=a.inputs["Rate Of Change"])||(s=a.days),n=Math.max(a.startFrom,s);n<r.length;n++)if(r[n-s]["_MA "+a.name]){if(r[n].futureTick)break;i.H3A(24);var o=i.s_7(1724,114,16);r[n]["Result "+a.name]=o*(r[n]["_MA "+a.name]/r[n-s]["_MA "+a.name]-1)}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Chaikin MF":{name:"Chaikin Money Flow",calculateFN:e.Studies.calculateChaikinMoneyFlow,inputs:{Period:20}},"Chaikin Vol":{name:"Chaikin Volatility",calculateFN:e.Studies.calculateChaikinVolatility,inputs:{Period:14,"Rate Of Change":2,"Moving Average Type":"ma"}}})):("chaikin feature requires first act","ivating studies feature.",console.error("chaikin feature requires first activating studies feature."))},S=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Vari","able",e.Studies.prettify.variable="vma",e.Studies.movingAverage.conversions.vma="variable",e.Studies.movingAverage.translations.variable="Variable",e.Studies.movingAverage.typeMap.vma="Variable",e.Studies.movingAverage.typeMap.variable="Variable",e.Studies.calculateChandeForecast=function(t,i){var a,r,n,s=At;if("M","A","t","ime"," ser","ies",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA("time series",i.days,r,0,"MA",t,i);for(var o=Math.max(1,i.startFrom);o<a.length;o++){"M","A"," ","Res","u","lt ",(n=a[o][r])&&"object"==typeof n&&(n=n[i.subField]),s.t7L(2);var l=s.R2a(94,6);s.t7L(115);var h=s.s_7(5,8,2);a[o]["Result "+i.name]=l*(h-a[o]["MA "+i.name]/n)}}},e.Studies.calculateChandeMomentum=function(t,e){var i,a,r,n,s,o,l,h,c,u,d=At;for(var p in"fi","e","l","d",i=e.name,e.outputs)d.H3A(83),i=d.R2a(" ",p,i);if(a=e.chart.scrubbed,d.T4K(),a.length<e.days+1)e.error=!0;else{(r=e.inputs.Field)&&"field"!=r||(r="Close"),n=0,d.t7L(19),s=d.s_7(0,"0"),o=[];for(var g=e.startFrom-e.days+1;g<a.length;g++)"ob","ject",g<1||(l=a[g][r],d.H3A(0),h=a[d.s_7(g,1)][r],l&&"object"==typeof l&&(l=l.Close),h&&"object"==typeof h&&(h=h.Close),void 0!==h&&(d.H3A(0),c=d.R2a(l,h),o.push(c),n+=c,s+=Math.abs(c),o.length==e.days&&(d.H3A(96),a[g][i]=d.s_7(s,100,n),n-=u=o.shift(),s-=Math.abs(u))))}},e.Studies.calculateMovingAverageVariable=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b=At;i.inputs.Type,a=i.chart.scrubbed,b.t7L(28);var x=b.s_7(8,9,12,6,6);for(var S in r=2/(i.days+x),n=null,s=i.name,i.outputs)b.H3A(83),s=b.s_7(" ",S,s);for((o=i.inputs.Field)&&"field"!=o||(o="Close"),i.cmo=new e.Studies.StudyDescriptor(i.name,"cmo",i.panel),i.cmo.chart=i.chart,i.cmo.days=9,i.cmo.inputs={Field:o},i.cmo.startFrom=i.startFrom,i.cmo.outputs={_CMO:null},e.Studies.calculateChandeMomentum(t,i.cmo),b.q7W(),l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),d=i.startFrom,p=l,h=i.startFrom-1;h>=0;h--)if((c=a[h][s])||0===c){if(null===n&&(n=c),p<=0)break;p--,d=h}for(null===n&&(n=d=0),g=[],h=d;h<a.length;h++)if((c=(m=a[h])[o])&&"object"==typeof c&&(c=c[i.subField]),f=h+l>=0&&h+l<a.length?a[h+l]:null,c||0===c){if(m["_CMO "+i.name]||0===m["_CMO "+i.name]){b.H3A(0);var C=b.s_7(112,12);y=Math.abs(m["_CMO "+i.name])/C,b.t7L(120),n=v=b.s_7(y,r,c,r,y,n,1),h<i.days&&(v=null),f?f[s]=v:h+l>=a.length&&((u={})[s]=v,g.push(u))}}else f?f[s]=null:h+l>=a.length&&((u={})[s]=null,g.push(u));i.appendFutureTicks(t,g)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Chande Fcst":{name:"Chande Forecast Oscillator",calculateFN:e.Studies.calculateChandeForecast,inputs:{Period:14,Field:"field"}},"Chande Mtm":{name:"Chande Momentum Oscillator",calculateFN:e.Studies.calculateChandeMomentum,inputs:{Period:9},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:50,studyOverBoughtColor:"auto",studyOverSoldValue:-50,studyOverSoldColor:"auto"}}}})):("chande feature requires first acti","vating s","tudies feature.",console.error("chande feature requires first activating studies feature."))},C=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateChoppiness=function(t,i){var a,r,n,s=At;function o(t,e){var i,r;s.t7L(6);var n=s.R2a(9,0,8);i=Number.MAX_VALUE*n,r=Number.MAX_VALUE;for(var o=e-t+1;o<=e;o++)o<0||(i=Math.max(i,a[o].High),r=Math.min(r,a[o].Low));return[r,i]}if(e.Studies.calculateStudyATR(t,i),(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else for(var l=Math.max(i.startFrom,i.days);l<a.length;l++)if("Su","m True Range ",r=a[l]){if(r.futureTick)break;if(n=o(i.days,l),r["Sum True Range "+i.name]){"R","e","sult ",s.t7L(2);var h=s.R2a(2,98);s.H3A(121);var c=s.s_7(1,15,8,22,0);r["Result "+i.name]=h*Math.log(r["Sum True Range "+i.name]/Math.max(1e-6,n[c]-n[0]))/Math.log(i.days)}else isNaN(r)||(r["Result "+i.name]=0)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Choppiness:{name:"Choppiness Index",calculateFN:e.Studies.calculateChoppiness,centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:61.8,studyOverBoughtColor:"auto",studyOverSoldValue:38.2,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:50,step:"0.1"},studyOverSoldValue:{max:50,step:"0.1"}}}})):console.error("choppiness feature requires first activating studies feature.")},A=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?e.Studies.initPriceRelative?("B","eta",e.Studies.calculateCorrelationCoefficient=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,g,m,f=At;if(f.q7W(),i=e.chart.scrubbed,a=e.days,i.length<a+1)e.error=!0;else{if(e.compare=e.inputs["Compare To"],e.compare)e.compare=[e.compare];else for(var y in e.compare=[],e.outputs={},e.outputMap={},t.chart.series)if((r=t.chart.series[y]).parameters.color){"Re","sult ","Res","ult"," ",e.compare.push(r.display),e.outputs["Result "+r.display]=r.parameters.color,f.H3A(113);f.R2a(3,50524,56150,8);f.H3A(28);var v=f.R2a(2,4095,37,15,9);f.t7L(51);f.s_7(12,1460,1460,1488);f.H3A(0);var b=f.R2a(6910,3455);f.H3A(6);var x=f.s_7(12,6450,32);e.outputMap["Result "+r.display+(v!==b?" ":x)+e.name]="Result "+r.display}if(!e.compare.length)return"Correl","ation Coefficient requires at least one comparison symbol",void(e.error="Correlation Coefficient requires at least one comparison symbol");for(var S=0;S<e.compare.length;S++){n=0,s=0,o=0,l=0,f.t7L(38),h=f.R2a("0",0),c=e.compare[S],u=0;for(var C=e.startFrom-a;C<i.length;C++)if("_","temps"," ","_t","emps ","o","bject",i[C]){if((d=i[C][c])&&"object"==typeof d&&(d=d.Close),d||0===d||("_te","m","ps ",d=C>0&&i[C-1]&&i[C-1]["_temps "+e.name]&&i[C-1]["_temps "+e.name].c?i[C-1]["_temps "+e.name].c:0),d&&"object"==typeof d&&(d=d.Close),i[C]["_temps "+e.name]={},n+=i[C]["_temps "+e.name].b=i[C].Close,s+=i[C]["_temps "+e.name].c=d,o+=i[C]["_temps "+e.name].b2=Math.pow(i[C].Close,2),l+=i[C]["_temps "+e.name].c2=Math.pow(d,2),h+=i[C]["_temps "+e.name].bc=i[C].Close*d,u>=a){n-=i[C-a]["_temps "+e.name].b,s-=i[C-a]["_temps "+e.name].c,o-=i[C-a]["_temps "+e.name].b2,l-=i[C-a]["_temps "+e.name].c2,h-=i[C-a]["_temps "+e.name].bc,f.t7L(30);var A=f.s_7(20,18,11,216);p=o/a-Math.pow(n/a,A),f.t7L(12);var D=f.R2a(13,15);g=l/a-Math.pow(s/a,D),f.H3A(122);var k=f.s_7(86,17,11,14,1);m=(h/a-n*s/Math.pow(a,k))/Math.sqrt(p*g),i[C]["Result "+c+" "+e.name]=m}u++}}}},e.Studies.calculatePerformance=function(t,i){var a,r,n;if("m","a","C","l","o","se","m","a",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),At.q7W(),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{e.Studies.MA("ma",i.days,"Close",0,"_MA Base",t,i),e.Studies.MA("ma",i.days,r,0,"_MA Comp",t,i);for(var s=i.startFrom;s<a.length;s++)"_MA C","omp ","Result"," ",(n=a[s][r])&&(n.Close||0===n.Close)&&(n=n.Close),a[s]["Result "+i.name]=a[s].Close/n*(a[s]["_MA Comp "+i.name]/a[s]["_MA Base "+i.name])}},e.Studies.calculateBeta=function(t,i){var a,r,n,s,o=At;if("_VA","Rn ","_C","ompChange"," ","m","a","m","a",a=i.chart.scrubbed,(r=i.inputs["Comparison Symbol"].toUpperCase())||(r=i.study.inputs["Comparison Symbol"]),i.days||(i.days=i.study.inputs.Period),a.length<i.days+1)i.error=!0;else{for(var l=Math.max(i.startFrom,1);l<a.length;l++){"_Comp","C","han","ge ",o.t7L(6);var h=o.s_7(20,13,8);o.t7L(24);var c=o.s_7(67,17,4);a[l]["_BaseChange "+i.name]=a[l].Close/a[l-h].Close-c,(n=a[l][r])&&(n.Close||0===n.Close)&&(n=n.Close),o.H3A(0),(s=a[o.s_7(l,1)][r])&&(s.Close||0===s.Close)&&(s=s.Close),o.H3A(86),a[l]["_CompChange "+i.name]=o.s_7(n,1,s)}for(e.Studies.MA("ma",i.days,"_BaseChange "+i.name,0,"_MA Base",t,i),e.Studies.MA("ma",i.days,"_CompChange "+i.name,0,"_MA Comp",t,i),l=Math.max(i.startFrom,i.days);l<a.length;l++)"_MA Co","mp ",a[l]["_COVARn "+i.name]=(a[l]["_BaseChange "+i.name]-a[l]["_MA Base "+i.name])*(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name]),a[l]["_VARn "+i.name]=Math.pow(a[l]["_CompChange "+i.name]-a[l]["_MA Comp "+i.name],2);for(e.Studies.MA("ma",i.days,"_COVARn "+i.name,0,"_COVAR",t,i),e.Studies.MA("ma",i.days,"_VARn "+i.name,0,"_VAR",t,i),l=Math.max(i.startFrom,2*i.days-1);l<a.length;l++)"_","V","AR ","_COVAR"," ","Re","sul","t ",a[l]["Result "+i.name]=a[l]["_COVAR "+i.name]/a[l]["_VAR "+i.name]}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{correl:{name:"Correlation Coefficient",range:"-1 to 1",calculateFN:e.Studies.calculateCorrelationCoefficient,outputs:{}},"Perf Idx":{name:"Performance Index",centerline:1,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculatePerformance,inputs:{Period:120,"Comparison Symbol":"SPY"},outputs:{Result:"auto",Gain:"#00DD00",Loss:"#FF0000"},deferUpdate:!0},Beta:{name:"Beta",centerline:1,initializeFN:e.Studies.initPriceRelative,seriesFN:e.Studies.displayVsComparisonSymbol,calculateFN:e.Studies.calculateBeta,inputs:{Period:20,"Comparison Symbol":"SPY"},deferUpdate:!0}})):console.error("comparisonStudies feature requires first activating priceRelative feature."):console.error("comparisonStudies feature requires first activating studies feature.")},D=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("f","i","eld","Coppock Cu","rve",e.Studies.calculateCoppock=function(t,i){var a,r,n,s,o,l,h,c=At;if("weig","hted","Lon","g"," Ro","C",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=parseInt(i.inputs["Long RoC"],10))||(n=14),(s=parseInt(i.inputs["Short RoC"],10))||(c.H3A(0),s=c.R2a("11",0)),(o=i.days)||(o=10),!(n<s))if(a.length<Math.max(s,n,o)+1)i.error=!0;else{c.T4K();for(var u=Math.max(i.startFrom,n);u<a.length;u++)if(c.H3A(0),l=a[c.s_7(u,s)][r],c.t7L(0),h=a[c.s_7(u,n)][r],l&&h){"_Su","m"," ",c.t7L(1);var d=c.s_7(107,20,13);c.H3A(115);var p=c.R2a(3,18,18);a[u]["_Sum "+i.name]=d*(a[u][r]/l+a[u][r]/h-p)}e.Studies.MA("weighted",o,"_Sum "+i.name,0,"Result",t,i)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Coppock:{name:"Coppock Curve",calculateFN:e.Studies.calculateCoppock,inputs:{Period:10,Field:"field","Short RoC":11,"Long RoC":14}}})):("coppock featur","e requires first activating studi","es feature.",console.error("coppock feature requires first activating studies feature."))},k=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("a","uto",e.Studies.calculateDarvas=function(t,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x;r="A",r+="D",r+="V",n="L",n+="os",n+="s",s=a.chart.scrubbed,o=0,l=parseInt(a.inputs["ATH Lookback Period"],10),a.inputs["Volume Spike"]&&("Vo","l","u","me","si","mp","le",e.Studies.MA("simple",l,"Volume",0,"ADV",t,a)),i.H3A(123),i.T4K();var S=i.R2a(8,5,7,18,78);for(h=parseFloat(a.inputs["Volume % of Avg"])/S,c="none",u={},d=null,p=null,g=null,m=parseFloat(a.inputs["Level Offset"]),f=!1,v={},["Darvas","Ghost","Profit",n,"ATH",r,"Spike"].forEach((function(t){i.t7L(2);i.s_7(12,1548);i.t7L(0);var e=i.R2a(175860,166090);i.t7L(124);var r=i.R2a(404,3959,19,18,15);i.t7L(125);i.R2a(703256,13,101514,7);i.t7L(125);var n=i.s_7(9432,9,6300,2);i.H3A(49);var s=i.R2a(6968,3485,1,13940,2);i.q7W(),i.t7L(6);var o=i.R2a(16,8509,5);v[t]=t+(5780<e?" ":630.78<=r&&(n<s&&o))+a.name})),y=a.startFrom-1;y>0;y--){if(!(b=s[y])[v.Darvas]&&!b[v.Ghost]){o=b[v.ATH]||0,p=b[v.Profit],g=b[v.Loss];break}for(var C in v)b[C]=null}for(;y<s.length;y++)if("Volum","e Spike",x=s[y]){if(parseFloat(a.inputs["Price Minimum"])<=s[o].Close){if(!d||d.End&&y!=d.End+1||(s[y-1].Close>u.High?u={State:1,High:2*u.High-u.Low,Low:u.High,Start:y,End:2*u.End-u.Start+1}:d=null,d&&(x[v.Ghost]=e.clone(u),u.State=0,s[u.End]&&(s[u.End][v.Ghost]=e.clone(u)),d={Start:u.Start,End:u.End},p=u.High+m,(!g||g<u.Low-m)&&(g=u.Low-m))),x[v.Profit]=p,x[v.Loss]=g,(x.Close>=p||"high/low"==a.inputs["Exit Field"]&&x.High>=p)&&(p=null),"none"==c&&y==o+3&&!s[o+2][v.Darvas]&&!s[o+1][v.Darvas]&&!s[o][v.Darvas]&&s[o].High>x.High&&(c="high"),"high"==c&&(x.High>s[o].High?c="none":s[y-3].Low<s[y-2].Low&&s[y-3].Low<s[y-1].Low&&s[y-3].Low<x.Low&&("Darvas"," establi","shed:","d","ar","va","s",u={State:1,High:s[o].High,Low:s[y-3].Low,Start:o},s[o][v.Darvas]=e.clone(u),c="darvas",d&&("Ghost e","nd:",d.End>y&&s[d.Start]&&(x[v.Ghost]=e.clone(s[d.Start][v.Ghost]),x[v.Ghost].End=y,s[d.End]&&("Ghost End remo","ve","d:",delete s[d.End][v.Ghost])),x[v.Ghost].State=0,s[d.Start][v.Ghost].End=y,d=null),p=u.High+m,(!g||g<u.Low-m)&&(g=u.Low-m))),"darvas"==c&&("Ghos","t"," Bo","xes","non","e","no","n","e",x.Close>u.High||"high/low"==a.inputs["Exit Field"]&&x.High>u.High?d={}:(x.Close<u.Low||"high/low"==a.inputs["Exit Field"]&&x.Low<u.Low)&&(c="none"),d?c="none":"none"==c&&(p=null,g=null),a.inputs["Ghost Boxes"]||(d=null),"none"==c)){for(var A=u.Start+1;A<y;A++)s[A][v.Darvas]=e.clone(u);u.State=0,u.End=y,x[v.Darvas]=e.clone(u),x[v.ATH]=o;continue}g&&(x.Close<u.Low||"high/low"==a.inputs["Exit Field"]&&x.Low<u.Low)&&("d","a","rva","s","darvas"==c&&(c="none"),(x.Close<g||"high/low"==a.inputs["Exit Field"]&&x.Low<g)&&(p=null,g=null),d&&(d.End>y&&s[d.Start]&&(x[v.Ghost]=e.clone(s[d.Start][v.Ghost]),x[v.Ghost].End=y,s[d.End]&&("Gho","st End rem","o","ved:",delete s[d.End][v.Ghost])),x[v.Ghost].State=0,s[d.Start][v.Ghost].End=y,d=null))}if(x.High>=s[o].High&&(o=y),(y<3||x.High>=s[y-1].High&&x.High>=s[y-2].High&&x.High>=s[y-3].High)&&y-o>=l){o=y;for(var D=0;D<l&&!(y-D<0);D++)s[y-D].High>s[o].High&&(i.H3A(0),o=i.s_7(y,D));f}a.inputs["Volume Spike"]&&y>l&&y==o&&x[v.ADV]*h<x.Volume&&(i.H3A(38),x[v.Spike]=i.s_7("1",64)),x[v.ATH]=o}},e.Studies.displayDarvas=function(t,a,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_;(n=e.Studies.determineColor(a.outputs.Levels))&&"auto"!=n&&!e.isTransparent(n)||(n=t.defaultColor),(s=e.Studies.determineColor(a.outputs.Darvas))&&"auto"!=s&&!e.isTransparent(s)||(s=t.defaultColor),(o=e.Studies.determineColor(a.outputs.Ghost))&&"auto"!=o&&!e.isTransparent(o)||(o=t.defaultColor),l=t.panels[a.panel],h=a.getContext(t),i.H3A(86);var L=i.R2a(19,17,1);if((p=t.layout.candleWidth-L)<2&&(p=1),t.startClip(a.panel),a.inputs["Stop Levels"]){for(h.setLineDash&&h.setLineDash([2,2]),h.lineWidth=2,h.strokeStyle=n,h.beginPath(),c=0;c<r.length;c++)u=r[c],i.H3A(0),g=r[i.R2a(c,1)],u&&(d=u["Loss "+a.name]?Math.floor(t.pixelFromPrice(u["Loss "+a.name],l)):null,m=g&&g["Loss "+a.name]?Math.floor(t.pixelFromPrice(g["Loss "+a.name],l)):null,d&&(u.candleWidth&&(p=Math.floor(Math.max(1,u.candleWidth))),f=Math.floor(t.pixelFromBar(c,l.chart)+p/2),y=Math.floor(t.pixelFromBar(c,l.chart)-p/2),m&&m>=d?h.lineTo(y,d):0===c?h.moveTo(t.chart.left,d):h.moveTo(y,d),h.lineTo(f,d)));h.stroke(),h.setLineDash&&h.setLineDash([]),i.H3A(9),h.lineWidth=i.s_7(0,"1")}v=-10,x=0,i.t7L(21),C=-i.R2a(0,"10"),i.H3A(0),D=i.s_7("0",0),w=!1,M=!1,i.t7L(90);var E=i.s_7(20,24,4,6);for(T=h.measureText("").width/E,F=0,c=0;c<r.length;c++)if("Ghos","t Bo","xes","Dar","vas ",r[c]){if((r[c].Close||0===r[c].Close)&&(F=c),r[c]["Spike "+a.name]&&(h.fillStyle=s,h.textBaseline="bottom",P=t.pixelFromPrice(r[c].High,t.chart.panel),h.fillText("",t.pixelFromBar(c)-T,P-5)),r[c].candleWidth&&(p=Math.floor(Math.max(1,r[c].candleWidth))),r[c]["Darvas "+a.name])if("Dar","v","as"," ",1!=(u=r[c]["Darvas "+a.name]).State||w){if(0===u.State){"Stop L","evels",i.H3A(0);var I=i.R2a(26,24);x=Math.floor(t.pixelFromBar(c,l.chart)+p/I)-v,b=Math.floor(t.pixelFromPrice(u.High,l)),S=Math.floor(t.pixelFromPrice(u.Low,l))-b,h.strokeStyle=s,h.fillStyle=s,a.inputs["Stop Levels"]?h.globalAlpha=.3:(h.strokeRect(v,b,x,S),h.globalAlpha=.2),h.fillRect(v,b,x,S),h.globalAlpha=1,w=!1}}else v=Math.floor(t.pixelFromBar(c,l.chart)-p/2),b=Math.floor(t.pixelFromPrice(u.High,l)),S=Math.floor(t.pixelFromPrice(u.Low,l))-b,w=!0;if(r[c]["Ghost "+a.name]&&a.inputs["Ghost Boxes"])if(1!=(u=r[c]["Ghost "+a.name]).State||M){if(0===u.State){u.Start==u.End&&(C=Math.floor(t.pixelFromBar(c,l.chart)-p/2)),i.H3A(62);var N=i.R2a(1,12,8,78,4);D=Math.floor(t.pixelFromBar(c,l.chart)+p/N)-C,A=Math.floor(t.pixelFromPrice(u.High,l)),k=Math.floor(t.pixelFromPrice(u.Low,l))-A,h.strokeStyle=o,h.fillStyle=o,a.inputs["Stop Levels"]?h.globalAlpha=.3:(h.strokeRect(C,A,D,k),h.globalAlpha=.2),h.fillRect(C,A,D,k),h.globalAlpha=1,M=!1}}else C=Math.floor(t.pixelFromBar(c,l.chart)-p/2),A=Math.floor(t.pixelFromPrice(u.High,l)),D=Math.floor((u.End-u.Start+1)*t.layout.candleWidth+p/2),k=Math.floor(t.pixelFromPrice(u.Low,l))-A,M=!0}if(w){i.t7L(2);var O=i.s_7(2,0);x=Math.floor(t.pixelFromBar(F,l.chart)+p/O)-v,h.strokeStyle=s,h.fillStyle=s,a.inputs["Stop Levels"]?h.globalAlpha=.3:(h.beginPath(),i.t7L(17),h.moveTo(i.R2a(2,x,v),b),h.lineTo(v,b),i.H3A(2),h.lineTo(v,i.R2a(S,b)),i.t7L(17),h.lineTo(i.s_7(2,x,v),i.s_7(S,b,i.H3A(2))),h.stroke(),h.globalAlpha=.2),i.t7L(16),h.fillRect(v,b,i.R2a(x,2),S),h.globalAlpha=1}M&&(h.strokeStyle=o,h.fillStyle=o,a.inputs["Stop Levels"]?h.globalAlpha=.3:(h.strokeRect(C,A,D,k),h.globalAlpha=.2),h.fillRect(C,A,D,k),h.globalAlpha=1),(w||M)&&("Stop Le","vels",a.inputs["Stop Levels"]&&(h.setLineDash&&h.setLineDash([2,2]),h.lineWidth=2,h.strokeStyle=n,_=Math.floor(t.pixelFromBar(F-1,l.chart)+p/2),d&&(h.beginPath(),h.moveTo(_,d),h.lineTo(w?v+2*x:C+D,d),h.stroke()),h.setLineDash&&h.setLineDash([]),i.t7L(21),h.lineWidth=i.R2a(1,"1")),w=!1,M=!1),t.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Darvas:{name:"Darvas Box",underlay:!0,calculateFN:e.Studies.calculateDarvas,seriesFN:e.Studies.displayDarvas,inputs:{"ATH Lookback Period":100,"Exit Field":["close","high/low"],"Ghost Boxes":!0,"Stop Levels":!1,"Level Offset":.01,"Price Minimum":5,"Volume Spike":!1,"Volume % of Avg":400},outputs:{Darvas:"#5F7CB8",Ghost:"#699158",Levels:"auto"},customRemoval:!0,attributes:{"Price Minimum":{min:.01,step:.01},yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("darvasBox feature requires first activating studies feature.")},w=t=>{var e;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,At.q7W(),e.Studies?("m","a",e.Studies.calculateDetrendedPrice=function(t,i){var a,r,n,s,o;if("M","A",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=Math.floor(i.days/2+1),e.Studies.MA(i.inputs["Moving Average Type"],i.days,r,-n,"MA",t,i);for(var l=Math.max(i.days-n-1,i.startFrom-n);l<a.length-n;l++)l<0||((s=a[l][r])&&"object"==typeof s&&(s=s[i.subField]),o=a[l]["MA "+i.name],!s&&0!==s||!o&&0!==o||(At.t7L(0),a[l]["Result "+i.name]=At.s_7(s,o)))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Detrended:{name:"Detrended Price Oscillator",calculateFN:e.Studies.calculateDetrendedPrice,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):("detrend","ed feature requires first activ","ating studies feature.",console.error("detrended feature requires first activating studies feature."))},M=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateDisparity=function(t,a){var r,n,s;if("Moving ",i.q7W(),"Av","erag","e Type","fie","l","d",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{(n=a.inputs.Field)&&"field"!=n||(n="Close"),e.Studies.MA(a.inputs["Moving Average Type"],a.days,n,0,"_MA",t,a);for(var o=Math.max(a.startFrom,a.days-1);o<r.length;o++)if("_M","A"," ",r[o]&&(s=r[o]["_MA "+a.name])){i.H3A(106);var l=i.R2a(5,6,1,1,101);i.t7L(100);var h=i.s_7(0,1,6,12);r[o]["Result "+a.name]=l*(r[o][n]/s-h)}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Disparity:{name:"Disparity Index",calculateFN:e.Studies.calculateDisparity,inputs:{Period:14,Field:"field","Moving Average Type":"ma"}}})):("disparity feature requires first activa","ting studies feature.",console.error("disparity feature requires first activating studies feature."))},T=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateEaseOfMovement=function(t,a){var r,n,s,o,l,h;if("Res",i.q7W(),"ult",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{for(var c=Math.max(1,a.startFrom);c<r.length;c++){n=(r[c].High+r[c].Low)/2,i.H3A(100);var u=i.R2a(18,11,2,6);i.H3A(10);var d=i.R2a(12,12,16,17,0);s=(r[c-u].High+r[c-d].Low)/2,i.t7L(0),o=i.R2a(n,s),i.H3A(86);var p=i.R2a(16e8,6e7,10);l=r[c].Volume/p/(r[c].High-r[c].Low),i.t7L(8),h=i.R2a(o,l),isFinite(h)?r[c]["_EOM1 "+a.name]=h:r[c]["_EOM1 "+a.name]=NaN}e.Studies.MA(a.inputs["Moving Average Type"],a.days,"_EOM1 "+a.name,0,"Result",t,a)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{EOM:{name:"Ease of Movement",calculateFN:e.Studies.calculateEaseOfMovement,inputs:{Period:14,"Moving Average Type":"ma"}}})):console.error("easeOfMovement feature requires first activating studies feature.")},F=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Ehler Fisher Tra","ns","form",e.Studies.calculateEhlerFisher=function(t,e){var i,a,r,n,s,o=At;function l(t,e){var a,r,n;a=Number.MAX_VALUE,r=-1*Number.MAX_VALUE;for(var s=e-t+1;s<=e;s++){o.H3A(126);var l=o.R2a(44,4,10,3,6);n=(i[s].High+i[s].Low)/l,a=Math.min(a,n),r=Math.max(r,n)}return[a,r]}if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{if(o.H3A(0),a=o.s_7("0",0),e.startFrom>1){o.H3A(67);var h=o.s_7(5,114,14,9);a=i[e.startFrom-h]["_n "+e.name]}for(var c=e.startFrom;c<i.length&&("E","F Trig","ger"," ",!(r=i[c]).futureTick);c++)if(c<e.days-1)r["EF "+e.name]=r["EF Trigger "+e.name]=a;else{n=l(e.days,c),o.H3A(127);var u=o.s_7(8,18,8,0,16);o.t7L(2);var d=o.s_7(1,0);(a=.66*(((i[c].High+i[c].Low)/u-n[0])/Math.max(1e-6,n[d]-n[0])-.5)+.67*a)>0?a=Math.min(a,.9999):a<0&&(a=Math.max(a,-.9999)),s=c?i[c-1]["EF "+e.name]:0,o.H3A(2);var p=o.s_7(1,0);r["EF "+e.name]=.5*Math.log((1+a)/(p-a))+.5*s,r["EF Trigger "+e.name]=s,r["_n "+e.name]=a}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Ehler Fisher":{name:"Ehler Fisher Transform",calculateFN:e.Studies.calculateEhlerFisher,inputs:{Period:10},outputs:{EF:"auto","EF Trigger":"#FF0000"}}})):console.error("ehlerFisher feature requires first activating studies feature.")},P=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#5","F7","C","B8","Elde","r Im","pulse Syst","em","Elde","r Ra","y"," Index",e.Studies.calculateElderImpulse=function(t,i){var a,r,n,s,o,l,h;if("_","M","A","e","xponential",a=t.layout.aggregationType,r=t.chart.customChart){if(i.disabled||a&&"ohlc"!=a)return i.disabled||(i.error="Elder Impulse study is not compatible with aggregated chart types."),r.colorFunction&&(r.priorColorFunction=r.colorFunction),r.chartType&&(r.priorChartType=r.chartType),r.colorFunction=null,r.chartType=null,void t.setMainSeriesRenderer();r.priorColorFunction&&(r.colorFunction=r.priorColorFunction,r.priorColorFunction=null,r.chartType=r.priorChartType,r.priorChartType=null,t.setMainSeriesRenderer())}n=i.chart.scrubbed,s=i.outputs.Bullish,o=i.outputs.Bearish,l=i.outputs.Neutral,e.Studies.MA("exponential",13,"Close",0,"_MA",t,i),i.macd=new e.Studies.StudyDescriptor("_"+i.name,"macd",i.panel),i.macd.chart=i.chart,i.macd.days=i.days,i.macd.startFrom=i.startFrom,i.macd.inputs={"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},i.macd.outputs={_MACD:null,_Signal:null},e.Studies.calculateMACD(t,i.macd);for(var c=i.startFrom;c<n.length;c++)"_MA"," ","_","M","A"," ",h=0===c?l:n[c]["_MA "+i.name]>n[c-1]["_MA "+i.name]&&n[c]["_"+i.name+"_hist"]>n[c-1]["_"+i.name+"_hist"]?s:n[c]["_MA "+i.name]<n[c-1]["_MA "+i.name]&&n[c]["_"+i.name+"_hist"]<n[c-1]["_"+i.name+"_hist"]?o:l,n[c]["Result "+i.name]=h},e.Studies.calculateElderRay=function(t,a){var r;if("_","h","ist1","_","E","MA",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{e.Studies.MA("exponential",a.days,"Close",0,"_EMA",t,a);for(var n=Math.max(a.startFrom,a.days-1);n<r.length;n++)r[n][a.name+"_hist1"]=r[n].High-r[n]["_EMA "+a.name],r[n][a.name+"_hist2"]=r[n].Low-r[n]["_EMA "+a.name];a.outputMap={},i.q7W(),a.outputMap[a.name+"_hist1"]="",a.outputMap[a.name+"_hist2"]=""}},e.Studies.calculateElderForce=function(t,a){var r;if("expo",i.T4K(),"nen","t","ial",(r=a.chart.scrubbed).length<a.days)a.error=!0;else{for(var n=Math.max(1,a.startFrom);n<r.length;n++){i.t7L(0);var s=i.R2a(20,19);r[n]["_EF1 "+a.name]=r[n].Volume*(r[n].Close-r[n-s].Close)}e.Studies.MA("exponential",a.days,"_EF1 "+a.name,0,"Result",t,a)}},e.Studies.initElderImpulse=function(t,a,r,n,s,o){var l,h;if(l=e.Studies.initializeFN(t,a,r,n,s,o),i.q7W(),!s.calculateOnly){if(!t.chart||!t.chart.panel||t.chart.customChart&&t.chart.customChart.owner!==l.name){195442e4,-1366513583,h=2;for(var c=1;195442e4!==i.v0U(c.toString(),c.toString().length,87654);c++)t.dispatch("notification","eldercannotadd"),h+=2;return void(-1366513583!==i.v0U(h.toString(),h.toString().length,88368)&&t.dispatch("notification","notification"))}t.chart.customChart={owner:l.name,chartType:"colored_bar",colorFunction:function(t,e,i){var a;if(e)return(a=e["Result "+l.name])&&"object"==typeof a&&(a=a.color),a}},t.setMainSeriesRenderer()}return l},e.Studies.displayElderForce=function(t,i,a){var r,n,s,o;e.Studies.displaySeriesAsLine(t,i,a),r=e.Studies.determineColor(i.outputs.Result),n=t.panels[i.panel],s=i.getYAxis(t),o={skipTransform:n.name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:0,color:r,yAxis:s},!i.highlight&&t.highlightedDraggable&&(o.opacity=.3),o.direction=1,e.preparePeakValleyFill(t,o),o.direction=-1,e.preparePeakValleyFill(t,o)},e.Studies.displayElderRay=function(t,a,r){var n,s,o,l,h,c,u;i.T4K(),n=t.panels[a.panel],s=a.getContext(t),o=a.getYAxis(t),l=t.pixelFromPrice(0,n,o),i.H3A(128);var d=i.R2a(15,13,5,26,103);(h=t.layout.candleWidth-d)<2&&(h=1),t.canvasColor("stx_histogram"),c=s.fillStyle,a.underlay||(s.globalAlpha=1),t.startClip(a.panel),!a.highlight&&t.highlightedDraggable&&(s.globalAlpha*=.3);for(var p=0;p<r.length;p++)"Elder Bull Po","wer","_h","ist2","_","his","t","1","Elder"," Bul","l Power","_hi","st1",(u=r[p])&&(u.candleWidth&&(h=Math.floor(Math.max(1,u.candleWidth-2))),u[a.name+"_hist1"]>0&&(i.t7L(19),g(p,i.R2a(32,"0"),"Elder Bull Power","_hist1")),u[a.name+"_hist2"]<0&&(i.t7L(21),g(p,i.s_7(0,"0"),"Elder Bear Power","_hist2")),u[a.name+"_hist1"]<0&&g(p,.1,"Elder Bull Power","_hist1"),u[a.name+"_hist2"]>0&&g(p,.1,"Elder Bear Power","_hist2"));function g(i,r,c,d){s.fillStyle=e.Studies.determineColor(a.outputs[c]),s.fillRect(Math.floor(t.pixelFromBar(i,n.chart)-h/2+h*r),Math.floor(l),Math.floor(h*(1-2*r)),Math.floor(t.pixelFromPrice(u[a.name+d],n,o)-l))}t.endClip(),s.fillStyle=c},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Elder Force":{name:"Elder Force Index",calculateFN:e.Studies.calculateElderForce,seriesFN:e.Studies.displayElderForce,inputs:{Period:13}},"Elder Ray":{name:"Elder Ray Index",seriesFN:e.Studies.displayElderRay,calculateFN:e.Studies.calculateElderRay,centerline:0,inputs:{Period:13},outputs:{"Elder Bull Power":"#00DD00","Elder Bear Power":"#FF0000"}},"Elder Impulse":{name:"Elder Impulse System",calculateFN:e.Studies.calculateElderImpulse,initializeFN:e.Studies.initElderImpulse,seriesFN:null,customRemoval:!0,underlay:!0,inputs:{},outputs:{Bullish:"#8BC176",Bearish:"#DD3E39",Neutral:"#5F7CB8"},removeFN:function(t,e){!t.chart||t.chart.customChart&&t.chart.customChart.owner!==e.name||(t.chart.customChart=null,t.setMainSeriesRenderer())}}})):console.error("elder feature requires first activating studies feature.")},_=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Fracta","l Chaos Bands",e.Studies.calculateFractalChaos=function(t,e){var a,r,n,s,o,l,h;if(a=e.chart.scrubbed,i.T4K(),r=0,n=0,s=0,e.startFrom&&"Fractal Chaos Bands"==e.type){i.H3A(2);var c=i.R2a(1,0);r=a[e.startFrom-c]["Fractal High "+e.name],i.t7L(12);var u=i.s_7(2,3);n=a[e.startFrom-u]["Fractal Low "+e.name]}for(var d=Math.max(4,e.startFrom);d<a.length&&!a[d].futureTick;d++){for(o=!isNaN(a[d].High),l=!isNaN(a[d].Low),(o||l)&&(a[d]["Result "+e.name]=0),s=0,h=0;h<=d&&a[d-h]&&!(a[d-h].High>a[d-2].High)&&!(h<2&&a[d-h].High==a[d-2].High);h++)if(a[d-h].High<a[d-2].High&&s++,4==s){r=a[d-2].High;break}for("Fractal Chaos Bands"==e.type?o&&(a[d]["Fractal High "+e.name]=r>0?r:null):4==s&&(a[d]["Result "+e.name]=1),s=0,h=0;h<=d&&a[d-h]&&!(a[d-h].Low<a[d-2].Low)&&!(h<2&&a[d-h].Low==a[d-2].Low);h++)if(a[d-h].Low>a[d-2].Low&&s++,4==s){n=a[d-2].Low;break}"Fractal Chaos Bands"==e.type?("F","r","acta","l Low ",l&&(a[d]["Fractal Low "+e.name]=n>0?n:null)):4==s&&(a[d]["Result "+e.name]=-1)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Fractal Chaos":{name:"Fractal Chaos Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculateFractalChaos,inputs:{},centerline:null},"Fractal Chaos Bands":{name:"Fractal Chaos Bands",overlay:!0,calculateFN:e.Studies.calculateFractalChaos,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Fractal High":"auto","Fractal Low":"auto","Fractal Channel":"auto"}}})):("fractalChaos feature requires first activating ","studies feature.",console.error("fractalChaos feature requires first activating studies feature."))},L=t=>{var e,i=At;i.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("a","u","to","Wil","liam","s %R","Highest ","H","ig","h Value","Donchian Widt","h","a","u","t","o",e.Studies.calculateMaxHighMinLow=function(t,e){var a,r,n,s,o,l,h,c,u;i.H3A(9),a=i.R2a(0,"1751966977"),r=2;for(var d=1;i.v0U(d.toString(),d.toString().length,66884)!==a;d++)n=e.chart.scrubbed,s=e.days,o=e.days,r+=2;if(446907460!==i.v0U(r.toString(),r.toString().length,30640)&&(n=e.chart.scrubbed,s=e.days,o=e.days),e.inputs["High Period"]&&(s=e.inputs["High Period"]),e.inputs["Low Period"]&&(o=e.inputs["Low Period"]),n.length<Math.max(s,o)+1)e.error=!0;else{l=Number.MAX_VALUE,i.t7L(0);var p=i.s_7(0,1);if(h=Number.MAX_VALUE*p,e.startFrom>1){for(c=1;c<s;c++)e.startFrom-c>=0&&(h=Math.max(h,n[e.startFrom-c].High));for(c=1;c<o;c++)e.startFrom-c>=0&&(l=Math.min(l,n[e.startFrom-c].Low))}i.q7W();for(var g=Math.max(0,e.startFrom-1);g<n.length;g++){if("Williams"," %R","D","onchia","n Width",h=Math.max(h,n[g].High),l=Math.min(l,n[g].Low),g>=s&&n[g-s].High==h)for(h=n[g].High,c=1;c<s;c++)h=Math.max(h,n[g-c].High);if(g>=o&&n[g-o].Low==l)for(l=n[g].Low,c=1;c<o;c++)l=Math.min(l,n[g-c].Low);if(u=0,"HHV"==e.type)u=h;else if("LLV"==e.type)u=l;else if("Donchian Width"==e.type)i.H3A(0),u=i.R2a(h,l);else if("GAPO"==e.type||"Gopala"==e.type)u=Math.log(h-l)/Math.log(o);else{if("VT HZ Filter"==e.type){"_MHM","L ",i.H3A(0),u=i.s_7(h,l),n[g]["_MHML "+e.name]=u;continue}if("Williams %R"==e.type){i.H3A(41),u=i.s_7(1400,1282,18)*(h-n[g].Close)/(h-l),n[g]["Result "+e.name]=u;continue}}if(g==n.length-1)break;n[g+1].futureTick||("Donchian Channel"==e.type?(i.H3A(2),n[i.s_7(1,g)]["Donchian High "+e.name]=h,i.H3A(2),n[i.R2a(1,g)]["Donchian Low "+e.name]=l,i.H3A(2),n[i.s_7(1,g)]["Donchian Median "+e.name]=i.s_7(h,l,2,i.H3A(5))):(i.H3A(98),n[i.R2a("1",g)]["Result "+e.name]=u))}}},e.Studies.calculateVerticalHorizontalFilter=function(t,a){var r,n,s,o;if(i.q7W(),(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{a.mhml=new e.Studies.StudyDescriptor(a.name,a.type,a.panel),a.mhml.chart=a.chart,a.mhml.days=a.days,a.mhml.startFrom=a.startFrom,a.mhml.inputs={},a.mhml.outputs={_MHML:null},e.Studies.calculateMaxHighMinLow(t,a.mhml),n=0,s=[];for(var l=Math.max(1,a.startFrom-a.days);l<r.length;l++)o=Math.abs(r[l].Close-r[l-1].Close),s.push(o),n+=o,s.length==a.days&&(r[l]["Result "+a.name]=r[l]["_MHML "+a.name]/n,n-=s.shift())}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Donchian Channel":{name:"Donchian Channel",overlay:!0,calculateFN:e.Studies.calculateMaxHighMinLow,seriesFN:e.Studies.displayChannel,inputs:{"High Period":20,"Low Period":20,"Channel Fill":!0},outputs:{"Donchian High":"auto","Donchian Median":"auto","Donchian Low":"auto"}},"Donchian Width":{name:"Donchian Width",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{"High Period":20,"Low Period":20}},GAPO:{name:"Gopalakrishnan Range Index",calculateFN:e.Studies.calculateMaxHighMinLow},HHV:{name:"Highest High Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},LLV:{name:"Lowest Low Value",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14}},"Williams %R":{name:"Williams %R",calculateFN:e.Studies.calculateMaxHighMinLow,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:-20,studyOverBoughtColor:"auto",studyOverSoldValue:-80,studyOverSoldColor:"auto"}}},"VT HZ Filter":{name:"Vertical Horizontal Filter",calculateFN:e.Studies.calculateVerticalHorizontalFilter,inputs:{Period:28}},"High-Low":{name:"High Minus Low",calculateFN:function(t,e){var i;i=e.chart.scrubbed;for(var a=e.startFrom;a<i.length;a++)i[a]["Result "+e.name]=i[a].High-i[a].Low},inputs:{}}})):console.error("highLowStudies feature requires first activating studies feature.")},E=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#","808000","#00","FF00","#0","000","FF",e.Studies.calculateIchimoku=function(t,e){var i,a,r,n,s,o,l,h,c=At;function u(t,e){var a,r;a=Number.MAX_VALUE,c.T4K(),c.t7L(0);var n=c.R2a(10,11);r=Number.MAX_VALUE*n;for(var s=e-t+1;s<=e;s++)s<0||(a=Math.min(a,i[s].Low),r=Math.max(r,i[s].High));return[a,r]}for("Leadin","g Span ","B Pe","riod","Conversio",c.q7W(),"n Line Period",i=e.chart.scrubbed,a={Base:Number(e.inputs["Base Line Period"]),Conv:Number(e.inputs["Conversion Line Period"]),LeadB:Number(e.inputs["Leading Span B Period"]),Lag:Number(e.inputs["Lagging Span Period"])},r=e.startFrom;r<i.length;r++)if(i[r]){n=u(a.Conv,r),c.t7L(0);var d=c.R2a(17,16);c.t7L(1);var p=c.R2a(0,0,2);i[r]["Conversion Line "+e.name]=(n[d]+n[0])/p,n=u(a.Base,r),c.t7L(2);var g=c.R2a(1,0);c.H3A(49);var m=c.R2a(1,1,1,11,10);i[r]["Base Line "+e.name]=(n[g]+n[0])/m,r<a.Lag||(i[r-a.Lag]["Lagging Span "+e.name]=i[r].Close)}for(s=[],r=Math.max(0,e.startFrom-a.Base);r<i.length;r++){"Con","ve","rsion L","ine ",n=u(a.LeadB,r),o=(i[r]["Conversion Line "+e.name]+i[r]["Base Line "+e.name])/2,c.t7L(103);var f=c.s_7(7,18,60,9,8);c.H3A(12);var y=c.s_7(18,20);l=(n[f]+n[0])/y,i[r+a.Base]?(i[r+a.Base]["Leading Span A "+e.name]=o,i[r+a.Base]["Leading Span B "+e.name]=l):((h={})["Leading Span A "+e.name]=o,h["Leading Span B "+e.name]=l,s.push(h))}e.appendFutureTicks(t,s)},e.Studies.displayIchimoku=function(t,i,a){var r,n,s,o,l,h,c;r="Leading Span A "+i.name,n="Leading Span B "+i.name,s=e.Studies.determineColor(i.outputs[i.outputMap[r]]),o=e.Studies.determineColor(i.outputs[i.outputMap[n]]),l=t.panels[i.panel],h=i.getYAxis(t),c={topBand:r,bottomBand:n,topColor:s,bottomColor:o,skipTransform:l.name!=i.chart.name,topAxis:h,bottomAxis:h,opacity:.3},!i.highlight&&t.highlightedDraggable&&(c.opacity*=.3),e.fillIntersecting(t,i.panel,c),e.Studies.displaySeriesAsLine(t,i,a)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Ichimoku Clouds":{name:"Ichimoku Clouds",overlay:!0,calculateFN:e.Studies.calculateIchimoku,seriesFN:e.Studies.displayIchimoku,inputs:{"Conversion Line Period":9,"Base Line Period":26,"Leading Span B Period":52,"Lagging Span Period":26},outputs:{"Conversion Line":"#0000FF","Base Line":"#FF0000","Leading Span A":"#00FF00","Leading Span B":"#FF0000","Lagging Span":"#808000"}}})):console.error("ichimoku feature requires first activating studies feature.")},I=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateIntradayMomentum=function(t,e){var i,a,r,n,s,o,l=At;if(i=e.chart.scrubbed,a=e.days,i.length<a+1)e.error=!0;else{l.T4K(),r=0,l.H3A(19),n=l.s_7(96,"0"),e.startFrom>1&&(r=i[e.startFrom-1]["_totUp "+e.name],n=i[e.startFrom-1]["_totDn "+e.name]);for(var h=e.startFrom;h<i.length;h++)(s=i[h].Close-i[h].Open)>0?r+=s:n-=s,h>=a&&((o=i[h-a].Close-i[h-a].Open)>0?r-=o:n+=o),l.H3A(130),i[h]["Result "+e.name]=l.s_7(100,n,r,r),i[h]["_totUp "+e.name]=r,i[h]["_totDn "+e.name]=n}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Intraday Mtm":{name:"Intraday Momentum Index",calculateFN:e.Studies.calculateIntradayMomentum,inputs:{Period:20},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):("intradayMomentum feature ","requires first activating studies feature.",console.error("intradayMomentum feature requires first activating studies feature."))},N=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("au","to","au","to","e","m","a",e.Studies.calculateKeltner=function(t,i){e.Studies.MA(i.inputs["Moving Average Type"],i.days,"Close",0,"MA",t,i),e.Studies.calculateStudyATR(t,i),e.Studies.calculateGenericEnvelope(t,i,i.inputs.Shift,"MA "+i.name,"ATR "+i.name)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Keltner:{name:"Keltner Channel",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateKeltner,inputs:{Period:10,Shift:5,"Moving Average Type":"ema","Channel Fill":!0},outputs:{"Keltner Top":"auto","Keltner Median":"auto","Keltner Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}}})):console.error("keltner feature requires first activating studies feature.")},At.q7W(),O=t=>{var e;At.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#0","0","D","D00",e.Studies.calculateKlinger=function(t,i){var a,r,n,s,o,l,h,c,u,d,p;if("Signal P","erio","ds","expo","nent","i","al","_EM","A-L","_E","MA-S","exp","o","nential","_EM","A","-S"," ","Kling","erSignal ",a=i.chart.scrubbed,r=Number(i.inputs["Short Cycle"]),n=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n)+1)i.error=!0;else{for(s=i.name+"_hist",o="Klinger "+i.name,l="KlingerSignal "+i.name,h="_SV "+i.name,c="_EMA-S "+i.name,u="_EMA-L "+i.name,d=Math.max(1,i.startFrom);d<a.length;d++)"h","l","c/","3","h","lc","/3",p=a[d].Volume,a[d]["hlc/3"]<a[d-1]["hlc/3"]&&(At.H3A(0),p*=-At.s_7("1",0)),p&&(a[d][h]=p);for(e.Studies.MA("exponential",r,h,0,"_EMA-S",t,i),e.Studies.MA("exponential",n,h,0,"_EMA-L",t,i),d=Math.max(n,i.startFrom);d<a.length&&(!a[d].futureTick&&null!==a[d][c]&&null!==a[d][u]);d++)a[d][o]=a[d][c]-a[d][u];for(e.Studies.MA("exponential",Number(i.inputs["Signal Periods"]),o,0,"KlingerSignal",t,i),d=i.startFrom;d<a.length;d++)a[d][s]=a[d][o]-a[d][l];i.outputMap[s]=""}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Klinger:{name:"Klinger Volume Oscillator",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateKlinger,inputs:{"Signal Periods":13,"Short Cycle":34,"Long Cycle":55},outputs:{Klinger:"auto",KlingerSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("klinger feature requires first activating studies feature.")},H=t=>{var e,i=At;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i.T4K(),e.Studies?("a","u","t","o","a","ut","o","Li","ne","ar Reg R","2","Time"," Series","time"," serie","s",e.Studies.prettify["time series"]="tsma",e.Studies.movingAverage.conversions.tsma="time series",e.Studies.movingAverage.translations["time series"]="Time Series",e.Studies.movingAverage.typeMap.tsma="TimeSeries",e.Studies.movingAverage.typeMap["time series"]="TimeSeries",e.Studies.calculateMovingAverageTimeSeries=function(t,a){var r,n,s,o,l,h,c,u;for(var d in a.ma=new e.Studies.StudyDescriptor(a.name,"ma",a.panel),a.ma.chart=a.chart,a.ma.days=a.days,a.ma.startFrom=a.startFrom,a.ma.inputs=a.inputs,e.Studies.calculateLinearRegressionIndicator(t,a.ma),r=a.name,a.outputs)i.H3A(83),r=i.R2a(" ",d,r);n=parseInt(a.inputs.Offset,10),isNaN(n)&&(n=0),i.T4K(),s=a.chart.scrubbed,o=n;for(var p=a.startFrom-1;p>=0;p--)if((l=s[p][r])||0===l){if(!(o>0))break;o--}for(h=[],p++;p<s.length;p++)c=s[p],p+n>=0&&(p+n<s.length?(i.H3A(2),s[i.s_7(n,p)][r]=c["Forecast "+a.name]):((u={})[r]=c["Forecast "+a.name],h.push(u)));a.appendFutureTicks(t,h)},e.Studies.calculateLinearRegressionIndicator=function(t,e){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y;if(a=e.chart.scrubbed,i.T4K(),a.length<e.days+1)e.error=!0;else{(r=e.inputs.Field)&&"field"!=r||(r="Close"),i.H3A(2);var v=i.s_7(1,0);i.t7L(131);var b=i.R2a(9,13,13,7);n=e.days*(e.days+v)/b,-1274731095,1276557784,s=2;for(var x=1;-1274731095!==i.Z1$(x.toString(),x.toString().length,45616);x++){o=Math.pow(n,8),i.t7L(45);var S=i.s_7(4,17,37,13);i.t7L(2);var C=i.s_7(5,1);l=n-0*(S+e.days)+C,i.H3A(21),h=i.s_7(4,"5"),i.H3A(21),c=i.R2a(8,"8"),s+=2}if(1276557784!==i.Z1$(s.toString(),s.toString().length,95625)){o=Math.pow(n,2),i.H3A(132);var A=i.s_7(4,1,9,22,9);i.H3A(1);var D=i.R2a(1,2,2);i.H3A(133);var k=i.R2a(3,5,36,69,7);l=n*(A*e.days+D)/k,h=0,c=0}if(u=0,e.startFrom){i.H3A(134);var w=i.R2a(640,4,9,15,5);(d=a[e.startFrom-w]["_sums "+e.name])&&(c=d[0],h=d[1],u=d[2])}for(var M=e.startFrom;M<a.length;M++)if("Fo","r","e","cast ","obj","ec","t",(p=a[M][r])&&"object"==typeof p&&(p=p[e.subField]),(p||0===p)&&(c+=e.days*p-h,h+=p,i.H3A(21),u+=Math.pow(p,i.s_7(2,"2")),!(M<e.days-1))){if(M>e.days-1){if((g=a[M-e.days][r])&&"object"==typeof g&&(g=g[e.subField]),!g&&0!==g)continue;h-=g,u-=Math.pow(g,2)}m=(e.days*c-n*h)/(e.days*l-o),a[M]["Slope "+e.name]=m,f=(h-m*n)/e.days,a[M]["Intercept "+e.name]=f,a[M]["Forecast "+e.name]=f+m*e.days,i.H3A(20);var T=i.R2a(18,30,10);y=(e.days*l-o)/(e.days*u-Math.pow(h,T)),i.H3A(135),a[M]["RSquared "+e.name]=i.s_7(y,m,m),a[M]["_sums "+e.name]=[c,h,u]}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Lin Fcst":{name:"Linear Reg Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}},"Lin Incpt":{name:"Linear Reg Intercept",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Intercept:"auto"}},"Lin R2":{name:"Linear Reg R2",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{RSquared:"auto"}},"LR Slope":{name:"Linear Reg Slope",calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Slope:"auto"}},"Time Fcst":{name:"Time Series Forecast",overlay:!0,calculateFN:e.Studies.calculateLinearRegressionIndicator,inputs:{Period:14,Field:"field"},outputs:{Forecast:"auto"}}})):console.error("linearRegression feature requires first activating studies feature.")},R=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#","F","F","0000","#0","0","D","D00",e.Studies.calculateMACD=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g=At;if("_",g.T4K(),"hi","s","t","Cl","o","s","e",a=i.chart.scrubbed,r=i.inputs,n=i.name,i.macd1Days||(i.macd1Days=parseFloat(r["Fast MA Period"])),i.macd2Days||(i.macd2Days=parseFloat(r["Slow MA Period"])),i.signalDays||(i.signalDays=parseFloat(r["Signal Period"])),i.days||(i.days=Math.max(i.macd1Days,i.macd2Days,i.signalDays)),a.length<i.days+1)i.error=!0;else{for((s=i.inputs.Field)&&"field"!=s||(s="Close"),(o=r["Moving Average Type"])||(o="exponential"),e.Studies.MA(o,i.macd1Days,s,0,"_MACD1",t,i),e.Studies.MA(o,i.macd2Days,s,0,"_MACD2",t,i),l=c=Math.max(i.startFrom,i.days-1);l<a.length;l++)"_M","A","CD2 ","_","MACD2 ",!(h=a[l])["_MACD1 "+n]&&0!==h["_MACD1 "+n]||!h["_MACD2 "+n]&&0!==h["_MACD2 "+n]||(g.t7L(2),h[g.s_7(n,"MACD ")]=h["_MACD1 "+n]-h["_MACD2 "+n]);for((u=r["Signal MA Type"])||(u="exponential"),e.Studies.MA(u,i.signalDays,"MACD "+n,0,"Signal",t,i),g.H3A(2),d=g.R2a("_hist",n),l=c;l<a.length;l++)h=a[l],g.t7L(2),((p=h[g.R2a(n,"Signal ")])||0===p)&&(h[d]=h["MACD "+n]-h["Signal "+n]);i.outputMap[d]=""}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{macd:{name:"MACD",calculateFN:e.Studies.calculateMACD,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{"Fast MA Period":12,"Slow MA Period":26,"Signal Period":9},outputs:{MACD:"auto",Signal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("macd feature requires first activating studies feature.")},z=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Mass Ind","ex",e.Studies.calculateMassIndex=function(t,i){var a,r,n=At;if("_tot","a","l"," ","_EMA"," ","_High-","Lo","w ",(a=i.chart.scrubbed).length<Math.max(9,i.days+1))i.error=!0;else{for(var s=i.startFrom;s<a.length;s++)a[s]["_High-Low "+i.name]=a[s].High-a[s].Low;if(e.Studies.MA("exponential",9,"_High-Low "+i.name,0,"_EMA",t,i),e.Studies.MA("exponential",9,"_EMA "+i.name,0,"_EMA2",t,i),r=0,a[i.startFrom-1]&&a[i.startFrom-1]["_total "+i.name]){n.t7L(136);var o=n.s_7(18,18,24,3,3);r=a[i.startFrom-o]["_total "+i.name]}for(var l=Math.max(17,i.startFrom);l<a.length;l++){if("_","EMA2 ","_E","MA ",r+=a[l]["_EMA "+i.name]/a[l]["_EMA2 "+i.name],l>=17+i.days-1){a[l]["Result "+i.name]=r,n.t7L(0);var h=n.R2a(20,19);n.t7L(124);var c=n.R2a(0,83,10,10,16);r-=a[l-i.days+h]["_EMA "+i.name]/a[l-i.days+c]["_EMA2 "+i.name]}a[l]["_total "+i.name]=r}}},e.Studies.displayMassIndex=function(t,i,a){var r,n,s,o;At.q7W(),e.Studies.displaySeriesAsLine(t,i,a),r=i.inputs["Bulge Threshold"],t.panels[i.panel],n=i.getYAxis(t),s=e.Studies.determineColor(i.outputs.Result),o={skipTransform:t.panels[i.panel].name!=i.chart.name,panelName:i.panel,band:"Result "+i.name,threshold:r,direction:1,color:s,yAxis:n,opacity:.3},!i.highlight&&t.highlightedDraggable&&(o.opacity*=.3),e.preparePeakValleyFill(t,o),e.Studies.drawHorizontal(t,i,null,r,n,s)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Mass Idx":{name:"Mass Index",seriesFN:e.Studies.displayMassIndex,calculateFN:e.Studies.calculateMassIndex,inputs:{Period:25,"Bulge Threshold":27},attributes:{"Bulge Threshold":{min:20,max:35,step:.1}}}})):console.error("massIndex feature requires first activating studies feature.")},j=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("0 to"," 100",e.Studies.calculateMoneyFlowIndex=function(t,e){var i,a,r,n,s,o,l,h,c,u,d,p,g=At;if("_c","umMF ",(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{a=0,r=0,g.t7L(12);var m=g.s_7(14,15);n=i[e.startFrom-m],-1190368165,-2085068508,g.t7L(9),s=g.s_7(0,"2");for(var f=1;-1190368165!==g.v0U(f.toString(),f.toString().length,19740);f++)o="_rawMF "+e.name,s+=2;-2085068508!==g.Z1$(s.toString(),s.toString().length,59762)&&(o=""%e.name),l="_cumMF "+e.name,h="Result "+e.name,n&&n[l]&&(a=n[l][0],r=n[l][1]);for(var y=e.startFrom;y<i.length;y++)"hl","c","/","3",c=i[y]["hlc/3"],y>0&&!i[y].futureTick&&(g.t7L(70),u=i[g.s_7(y,"1")]["hlc/3"],d=c*i[y].Volume,c>u?a+=d:c<u?r-=d*=-1:d=0,y>e.days&&((p=i[y-e.days][o])>0?a-=p:r+=p,0===r?i[y][h]=100:i[y].Volume&&(g.H3A(137),i[y][h]=g.s_7(r,100,a,100,1))),i[y][o]=d,i[y][l]=[a,r])}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"M Flow":{name:"Money Flow Index",range:"0 to 100",calculateFN:e.Studies.calculateMoneyFlowIndex,inputs:{Period:14},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("moneyFlow feature requires first activating studies feature.")},U=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("au","to","a","u","t","o","fie","ld","#0","0","afe","d","#","e","a1d","2c","#FF000","0","#0","0DD","00","m","a","p","oints","Doubl","eExponential","Triple Exponen","tial","2","-exponential","h","u","l","l","de","m","a",e.Studies.prettify=e.extend({"2-exponential":"dema","3-exponential":"tema",hull:"hma"},e.Studies.prettify),e.extend(e.Studies.movingAverage,{conversions:{hma:"hull",dema:"2-exponential",tema:"3-exponential"},translations:{hull:"Hull","2-exponential":"Double Exponential","3-exponential":"Triple Exponential"},typeMap:{hma:"Hull",hull:"Hull",dema:"DoubleExponential","2-exponential":"DoubleExponential",tema:"TripleExponential","3-exponential":"TripleExponential"}}),e.Studies.calculateMovingAverageHull=function(t,i){var a,r,n,s,o,l,h,c,u=At;for("_HM","A","_","MMA ","Cl","ose",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA("wma",i.days,r,0,"_WMA1",t,i),e.Studies.MA("wma",Math.ceil(i.days/2),r,0,"_WMA2",t,i),n=i.startFrom-1;n>=0&&((s=a[n][r])&&"object"==typeof s&&(s=s[i.subField]),!s&&0!==s);n--);for(n++;n<a.length;n++){"_","WMA1"," ",o=a[n],u.t7L(63);var d=u.s_7(15,710,4,2,24);o["_MMA "+i.name]=d*o["_WMA2 "+i.name]-o["_WMA1 "+i.name]}for(var p in l=parseInt(i.inputs.Offset,10),isNaN(l)&&(l=0),h=Math.floor(Math.sqrt(i.days)),e.Studies.MA("wma",h,"_MMA "+i.name,l,"_HMA",t,i),c=i.name,i.outputs)u.t7L(83),c=u.R2a(" ",p,c);for(n=Math.max(i.days+h-1,i.startFrom);n<a.length;n++)a[n][c]=a[n]["_HMA "+i.name]},e.Studies.calculateMovingAverageDoubleExponential=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m=At;for("_","EM","A","2","e","m","a","f","ie","ld",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA("ema",i.days,r,0,"_EMA1",t,i),e.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",t,i),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==typeof o&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}for(var f in h=i.name,i.outputs)m.H3A(83),h=m.s_7(" ",f,h);for(c=[],s++;s<a.length;s++){if(!(s<2*(i.days-1)))u=a[s],m.H3A(1),d=m.R2a(0,16,18)*u["_EMA1 "+i.name]-u["_EMA2 "+i.name],s+n>=0&&(s+n<a.length?(m.t7L(2),a[m.R2a(n,s)][h]=d):((p={})[h]=d,c.push(p)))}g=2;for(var y=1;-693636352!==m.Z1$(y.toString(),y.toString().length,18503);y++)i.appendFutureTicks(t,c),m.H3A(19),g+=m.s_7(32,"2");950884207!==m.v0U(g.toString(),g.toString().length,80341)&&i.appendFutureTicks(t,c),i.appendFutureTicks(t,c)},e.Studies.calculateMovingAverageTripleExponential=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f=At;for("fi","e","l","d",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),e.Studies.MA("ema",i.days,r,0,"_EMA1",t,i),e.Studies.MA("ema",i.days,"_EMA1 "+i.name,0,"_EMA2",t,i),e.Studies.MA("ema",i.days,"_EMA2 "+i.name,0,"_EMA3",t,i),f.q7W(),n=parseInt(i.inputs.Offset,10),isNaN(n)&&(n=0),l=n,s=i.startFrom-1;s>=0;s--)if((o=a[s][r])&&"object"==typeof o&&(o=o[i.subField]),o||0===o){if(!(l>0))break;l--}f.t7L(0),h=-f.R2a("1291710559",0),c=2;for(var y=1;-698540106!==f.v0U(y.toString(),y.toString().length,10818);y++)u=i.name,c+=2;for(var v in f.v0U(c.toString(),c.toString().length,23656)!==h&&(u=i.name),u=i.name,i.outputs)f.t7L(83),u=f.R2a(" ",v,u);for(d=[],s++;s<a.length;s++)if("_EMA1"," ",!(s<3*(i.days-1))){p=a[s],f.t7L(138);var b=f.R2a(218,6,19,17,1);f.t7L(2);var x=f.s_7(2,1);g=b*p["_EMA1 "+i.name]-x*p["_EMA2 "+i.name]+p["_EMA3 "+i.name],s+n>=0&&(s+n<a.length?(f.t7L(2),a[f.s_7(n,s)][u]=g):((m={})[u]=g,d.push(m)))}i.appendFutureTicks(t,d)},e.Studies.calculateMAEnvelope=function(t,i){var a,r,n;(a=i.inputs.Field)&&"field"!=a||(a="Close"),e.Studies.MA(i.inputs["Moving Average Type"],i.days,a,0,"MA",t,i),r=i.inputs["Shift Type"],n=i.inputs.Shift,r||("p","e","rce","nt",r="percent",n=i.inputs["Shift Percentage"]),"percent"==r?(At.H3A(8),e.Studies.calculateGenericEnvelope(t,i,At.s_7(n,100),"MA "+i.name)):"points"==r&&("M","A"," ",e.Studies.calculateGenericEnvelope(t,i,null,"MA "+i.name,null,Number(n)))},e.Studies.calculateMADev=function(t,i){var a,r,n,s,o,l,h,c,u=At;if("_","h","ist","_","M","A","f","i","eld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs["Points Or Percent"])||(n="Points"),(s=i.inputs["Moving Average Type"])||(s="exponential"),e.Studies.MA(s,i.days,r,0,"_MA",t,i),o=i.name+"_hist";for(var d=Math.max(i.startFrom,i.days-1);d<a.length;d++)(h=(l=a[d])[r])&&"object"==typeof h&&(h=h[i.subField]),((c=l["_MA "+i.name])||0===c)&&("Points"==n?(u.H3A(0),l[o]=u.R2a(h,c)):(u.t7L(139),l[o]=u.R2a(100,1,c,h)));i.outputMap={},i.outputMap[i.name+"_hist"]=""}},e.Studies.calculateGMMA=function(t,i){var a,r,n,s=At;function o(a){return function(r){s.t7L(2),e.Studies.MA("ema",r,"Close",0,s.R2a(r,"MA "),t,i),i.outputMap["MA "+r+" "+i.name]=a}}a=i.chart.scrubbed,s.H3A(19),r=[s.R2a(64,"3"),5,8,10,12,15],s.t7L(21),s.q7W(),n=[30,35,40,s.s_7(0,"45"),50,60],a.length<r[0]?i.error=!0:(i.outputMap={},r.forEach(o("Short Term")),n.forEach(o("Long Term")))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"MA Env":{name:"Moving Average Envelope",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:e.Studies.calculateMAEnvelope,inputs:{Period:50,Field:"field","Shift Type":["percent","points"],Shift:5,"Moving Average Type":"ma","Channel Fill":!0},outputs:{"MA Env Top":"auto","MA Env Median":"auto","MA Env Bottom":"auto"},attributes:{Shift:{min:.1,step:.1}}},"MA Dev":{name:"Moving Average Deviation",calculateFN:e.Studies.calculateMADev,seriesFN:e.Studies.displayHistogramWithSeries,inputs:{Period:12,Field:"field","Moving Average Type":"ma","Points Or Percent":["Points","Percent"]},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}},Guppy:{name:"Guppy Multiple Moving Average",overlay:!0,calculateFN:e.Studies.calculateGMMA,inputs:{},outputs:{"Short Term":"#ea1d2c","Long Term":"#00afed"}},"High Low":{name:"High Low Bands",overlay:!0,seriesFN:e.Studies.displayChannel,calculateFN:function(t,i){i.inputs["Moving Average Type"]="triangular",At.T4K(),e.Studies.calculateMAEnvelope(t,i)},inputs:{Period:10,Field:"field","Shift Percentage":5,"Channel Fill":!0},outputs:{"High Low Top":"auto","High Low Median":"auto","High Low Bottom":"auto"},attributes:{"Shift Percentage":{min:.1,step:.1}}}})):console.error("movingAverages feature requires first activating studies feature.")},B=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculatePSAR=function(t,e){var a,r,n,s,o,l,h,c,u,d,p;function g(){r=0,n=null,s=!s}if("Min","im","um AF",a=e.chart.scrubbed,r=0,n=null,s=!1,o=0,l=parseFloat(e.inputs["Minimum AF"]),h=parseFloat(e.inputs["Maximum AF"]),e.startFrom>0){i.t7L(6);var m=i.R2a(19,0,20);o=a[e.startFrom-m]["Result "+e.name],i.t7L(140);var f=i.R2a(4,9,3,1,8);(c=a[e.startFrom-f]["_state "+e.name])&&3==c.length&&(r=c[0],n=c[1],i.t7L(21),s=c[i.s_7(2,"2")])}for(var y=e.startFrom-1;y<a.length-1;y++)if(!(y<0)){if(a[y].futureTick)break;u=o,s?((!n||n<a[y].High)&&(n=a[y].High,i.H3A(2),r=Math.min(i.s_7(l,r),h)),i.t7L(141),o=i.R2a(u,r,n,u),d=Math.min(a[Math.max(1,y)-1].Low,a[y].Low),o>a[y+1].Low?(o=n,g()):o>d&&(o=d)):((!n||n>a[y].Low)&&(n=a[y].Low,i.t7L(2),r=Math.min(i.R2a(l,r),h)),i.t7L(141),o=i.R2a(u,r,n,u),p=Math.max(a[Math.max(1,y)-1].High,a[y].High),o<a[y+1].High?(o=n,g()):o<p&&(o=p)),i.H3A(2),a[i.s_7(1,y)]["_state "+e.name]=[r,n,s],isNaN(a[y].High)&&isNaN(a[y].Low)||(i.t7L(2),a[i.s_7(1,y)]["Result "+e.name]=o)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{PSAR:{name:"Parabolic SAR",overlay:!0,calculateFN:e.Studies.calculatePSAR,seriesFN:e.Studies.displayPSAR2,inputs:{"Minimum AF":.02,"Maximum AF":.2}}})):("parabolicSAR feature requires first activating studies feature",".",console.error("parabolicSAR feature requires first activating studies feature."))},V=t=>{var e,i;if((e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies){e.Studies.calculatePivotPoints=function(t,i){var a,r,n,s,o,l,h,c,u,d,p=At;function g(){p.t7L(142);var t=p.s_7(10,15,3,20,23);p.H3A(115);var e=p.R2a(5,4,2);c.pivotPoint=(c.high+c.low+a[m-t].Close)/e,c.prevHigh=c.high,c.prevLow=c.low,c.hlSpread=c.high-c.low,c.high=c.low=0}p.q7W(),a=i.chart.scrubbed,r="day",n=t.layout.interval,s=t.layout.timeUnit,"day"==n?r="month":e.ChartEngine.isDailyInterval(n)?r="year":"second"==n||"millisecond"==n||"second"==s||"millisecond"==s?r="15min":("w","e","e","k",o=t.layout.periodicity,"minute"!=n&&(o*=n),o>=30&&(r="week")),l=null,p.t7L(2),h=p.R2a(6,1)-e.getFromNS(t.chart,"market.beginningDayOfWeek",0),c={pivotPoint:NaN,high:0,low:0,prevHigh:0,prevLow:0,hlSpread:0},i.startFrom>1&&a[i.startFrom-1]["_pointers "+i.name]&&(c=e.clone(a[i.startFrom-1]["_pointers "+i.name]));for(var m=Math.max(1,i.startFrom);m<a.length;m++)if("fi","b","onacc","i","Pi","vot ",a[m-1]){if(c.high=Math.max(c.high,a[m-1].High),c.low=Math.min(c.low>0?c.low:a[m-1].Low,a[m-1].Low),i.inputs.Continuous||"year"==r&&a[m].DT.getYear()!=a[m-1].DT.getYear()||"month"==r&&a[m].DT.getMonth()!=a[m-1].DT.getMonth()||"week"==r&&(a[m].DT.getDay()+h)%7<(a[m-1].DT.getDay()+h)%7?g():"day"==r?(null===l&&(l=e.Studies.getMarketOffset({stx:t,localQuoteDate:a[m].DT,shiftToDateBoundary:!0})),u=new Date(new Date(+a[m].DT).setMilliseconds(a[m].DT.getMilliseconds()+l)),(d=new Date(new Date(+a[m-1].DT).setMilliseconds(a[m-1].DT.getMilliseconds()+l))).getDate()!==u.getDate()&&0!==d.getDay()&&t.chart.market.isMarketDate(u)&&(l=null,g())):"15min"!=r||a[m].DT.getHours()==a[m-1].DT.getHours()&&Math.floor(a[m].DT.getMinutes()/15)==Math.floor(a[m-1].DT.getMinutes()/15)||g(),a[m]["Pivot "+i.name]=c.pivotPoint,"fibonacci"==i.inputs.Type.toLowerCase())"S","up","port 3 ","Resistance"," 2"," ",a[m]["Resistance 1 "+i.name]=c.pivotPoint+.382*c.hlSpread,a[m]["Resistance 2 "+i.name]=c.pivotPoint+.618*c.hlSpread,a[m]["Resistance 3 "+i.name]=c.pivotPoint+c.hlSpread,a[m]["Support 1 "+i.name]=c.pivotPoint-.382*c.hlSpread,a[m]["Support 2 "+i.name]=c.pivotPoint-.618*c.hlSpread,a[m]["Support 3 "+i.name]=c.pivotPoint-c.hlSpread;else{"Resi","stance"," 1"," ",p.H3A(0);var f=p.s_7(20,18);a[m]["Resistance 1 "+i.name]=f*c.pivotPoint-c.prevLow,a[m]["Resistance 2 "+i.name]=c.pivotPoint+c.hlSpread,p.t7L(109);var y=p.s_7(0,18,20);a[m]["Resistance 3 "+i.name]=c.prevHigh+y*(c.pivotPoint-c.prevLow),p.t7L(24);var v=p.R2a(78,4,20);a[m]["Support 1 "+i.name]=v*c.pivotPoint-c.prevHigh,a[m]["Support 2 "+i.name]=c.pivotPoint-c.hlSpread,p.H3A(20);var b=p.s_7(14,22,6);a[m]["Support 3 "+i.name]=c.prevLow-b*(c.prevHigh-c.pivotPoint)}a[m]["_pointers "+i.name]=e.clone(c)}},e.Studies.displayPivotPoints=function(t,i,a){var r,n;At.q7W(),i.noSlopes=!i.inputs.Continuous,e.Studies.displaySeriesAsLine(t,i,a),i.inputs.Shading&&("Su","ppo","rt ","3","Su","ppor","t ","2 ","S","uppor","t ","1 ","Pi","v","ot ","Sup","p","ort 1 ","Pi","vo","t"," ",r=t.panels[i.panel],n={noSlopes:i.noSlopes,opacity:i.parameters.opacity?i.parameters.opacity:.2,skipTransform:r.name!=i.chart.name,yAxis:i.getYAxis(t)},!i.highlight&&t.highlightedDraggable&&(n.opacity*=.3),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Resistance 3 "+i.name,bottomBand:"Resistance 2 "+i.name,color:e.Studies.determineColor(i.outputs["Resistance 3"])},n)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Resistance 2 "+i.name,bottomBand:"Resistance 1 "+i.name,color:e.Studies.determineColor(i.outputs["Resistance 2"])},n)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Resistance 1 "+i.name,bottomBand:"Pivot "+i.name,color:e.Studies.determineColor(i.outputs["Resistance 1"])},n)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Support 1 "+i.name,bottomBand:"Pivot "+i.name,color:e.Studies.determineColor(i.outputs["Support 1"])},n)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Support 2 "+i.name,bottomBand:"Support 1 "+i.name,color:e.Studies.determineColor(i.outputs["Support 2"])},n)),e.prepareChannelFill(t,e.extend({panelName:i.panel,topBand:"Support 3 "+i.name,bottomBand:"Support 2 "+i.name,color:e.Studies.determineColor(i.outputs["Support 3"])},n)))},-1846501341,61462018,i=2;for(var a=1;-1846501341!==At.v0U(a.toString(),a.toString().length,38731);a++)"Supp","ort 2","#","d3e8","ae","Suppo","rt"," 2","Re","s","istance 3",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pivot Points":{name:"Resistance 3",overlay:!1,seriesFN:e.Studies.displayPivotPoints,calculateFN:e.Studies.calculatePivotPoints,inputs:{Type:["Resistance 3","Resistance 3"],Continuous:!0,Shading:!0},outputs:{Pivot:"Resistance 3","Resistance 1":"#699158","Support 1":"Support 2","Resistance 2":"#d3e8ae","Support 2":"Resistance 3","Resistance 3":"Support 2","Support 3":"Support 2"},parameters:{init:{opacity:542}}}}),i+=2;61462018!==At.Z1$(i.toString(),i.toString().length,44271)&&("#ffd","0","c","f","#e36","460","standar","d","Piv","ot Points",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pivot Points":{name:"Pivot Points",overlay:!0,seriesFN:e.Studies.displayPivotPoints,calculateFN:e.Studies.calculatePivotPoints,inputs:{Type:["standard","fibonacci"],Continuous:!1,Shading:!1},outputs:{Pivot:"auto","Resistance 1":"#b82c0b","Support 1":"#699158","Resistance 2":"#e36460","Support 2":"#b3d987","Resistance 3":"#ffd0cf","Support 3":"#d3e8ae"},parameters:{init:{opacity:.2}}}}))}else console.error("pivotPoints feature requires first activating studies feature.")},W=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Pretty Good Os","c","illa","tor",e.Studies.calculatePrettyGoodOscillator=function(t,i){var a;if("_",At.T4K(),"S","M","A","s","im","ple","trueR","ang","e",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{e.Studies.MA("exponential",i.days,"trueRange",0,"_EMA",t,i),e.Studies.MA("simple",i.days,"Close",0,"_SMA",t,i);for(var r=Math.max(1,i.startFrom);r<a.length;r++)"_E","MA ",a[r]["_SMA "+i.name]&&a[r]["_EMA "+i.name]&&(a[r]["Result "+i.name]=(a[r].Close-a[r]["_SMA "+i.name])/a[r]["_EMA "+i.name])}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pretty Good":{name:"Pretty Good Oscillator",calculateFN:e.Studies.calculatePrettyGoodOscillator,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}}}})):console.error("prettyGoodOscillator feature requires first activating studies feature.")},Q=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("0",".05","0",".0","5","a","u","to","Price Momentum ","Oscilla","tor",e.Studies.calculatePMO=function(t,i){var a,r,n,s,o,l=At;if("P","MOSign","al","ex","p","o","nential","_","ROCx10 ","exp","onential","C","los","e",a={Smooth:Number(i.inputs["Smoothing Period"])-1,Double:Number(i.inputs["Double Smoothing Period"])-1,Signal:Number(i.inputs["Signal Period"])},(r=i.chart.scrubbed).length<a.Smooth+a.Double)i.error=!0;else{for((n=i.inputs.Field)&&"field"!=n||(n="Close"),s=i.startFrom;s<r.length;s++)if(r[s]&&r[s-1]&&(l.H3A(0),o=r[l.s_7(s,1)][n])){l.t7L(0);var h=l.s_7(11e3,1e4);l.H3A(12);var c=l.s_7(19,20);r[s]["_ROCx10 "+i.name]=h*(r[s][n]/o-c)}e.Studies.MA("exponential",a.Smooth,"_ROCx10 "+i.name,0,"_EMAx10",t,i),e.Studies.MA("exponential",a.Double,"_EMAx10 "+i.name,0,"PMO",t,i),e.Studies.MA("exponential",a.Signal,"PMO "+i.name,0,"PMOSignal",t,i),i.zoneOutput="PMO"}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{PMO:{name:"Price Momentum Oscillator",calculateFN:e.Studies.calculatePMO,inputs:{Field:"field","Smoothing Period":35,"Double Smoothing Period":20,"Signal Period":10},outputs:{PMO:"auto",PMOSignal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:2.5,studyOverBoughtColor:"auto",studyOverSoldValue:-2.5,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.05"},studyOverSoldValue:{max:0,step:"0.05"}}}})):console.error("priceMomentumOscillator feature requires first activating studies feature.")},Y=t=>{var e,i=At;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i.q7W(),e.Studies?("Pe","rce","nt","Po","i","nt","s","Volu","me Os","c","illator","Perc","ent",e.Studies.calculatePriceOscillator=function(t,a){var r,n,s,o,l,h,c,u,d;if(r=a.chart.scrubbed,n=Number(a.inputs["Short Cycle"]),s=Number(a.inputs["Long Cycle"]),r.length<Math.max(n,s)+1)a.error=!0;else{o=a.inputs.Field,(l=a.inputs["Moving Average Type"])||(l="simple"),o&&"field"!=o||(o="Close"),a.parameters.isVolume&&("exponen","tial","Vo","lu","me",o="Volume",l="exponential"),i.T4K(),(h=a.inputs["Points Or Percent"])||(h="Percent"),e.Studies.MA(l,n,o,0,"_Short MA",t,a),e.Studies.MA(l,s,o,0,"_Long MA",t,a);for(var p=Math.max(s,a.startFrom);p<r.length;p++)(c=r[p])&&(u=c["_Short MA "+a.name],d=c["_Long MA "+a.name],!u&&0!==u||!d&&0!==d||("Poin","ts","Points"==h?(i.H3A(0),c["Result "+a.name]=i.s_7(u,d)):(i.t7L(139),c["Result "+a.name]=i.s_7(100,1,d,u)),a.outputs["Increasing Bar"]&&(c[a.name+"_hist"]=c["Result "+a.name],a.outputMap={},a.outputMap[a.name+"_hist"]="")))}},e.Studies.displayRAVI=function(t,a,r){var n,s,o,l,h,c,u,d,p,g,m;n=t.panels[a.panel],s=a.getContext(t),o=a.getYAxis(t),l=t.pixelFromPrice(0,n,o),i.t7L(109);var f=i.s_7(6,12,20);(h=t.layout.candleWidth-f)<2&&(h=1),c=e.Studies.determineColor(a.outputs["Increasing Bar"]),u=e.Studies.determineColor(a.outputs["Decreasing Bar"]),t.startClip(a.panel),t.canvasColor("stx_histogram"),a.underlay||(s.globalAlpha=1),!a.highlight&&t.highlightedDraggable&&(s.globalAlpha*=.3);for(var y=0;y<r.length;y++)"_h","i","s","t","#CC","C","CCC",d=r[y],i.H3A(0),(p=r[i.R2a(y,1)])||(p=t.getPreviousBar(t.chart,a.name+"_hist",y)),d&&(g=0,m=0,a.parameters&&a.parameters.studyOverZonesEnabled&&(g=parseFloat(a.parameters.studyOverBoughtValue),m=parseFloat(a.parameters.studyOverSoldValue)),p?d[a.name+"_hist"]>g&&p[a.name+"_hist"]<d[a.name+"_hist"]?s.fillStyle=c:d[a.name+"_hist"]<m&&p[a.name+"_hist"]>d[a.name+"_hist"]?s.fillStyle=u:s.fillStyle="#CCCCCC":s.fillStyle="#CCCCCC",d.candleWidth&&(h=Math.floor(Math.max(1,d.candleWidth-2))),s.fillRect(Math.floor(t.pixelFromBar(y,n.chart)-h/2),Math.floor(l),Math.floor(h),Math.floor(t.pixelFromPrice(d[a.name+"_hist"],n,o)-l)));t.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Price Osc":{name:"Price Oscillator",calculateFN:e.Studies.calculatePriceOscillator,inputs:{Field:"field","Short Cycle":12,"Long Cycle":26,"Moving Average Type":"ema","Points Or Percent":["Points","Percent"]}},"Vol Osc":{name:"Volume Oscillator",calculateFN:e.Studies.calculatePriceOscillator,inputs:{"Short Cycle":12,"Long Cycle":26,"Points Or Percent":["Points","Percent"]},parameters:{init:{isVolume:!0}}},RAVI:{name:"RAVI",seriesFN:e.Studies.displayRAVI,calculateFN:e.Studies.calculatePriceOscillator,inputs:{Field:"field","Moving Average Type":"vdma","Short Cycle":7,"Long Cycle":65},outputs:{"Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"},centerline:0,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:3,studyOverBoughtColor:"auto",studyOverSoldValue:-3,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:0,step:"0.1"},studyOverSoldValue:{max:0,step:"0.1"}}}})):("priceVolumeOscillator feature requir","es first activat","ing studies feature.",console.error("priceVolumeOscillator feature requires first activating studies feature."))},q=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("a","u","t","o","a","u","to","-1"," to 1",e.Studies.calculatePrimeNumber=function(t,e){var i,a,r,n,s,o,l,h,c=At;i=[],a=e.chart.scrubbed;for(var u=e.startFrom;u<a.length;u++)if(r=a[u]){if(n=r.High,!isNaN(n)){for(var d=0;n>0&&n<=10;d++)n*=10;for(m(n)&&(n+=2),(n=Math.ceil(n))%2==0&&n++;!m(n);)n+=2;n/=Math.pow(10,d)}if(s=r.Low,!isNaN(s)){for(var p=0;s>0&&s<=10;p++)s*=10;if(m(s)&&(c.H3A(38),s-=c.R2a("2",0)),(s=Math.floor(s))%2==0&&s--,s>0){for(;!m(s);)s-=2;s/=Math.pow(10,p)}}if("Prime Number Bands"==e.type)isNaN(n)||(r["Prime Bands Top "+e.name]=n),isNaN(s)||(r["Prime Bands Bottom "+e.name]=Math.max(0,s));else{"R","esult ",o=0,c.t7L(4);var g=c.s_7(500,399,13,12);l=e.inputs["Tolerance Percentage"]*(n-s)/g,c.H3A(86),(h=n+s-c.R2a(5,3,1)*r.Close)<l?o=1:h>l&&(o=-1),o&&(r["Result "+e.name]=o)}}function m(t){var e;if(t<=0)return!1;if(t!=Math.floor(t))return!1;if(!0===i[t]||!1===i[t])return i[t];c.q7W(),e=parseInt(Math.sqrt(t),10);for(var a=2;a<=e;a++)if(t%a==0)return i[t]=!1,!1;return i[t]=!0,!0}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Prime Number":{name:"Prime Number Oscillator",range:"-1 to 1",calculateFN:e.Studies.calculatePrimeNumber,centerline:0,inputs:{"Tolerance Percentage":5},attributes:{"Tolerance Percentage":{min:.1,step:.1}}},"Prime Number Bands":{name:"Prime Number Bands",overlay:!0,calculateFN:e.Studies.calculatePrimeNumber,seriesFN:e.Studies.displayChannel,inputs:{"Channel Fill":!0},outputs:{"Prime Bands Top":"auto","Prime Bands Bottom":"auto","Prime Bands Channel":"auto"}}})):console.error("primeNumber feature requires first activating studies feature.")},X=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#F","F","00","00","#00D","D","0","0",e.Studies.calculateKST=function(t,i){var a,r,n,s,o,l,h,c,u=At;for("Signa","l Pe","r","iod","Heaviest SMA ","Pe","riod","Light ","SMA Pe","r","iod","Ligh","te",u.T4K(),"st SMA Period","Heaviest Ra","te of Change Period","Lightest Rat","e of Change Period","Clo","s","e",a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),s={},(n={})[1]=Number(i.inputs["Lightest Rate of Change Period"]),n[2]=Number(i.inputs["Light Rate of Change Period"]),n[3]=Number(i.inputs["Heavy Rate of Change Period"]),n[4]=Number(i.inputs["Heaviest Rate of Change Period"]),s[1]=Number(i.inputs["Lightest SMA Period"]),s[2]=Number(i.inputs["Light SMA Period"]),s[3]=Number(i.inputs["Heavy SMA Period"]),s[4]=Number(i.inputs["Heaviest SMA Period"]),o=Number(i.inputs["Signal Period"]),l=i.startFrom;l<a.length;l++)if(a[l])for(h=1;h<=4;h++)if(l>=n[h]&&a[l-n[h]]&&a[l-n[h]][r]){u.H3A(20);u.s_7(7,35200,31673);u.t7L(35);var d=u.s_7(39217,7,6536,5);u.H3A(143);u.R2a(5,6643,53128,9,4);u.t7L(144);var p=u.s_7(5536,2,326,12);u.t7L(145);u.s_7(17,15,6,20,270);u.t7L(46);var g=u.R2a(8,3399,44200,5525);u.t7L(2);var m=u.R2a(843,281);u.H3A(2);var f=u.s_7(87,13);u.H3A(2);var y=u.s_7(1,0);a[l]["_ROC"+h+(d<32.42?p>g?"E":m:" ")+i.name]=f*(a[l][r]/a[l-n[h]][r]-y)}for(h=1;h<=4;h++)"_","SMA",e.Studies.MA("simple",s[h],"_ROC"+h+" "+i.name,0,"_SMA"+h,t,i);for(l=i.startFrom;l<a.length;l++)for(a[l]["KST "+i.name]=null,h=1;h<=4;h++){u.t7L(24);u.s_7(14735,7578,2);u.t7L(146);var v=u.R2a(9221,4,16,2314,9256);u.H3A(147);u.R2a(19,17,657,9165,8);u.H3A(148);var b=u.s_7(204,17,8,1619,6);u.t7L(57);var x=u.s_7(6,8229,5,8238,24729);u.H3A(149);var S=u.R2a(5,2,114992,107790,12);((c=a[l]["_SMA"+h+(v>=b?190.55!=x?" ":S:"g")+i.name])||0===c)&&(u.t7L(16),a[l]["KST "+i.name]+=u.R2a(c,h))}e.Studies.MA("simple",o,"KST "+i.name,0,"KSTSignal",t,i)},e.Studies.calculateSpecialK=function(t,i){var a,r,n,s,o,l,h,c,u=At;for(u.q7W(),a=i.chart.scrubbed,(r=i.inputs.Field)&&"field"!=r||(r="Close"),(n=i.inputs.Interval)||(n="daily"),s={daily:[10,15,20,30,50,65,75,100,195,265,390,530],weekly:[4,5,6,8,10,13,15,20,39,52,78,104]},o={daily:[10,10,10,15,50,65,75,100,130,130,130,195],weekly:[4,5,6,8,10,13,15,20,26,26,26,39]},l=i.startFrom;l<a.length;l++)if(a[l])for(h=0;h<s[n].length;h++)if(l>=s[n][h]&&a[l-s[n][h]]&&a[l-s[n][h]][r]){u.t7L(99);u.s_7(6560,5900,10,6);u.t7L(0);var d=u.R2a(145350,136800);u.t7L(13);u.R2a(83,9952,830);u.H3A(72);u.R2a(4,5,32370,45650);u.H3A(64);var p=u.R2a(2,25,17,3,107);a[l]["_ROC"+h+(d>437.6?" ":335.37)+i.name]=p*(a[l][r]/a[l-s[n][h]][r]-1)}for(h=0;h<o[n].length;h++)"s","impl","e",e.Studies.MA("daily"==n?"simple":"exponential",o[n][h],"_ROC"+h+" "+i.name,0,"_MA"+h,t,i);for(l=i.startFrom;l<a.length;l++)for("Resu","lt"," ",a[l]["Result "+i.name]=null,h=0;h<o[n].length;h++){u.t7L(69);var g=u.R2a(8,1829,9165,9153);((c=a[l]["_MA"+h+(g<=985.42?"Q":" ")+i.name])||0===c)&&(u.t7L(150),a[l]["Result "+i.name]+=u.R2a(0,h,"4",1,c))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Pring KST":{name:"Pring's Know Sure Thing",calculateFN:e.Studies.calculateKST,inputs:{Field:"field","Lightest Rate of Change Period":10,"Lightest SMA Period":10,"Light Rate of Change Period":15,"Light SMA Period":10,"Heavy Rate of Change Period":20,"Heavy SMA Period":10,"Heaviest Rate of Change Period":30,"Heaviest SMA Period":15,"Signal Period":9},outputs:{KST:"#00DD00",KSTSignal:"#FF0000"}},"Pring Sp-K":{name:"Pring's Special K",calculateFN:e.Studies.calculateSpecialK,inputs:{Field:"field",Interval:["daily","weekly"]}}})):console.error("pring feature requires first activating studies feature.")},Z=t=>{var e,i,a=At;a.q7W(),e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i="undefined"!=typeof _timezoneJS?_timezoneJS:t.timezoneJS,e.Studies?e.Studies.studyLibrary.PVAT||("#","b82c0c","Pr","ojected Aggregate Volume","hh:","mm",":","ss","#","fe6","4","1c","-7","5","%","+","50%","+","7","5%","+","100%","+","12","5","%","Projected Volu","me at Time",e.Studies.initProjectedVolume=function(t,i,r,n,s,o){var l,h;var{market:c}=t.chart;return a.q7W(),l="00:00",c&&(l=c.getNormalOpen()),l.match(/^[\d]{2}:[\d]{2}$/)&&(l+=":00"),r["Anchor Time"]&&r["Anchor Time"].length||(r["Anchor Time"]=l),h=e.Studies.initializeFN(t,i,r,n,s,o),t.currentlyImporting||(h.defaultAnchorTime=l),h},e.Studies.validateProjectedVolumeLookback=function(t,e){var{interval:i,periodicity:r}=t.layout,{"Lookback Days":n}=e.inputs;return a.H3A(151),a.R2a(n,10,i,r)},e.Studies.calculateProjectedVolume=function(t,r){var n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q,X,Z,J;var{interval:G,timeUnit:K,aggregationType:$}=t.layout,{symbol:tt,scroll:et,scrubbed:it,market:at}=t.chart;if(n="PAV"===r.type,s=r.study?r.study.name:r.type,e.ChartEngine.isDailyInterval(G)?(a.t7L(83),r.error=`${s}${a.R2a("d"," is Intra","ay Only")}`):"tick"===K?(a.H3A(2),r.error=`${a.R2a("ted for ","Tick mode not suppor")}${s}`):"minute"!==K?(a.H3A(2),r.error=`${a.s_7("ted for ","Sub-minute periodicities not suppor")}${s}`):$&&["ohlc","heikinashi"].includes($)?e.Studies.validateProjectedVolumeLookback(t,r)||(a.t7L(2),r.error=`${a.R2a("supported for ","Selected lookback/periodicity combo not ")}${s}`):r.error=`Aggregation type not supported for ${s}`,!r.error){if(r.inputs["Anchor Selector"]?e.Studies.initAnchorHandle(t,r):e.Studies.removeAnchorHandle(t,r),(o=at?at.getNormalOpen():"00:00").match(/^[\d]{2}:[\d]{2}$/)&&(o+=":00"),!t.currentlyImporting)if(r.defaultAnchorTime){if(o!==r.defaultAnchorTime)return r.defaultAnchorTime=o,r.inputs["Anchor Time"]=o,void e.Studies.repositionAnchor(t,r)}else r.defaultAnchorTime=o;var{"Lookback Days":rt,"Anchor Time":nt}=r.inputs;a.H3A(38);var[st,ot,lt=At.R2a("0",32)]=nt.split(":");if(l=e.getFn("Market.Symbology.isForexSymbol")(tt),h=r.getDependents(t),c=0,u=[],h.forEach((({inputs:t,outputMap:e})=>{var i;if(a.T4K(),t.Period){c=Math.max(parseInt(t.Period),c),1592230011,1134378255,i=2;for(var r=1;1592230011!==a.v0U(r.toString(),r.toString().length,22978);r++)u.push(...Object.keys(e)),i+=2;1134378255!==a.v0U(i.toString(),i.toString().length,76075)&&u.push(...Object.keys(e))}})),r.dependentsOutputMap=u,p=Mt(it.length-1,!0),g=Math.ceil(it.length-1-et),a.H3A(0),m=Mt(a.s_7(g,c)),l&&it[m]&&e.dateToStr(it[m].DT,"HH:mm")!==o&&(a.H3A(0),m=Mt(a.R2a(m,1))),!l&&r.startFrom>m&&it[m]&&void 0!==it[m]["V "+r.name]&&u.every((t=>![void 0,null].includes(it[m][t])))&&!1!==p)d=p;else{1943957594,-983302082,a.H3A(0),f=a.s_7("2",0);for(var ht=1;1943957594!==a.v0U(ht.toString(),ht.toString().length,23346);ht++)d=m,f+=2;-983302082!==a.v0U(f.toString(),f.toString().length,13270)&&(d=m)}if(a.q7W(),(y=wt(Dt(m),rt)).setHours(0,0,0),b=((v=Mt(0,!0))||0===v)&&kt(wt(it[v].DT,rt,!0)),it[0].DT>y){if(!t.quoteDriver)return r.error=`Not enough data to calculate ${s}`;if(r.chart.endPoints.begin>y&&t.quoteDriver.extendHistoricalData({from:y}),!(b>0))return;d=b}if(!(d<0||d>it.length-1)){if(x=it.length-r.startFrom==1&&r.cachedFutureTicks&&r.cachedLastProjection&&+r.cachedLastProjection.DT==+it[it.length-1].DT&&it[d]["PV "+r.name]){"P","V ",a.t7L(152);var ct=a.R2a(20,19,1,10,11);it[it.length-ct]["PV "+r.name]=r.cachedLastProjection.projectedValue,r.appendFutureTicks(t,r.cachedFutureTicks),d=r.startFrom}else{r.cachedFutureTicks=null,r.cachedLastProjection=null,S=[p],C=[];for(var ut=0;ut<rt;ut++)A=Mt(S[0]-1),S.unshift(A);for(;S[rt]>=d;){if(D=S.pop(),!it[D])return St(D);k=Ct(it[D].DT);var{hours:dt,minutes:pt}=k;if(M=void 0,w=at.getClose(it[D].DT)){for(T=at.getNextClose(it[D].DT),M=Ct(w);(0!==M.hours||0!==M.minutes)&&w.getDate()===T.getDate();)w=T,T=at.getNextClose(T);0===(M=Ct(w)).hours&&(M.hours=24)}else M={hours:24,minutes:0};F=S.slice();for(var gt=0;gt<F.length;gt++){if(P=F[gt],!it[P])return St(P);var{hours:mt,minutes:ft}=Ct(it[P].DT);if(mt<dt||mt===dt&&ft<pt)do{P++,({hours:mt,minutes:ft}=Ct(it[P].DT))}while(mt!==dt||ft!==pt);F[gt]=P}for(;dt<M.hours||dt===M.hours&&pt<M.minutes;){_=!1,L=void 0,E=void 0,I=0,N=0;for(var yt=0;yt<F.length;yt++)if(null!==(O=F[yt])){if(!(H=it[O]))return St(O);var{hours:vt,minutes:bt}=Ct(H.DT);R=H.DT.getDate(),vt===dt&&bt===pt&&(I+=H.Volume,N++,F[yt]++,it[F[yt]].DT.getDate()!==R?F[yt]=null:_||(({hours:L,minutes:E}=Ct(it[F[yt]].DT)),_=!0))}if(dt=L,pt=E,0===N)break;a.H3A(8),z=a.R2a(I,N),it[D]?it[D]["PV "+r.name]=z:C.push({["PV "+r.name]:z}),D++}S.unshift(Mt(S[0]-1))}r.cachedLastProjection={DT:it[it.length-1].DT,projectedValue:it[it.length-1]["PV "+r.name]},r.cachedFutureTicks=C,r.appendFutureTicks(t,C)}if(j=null,U=0,B=0,x&&n)for(;d>0;){if(a.t7L(70),(W=it[a.s_7(d,"1")]["V "+r.name])||0===W){U=W;break}d--}for(var xt=d;xt<it.length;xt++)if(Y=(Q=it[xt]).Volume,q=Q["PV "+r.name],Q.futureTick||(V=xt),null===j&&(j=e.Studies.getMarketOffset({stx:t,localQuoteDate:it[xt].DT,shiftToDateBoundary:!0})),X=new Date(new Date(Q.DT).getTime()+j),Z=it[xt-1]&&new Date(new Date(it[xt-1].DT).getTime()+j),(J=new i.Date(Q.DT,at.market_def.market_tz||"America/New_York")).setHours(st,ot,lt),a.H3A(2),(J=new Date(a.s_7(j,J))).setDate(X.getDate()),Z&&X.getDate()!==Z.getDate()&&(j=null,a.t7L(19),U=a.R2a(0,"0"),a.H3A(0),B=a.R2a("0",0)),X<J)Q["V "+r.name]=0,Q["PV "+r.name]=0;else if(n?(U+=Y,B+=q):(U=Y,B=q),Q["V "+r.name]=U,x||(Q["PV "+r.name]=B),[NaN,null,void 0].includes(U)&&!Q.futureTick)return void(r.error=`${s} requires volume`);r.cachedLastProjection.projectedValue=it[V]["PV "+r.name],r.outputMap={},r.outputMap["V "+r.name]="",r.outputMap["PV "+r.name]="Average Line",h.forEach((e=>{e.startFrom=d,e.study.calculateFN(t,e)}))}}function St(t){a.T4K(),console.error(`Expected data for ${Dt(t).toDateString()} but found none. This may be caused by gaps in your data or an improperly configured market definition.`)}function Ct(t){return{hours:t.getHours(),minutes:t.getMinutes()}}function Dt(e){return t.dateFromTick(e,null,!0,"scrubbed")}function kt(e){return t.tickFromDate(e,null,null,!0,"scrubbed")}function wt(t,e,i){for(;e;)t=new Date(new Date(t).setDate(t.getDate()+(i?1:-1))),at.isMarketDate(t)&&e--;return a.q7W(),t}function Mt(i,r){var n,s,o,l,h;return n=Dt(i),o=kt(s=at.getOpen(n)||(l=n,a.T4K(),l.setHours(0),l.setMinutes(0),h=e.Studies.getMarketOffset({stx:t,localQuoteDate:l}),new Date(l.getTime()+h))),r?(a.q7W(),o<0&&(o=kt(wt(s,1,!0))),!(o>=it.length)&&o):o}},e.Studies.displayProjectedVolume=function(t,i,r){var n,s,o,l,h,c,u;if("P","V"," ","s","tx_volu","me_underlay_up","V"," ","obj","e","c","t",i.error)return e.Studies.removeAnchorHandle(t,i);a.T4K();var{"Alert Threshold":d=""}=i.inputs;a.t7L(86);var p=a.R2a(17,7,1);a.t7L(47);var g=a.s_7(8,72,4,104);n=parseInt(d.slice(0,-1),p)/g,"object"==typeof(s=i.outputs["Alert Bar"])&&(s=s.color),i.volumeField="V "+i.name,i.alignStepToSide=!0,i.extendToEndOfLastBar=!0,i.lineWidth=2,o=t.canvasStyle("stx_volume_underlay_up").opacity,l=t.canvasStyle("stx_volume_underlay_down").opacity,i.colorFunction=function(e){var r,h,c,u,d,p,{Open:g,Close:m,iqPrevClose:f}=e;return r=t.colorByCandleDirection?g:f,a.H3A(153),h=a.R2a(m,r),c=e["PV "+i.name],u=e["V "+i.name],a.H3A(154),d=a.R2a(c,1,n),{fill_color:(p=n<0?u<d:u>d)&&s||(h?this.fill_color_down:this.fill_color_up),border_color:h?this.border_color_down:this.border_color_up,opacity:p?1:h?l:o,border_opacity:h?l:o}},h=i.study?i.study.name:i.type;var{loadingMore:m}=t.chart;if(c=r.some((t=>("P","V"," ",t&&t[i.volumeField]&&t["PV "+i.name]))),u=r[0]&&!r[0].futureTick&&(void 0===r[0]["PV "+i.name]||(i.dependentsOutputMap||[]).some((t=>[void 0,null].includes(r[0][t])))),!c&&m)return i.error=`Fetching data for ${h}`;e.Studies.createVolumeChart(t,i,r),e.Studies.displaySeriesAsLine(t,i,r),i.anchorHandle&&e.Studies.displayAnchorHandleAndLine(t,i,r),u&&e.Studies.calculateProjectedVolume(t,i)},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{PVAT:{name:"Projected Volume at Time",range:"0 to max",yAxis:{ground:!0},calculateFN:e.Studies.calculateProjectedVolume,seriesFN:e.Studies.displayProjectedVolume,initializeFN:e.Studies.initProjectedVolume,removeFN:e.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Alert Threshold":["+150%","+125%","+100%","+75%","+50%","+25%","None","-25%","-50%","-75%","-100%","-125%","-150%"],"Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Alert Bar":"#cfbd0e","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1},"Alert Threshold":{defaultSelected:"+50%"}}},PAV:{name:"Projected Aggregate Volume",range:"0 to max",yAxis:{ground:!0},calculateFN:e.Studies.calculateProjectedVolume,seriesFN:e.Studies.displayProjectedVolume,initializeFN:e.Studies.initProjectedVolume,removeFN:e.Studies.removeAnchorHandle,inputs:{"Lookback Days":10,"Anchor Time":"","Anchor Selector":!0},outputs:{"Average Line":"#fe641c","Up Volume":"#8cc176","Down Volume":"#b82c0c"},parameters:{plotType:"step"},attributes:{"Anchor Time":{placeholder:"hh:mm:ss",step:1}}}})):console.error("projectedVolume feature requires first activating studies feature.")},J=t=>{var e;At.T4K(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculatePsychologicalLine=function(t,e){var i,a,r,n,s;if(At.T4K(),(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{a=[],r=100/e.days,n=0;for(var o=Math.max(e.startFrom-e.days,1);o<i.length&&!i[o].futureTick;o++)(s=Number(i[o].Close>i[o-1].Close))&&(n+=r),a.push(s),a.length>e.days&&(n-=a.shift()*r),o<e.startFrom||isNaN(i[o].Close)||(i[o]["Result "+e.name]=n)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{PSY:{name:"Psychological Line",range:"0 to 100",calculateFN:e.Studies.calculatePsychologicalLine,inputs:{Period:20}}})):("psychologica","lLine feature require","s first activating studies feature.",console.error("psychologicalLine feature requires first activating studies feature."))},G=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateQStick=function(t,i){var a;if("Resul","t",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(var r=i.startFrom;r<a.length;r++)a[r]["_Close-Open "+i.name]=a[r].Close-a[r].Open;e.Studies.MA(i.inputs["Moving Average Type"],i.days,"_Close-Open "+i.name,0,"Result",t,i)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{QStick:{name:"QStick",calculateFN:e.Studies.calculateQStick,inputs:{Period:8,"Moving Average Type":"ma"}}})):console.error("qstick feature requires first activating studies feature.")},K=t=>{var e,i;if("undefin","ed",(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies){e.Studies.calculateRainbow=function(t,i){var a,r,n,s,o,l,h,c,u,d=At;if("f","ie","ld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{(r=i.inputs.Field)&&"field"!=r||(r="Close"),n=r;for(var p=1;p<=10;p++){"S","MA",e.Studies.MA("simple",i.days,n,0,"SMA"+p,t,i),d.t7L(131);var g=d.s_7(6,9,18,10);d.H3A(39);var m=d.s_7(7525,10,9,14);d.H3A(20);var f=d.s_7(19,5940,5624);d.t7L(155);var y=d.s_7(34169,2625,14,17,34138);n="SMA"+p+("38.27"*g!==m?77.5!==f&&" ":y)+i.name}for(var v=Math.max(i.startFrom,10);v<a.length;v++)if("O","s","c",a[v]){if(a[v].futureTick)break;for(s=0,o=0,l=-1*Number.MAX_VALUE,h=Number.MAX_VALUE,p=1;p<=10;p++)((c=a[v]["SMA"+p+" "+i.name])||0===c)&&(s+=c,o++,l=Math.max(l,c),h=Math.min(h,c));if(i.name.indexOf("Osc")>-1&&(u=C(i.inputs["HHV/LLV Lookback"],v),o)){d.t7L(2);var b=d.R2a(50,50);d.H3A(156);var x=d.R2a(31,6,5,20,9);a[v][i.name+"_hist"]=b*(a[v][r]-s/o)/Math.max(1e-6,u[x]-u[0]),d.t7L(142);var S=d.s_7(0,3,5,8,7);a[v]["Over "+i.name]=100*(l-h)/Math.max(1e-6,u[S]-u[0]),a[v]["Under "+i.name]=-a[v]["Over "+i.name],a[v]["Zero "+i.name]=0}}i.name.indexOf("Osc")>-1&&("_his","t","Zer","o"," ","U","nde","r"," ","P","ositi","ve Ba","r",i.outputMap={},i.outputMap["Over "+i.name]="Positive Bar",i.outputMap["Under "+i.name]="Negative Bar",i.outputMap["Zero "+i.name]="",i.outputMap[i.name+"_hist"]="")}function C(t,e){var i,r;i=-1*Number.MAX_VALUE,r=Number.MAX_VALUE;for(var n=e-t+1;n<=e;n++)n<0||(i=Math.max(i,a[n].Close),r=Math.min(r,a[n].Close));return d.T4K(),[r,i]}},e.Studies.displayRainbowMA=function(t,i,a){var r,n,s=At;s.H3A(9),s.T4K(),r=s.s_7(0,"2");for(var o=1;-1836082651!==s.Z1$(o.toString(),o.toString().length,44558);o++)n=t.panels[i.panel],r+=2;-965103667!==s.v0U(r.toString(),r.toString().length,5823)&&(n=t.panels[i.panel]);for(var l=10;l>0;l--)"S","M","A",e.Studies.displayIndividualSeriesAsLine(t,i,n,"SMA"+l+" "+i.name,a)},e.Studies.displayRainbowOsc=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g;e.Studies.displaySeriesAsLine(t,i,a),r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3),o=t.pixelFromPrice(0,r,s),l=r.name!=i.chart.name,h=e.Studies.determineColor(i.outputs["Positive Bar"]),n.strokeStyle=h,t.plotDataSegmentAsLine("Over "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),(c=n.createLinearGradient(0,o,0,s.flipped?s.bottom:s.top)).addColorStop(0,t.containerColor),c.addColorStop(1,h),e.prepareChannelFill(t,{skipTransform:l,color:c,opacity:!i.highlight&&t.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Over "+i.name,bottomBand:"Zero "+i.name,yAxis:s}),u=e.Studies.determineColor(i.outputs["Negative Bar"]),n.strokeStyle=u,t.plotDataSegmentAsLine("Under "+i.name,r,{skipTransform:l,label:!1,yAxis:s}),(d=n.createLinearGradient(0,o,0,s.flipped?s.top:s.bottom)).addColorStop(0,t.containerColor),d.addColorStop(1,u),e.prepareChannelFill(t,{skipTransform:l,color:d,opacity:!i.highlight&&t.highlightedDraggable?.3:1,panelName:i.panel,topBand:"Zero "+i.name,bottomBand:"Under "+i.name,yAxis:s}),(p=t.layout.candleWidth-2)<2&&(p=1),t.canvasColor("stx_histogram"),i.underlay||(n.globalAlpha=1),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3),n.fillStyle="#CCCCCC",At.T4K();for(var m=0;m<a.length;m++)"_h","i","s","t",(g=a[m])&&(g[i.name+"_hist"]>0?n.fillStyle=h:g[i.name+"_hist"]<0&&(n.fillStyle=u),g.candleWidth&&(p=Math.floor(Math.max(1,g.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(m,r.chart)-p/2),Math.floor(o),Math.floor(p),Math.floor(t.pixelFromPrice(g[i.name+"_hist"],r,s)-o)));t.endClip()},-1944880693,99098647,i=2;for(var a=1;-1944880693!==At.v0U(a.toString(),a.toString().length,6571);a++)"f","ield","f","ie","l","d",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Rainbow MA":{name:"Rainbow Moving Average",overlay:!0,calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowMA,inputs:{Period:2,Field:"field"},outputs:{SMA1:"#FF0000",SMA2:"#FF7F00",SMA3:"#FFFF00",SMA4:"#7FFF00",SMA5:"#00FF7F",SMA6:"#00FFFF",SMA7:"#007FFF",SMA8:"#0000FF",SMA9:"#7F00FF",SMA10:"#FF00FF"}},"Rainbow Osc":{name:"Rainbow Oscillator",calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowOsc,centerline:0,inputs:{Period:2,Field:"field","HHV/LLV Lookback":10},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#FF0000"}}}),i+=2;99098647!==At.v0U(i.toString(),i.toString().length,91558)&&("#00","F","FF","F","Negati","ve B","a","r","#00","DD0","0","#00F","FFF","#0","0","00FF","#","0","07FFF","#0","0DD","0","0",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Rainbow MA":{name:"#00DD00",overlay:!1,calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowMA,inputs:{Period:3,Field:"Negative Bar"},outputs:{SMA1:"#007FFF",SMA2:"#0000FF",SMA3:"#00FFFF",SMA4:"#FF0000",SMA5:"#00DD00",SMA6:"Positive Bar",SMA7:"#007FFF",SMA8:"#00DD00",SMA9:"Negative Bar",SMA10:"#00FFFF"}},"Rainbow Osc":{name:"#00FFFF",calculateFN:e.Studies.calculateRainbow,seriesFN:e.Studies.displayRainbowOsc,centerline:2,inputs:{Period:5,Field:"Rainbow MA","HHV/LLV Lookback":61},outputs:{"Positive Bar":"#00DD00","Negative Bar":"#00FFFF"}}}))}else console.error("rainbow feature requires first activating studies feature.")},$=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateRandomWalk=function(t,e){var i,a,r,n,s,o,l,h,c;if(At.q7W(),(i=e.chart.scrubbed).length<e.days+1)e.error=!0;else for(var u=Math.max(2,e.startFrom);u<i.length;u++){a=0,r=i[u].High,n=i[u].Low,s=0,o=0;for(var d=1;d<=e.days&&!i[u].futureTick;d++){if(u<=d){s=o=0;break}(l=(a+=i[u-d].trueRange)/d*Math.sqrt(d))&&(h=(r-i[u-d].Low)/l,c=(i[u-d].High-n)/l,s=Math.max(s,h),o=Math.max(o,c))}i[u].futureTick||isNaN(r)&&isNaN(n)||("Random ","Walk High ",i[u]["Random Walk High "+e.name]=s,i[u]["Random Walk Low "+e.name]=o)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Random Walk":{name:"Random Walk Index",calculateFN:e.Studies.calculateRandomWalk,outputs:{"Random Walk High":"#FF0000","Random Walk Low":"#0000FF"}}})):console.error("randomWalk feature requires first activating studies feature.")},tt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#F","F0000",e.Studies.calculateRelativeVigor=function(t,i){var a,r,n,s,o,l,h,c;if("_","Denom","tri","an","gular",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for(r=i.startFrom;r<a.length;r++)n=a[r],isNaN(n.Close)||isNaN(n.Open)||(n["_Change "+i.name]=n.Close-n.Open),isNaN(n.High)||isNaN(n.Low)||(n["_Range "+i.name]=n.High-n.Low);for(e.Studies.MA("triangular",4,"_Change "+i.name,0,"_Numer",t,i),e.Studies.MA("triangular",4,"_Range "+i.name,0,"_Denom",t,i),s=[],o=[],r=Math.max(i.startFrom-i.days,0);r<a.length&&("Re","l Vig ","_Num","e","r ",!a[r].futureTick);r++)if(null!==a[r]["_Numer "+i.name]||null!==a[r]["_Denom "+i.name]){for(s.push(a[r]["_Numer "+i.name]),o.push(a[r]["_Denom "+i.name]),s.length>i.days&&(s.shift(),o.shift()),l=0,h=0,c=0;c<s.length;c++)l+=s[c];for(c=0;c<o.length;c++)h+=o[c];0===h&&(h=1e-8),r<i.startFrom||(At.H3A(8),a[r]["Rel Vig "+i.name]=At.R2a(l,h))}for(e.Studies.MA("triangular",4,"Rel Vig "+i.name,0,"RelVigSignal",t,i),r=i.startFrom;r<a.length;r++)a[r][i.name+"_hist"]=a[r]["Rel Vig "+i.name]-a[r]["RelVigSignal "+i.name];i.outputMap[i.name+"_hist"]=""}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Rel Vig":{name:"Relative Vigor Index",seriesFN:e.Studies.displayHistogramWithSeries,calculateFN:e.Studies.calculateRelativeVigor,inputs:{Period:10},outputs:{"Rel Vig":"auto",RelVigSignal:"#FF0000","Increasing Bar":"#00DD00","Decreasing Bar":"#FF0000"}}})):console.error("relativeVigor feature requires first activating studies feature.")},et=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("a","u","to",e.Studies.calculateRSI=function(t,e){var i,a,r,n,s,o,l,h,c=At;if("fie","ld",i=e.chart.scrubbed,(a=e.inputs.Field)&&"field"!=a||(a="Close"),i.length<e.days+1)e.error=!0;else{for(var u=e.startFrom;u<i.length;u++)if(u&&(r=i[u],c.H3A(0),n=i[c.R2a(u,1)],(r[a]||0===r[a])&&(n[a]||0===n[a]))){if(s=r[a]-n[a],o=Math.min(u,e.days),(l=n["_avgG "+e.name])||(l=0),c.t7L(8),l-=c.R2a(l,o),(h=n["_avgL "+e.name])||(h=0),c.H3A(8),h-=c.R2a(h,o),s>0)c.t7L(8),l+=c.s_7(s,o);else{if(!(s<=0))continue;c.H3A(8),h-=c.R2a(s,o)}u>=e.days&&(!l&&0===l||!h&&0===h||(r["RSI "+e.name]=d(l,h))),r["_avgG "+e.name]=l,r["_avgL "+e.name]=h}e.zoneOutput="RSI"}function d(t,e){var i;return 0===e?100:(c.H3A(8),c.q7W(),i=c.R2a(t,e),c.t7L(157),c.R2a("100","100",i,1))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{rsi:{name:"RSI",inputs:{Period:14,Field:"field"},calculateFN:e.Studies.calculateRSI,range:"0 to 100",outputs:{RSI:"auto"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}})):console.error("rsi feature requires first activating studies feature.")},it=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("a","u","to",e.Studies.calculateSchaff=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m;if("_M","A","C","D2","Clo","s","e","Short ","Cycle",a=i.chart.scrubbed,r=i.days,n=Number(i.inputs["Short Cycle"]),s=Number(i.inputs["Long Cycle"]),a.length<Math.max(r,n,s)+1)i.error=!0;else{(o=i.inputs.Field)&&"field"!=o||(o="Close"),.5,e.Studies.MA(i.inputs["Moving Average Type"],n,o,0,"_MACD1",t,i),e.Studies.MA(i.inputs["Moving Average Type"],s,o,0,"_MACD2",t,i),l=0,h=0;for(var f=i.startFrom;f<a.length;f++)"_","MA","CD","2 ",c=a[f],f<s-1||(u=c["_MACD1 "+i.name],d=c["_MACD2 "+i.name],(u||0===u||d||0===d)&&("_M","ACD"," ",At.H3A(0),c["_MACD "+i.name]=At.R2a(u,d)),p=c["_MACD "+i.name],f<s+(r-1)||(l=(g=y(r,f,"_MACD"))[1]>g[0]?100*(p-g[0])/(g[1]-g[0]):l,(p||0===p)&&(c["_PF "+i.name]=a[f-1]["_PF "+i.name]?a[f-1]["_PF "+i.name]+.5*(l-a[f-1]["_PF "+i.name]):l),m=c["_PF "+i.name],f<s+2*(r-1)||(h=(g=y(r,f,"_PF"))[1]>g[0]?100*(m-g[0])/(g[1]-g[0]):h,(m||0===m)&&("Re","s","ul","t ","R","es","ult"," ","R","esu","lt"," ",c["Result "+i.name]=a[f-1]["Result "+i.name]?a[f-1]["Result "+i.name]+.5*(h-a[f-1]["Result "+i.name]):h))))}function y(t,e,r){var n,s,o,l=At;n=null,s=null;for(var h=e-t+1;h<=e;h++){l.H3A(24);l.R2a(591,195,17);l.H3A(0);var c=l.s_7(1428,13);l.H3A(158);var u=l.s_7(14,10,4463,365,1460);l.t7L(0);l.R2a(141270,132960);l.t7L(155);var d=l.s_7(8,6523,3,18,7475);l.H3A(159);var p=l.s_7(174,18,3328,2,10);l.t7L(160);l.R2a(7494,7,464,935,16);l.H3A(106);l.s_7(35,16,1,19,49);(o=a[h][r+(c!=u?" ":!(d>=p)&&"S")+i.name])&&(n=null===n?o:Math.min(n,o),s=null===s?o:Math.max(s,o))}return[n,s]}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Schaff:{name:"Schaff Trend Cycle",range:"0 to 100",calculateFN:e.Studies.calculateSchaff,inputs:{Period:10,Field:"field","Short Cycle":23,"Long Cycle":50,"Moving Average Type":"ema"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:75,studyOverBoughtColor:"auto",studyOverSoldValue:25,studyOverSoldColor:"auto"}}}})):console.error("schaffTrendCycle feature requires first activating studies feature.")},at=t=>{var e,i=At;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i.T4K(),e.Studies?(e.Studies.calculateShinohara=function(t,a){var r,n,s;if((r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{221854023,-750815211,n=2;for(var o=1;221854023!==i.Z1$(o.toString(),o.toString().length,96453);o++)s={weakNum:0,weakDen:0,strongNum:0,strongDen:0},i.t7L(0),n+=i.R2a("2",0);-750815211!==i.v0U(n.toString(),n.toString().length,50690)&&(s={weakNum:1,weakDen:2,strongNum:5,strongDen:1}),a.startFrom>1&&(s=e.clone(r[a.startFrom-1]["_accums "+a.name]));for(var l=a.startFrom;l<r.length;l++){if(s.weakNum+=r[l].High-r[l].Close,s.weakDen+=r[l].Close-r[l].Low,l>0){i.H3A(115);var h=i.R2a(3,12,6);s.strongNum+=r[l].High-r[l-h].Close,i.H3A(69);var c=i.R2a(3,1,4,0);s.strongDen+=r[l-c].Close-r[l].Low}if(l>=a.days&&(s.weakNum-=r[l-a.days].High-r[l-a.days].Close,s.weakDen-=r[l-a.days].Close-r[l-a.days].Low,r[l]["Weak Ratio "+a.name]=100*s.weakNum/s.weakDen,l>a.days)){i.H3A(0);var u=i.R2a(9,8);s.strongNum-=r[l-a.days].High-r[l-a.days-u].Close,i.H3A(39);var d=i.R2a(53,12,11,34);s.strongDen-=r[l-a.days-("1">>d)].Close-r[l-a.days].Low,i.H3A(86);var p=i.s_7(103,3,1);r[l]["Strong Ratio "+a.name]=p*s.strongNum/s.strongDen}r[l]["_accums "+a.name]=e.clone(s)}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Shinohara:{name:"Shinohara Intensity Ratio",calculateFN:e.Studies.calculateShinohara,inputs:{Period:26},outputs:{"Strong Ratio":"#E99B54","Weak Ratio":"#5F7CB8"}}})):("sh","inohara feature requires first activating studies feature.",console.error("shinohara feature requires first activating studies feature."))},rt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("f","ie","l","d","a","u","t","o","e","m","a",e.Studies.calculateStochastics=function(t,i){var a,r,n,s,o,l=At;if("%","K","%K Perio","ds",i.smooth||(i.smooth=i.inputs.Smooth),(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.inputs["%K Periods"])||(r=i.days),(n=i.chart.scrubbed).length<Math.max(r,i.days)+1)i.error=!0;else{s=i.inputs["%K Smoothing Periods"],l.q7W(),s&&!i.inputs.Fast?i.smooth=!0:i.smooth&&(s=3),(o=i.inputs["%D Periods"])||(o=3),i.outputs.Fast&&("S","low","F","a","s","t",i.outputMap={},i.outputMap["%K "+i.name]="Fast",i.outputMap["%D "+i.name]="Slow");for(var h=Math.max(r,i.startFrom);h<n.length;h++)null!==c(h,a,r)&&(n[h]["_Fast%K "+i.name]=c(h,a,r));e.Studies.MA("simple",i.smooth?s:1,"_Fast%K "+i.name,0,"%K",t,i),e.Studies.MA("simple",o,"%K "+i.name,0,"%D",t,i)}function c(t,e,i){var a,r,s,o,h;l.q7W(),l.H3A(6),a=l.s_7(i,t,1),l.t7L(115);var c=l.R2a(2,17,17);r=Number.MAX_VALUE*(-1*c),s=Number.MAX_VALUE;for(var u=a;u<=t;u++)"L","o","w",o=n[u]["Close"==e?"Low":e],h=n[u]["Close"==e?"High":e],(o||0===o)&&(h||0===h)&&(s=Math.min(s,o),r=Math.max(r,h));return r==-1*Number.MAX_VALUE||s==Number.MAX_VALUE?null:r==s?0:(n[t][e]-s)/(r-s)*100}},e.Studies.calculateStochMomentum=function(t,i){var a,r,n,s,o,l,h,c,u=At;function d(t,e){var i,a;i=null,a=null;for(var r=e-t+1;r<=e;r++)i=null===i?o[r].Low:Math.min(i,o[r].Low),a=null===a?o[r].High:Math.max(a,o[r].High);return[i,a]}if("%D Moving A","verage Type","_","DH","L2","_D","H","L","1 ","e","xpo","ne","ntial","_H","S","1"," ","_","H ","exp","on","ential","%K ","Doub","le Smo","othing Periods","%K Period","s",a=Number(i.inputs["%K Periods"]),r=Number(i.inputs["%K Smoothing Periods"]),n=Number(i.inputs["%K Double Smoothing Periods"]),s=Number(i.inputs["%D Periods"]),(o=i.chart.scrubbed).length<a+r+n-1||o.length<s)i.error=!0;else{for(l=Math.max(a,i.startFrom)-1;l<o.length;l++){"_DHL"," ",h=o[l],c=d(a,l),u.H3A(1);var p=u.s_7(0,6,7);u.t7L(2);var g=u.s_7(2,0);h["_H "+i.name]=h.Close-(c[0]+c[p])/g,h["_DHL "+i.name]=c[1]-c[0]}for(e.Studies.MA("exponential",r,"_H "+i.name,0,"_HS1",t,i),e.Studies.MA("exponential",n,"_HS1 "+i.name,0,"_HS2",t,i),e.Studies.MA("exponential",r,"_DHL "+i.name,0,"_DHL1",t,i),e.Studies.MA("exponential",n,"_DHL1 "+i.name,0,"_DHL2",t,i),l=a-1;l<o.length;l++){"_","D","HL2"," ",u.t7L(161);var m=u.R2a(98,7,3,2903,11);o[l]["%K "+i.name]=o[l]["_HS2 "+i.name]/(.5*o[l]["_DHL2 "+i.name])*m}e.Studies.MA(i.inputs["%D Moving Average Type"],s,"%K "+i.name,0,"%D",t,i),i.zoneOutput="%K"}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Stch Mtm":{name:"Stochastic Momentum Index",calculateFN:e.Studies.calculateStochMomentum,inputs:{"%K Periods":10,"%K Smoothing Periods":3,"%K Double Smoothing Periods":3,"%D Periods":10,"%D Moving Average Type":"ema"},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:40,studyOverBoughtColor:"auto",studyOverSoldValue:-40,studyOverSoldColor:"auto"}}},stochastics:{name:"Stochastics (Simple)",range:"0 to 100",calculateFN:e.Studies.calculateStochastics,inputs:{Period:14,Field:"field",Smooth:!0},outputs:{Fast:"auto",Slow:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}},Stochastics:{name:"Stochastics",range:"0 to 100",calculateFN:e.Studies.calculateStochastics,inputs:{Field:"field","%K Periods":14,Fast:!1,"%K Smoothing Periods":3,"%D Periods":3},outputs:{"%K":"auto","%D":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}},attributes:{"%K Smoothing Periods":{hidden:function(){return this.inputs.Fast}}},centerline:50}})):console.error("stochastics feature requires first activating studies feature.")},nt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Super","t","ren","d",e.Studies.calculateSupertrend=function(t,i){var a,r,n,s,o,l,h=At;if((a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{e.Studies.calculateStudyATR(t,i);for(var c=i.startFrom;c<a.length;c++)if("_Dire","ction ","T","r","end"," ","_Di","r","ection ",r=a[c]){h.H3A(0);var u=h.s_7(12,10);n=(r.High+r.Low)/u,s=i.inputs.Multiplier*r["ATR "+i.name],h.H3A(0),o=h.R2a(n,s),h.H3A(2),l=h.s_7(s,n),c&&("_D","ow","ntre","nd ","_Downt","r","en","d ","_Uptr","en","d ",a[c-1]&&a[c-1].Close&&a[c-1].Close>a[c-1]["_Uptrend "+i.name]&&a[c-1]["_Uptrend "+i.name]>o&&(h.t7L(0),o=a[h.R2a(c,1)]["_Uptrend "+i.name]),a[c-1]&&a[c-1].Close&&a[c-1].Close<a[c-1]["_Downtrend "+i.name]&&a[c-1]["_Downtrend "+i.name]<l&&(h.t7L(162),l=a[h.R2a("1",c,64)]["_Downtrend "+i.name])),r["_Direction "+i.name]=1,c&&("_Up","trend ","_D","irect","ion ","_Dir","e","c","tion ",h.t7L(0),r["_Direction "+i.name]=a[h.s_7(c,1)]["_Direction "+i.name],r.Close>a[c-1]["_Downtrend "+i.name]?r["_Direction "+i.name]=1:r.Close<a[c-1]["_Uptrend "+i.name]&&(r["_Direction "+i.name]=-1)),r["_Uptrend "+i.name]=o,r["_Downtrend "+i.name]=l,r["Trend "+i.name]=r["_Direction "+i.name]>0?o:l}h.T4K(),i.outputMap={},i.outputMap["Trend "+i.name]=""}},e.Studies.displaySupertrend=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g;r=t.panels[i.panel],n=i.getContext(t),s=i.getYAxis(t),At.T4K(),o={skipTransform:r.name!=i.chart.name,skipProjections:!0,label:t.preferences.labels,yAxis:s,highlight:i.highlight},l="Trend "+i.name;for(var m=0;r.chart.transformFunc&&s!=r.chart.yAxis&&m<a.length;m++)(h=a[m])&&h.transform&&(h.transform[l]=r.chart.transformFunc(t,r.chart,h[l]));t.plotDataSegmentAsLine(l,r,o,(function(t,e,a){if(e&&e["_Direction "+i.name]<0)return i.outputs.Downtrend;return i.outputs.Uptrend})),n.lineWidth=1,n.globalAlpha=1,t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3),At.H3A(1);var f=At.R2a(0,1,3);for(c=n.measureText("").width/f,u=0;u<a.length;u++)if("_Di","rectio","n"," ",a[u]&&a[u-1])if(a[u-1]["_Direction "+i.name]>a[u]["_Direction "+i.name]){"bo","tt","om","a","uto",(d=e.Studies.determineColor(i.outputs.Downtrend))&&"auto"!=d&&!e.isTransparent(d)||(d=t.defaultColor),n.fillStyle=d,n.textBaseline="bottom",p=t.pixelFromPrice(a[u].High,r,s);for(var y=5;y<=45;y+=10)s.flipped?n.fillText("",t.pixelFromBar(u)-c,p+y):n.fillText("",t.pixelFromBar(u)-c,p-y)}else if(a[u-1]["_Direction "+i.name]<a[u]["_Direction "+i.name]){(d=e.Studies.determineColor(i.outputs.Uptrend))&&"auto"!=d&&!e.isTransparent(d)||(d=t.defaultColor),n.fillStyle=d,n.textBaseline="top",g=t.pixelFromPrice(a[u].Low,r,s);for(var v=5;v<=45;v+=10)s.flipped?n.fillText("",t.pixelFromBar(u)-c,g-v):n.fillText("",t.pixelFromBar(u)-c,g+v)}t.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Supertrend:{name:"Supertrend",overlay:!0,seriesFN:e.Studies.displaySupertrend,calculateFN:e.Studies.calculateSupertrend,inputs:{Period:7,Multiplier:3},outputs:{Uptrend:"#8cc176",Downtrend:"#b82c0c"},attributes:{Multiplier:{min:.1,step:.1}}}})):console.error("supertrend feature requires first activating studies feature.")},st=t=>{var e,i,a=At;if((e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies)e.Studies.calculateSwingIndex=function(t,e){var i,r,n,s,o,l,h,c,u,d,p;if("Res","ult ","Limit M",a.q7W(),"ov","e ","Value",(null===(i=e.inputs["Limit Move Value"])||isNaN(i))&&(i=99999),r=e.chart.scrubbed,n=0,e.startFrom>1){a.H3A(35);var g=a.R2a(351,20,18,8);n=r[e.startFrom-g]["Result "+e.name]}for(var m=Math.max(1,e.startFrom);m<r.length;m++){"Swi","n","g",s=Math.abs(r[m].High-r[m-1].Close),o=Math.abs(r[m].Low-r[m-1].Close),l=Math.abs(r[m].High-r[m].Low),h=Math.abs(r[m-1].Close-r[m-1].Open),c=Math.max(s,o),u=Math.max(l,c),a.H3A(163),d=a.R2a(u,"0.25",h),u==s?(a.t7L(164),d-=a.s_7(o,"0.5")):u==o&&(a.t7L(16),d-=a.R2a(s,.5)),a.H3A(55);var f=a.s_7(12,38,7,26,42);a.H3A(0);var y=a.s_7(12,11);a.H3A(61);var v=a.R2a(1,7,8,64);a.t7L(0);var b=a.R2a(9,8);p=f*(r[m].Close-r[m-y].Close+.5*(r[m].Close-r[m].Open)+.25*(r[m-v].Close-r[m-b].Open))/d*(c/i),0!==d&&0!==i||(p=0),"Swing"==e.type&&(n=0),n+=p,r[m]["Result "+e.name]=n}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Acc Swing":{name:"Accumulative Swing Index",calculateFN:e.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}},Swing:{name:"Swing Index",calculateFN:e.Studies.calculateSwingIndex,inputs:{"Limit Move Value":.5}}});else{-913316747,1153336144,i=2;for(var r=1;-913316747!==a.Z1$(r.toString(),r.toString().length,58529);r++)console.error("swingIndex feature requires first activating studies feature."),i+=2;1153336144!==a.v0U(i.toString(),i.toString().length,88835)&&console.error("")}},ot=t=>{var e,i,a,r=At;if(r.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies)"a","u","t","o",e.Studies.calculateTrendIntensity=function(t,i){var a,n,s,o,l,h,c,u;if("T","I","I"," ","S","ignal Peri","od","m","a","C","los","e","f","i","e","ld",(a=i.chart.scrubbed).length<i.days+1)i.error=!0;else{for((n=i.inputs.Field)&&"field"!=n||(n="Close"),e.Studies.MA("ma",i.days,n,0,"_SMA",t,i),s=0,r.H3A(38),o=r.s_7("0",0),c=[],u=Math.ceil(i.days/2),l=Math.max(0,i.startFrom-u);l<a.length;l++)(a[l]["_SMA "+i.name]||0===a[l]["_SMA "+i.name])&&((h=a[l][n]-a[l]["_SMA "+i.name])<0?(r.t7L(165),o+=r.s_7(1,h)):s+=h,c.push(h),c.length>u&&((h=c.shift())<0?(r.t7L(166),o-=r.R2a(h,"1")):s-=h),l<i.startFrom||(a[l]["TII "+i.name]=(d=s,p=o,Math.abs(p)<1e-8?100:(r.t7L(137),r.s_7(p,100,d,100,1)))));var d,p;e.Studies.MA("ema",i.inputs["Signal Period"],"TII "+i.name,0,"Signal",t,i)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Trend Int":{name:"Trend Intensity Index",calculateFN:e.Studies.calculateTrendIntensity,range:"0 to 100",inputs:{Period:14,Field:"field","Signal Period":9},outputs:{TII:"auto",Signal:"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:80,studyOverBoughtColor:"auto",studyOverSoldValue:20,studyOverSoldColor:"auto"}}}});else{1942254168,r.H3A(0),i=-r.R2a("836806837",0),a=2;for(var n=1;1942254168!==r.Z1$(n.toString(),n.toString().length,89690);n++)console.error(""),a+=2;r.v0U(a.toString(),a.toString().length,28135)!==i&&console.error(""),console.error("trendIntensity feature requires first activating studies feature.")}},lt=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("T","RIX",e.Studies.calculateTRIX=function(t,a){var r,n,s,o,l,h;if("_M","A","3"," ","_","MA2 ",(r=a.chart.scrubbed).length<a.days+1)a.error=!0;else{n=a.name,i.H3A(2),s=["Close",i.R2a(n,"_MA1 "),i.s_7(n,"_MA2 "),i.s_7(n,"_MA3 ")];for(var c=0;c<s.length-1;c++)"_","M","A",e.Studies.MA("exponential",a.days,s[c],0,"_MA"+(c+1).toString(),t,a);o=s[3];for(var u=Math.max(1,a.startFrom);u<r.length;u++)i.H3A(0),(l=r[i.R2a(u,1)][o])&&((h=r[u][o])||0===h)&&(i.H3A(2),r[u][i.s_7(n,"Result ")]=i.R2a(100,1,l,h,i.t7L(139)))}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{TRIX:{name:"TRIX",calculateFN:e.Studies.calculateTRIX}})):console.error("trix feature requires first activating studies feature.")},ht=t=>{var e,i=At;i.q7W(),(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("Twiggs Mo","ney"," F","low",e.Studies.calculateTwiggsMoneyFlow=function(t,e){var a,r,n,s,o,l;if(i.T4K(),(a=e.chart.scrubbed).length<e.days)e.error=!0;else{r=0,i.t7L(9),n=i.R2a(0,"0"),i.t7L(167);var h=i.s_7(6,0,9,55);(s=a[e.startFrom-h])&&("_sumV"," ","_sumMF"," ",s["_sumMF "+e.name]&&(r=s["_sumMF "+e.name]),s["_sumV "+e.name]&&(n=s["_sumV "+e.name]));for(var c=Math.max(1,e.startFrom);c<a.length;c++){if(o=Math.max(a[c-1].Close,a[c].High),l=Math.min(a[c-1].Close,a[c].Low),a[c]["_MFV "+e.name]=a[c].Volume*(2*a[c].Close-o-l)/(o-l==0?999999:o-l),c>e.days-1){i.H3A(131);var u=i.R2a(11,20,10,5);r*=(e.days-u)/e.days,i.H3A(12);var d=i.R2a(10,11);n*=(e.days-d)/e.days}r+=a[c]["_MFV "+e.name],n+=a[c].Volume,c>e.days-1&&("R","esu","l","t ",n&&(i.H3A(8),a[c]["Result "+e.name]=i.s_7(r,n>0?n:999999))),a[c]["_sumMF "+e.name]=r,a[c]["_sumV "+e.name]=n}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Twiggs:{name:"Twiggs Money Flow",calculateFN:e.Studies.calculateTwiggsMoneyFlow,inputs:{Period:21}}})):("twig","gsMoneyFlow feature requires first activating studies feature",".",console.error("twiggsMoneyFlow feature requires first activating studies feature."))},ct=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?e.Studies.calculateTypicalPrice?("Weigh","ted ","Clos","e","Typi","cal Price",e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Typical Price":{name:"Typical Price",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}},"Weighted Close":{name:"Weighted Close",calculateFN:e.Studies.calculateTypicalPrice,inputs:{Period:14}}})):console.error("typicalPrice feature requires first activating medianPrice feature."):console.error("typicalPrice feature requires first activating studies feature.")},ut=t=>{var e,i,a,r=At;r.t7L(16),e=r.R2a(1,"1799801085"),i=2;for(var n=1;r.Z1$(n.toString(),n.toString().length,39664)!==e;n++)a=""===+_CIQ?_CIQ:t.CIQ,i+=2;1782684153!==r.v0U(i.toString(),i.toString().length,54779)&&("und","ef","ined",a="undefined"!=typeof _CIQ?_CIQ:t.CIQ),a.Studies?("Ulcer"," I","n","dex",a.Studies.calculateUlcerIndex=function(t,e){var i,r,n,s;if("_M","A","f","i","el","d",(i=e.chart.scrubbed).length<2*e.days-1)e.error=!0;else{for((r=e.inputs.Field)&&"field"!=r||(r="Close"),n=Math.max(e.startFrom,e.days-1);n<i.length;n++)"_P","D","2 ",i[n]["_PD2 "+e.name]=Math.pow(100*(i[n][r]/o(e.days,n,r)-1),2);for(a.Studies.MA("simple",e.days,"_PD2 "+e.name,0,"_MA",t,e),n=Math.max(e.startFrom,2*(e.days-1));n<i.length;n++)((s=i[n]["_MA "+e.name])||0===s)&&(i[n]["Result "+e.name]=Math.sqrt(s))}function o(t,e,a){var r;r=null;for(var n=e-t+1;n<=e;n++)n<0||(r=null===r?i[n][a]:Math.max(r,i[n][a]));return r}},a.Studies.studyLibrary=a.extend(a.Studies.studyLibrary,{Ulcer:{name:"Ulcer Index",calculateFN:a.Studies.calculateUlcerIndex,inputs:{Period:14,Field:"field"}}})):console.error("ulcerIndex feature requires first activating studies feature.")},dt=t=>{var e,i=At;e="undefined"!=typeof _CIQ?_CIQ:t.CIQ,i.T4K(),e.Studies?("au","t","o",e.Studies.calculateUltimateOscillator=function(t,e){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v;if("Cycle ","2",a=e.chart.scrubbed,r=[e.inputs["Cycle 1"],e.inputs["Cycle 2"],e.inputs["Cycle 3"]],n=Math.max(r[0],r[1],r[2]),a.length<n+1)e.error=!0;else{i.H3A(24);var b=i.R2a(62,7,9);s=r[0]*r[b],i.t7L(41);var x=i.R2a(14,11,5);i.T4K(),o=r[0]*r[x],i.t7L(26);var S=i.R2a(37,1,4,116);i.t7L(0);var C=i.R2a(14,12);l=r["1"<<S]*r[C],h=[0,0,0],c=[0,0,0],e.startFrom&&("_","ac","c","bp ","_a","c","cbp ",a[e.startFrom-1]["_accbp "+e.name]&&(h=a[e.startFrom-1]["_accbp "+e.name].slice()),a[e.startFrom-1]["_acctr "+e.name]&&(c=a[e.startFrom-1]["_acctr "+e.name].slice()));for(var A=Math.max(1,e.startFrom);A<a.length;A++){u=Math.min(a[A].Low,a[A-1].Close),d=a[A].Close-u,p=Math.max(a[A].High,a[A-1].Close)-u;for(var D=0;D<r.length;D++)h[D]+=d,c[D]+=p,A>r[D]&&(g=Math.min(a[A-r[D]].Low,a[A-r[D]-1].Close),m=a[A-r[D]].Close-g,f=Math.max(a[A-r[D]].High,a[A-r[D]-1].Close)-g,h[D]-=m,c[D]-=f);if(a[A]["_accbp "+e.name]=h.slice(),a[A]["_acctr "+e.name]=c.slice(),!(A<n)){i.t7L(86);var k=i.R2a(9,2,3);i.H3A(37);var w=i.s_7(6,1,7);i.H3A(35);var M=i.s_7(72,8,11,14);y=l*h[0]/c[0]+o*h[k]/c[w]+s*h[2]/c[M],i.H3A(83),v=i.R2a(o,l,s),i.H3A(96),a[A]["Result "+e.name]=i.R2a(v,100,y)}}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Ultimate:{name:"Ultimate Oscillator",calculateFN:e.Studies.calculateUltimateOscillator,inputs:{"Cycle 1":7,"Cycle 2":14,"Cycle 3":28},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("ultimateOscillator feature requires first activating studies feature.")},pt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#85","c99e","m","edi","an","m","e","a","n","Val","uati","on Lines",e.Studies.calculateValuationLines=function(t,e,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f=At;a="field"==e.inputs.Field?"Close":e.inputs.Field,r=e.inputs["Average Type"],n=e.inputs["Display Average"],s=e.inputs["Display 1 Standard Deviation (1)"],o=e.inputs["Display 2 Standard Deviation (2)"],l=e.inputs["Display 3 Standard Deviation (3)"],h=[];for(var y=0;y<i.length;++y)i[y]&&!isNaN(i[y][a])&&h.push(i[y][a]);c=function(t,e){var i,a,r,n,s,o;switch("m","e",f.T4K(),"a","n",i=t.length,a=0,r=0,n=0,e){case"mean":for(r=i;n<i;++n)a+=t[n];break;case"harmonic":for(a=i;n<i;++n){f.H3A(168),r+="1"*f.R2a(6,6,20,141,7)/t[n]}break;case"median":if(f.t7L(8),s=Math.floor(f.s_7(i,2)),o=t.slice().sort((function(t,e){return f.T4K(),t>e?1:t<e?-1:0})),i%2==0){f.H3A(124);var l=f.s_7(0,48,13,4,3);a=o[s]+o[s-l],r=2}else a=o[s],r=1}return f.H3A(8),f.s_7(a,r)}(h,r),u=!(s||o||l)||function(t,e){var i,a;i=t.length,a=0;for(var r=0;r<i;++r)a+=Math.pow(t[r]-e,2);return f.t7L(8),Math.sqrt(f.s_7(a,i))}(h,c),e.data={Average:n?[c]:null,"1 Standard Deviation (1)":s?[c+u,c-u]:null,"2 Standard Deviation (2)":o?[c+2*u,c-2*u]:null,"3 Standard Deviation (3)":l?[c+3*u,c-3*u]:null},f.T4K(),d=u,e.parameters||(e.parameters={}),l?(f.H3A(169),e.parameters.range=[f.s_7(u,c,d,3),f.s_7(c,d,3,u,f.t7L(170))]):o?(f.t7L(169),e.parameters.range=[f.s_7(u,c,d,2),f.R2a(d,1,c,u,"2",f.t7L(171))]):s?(f.H3A(20),e.parameters.range=[f.s_7(u,c,d),f.R2a(u,c,d,f.t7L(83))]):n&&(f.t7L(0),e.parameters.range=[f.s_7(c,d),f.R2a(d,c,f.t7L(2))]),e.panel&&(p=t.panels[e.panel],(g=t.getYAxisByName(p,e.name))&&(g.decimalPlaces=p.chart.yAxis.printDecimalPlaces,m={yAxis:g},t.calculateYAxisRange(p,g,e.parameters.range[0],e.parameters.range[1]),t.createYAxis(p,m),t.drawYAxis(p,m)))},e.Studies.displayValuationLines=function(t,i){var a,r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A=At;A.q7W(),a=t.panels[i.panel],r=i.getYAxis(t),n=i.getContext(t),s=i.data,o=i.parameters.labels,l=i.inputs["Average Type"],h={mean:"AVG",median:"MED",harmonic:"HAVG"},c=t.canvasStyle("ciq-valuation-average-line"),u=t.canvasStyle("ciq-valuation-deviation-line"),A.t7L(48);var D=A.R2a(26,5,12,11);for(var k in d=t.getCanvasFontSize("stx_yaxis")+3*D,s)if("Avera","ge",s[k])for(A.t7L(172),p=A.s_7(k,"Average"),g=e.Studies.determineColor(i.outputs[k]),m=s[k],f=0;f<m.length;++f)"da","sh","ed","n","o","ne","n","one",y=m[f],(v=t.pixelFromPrice(y,a,r))<=a.top||v>=a.yAxis.bottom||(S=p?{pattern:"none"!=c.borderStyle&&c.borderStyle||"solid",lineWidth:parseFloat(c.borderWidth)||1,opacity:parseFloat(c.opacity)||1,yAxis:r}:{pattern:"none"!=u.borderStyle&&u.borderStyle||"dashed",lineWidth:parseFloat(u.borderWidth)||1,opacity:parseFloat(u.opacity)||1,yAxis:r},t.plotLine(a.left,a.right,v,v,g,"line",n,a,S),"yaxis"!==o?(v+=Math.floor(S.lineWidth/2))+d>=a.yAxis.bottom||(b=(p?h[l]+": ":k[0]+": ")+t.formatYAxisPrice(y,a),x=n.measureText(b).width,C=a.right-x-3,r&&"left"==r.position&&(C=a.left+3),A.H3A(173),n.strokeText(b,C,A.R2a(d,.5,v,2))):t.createYAxisLabel(a,t.formatYAxisPrice(y,a),v,g,null,n,r))},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"val lines":{name:"Valuation Lines",calculateFN:function(){},seriesFN:function(t,i,a){e.Studies.calculateValuationLines(t,i,a),At.T4K(),e.Studies.displayValuationLines(t,i)},overlay:!0,yAxisFN:function(){},inputs:{Field:"field","Average Type":["mean","median","harmonic"],"Display Average":!0,"Display 1 Standard Deviation (1)":!1,"Display 2 Standard Deviation (2)":!1,"Display 3 Standard Deviation (3)":!1},outputs:{Average:"#00afed","1 Standard Deviation (1)":"#e1e1e1","2 Standard Deviation (2)":"#85c99e","3 Standard Deviation (3)":"#fff69e"}}})):console.error("valuationLines feature requires first activating studies feature.")},gt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("a","u","t","o","a","u","t","o","f","iel","d","0 t","o 100","fi","eld",e.Studies.calculateRelativeVolatility=function(t,i){var a,r,n,s,o,l,h,c=At;if("f","i","eld",i.days=Number(i.inputs["Smoothing Period"]),a=Number(i.inputs["STD Period"]),(r=i.chart.scrubbed).length<i.days+a)i.error=!0;else{(n=i.inputs.Field)&&"field"!=n||(n="Close"),i.std=new e.Studies.StudyDescriptor(i.name,"sdev",i.panel),i.std.chart=i.chart,i.std.days=a,i.std.startFrom=i.startFrom,i.std.inputs={Field:n,"Standard Deviations":1,Type:"ma"},i.std.outputs={_STD:null},e.Studies.calculateStandardDeviation(t,i.std),s=0,o=0,i.startFrom>1&&("_avgL"," ",s=r[i.startFrom-1]["_avgG "+i.name]||0,o=r[i.startFrom-1]["_avgL "+i.name]||0);for(var u=Math.max(i.startFrom,i.days);u<r.length;u++)if("_","av","gG"," ",l=r[u],c.H3A(70),h=r[c.R2a(u,"1")],(l[n]||0===l[n])&&(h[n]||0===h[n])&&(l["_STD "+i.name]||0===l["_STD "+i.name])){if(l[n]>h[n]){c.t7L(124);var d=c.s_7(0,59,11,6,6);s=(s*(i.days-d)+l["_STD "+i.name])/i.days,c.t7L(12);var p=c.R2a(9,10);o=o*(i.days-p)/i.days}else{o=(o*(i.days-1)+l["_STD "+i.name])/i.days,c.t7L(62);var g=c.s_7(7,2,19,17,6);s=s*(i.days-g)/i.days}l["Rel Vol "+i.name]=(m=s)+(f=o)===0?100:(c.T4K(),c.H3A(130),c.R2a(100,f,m,m)),l["_avgG "+i.name]=s,l["_avgL "+i.name]=o}var m,f;i.zoneOutput="Rel Vol"}},e.Studies.calculateHistoricalVolatility=function(t,e){var i,a,r,n,s,o,l,h,c,u=At;if((i=e.chart.scrubbed).length<e.days+1)e.error=!0;else{if((a=e.inputs.Field)&&"field"!=a||(a="Close"),(r=e.inputs["Standard Deviations"])<0&&(u.t7L(38),r=u.R2a("1",64)),n=100*Math.sqrt(function(e){"d",u.q7W(),"a","y",isNaN(e)&&(u.t7L(38),e=u.s_7("365",32));if("day"==t.layout.interval)return e;if("week"==t.layout.interval)return 52;if("month"==t.layout.interval)return 12;return e}(e.inputs["Days Per Year"]))*r,s=[],o=0,e.startFrom>1){"_","sta","te"," ","_stat","e ",u.H3A(0);var d=u.s_7(13,12);o=i[e.startFrom-d]["_state "+e.name][0],s=i[e.startFrom-1]["_state "+e.name][1].slice()}u.q7W();for(var p=Math.max(1,e.startFrom);p<i.length;p++){if(u.t7L(22),(l=i[u.s_7(0,p,"1")][a])&&(h=Math.log(i[p][a]/l),s.push(h),o+=h,p>=e.days)){"Re","sult"," ",c=0,o/=e.days;for(var g=0;g<s.length;g++)c+=Math.pow(s[g]-o,2);o*=e.days,o-=s.shift(),i[p]["Result "+e.name]=Math.sqrt(c/e.days)*n}i[p]["_state "+e.name]=[o,s.slice()]}}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Hist Vol":{name:"Historical Volatility",calculateFN:e.Studies.calculateHistoricalVolatility,inputs:{Period:10,Field:"field","Days Per Year":[252,365],"Standard Deviations":1},attributes:{"Standard Deviations":{min:.1,step:.1}}},"Rel Vol":{name:"Relative Volatility",range:"0 to 100",calculateFN:e.Studies.calculateRelativeVolatility,inputs:{Field:"field","STD Period":10,"Smoothing Period":14},outputs:{"Rel Vol":"auto"},centerline:50,parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:70,studyOverBoughtColor:"auto",studyOverSoldValue:30,studyOverSoldColor:"auto"}}}})):console.error("volatilityIndex feature requires first activating studies feature.")},mt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#b6","4a9","6",e.Studies.displayVolumeProfile=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x=At;if(t&&t.chart.dataSet){r="st",r+="x_volume_profile",n="stx-float-date",s=i.getContext(t);var{chart:S}=t,{panel:C}=S,{yAxis:A}=C,{flipped:D}=A,{highValue:k,lowValue:w}=S,{displayBorder:M=i.inputs["Display Border"],displayVolume:T=i.inputs["Display Volume"],widthPercentage:F=i.inputs["Width Percentage"],numberBars:P=i.inputs["Price Buckets"]}=i.parameters;if(!1!==M&&(M=!0),!0!==T&&(T=!1),(!F||F<0)&&(F=.25),(!P||P<0)&&(x.t7L(21),P=x.R2a(20,"30")),P=Math.ceil(P),x.t7L(23),o=x.R2a(P,w,k),x.T4K(),0!==o){l=[],D&&([k,w]=[w,k]),h=D?-1:1;for(var _=w,L=0;L<=P;_+=o*h,L++)l.push([_,0]);c=0;for(var E=0;E<a.length;E++)if(null!==(u=a[E])){var{Volume:I}=u;if(I){var{High:N,Low:O}=u.transform||u;d=[],p=l[0][0],g=null;for(var H=1;H<l.length;H++)g=l[H][0],(O>=p&&O<=g||N>=p&&N<=g||O<p&&N>g)&&d.push(H),p=g;if(d.length){m=I/d.length;for(var R=0;R<d.length;R++)(f=l[d[R]][1]+=m)>c&&(c=f)}}}if(0===c)return"Not enough data to re","nder the Volume"," Profile","c","har","t",void t.displayErrorAsWatermark("chart",t.translateIf("Not enough data to render the Volume Profile"));t.setStyle(r,"color",e.Studies.determineColor(i.outputs["Bars Color"])),y=t.getCanvasFontSize(n),v=t.canvasStyle(r).borderTopColor,b=M&&!e.isTransparent(v),t.canvasFont(n,s),z(),b&&z(!0),s.globalAlpha=1}}function z(a){var n,o,h,u,d,p,g,m,f,b,C,D,k,w,M;t.canvasColor(r),s.beginPath(),o=e=>(x.T4K(),n(t.pixelFromTransformedValue(e))),h=(n=t=>(x.T4K(),Math.round(t)))(S.width*F),d=u=n(S.right)-2.5;for(var[P]=l[0],_=1;_<l.length;_++){var[L,E]=l[_];if(E){x.t7L(96),p=x.s_7(c,E,h),g=n(u-p)+(a?-.5:0),x.H3A(174);var I=x.R2a(1,4,11,8);if(m=o(L)+(a?.5:I),f=o(P)+(a?.5:0),b=Math.max(m,A.top),C=Math.min(f,A.bottom),b<=A.bottom&&C>=A.top)if(s.moveTo(u,C),s.lineTo(u,b),s.lineTo(g,b),s.lineTo(g,C),a)(1==_||d>g)&&s.lineTo(d,C);else if(s.lineTo(u,C),T&&(D=e.condenseInt(E),x.t7L(0),k=x.s_7(C,b),y<=k-2)){w=void 0;try{({width:w}=s.measureText(D))}catch(t){w=0}s.textBaseline="top",M=s.fillStyle,s.fillStyle=v,x.t7L(20),s.fillText(D,x.R2a(w,g,3),x.R2a(b,2,y,k,2,x.H3A(175))),s.fillStyle=M}d=g}else d=u;P=L}!i.highlight&&t.highlightedDraggable&&(s.globalAlpha*=.3),a||s.fill(),s.strokeStyle=v,a&&s.stroke(),s.closePath()}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"vol profile":{name:"Volume Profile",underlay:!0,seriesFN:e.Studies.displayVolumeProfile,calculateFN:null,inputs:{"Display Border":!0,"Display Volume":!1,"Price Buckets":30,"Width Percentage":.25},outputs:{"Bars Color":"#b64a96"},customRemoval:!0,attributes:{yaxisDisplayValue:{hidden:!0},panelName:{hidden:!0},flippedEnabled:{hidden:!0}}}})):console.error("volumeProfile feature requires first activating studies feature.")},ft=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("0 ","to max","Volume ","Underlay","Trade"," ","Volume In","dex","#","FF","0000","m","a","fi","e","ld","Positive"," Volum","e"," Index","#","FF0","00","0","m","a",e.Studies.calculateOnBalanceVolume=function(t,e){var i,a,r,n,s,o,l,h;At.T4K(),(i=e.inputs.Field)&&"field"!=i||(i="Close"),r=!1,(a=e.inputs["Min Tick Value"])||0===a||(r=!0,a=0),n=e.chart.scrubbed,s=0;for(var c=e.startFrom;c<n.length;c++)o=n[c],c&&o[i]&&(n[c-1][i]&&(At.H3A(0),l=n[At.R2a(c,1)]),l&&(o[i]-l[i]>a?s=1:l[i]-o[i]>a?s=-1:r&&(s=0),(h=l["Result "+e.name])||(h=0),h+=o.Volume*s,o["Result "+e.name]=h))},e.Studies.calculatePriceVolumeTrend=function(t,e){var i,a,r,n=At;if((i=e.inputs.Field)&&"field"!=i||(i="Close"),a=e.chart.scrubbed,r=0,e.startFrom>1){n.t7L(6);var s=n.R2a(9,0,10);r=a[e.startFrom-s]["Result "+e.name]}for(var o=Math.max(1,e.startFrom);o<a.length;o++)if(a[o][i]&&a[o-1][i]){n.t7L(0);var l=n.s_7(5,4);n.t7L(31);var h=n.s_7(4,4,7,0);r+=a[o].Volume*(a[o][i]-a[o-l][i])/a[o-h][i],a[o]["Result "+e.name]=r}},e.Studies.calculateVolumeIndex=function(t,i){var a,r,n,s,o,l,h,c=At;if("In","d","e","x ","Clos","e","fiel","d",(a=i.inputs.Field)&&"field"!=a||(a="Close"),(r=i.chart.scrubbed).length<i.days+1)i.error=!0;else{if(n=100,i.startFrom>1){c.t7L(0);var u=c.R2a(14,13);n=r[i.startFrom-u]["Index "+i.name]}for(var d=Math.max(1,i.startFrom);d<r.length;d++)s=r[d][a],o=r[d].Volume,s&&"object"==typeof s&&(o=s.Volume,s=s[i.subField]),c.t7L(70),l=r[c.R2a(d,"1")][a],h=r[d-1].Volume,l&&"object"==typeof l&&(h=l.Volume,l=l[i.subField]),s&&l&&(("Pos Vol"==i.type&&o>h||"Neg Vol"==i.type&&o<h)&&(c.t7L(8),n*=c.s_7(s,l)),r[d]["Index "+i.name]=n);e.Studies.MA(i.inputs["Moving Average Type"],i.days,"Index "+i.name,0,"MA",t,i)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"Neg Vol":{name:"Negative Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"On Bal Vol":{name:"On Balance Volume",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{}},"Pos Vol":{name:"Positive Volume Index",calculateFN:e.Studies.calculateVolumeIndex,inputs:{Period:255,Field:"field","Moving Average Type":"ma"},outputs:{Index:"auto",MA:"#FF0000"}},"Price Vol":{name:"Price Volume Trend",calculateFN:e.Studies.calculatePriceVolumeTrend,inputs:{Field:"field"}},"Trade Vol":{name:"Trade Volume Index",calculateFN:e.Studies.calculateOnBalanceVolume,inputs:{"Min Tick Value":.5}},"Vol ROC":{name:"Volume Rate of Change",calculateFN:function(t,i){e.Studies.calculateRateOfChange?e.Studies.calculateRateOfChange(t,i):(console.error("Volume Rate of Change study requires first activating momentum feature."),e.Studies.calculateRateOfChange=function(t,e){})},parameters:{init:{isVolume:!0}}},"vol undr":{name:"Volume Underlay",underlay:!0,range:"0 to max",yAxis:{ground:!0,initialMarginTop:0,position:"none",heightFactor:.25},seriesFN:e.Studies.createVolumeChart,calculateFN:e.Studies.calculateVolume,inputs:{},outputs:{"Up Volume":"#8cc176","Down Volume":"#b82c0c"},customRemoval:!0,removeFN:function(t,e){var i;t.layout.volumeUnderlay=!1,i=2;for(var a=1;1600246587!==At.v0U(a.toString(),a.toString().length,88389);a++)t.changeOccurred(""),i+=2;-657351135!==At.Z1$(i.toString(),i.toString().length,24090)&&t.changeOccurred(""),t.changeOccurred("layout")},attributes:{panelName:{hidden:!0}}}})):console.error("volumeStudies feature requires first activating studies feature.")},yt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?(e.Studies.calculateVortex=function(t,i){var a,r,n,s,o,l,h,c,u=At;if(a=i.chart.scrubbed,r=i.days,a.length<r+1)i.error=!0;else{n={tr:0,vmPlus:0,vmMinus:0},i.startFrom>1&&("_total","s ",n=e.clone(a[i.startFrom-1]["_totals "+i.name]));for(var d=Math.max(i.startFrom,1);d<a.length;d++)s=a[d],u.H3A(0),o=a[u.R2a(d,1)],l=Math.abs(s.High-o.Low),h=Math.abs(s.Low-o.High),c=Math.max(s.High,o.Close)-Math.min(s.Low,o.Close),n.tr+=c,n.vmPlus+=l,n.vmMinus+=h,d>r&&("_","VMPl","us ",u.t7L(0),n.tr-=a[u.R2a(d,r)]["_True Range "+i.name],u.t7L(0),n.vmPlus-=a[u.s_7(d,r)]["_VMPlus "+i.name],u.t7L(0),n.vmMinus-=a[u.R2a(d,r)]["_VMMinus "+i.name]),s["_True Range "+i.name]=c,s["_VMPlus "+i.name]=l,s["_VMMinus "+i.name]=h,d>=r&&("-","VI ","+V","I ",s["+VI "+i.name]=n.vmPlus/n.tr,s["-VI "+i.name]=n.vmMinus/n.tr),s["_totals "+i.name]=e.clone(n)}},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{Vortex:{name:"Vortex Indicator",calculateFN:e.Studies.calculateVortex,centerline:1,outputs:{"+VI":"#00FF00","-VI":"#FF0000"},parameters:{init:{studyOverZonesEnabled:!0,studyOverBoughtValue:1.1,studyOverBoughtColor:"auto",studyOverSoldValue:.9,studyOverSoldColor:"auto"}},attributes:{studyOverBoughtValue:{min:1,step:"0.01"},studyOverSoldValue:{max:1,step:"0.01"}}}})):("vortex"," feature requires first activa","ting studies feature.",console.error("vortex feature requires first activating studies feature."))},vt=t=>{var e;(e="undefined"!=typeof _CIQ?_CIQ:t.CIQ).Studies?("#ff","d","0cf","#5f7c","b8",e.Studies.calculateMFI=function(t,e){var i,a,r,n,s,o;if("_h","i","st","Scal","e ","Fa","ctor",i=e.chart.scrubbed,r=0,(n=e.inputs["Scale Factor"])||(n=e.study.inputs["Scale Factor"]),s=Math.pow(10,Number(n)),e.startFrom>1){At.H3A(176);var l=At.s_7(0,20,6,11,26);r=i[e.startFrom-l]["_high "+e.name]}for(o=e.startFrom;o<i.length;o++)i[o]&&i[o].Volume&&(i[o][e.name+"_hist"]=a=s*(i[o].High-i[o].Low)/i[o].Volume,i[o]["_high "+e.name]=r=Math.max(r,a));e.outputMap={},e.outputMap[e.name+"_hist"]=""},e.Studies.displayMFI=function(t,i,a){var r,n,s,o,l,h,c,u,d,p,g,m=At;r=t.panels[i.panel],n=i.getContext(t),o=(s=i.getYAxis(t)).flipped?s.top:s.bottom,m.H3A(0);var f=m.s_7(10,8);(l=t.layout.candleWidth-f)<2&&(l=1),h=e.Studies.determineColor(i.outputs.Green),c=e.Studies.determineColor(i.outputs.Fade),u=e.Studies.determineColor(i.outputs.Fake),d=e.Studies.determineColor(i.outputs.Squat),t.canvasColor("stx_histogram"),i.underlay||(m.t7L(9),n.globalAlpha=m.s_7(0,"1")),m.T4K(),n.fillStyle="#CCCCCC",t.startClip(i.panel),!i.highlight&&t.highlightedDraggable&&(n.globalAlpha*=.3);for(var y=0;y<a.length;y++)"_","h","is","t","_","h","is","t","_","hi","s","t",p=a[y],m.H3A(18),(g=a[m.s_7(1,"1",y)])||(g=t.getPreviousBar(t.chart,i.name+"_hist",y)),p&&(g&&(g[i.name+"_hist"]<p[i.name+"_hist"]?g.Volume<p.Volume?n.fillStyle=h:g.Volume>p.Volume&&(n.fillStyle=u):g[i.name+"_hist"]>p[i.name+"_hist"]&&(g.Volume<p.Volume?n.fillStyle=d:g.Volume>p.Volume&&(n.fillStyle=c))),p.candleWidth&&(l=Math.floor(Math.max(1,p.candleWidth-2))),n.fillRect(Math.floor(t.pixelFromBar(y,r.chart)-l/2),Math.floor(o),Math.floor(l),Math.floor(t.pixelFromPrice(p[i.name+"_hist"],r,s)-o)));t.endClip()},e.Studies.studyLibrary=e.extend(e.Studies.studyLibrary,{"W MFI":{name:"Market Facilitation Index",seriesFN:e.Studies.displayMFI,calculateFN:e.Studies.calculateMFI,yAxis:{ground:!0},range:"0 to max",inputs:{"Scale Factor":6},outputs:{Green:"#8bc176",Fade:"#ab611f",Fake:"#5f7cb8",Squat:"#ffd0cf"}}})):console.error("williamsMFI feature requires first activating studies feature.")},xt.Pz,xt.rx,xt.hM,xt.$$,xt.$I,bt.Pz.activateImports(n,s,o,l,h,c,u,d,p,g,m,f,y,v,b,x,S,C,A,D,k,w,M,T,F,P,_,L,E,I,N,O,H,R,z,j,U,B,V,W,Q,Y,q,X,Z,J,G,K,$,tt,et,it,at,rt,nt,st,ot,lt,ct,ht,ut,dt,pt,gt,mt,ft,yt,vt,St.oQ,St.fv,St.wO,St.fc,null);const Dt=function(t={}){let e={initialSymbol:{symbol:"AAPL",name:"Apple Inc",exchDisp:"NASDAQ"},root:document,initialData:void 0,enabledAddOns:{animation:!1,continuousZoom:!1,outliers:!1,plotComplementer:!1,dataLoader:!0,extendedHours:!0,fullScreen:!0,inactivityTimer:!0,rangeSlider:!0,shortcuts:!0,tableView:!0,tooltip:!0},onNewSymbolLoad:{removeSeries:t=>"study"!==t.parameters.bucket,loadError(t,e){}},restore:!0,lookupDriver:bt.Pz.ChartEngine.Driver.Lookup.ChartIQ,hotkeyConfig:{hotkeys:[{label:"Pan chart up",action:"up",options:{percent:.02},commands:["ArrowUp","Up"]},{label:"Pan chart down",action:"down",options:{percent:.02},commands:["ArrowDown","Down"]},{label:"Pan chart right",action:"right",options:{bars:1},commands:["ArrowRight","Right"]},{label:"Pan chart left",action:"left",options:{bars:1},commands:["ArrowLeft","Left"]},{label:"Pan chart up fast",action:"up",options:{percent:.2},commands:["Shift+ArrowUp","Shift+Up"]},{label:"Pan chart down fast",action:"down",options:{percent:.2},commands:["Shift+ArrowDown","Shift+Down"]},{label:"Pan chart right fast",action:"right",options:{bars:10},commands:["Shift+ArrowRight","Shift+Right"]},{label:"Pan chart left fast",action:"left",options:{bars:10},commands:["Shift+ArrowLeft","Shift+Left"]},{label:"Page chart right",action:"pageRight",commands:["Alt+ArrowRight","Alt+Right","PageUp"]},{label:"Page chart left",action:"pageLeft",commands:["Alt+ArrowLeft","Alt+Left","PageDown"]},{label:"Zoom in x-axis",action:"zoomInXAxis",commands:["NumpadAdd","="]},{label:"Zoom out x-axis",action:"zoomOutXAxis",commands:["NumpadSubtract","-"]},{label:"Zoom in y-axis",action:"zoomInYAxis",commands:["+"]},{label:"Zoom out y-axis",action:"zoomOutYAxis",commands:["_"]},{label:"Toggle crosshair",action:"toggleCrosshairs",commands:["Alt+Backslash","Alt+\\","Alt+"]},{label:"Toggle continuous zoom",action:"toggleContinuousZoom",commands:["Alt+Digit0","Alt+0"],extension:"continuousZoom"},{label:"Tab to next",action:"keyboardNavigateNext",commands:["Tab"]},{label:"Tab to previous",action:"keyboardNavigatePrevious",commands:["Shift+Tab"]},{label:"Select at tab",action:"keyboardNavigateClick",commands:["Enter"]},{label:"Pan to home",action:"home",commands:["Home"]},{label:"Pan to start of loaded data",action:"end",commands:["End"]},{label:"Delete a highlighted item or the active drawing",action:"delete",commands:["Backspace","Delete","Del"]},{label:"Close an open menu / dialog box or undo the active drawing",action:"escape",commands:["Escape","Esc"]},{label:"Symbol Lookup",action:"symbolLookup",commands:["Shift+Alt+KeyL"],ariaLabel:"Opens main symbol lookup for chart"},{label:"Table view",action:"tableView",commands:["Alt+KeyK"],extension:"tableView",ariaLabel:"Opens chart data in table format"},{label:"Range Slider",action:"rangeSlider",commands:["Shift+Alt+KeyR"],extension:"rangeSlider"},{label:"Extended Hours",action:"extendedHours",commands:["Shift+Alt+KeyX"],extension:"extendedHours"},{label:"Keyboard Shortcuts",action:"shortcuts",commands:["Shift+Alt+Slash","Shift+Alt+?"],extension:"shortcuts"},{label:"Outliers",action:"outliers",commands:["Shift+Alt+KeyO"],extension:"outliers"},{label:"Market Depth",action:"marketDepth",commands:["Shift+Alt+KeyD"],extension:"marketDepth"},{label:"L2 Heat Map",action:"l2HeatMap",commands:["Shift+Alt+KeyM"],extension:"marketDepth"},{label:"Import Data",action:"dataLoader",commands:["Alt+KeyI"],extension:"dataLoader"},{label:"Trade From Chart",action:"tfc",commands:["Shift+Alt+KeyP"],extension:"tfc"}],keysToRepeat:["ArrowUp","ArrowDown","ArrowLeft","ArrowRight","Up","Down","Left","Right","-","_","=","+"]},systemMessages:{copytoclipboard:{message:"Copied to clipboard.",type:"info",displayTime:5},logdeactivated:{message:"Log scale has been deactivated due to a zero or negative value in your visible dataset.",type:"warning"},studynoteditable:{message:"This study is not editable",displayTime:5},eldercannotadd:{message:"Elder Impulse study cannot be activated because a custom chart is already in use.",type:"info",displayTime:3},gonogocannotadd:{message:"GoNoGo study cannot be activated because a custom chart is already in use.",type:"info",displayTime:3},addAVWAP:{message:"Select AVWAP anchor time from the chart.",type:"info",displayTime:0},removeAVWAP:{message:"Select AVWAP anchor time from the chart.",remove:!0},changeperiodicity:{message:"Changing Periodicity may lose loaded data."},duplicatesymbol:{message:"The comparison symbol cannot be the same as the main series.",displayTime:4,type:"error"}},marketFactory:bt.Pz.Market.Symbology.factory,chartEngineParams:{preferences:{labels:!1,currentPriceLine:!0,whitespace:0}},quoteFeeds:[{quoteFeed:t.quoteFeed,behavior:{refreshInterval:1,backgroundRefreshInterval:5,bufferSize:200}}],selector:{sideNav:".ciq-sidenav",sidePanel:"cq-side-panel",lookupComponent:".ciq-search cq-lookup",studyLegend:"cq-study-legend",timeSpanEvent:".stx-markers cq-item.span-event",markersMenuItem:".stx-markers cq-item",themesMenuItem:"cq-themes",tfcTradePanel:".stx-trade-panel",tfcToggle:".stx-trade"},themes:{builtInThemes:{"ciq-day":"Day","ciq-night":"Night"},defaultTheme:"ciq-night",nameValueStore:t.nameValueStore},menuPeriodicity:[{type:"item",label:"1 D",cmd:"Layout.setPeriodicity(1,1,'day')",value:{period:1,interval:1,timeUnit:"day"}},{type:"item",label:"1 W",cmd:"Layout.setPeriodicity(1,1,'week')",value:{period:1,interval:1,timeUnit:"week"}},{type:"item",label:"1 Mo",cmd:"Layout.setPeriodicity(1,1,'month')",value:{period:1,interval:1,timeUnit:"month"}},{type:"separator"},{type:"item",label:"1 Min",cmd:"Layout.setPeriodicity(1,1,'minute')",value:{period:1,interval:1,timeUnit:"minute"}},{type:"item",label:"5 Min",cmd:"Layout.setPeriodicity(1,5,'minute')",value:{period:1,interval:5,timeUnit:"minute"}},{type:"item",label:"10 Min",cmd:"Layout.setPeriodicity(1,10,'minute')",value:{period:1,interval:10,timeUnit:"minute"}},{type:"item",label:"15 Min",cmd:"Layout.setPeriodicity(3,5,'minute')",value:{period:1,interval:1,timeUnit:"minute"}},{type:"item",label:"30 Min",cmd:"Layout.setPeriodicity(1,30,'minute')",value:{period:1,interval:30,timeUnit:"minute"}},{type:"item",label:"1 Hour",cmd:"Layout.setPeriodicity(2,30,'minute')",value:{period:2,interval:30,timeUnit:"minute"}},{type:"item",label:"4 Hour",cmd:"Layout.setPeriodicity(8,30,'minute')",value:{period:8,interval:30,timeUnit:"minute"}},{type:"separator"},{type:"item",label:"1 Sec",cmd:"Layout.setPeriodicity(1,1,'second')",value:{period:1,interval:1,timeUnit:"second"}},{type:"item",label:"10 Sec",cmd:"Layout.setPeriodicity(1,10,'second')",value:{period:1,interval:10,timeUnit:"second"}},{type:"item",label:"30 Sec",cmd:"Layout.setPeriodicity(1,30,'second')",value:{period:1,interval:30,timeUnit:"second"}},{type:"separator"},{type:"item",label:"250 MSec",cmd:"Layout.setPeriodicity(1,250,'millisecond')",value:{period:1,interval:250,timeUnit:"millisecond"}}],displayStyleIcons:!0,menuChartStyle:[{type:"radio",label:"Candle",cmd:"Layout.ChartType()",iconCls:"candle",value:"candle"},{type:"radio",label:"Bar",cmd:"Layout.ChartType()",iconCls:"bar",value:"bar",cls:"advanced-ui"},{type:"radio",label:"Colored Bar",cmd:"Layout.ChartType()",iconCls:"colored-bar",value:"colored_bar",cls:"advanced-ui"},{type:"radio",label:"Line",cmd:"Layout.ChartType()",iconCls:"line",value:"line"},{type:"radio",label:"Vertex Line",cmd:"Layout.ChartType()",iconCls:"vertex-line",value:"vertex_line"},{type:"radio",label:"Step",cmd:"Layout.ChartType()",iconCls:"step",value:"step"},{type:"radio",label:"Mountain",cmd:"Layout.ChartType()",iconCls:"mountain",value:"mountain"},{type:"radio",label:"Baseline",cmd:"Layout.ChartType()",iconCls:"baseline-delta",value:"baseline_delta",cls:"advanced-ui"},{type:"radio",label:"Hollow Candle",cmd:"Layout.ChartType()",iconCls:"hollow-candle",value:"hollow_candle",cls:"advanced-ui"},{type:"radio",label:"Volume Candle",cmd:"Layout.ChartType()",iconCls:"volume-candle",value:"volume_candle",cls:"advanced-ui"},{type:"radio",label:"Colored HLC Bar",cmd:"Layout.ChartType()",iconCls:"colored-hlc",value:"colored_hlc",cls:"advanced-ui"},{type:"radio",label:"Scatterplot",cmd:"Layout.ChartType()",iconCls:"scatterplot",value:"scatterplot",cls:"advanced-ui"},{type:"radio",label:"Histogram",cmd:"Layout.ChartType()",iconCls:"histogram",value:"histogram"}],menuChartAggregates:[{type:"separator",cls:"advanced-ui"},{type:"radio",label:"Heikin Ashi",cmd:"Layout.ChartType()",iconCls:"heikinashi",value:"heikinashi",cls:"advanced-ui"},{type:"radio",label:"Kagi",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('kagi')",iconCls:"kagi",value:"kagi",cls:"advanced-ui"},{type:"radio",label:"Line Break",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('linebreak')",iconCls:"linebreak",value:"linebreak",cls:"advanced-ui"},{type:"radio",label:"Renko",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('renko')",iconCls:"renko",value:"renko",cls:"advanced-ui"},{type:"radio",label:"Range Bars",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('rangebars')",iconCls:"rangebars",value:"rangebars",cls:"advanced-ui"},{type:"radio",label:"Point & Figure",cmd:"Layout.ChartType()",options:"Layout.showAggregationEdit('pandf')",iconCls:"pandf",value:"pandf",cls:"advanced-ui"}],menuChartPreferences:[{type:"checkbox",label:"Range Selector",cmd:"Layout.RangeSlider()",cls:"rangeslider-ui"},{type:"checkbox",label:"Extended Hours",cmd:"Layout.ExtendedHours()",cls:"extendedhours-ui"},{type:"checkbox",label:"Animation",cmd:"Layout.Animation()",cls:"animation-ui"},{type:"checkbox",label:"Hide Outliers",cmd:"Layout.Outliers()",cls:"outliers-ui"},{type:"checkbox",label:"Market Depth",cmd:"Layout.MarketDepth()",cls:"marketdepth-ui"},{type:"checkbox",label:"L2 Heat Map",cmd:"Layout.L2Heatmap()",cls:"marketdepth-ui"}],menuYAxisPreferences:[{type:"checkbox",label:"Log Scale",cmd:"Layout.ChartScale('log')"},{type:"checkbox",label:"Invert",cmd:"Layout.FlippedChart()"}],menuViewConfig:{},menuStudiesConfig:{excludedStudies:{stochastics:!0},alwaysDisplayDialog:{ma:!0}},menuAddOns:[{type:"item",label:"Shortcuts / Hotkeys",cmd:"Layout.showShortcuts(true)",cls:"shortcuts-ui"},{type:"item",label:"Import Data",cmd:"Channel.write('dataLoader', true)",cls:"dataLoader-ui"}],rangeMenu:[{type:"range",label:"1D",cmd:"set(1,'today')"},{type:"range",label:"5D",cmd:"set(5,'day',30,2,'minute')"},{type:"range",label:"1M",cmd:"set(1,'month',30,8,'minute')"},{type:"range",label:"3M",cmd:"set(3,'month')",cls:"hide-sm"},{type:"range",label:"6M",cmd:"set(6,'month')",cls:"hide-sm"},{type:"range",label:"YTD",cmd:"set(1,'YTD')",cls:"hide-sm"},{type:"range",label:"1Y",cmd:"set(1,'year')"},{type:"range",label:"5Y",cmd:"set(5,'year',1,1,'week')",cls:"hide-sm"},{type:"range",label:"All",cmd:"set(1,'all')",cls:"hide-sm"}],drawingTools:[{type:"dt",tool:"annotation",group:"text",label:"Annotation",shortcut:"w"},{type:"dt",tool:"arrow",group:"markings",label:"Arrow",shortcut:"a"},{type:"dt",tool:"line",group:"lines",label:"Line",shortcut:"l"},{type:"dt",tool:"horizontal",group:"lines",label:"Horizontal",shortcut:"o"},{type:"dt",tool:"vertical",group:"lines",label:"Vertical",shortcut:"p"},{type:"dt",tool:"rectangle",group:"markings",label:"Rectangle",shortcut:"r"},{type:"dt",tool:"trendline",group:"lines",label:"Trend Line",shortcut:"t"},{type:"dt",tool:"measurementline",group:"statistics",label:"Measurement Line",shortcut:""},{type:"dt",tool:"average",group:"statistics",label:"Average Line"},{type:"dt",tool:"callout",group:"text",label:"Callout"},{type:"dt",tool:"channel",group:"lines",label:"Channel"},{type:"dt",tool:"check",group:"markings",label:"Check"},{type:"dt",tool:"continuous",group:"lines",label:"Continuous"},{type:"dt",tool:"crossline",group:"lines",label:"Crossline"},{type:"dt",tool:"elliottwave",group:"technicals",label:"Elliott Wave"},{type:"dt",tool:"ellipse",group:"markings",label:"Ellipse",shortcut:"e"},{type:"dt",tool:"freeform",group:"lines",label:"Doodle"},{type:"dt",tool:"fibprojection",group:"fibonacci",label:"Fib Projection"},{type:"dt",tool:"fibarc",group:"fibonacci",label:"Fib Arc"},{type:"dt",tool:"fibfan",group:"fibonacci",label:"Fib Fan"},{type:"dt",tool:"fibtimezone",group:"fibonacci",label:"Fib Time Zone"},{type:"dt",tool:"focusarrow",group:"markings",label:"Focus"},{type:"dt",tool:"gannfan",group:"technicals",label:"Gann Fan"},{type:"dt",tool:"gartley",group:"technicals",label:"Gartley"},{type:"dt",tool:"heart",group:"markings",label:"Heart"},{type:"dt",tool:"pitchfork",group:"technicals",label:"Pitchfork"},{type:"dt",tool:"quadrant",group:"statistics",label:"Quadrant Lines"},{type:"dt",tool:"ray",group:"lines",label:"Ray"},{type:"dt",tool:"regression",group:"statistics",label:"Regression Line"},{type:"dt",tool:"retracement",group:"fibonacci",label:"Fib Retracement"},{type:"dt",tool:"star",group:"markings",label:"Star"},{type:"dt",tool:"speedarc",group:"technicals",label:"Speed Resistance Arc"},{type:"dt",tool:"speedline",group:"technicals",label:"Speed Resistance Line"},{type:"dt",tool:"timecycle",group:"technicals",label:"Time Cycle"},{type:"dt",tool:"tirone",group:"statistics",label:"Tirone Levels"},{type:"dt",tool:"volumeprofile",group:"statistics",label:"Volume Profile"},{type:"dt",tool:"xcross",group:"markings",label:"Cross"}],drawingToolGrouping:["All","Favorites","Fibonacci","Lines","Markings","Statistics","Technicals","Text"],menuRendering:{separator:()=>"\n\t\t\t\t\t<cq-separator></cq-separator>",item:({label:t,cmd:e,cls:i})=>`\n\t\t\t\t\t<cq-item ${i?`class="${i}"`:""} stxtap="${e}">${t}</cq-item>`,radio:({label:t,cmd:e,options:i,cls:a,iconCls:r,value:n},{displayStyleIcons:s})=>`\n\t\t\t\t\t<cq-item class="${a||""}${r&&s?" ciq-menu-icon":""}"\n\t\t\t\t\t\tstxsetget="${e}"\n\t\t\t\t\t\t${n?` data-value=${JSON.stringify(n)}`:""}>\n\t\t\t\t\t\t${r&&s?`<span ciq-menu-icon class="${"ciq-icon-"+r}"></span>`:""}\n\t\t\t\t\t\t${i?`<span class="ciq-edit" stxtap="${i}" keyboard-selectable-child="true"></span>`:""}\n\t\t\t\t\t\t<div><span ciq-label>${t}</span><span class="ciq-radio"><span></span></span></div>\n\t\t\t\t\t</cq-item>`,radioOptions:(...t)=>e.menuRendering.radio.apply(e,t),checkbox:({label:t,cmd:e,cls:i})=>`\n\t\t\t\t\t<cq-item\n\t\t\t\t\t\t${i?`class="${i}"`:""}\n\t\t\t\t\t\tstxsetget="${e}">${t}<span class="ciq-switch ciq-active"><span></span></span>\n\t\t\t\t\t</cq-item>`,checkboxOptions:({label:t,cmd:e,options:i,cls:a})=>`\n\t\t\t\t\t<cq-item ${a?`class="${a}"`:""}>\n\t\t\t\t\t\t<span class="ciq-edit" stxtap="${i}"></span>\n\t\t\t\t\t\t<div stxsetget="${e}">${t}<span class="ciq-switch ciq-active"><span></span></span></div>\n\t\t\t\t\t</cq-item>`,doubleslider:({label:t,cmd:e,attrs:i,cls:a})=>`\n\t\t\t\t\t<cq-item\n\t\t\t\t\t\t${a?`class="${a}"`:""}\n\t\t\t\t\t\t>${t}<span><cq-double-slider ${i}></cq-double-slider><span></span></span>\n\t\t\t\t\t</cq-item>`,range:({label:t,cmd:e,cls:i})=>`\n\t\t\t\t\t<div ${i?`class="${i}"`:""} stxtap="${e}">${t}</div>\n\t\t\t\t`,dt:({tool:t,group:e,label:i,shortcut:a})=>`<cq-item\n\t\t\t\t\t\tclass="ciq-tool"\n\t\t\t\t\t\tcq-tool="${t}"\n\t\t\t\t\t\t${a?`cq-tool-shortcut="${a}"`:""}\n\t\t\t\t\t\tcq-tool-group="${e}"\n\t\t\t\t\t\tstxtap="tool('${t}')"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class="icon ${t}"></span>\n\t\t\t\t\t\t<label>${i}</label>\n\t\t\t\t\t\t<cq-help help-id="drawing_palette_${t}"></cq-help>\n\t\t\t\t\t</cq-item>\n\t\t\t\t`},getMenu(t,e){let i=this[t];if(i)return!0===e&&(e=(t,e)=>t.label>e.label?1:-1),"function"==typeof e&&i.sort(e),this[t].map((t=>this.menuRendering[t.type||"item"](t,this)))},addOns:{tooltip:{ohl:!0,volume:!0,series:!0,studies:!0},inactivityTimer:{minutes:30},animation:{animationParameters:{tension:.3}},outliers:{},rangeSlider:{},fullScreen:{},extendedHours:{filter:!0},continuousZoom:{periodicities:[{period:1,interval:"month"},{period:1,interval:"week"},{period:1,interval:"day"},{period:8,interval:30},{period:1,interval:30},{period:5,interval:1},{period:1,interval:1},{period:10,interval:1,timeUnit:"second"},{period:1,interval:1,timeUnit:"second"}],boundaries:{maxCandleWidth:15,minCandleWidth:3}},forecasting:{moduleName:"PlotComplementer",id:"forecast",decorator:{symbol:"_fcst",display:" Forecast"},renderingParameters:{chartType:"channel",opacity:.5,pattern:"dotted"},quoteFeed:t.forecastQuoteFeed,behavior:{refreshInterval:60}},tableView:{},dataLoader:{},shortcuts:{}},plugins:{ptv:{moduleName:"TimeSpanEventPanel",menuItemSelector:".stx-markers cq-item.span-event",loadSample:!0,showTooltip:!0,infoPanel:{durationEvent:"main",spanEvent:"main",singleEvent:"main"}},marketDepth:{volume:!0,mountain:!0,step:!0,record:!0,height:"50%",orderbook:!0,interaction:!0},tfc:{moduleName:"TFC",container:".ciq-menu-section .ciq-toggles",loadSample:!0,startCompact:!0},crossSection:{pointFreshnessTimeout:1,enableTimeSeries:!0,xAxisType:"regular",timelineDateSelector:{height:95,useNotifications:!0},postInstall({uiContext:t,extension:e}){const{stx:{crossSection:i}}=t;bt.Pz.getFn("UI.CurveEdit")(null,t,this),bt.Pz.getFn("CrossSection.HUD")(null,t),this.timelineDateSelector&&bt.Pz.getFn("CrossSection.TimelineDateSelector")(Object.assign({crossSection:i},this.timelineDateSelector));const a=t.topNode.querySelector("cq-datepicker");a&&a.registerCallback((t=>e.setCurveDate(t)))}},visualEarnings:{container:".ciq-menu-section .ciq-dropdowns"},signalIQ:{panelHeight:150,displayCondition:!1,emojiPicker:t.emojiPicker&&{open({stx:e,targetElement:i,handler:a}){if(this.pickers||(this.pickers=new Map),!this.pickers.has(i)){const a=this.container=document.createElement("button");a.type="button",a.classList.add("marker-emoji-picker"),i.parentElement.insertBefore(a,i.nextSibling);const r=[];this.emojis.forEach((t=>{r.push({value:e.emojify(`:${t.replace(/\|/g,"::")}:`),label:t})})),this.pickers.set(i,new t.emojiPicker({button:a,targetElement:i,container:this.container,emojiList:r,displacements:{x:0}}))}const r=this.pickers.get(i);r.onSelect(a),r.toggle(!0)},clean(){this.pickers&&(this.pickers.forEach((t=>t.toggle(!1))),this.pickers=null)},emojis:["smile","partying_face","sob","money_mouth_face","arrow_upper_right","arrow_lower_right","ox","bear","gem","rocket","heart","poop","fire","bomb","pray","moneybag"]},disallowedStudies:["Darvas","Elder Impulse","GoNoGo Trend","Pivot Points","Sentiment By Strike","val lines","Volatility Cone","vol profile"]},scriptIQ:{},analystViews:{container:".ciq-menu-section .ciq-toggles",moduleName:"TCAnalystViews",partner:1e3,token:"eZOrIVNU3KR1f0cf6PTUYg=="},technicalInsights:{container:".ciq-menu-section .ciq-toggles",moduleName:"TCTechnicalInsights",lang:"en",uid:""}},channels:{lookup:"channel.lookup",crosshair:"layout.crosshair",headsUp:"layout.headsUp",sidenav:"layout.sidenav",tableView:"channel.tableView",drawing:"channel.drawing",drawingPalettes:"channel.drawingPalettes",breakpoint:"channel.breakpoint",containerSize:"channel.containerSize",sidenavSize:"channel.sidenavSize",sidepanelSize:"channel.sidepanelSize",pluginPanelHeight:"channel.pluginPanelHeight",tfc:"channel.tfc",analystviews:"channel.analystviews",technicalinsights:"channel.technicalinsights",dataLoader:"channel.dataLoader",dialog:"channel.dialog",keyboardNavigation:"channel.keyboardNavigation",class:"channel.componentClass"},dialogs:{dataLoader:{tag:"cq-data-dialog"},view:{tag:"cq-view-dialog"},aggregation:{tag:"cq-aggregation-dialog"},timezone:{tag:"cq-timezone-dialog"},language:{tag:"cq-language-dialog"},lookup:{tag:"cq-lookup-dialog"},theme:{tag:"cq-theme-dialog"},study:{tag:"cq-study-dialog",attributes:{"cq-study-axis":!0,"cq-study-panel":"alias"}},signaliq:{tag:"cq-signaliq-dialog"},fibSettings:{tag:"cq-fib-settings-dialog"},volumeprofileSettings:{tag:"cq-volumeprofile-settings-dialog"},measurementlineSettings:{tag:"cq-measurementline-settings-dialog"},share:{tag:"cq-share-dialog"}},eventMarkersImplementation:t.markerFeed,scrollbarStyling:{refresh(e,i={suppressScrollX:!0}){"function"==typeof t.scrollStyle&&(e.__ps||(e.__ps=new t.scrollStyle(e,i),e.__ps.scrollbarX.setAttribute("tabindex",-1),e.__ps.scrollbarY.setAttribute("tabindex",-1)),e.__ps.update(e))},destroy(t){t.__ps&&t.__ps.destroy()}},multiChartCopySymbol:null,multiChartLoadMsg:"Click to load a symbol",restoreOffgridCharts:!0,nameValueStore:t.nameValueStore,onWebComponentsReady:()=>{},onEngineReady:t=>{},onChartReady:t=>{},onMultiChartEvent:(t,e)=>{},soloActive:{onDraw:{shouldSolo:t=>!1,notify:{message:"Click on the draw toggle again to close drawing tools and return to grid view"}},onTFC:{shouldSolo(t){const{width:e,height:i}=t.container.getBoundingClientRect();return e<300||i<250},notify:{message:"Chart has been maximized to make it easier to set trade prices."}}},useQueryString:{symbolObject:{symbol:"symbol",name:"name",exchDisp:"exchDisp"}},updateFromQueryString(){if(!this.useQueryString)return;const t=bt.Pz.qs(),e=Object.entries(this.useQueryString.symbolObject).reduce(((e,[i,a])=>{const r=t[a];return void 0!==r&&(e[i]=r),e}),{});e.symbol&&(this.initialSymbol=e,this.restore&&(this.restore={...this.restore,symbol:!1}))},ariaActive:["cq-chart-instructions","cq-toggle.tableview-ui","cq-lookup",".symbol-search",".ciq-data-table-container",".hu-tooltip"],createChart:function(t){this.updateFromQueryString();return bt.Pz.UI?(new bt.Pz.UI.Chart).createChartAndUI({container:t,config:this}).stx:bt.Pz.ChartEngine.create({container:t,config:this})}};return t.quoteFeed||(e.quoteFeeds.length=0),e};var kt=i(580);i(802),i(963),i(907),i(320),i(221),i(409);document.querySelector("cq-context").setAttribute("ciq-native-mobile","");bt.Pz.MobileBridge.determineOs();const wt={fetch:function(t,e){bt.Pz.MobileBridge.nativeQuoteFeed(t,e)},fetchInitialData:function(t,e,i,a,r){const n={func:"pullInitialData",symbol:t,period:a.period,timeUnit:a.interval,start:e,end:i};this.fetch(n,r)},fetchUpdateData:function(t,e,i,a){const r={func:"pullUpdate",symbol:t,period:i.period,timeUnit:i.interval,start:e};this.fetch(r,a)},fetchPaginationData:function(t,e,i,a,r){const n={func:"pullPagination",symbol:t,period:a.period,timeUnit:a.interval,start:e,end:i};this.fetch(n,r)}};bt.Pz.MobileBridge.setQuoteFeedInBridge(wt);const Mt=Dt({scrollStyle:kt.Z,quoteFeed:wt});Object.assign(Mt.enabledAddOns,{fullScreen:!1,rangeSlider:!1,tooltip:!1}),Mt.onChartReady=function(t){bt.Pz.MobileBridge.setChartAvailable(!0)},bt.Pz.ChartEngine.prototype.keepDrawingToolSelected=!0;let Tt=Mt.createChart();if(Tt){Tt.callbackListeners.drawingEdit=[],Tt.callbackListeners.studyOverlayEdit=[],Tt.callbackListeners.studyPanelEdit=[],Tt.minimumZoomTicks=5,Tt.layout.crosshair=!1,Tt.keepDrawingToolSelected=!0,bt.Pz.MobileBridge.setChartEngineInBridge(Tt);document.getElementById("simulation-warning").open()}}},r={};function n(t){var e=r[t];if(void 0!==e)return e.exports;var i=r[t]={exports:{}};return a[t](i,i.exports,n),i.exports}n.m=a,t=[],n.O=(e,i,a,r)=>{if(!i){var s=1/0;for(c=0;c<t.length;c++){for(var[i,a,r]=t[c],o=!0,l=0;l<i.length;l++)(!1&r||s>=r)&&Object.keys(n.O).every((t=>n.O[t](i[l])))?i.splice(l--,1):(o=!1,r<s&&(s=r));if(o){t.splice(c--,1);var h=a();void 0!==h&&(e=h)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[i,a,r]},i=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,n.t=function(t,a){if(1&a&&(t=this(t)),8&a)return t;if("object"==typeof t&&t){if(4&a&&t.__esModule)return t;if(16&a&&"function"==typeof t.then)return t}var r=Object.create(null);n.r(r);var s={};e=e||[null,i({}),i([]),i(i)];for(var o=2&a&&t;"object"==typeof o&&!~e.indexOf(o);o=i(o))Object.getOwnPropertyNames(o).forEach((e=>s[e]=()=>t[e]));return s.default=()=>t,n.d(r,s),r},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t={321:0,532:0};n.O.j=e=>0===t[e];var e=(e,i)=>{var a,r,[s,o,l]=i,h=0;if(s.some((e=>0!==t[e]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(l)var c=l(n)}for(e&&e(i);h<s.length;h++)r=s[h],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},i=self.webpackChunksample_template_webpack=self.webpackChunksample_template_webpack||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var s=n.O(void 0,[532,8,23,407,910,160],(()=>n(431)));s=n.O(s)})();