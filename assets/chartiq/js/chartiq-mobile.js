"use strict";(self.webpackChunksample_template_webpack=self.webpackChunksample_template_webpack||[]).push([[8],{409:(e,t,r)=>{var i=r(73);let a=null,n=null;Object.assign(window,{CIQ:i.Pz}),i.Pz.MobileBridge=i.Pz.MobileBridge||function(){},i.Pz.MobileBridge.quoteFeedCallbacks={},i.Pz.MobileBridge.isAndroid=!1,i.Pz.MobileBridge.dayCss="ciq-day",i.Pz.MobileBridge.nightCss="ciq-night",i.Pz.MobileBridge.chartAvailable=!1,i.Pz.MobileBridge.setChartAvailable=function(e){this.chartAvailable=JSON.stringify(e),this.isAndroid&&ChartIQ?ChartIQ.chartAvailableChange(this.chartAvailable):webkit.messageHandlers.chartAvailableHandler&&webkit.messageHandlers.chartAvailableHandler.postMessage(this.chartAvailable)},i.Pz.MobileBridge.isChartAvailable=function(){return this.chartAvailable},i.Pz.MobileBridge.setChartEngineInBridge=function(e){a=e,Object.assign(window,{stxx:a})},i.Pz.MobileBridge.setQuoteFeedInBridge=function(e){n=e},i.Pz.MobileBridge.determineOs=function(){var e=navigator.userAgent;/android/i.test(e)?this.isAndroid=!0:this.proxyLogger()},i.Pz.MobileBridge.proxyLogger=function(){var e={log:console.log,warn:console.warn,error:console.error};console.log=function(){return webkit.messageHandlers.logHandler.postMessage({method:"LOG",arguments:JSON.parse(JSON.stringify(arguments))}),e.log.apply(this,arguments)},console.warn=function(){return webkit.messageHandlers.logHandler.postMessage({method:"WARN",arguments:JSON.parse(JSON.stringify(arguments))}),e.warn.apply(this,arguments)},console.error=function(){return webkit.messageHandlers.logHandler.postMessage({method:"ERROR",arguments:JSON.parse(JSON.stringify(arguments))}),e.error.apply(this,arguments)}},i.Pz.MobileBridge.nativeQuoteFeed=function(e,t){var r=i.Pz.uniqueID();"pullInitialData"===e.func&&(this.quoteFeedCallbacks[r]=t,this.isAndroid?ChartIQ.pullInitialData(e.symbol,e.period.toString(),e.timeUnit,e.start.toISOString(),e.end.toISOString(),JSON.stringify(e),r):webkit.messageHandlers.pullInitialDataHandler.postMessage({cb:r,symbol:e.symbol,startDate:e.start.toISOString(),endDate:e.end.toISOString(),interval:e.timeUnit,period:e.period})),"pullUpdate"===e.func&&(this.quoteFeedCallbacks[r]=t,this.isAndroid?ChartIQ.pullUpdate(e.symbol,e.period.toString(),e.timeUnit,e.start.toISOString(),JSON.stringify(e),r):webkit.messageHandlers.pullUpdateDataHandler.postMessage({cb:r,symbol:e.symbol,startDate:e.start.toISOString(),interval:e.timeUnit,period:e.period})),"pullPagination"===e.func&&(this.quoteFeedCallbacks[r]=t,this.isAndroid?ChartIQ.pullPagination(e.symbol,e.period.toString(),e.timeUnit,e.start.toISOString(),e.end.toISOString(),JSON.stringify(e),r):webkit.messageHandlers.pullPaginationDataHandler.postMessage({cb:r,symbol:e.symbol,startDate:e.start.toISOString(),endDate:e.end.toISOString(),interval:e.timeUnit,period:e.period}))},i.Pz.MobileBridge.attachQuoteFeed=function(e){e=JSON.parse(e),a.attachQuoteFeed(n,e)},i.Pz.MobileBridge.setRefreshInterval=function(e){a.quoteDriver.resetRefreshInterval(e)},i.Pz.MobileBridge.parseData=function(e,t,r,i,n){var o=[];e=JSON.parse(e);for(var s=0;s<e.length;s++)o[s]={},o[s].DT=new Date(e[s].DT),o[s].Open=e[s].Open,o[s].High=e[s].High,o[s].Low=e[s].Low,o[s].Close=e[s].Close,o[s].Volume=e[s].Volume;t?(void 0===r&&(r=!1),void 0===i&&(i=!1),(0,this.quoteFeedCallbacks[t])({quotes:o,moreAvailable:r,upToDate:i}),delete this.quoteFeedCallbacks[t]):(void 0===n&&(n=!1),a.updateChartData(o,null,{useAsLastSale:n}))},i.Pz.MobileBridge.getHudDetails=function(){var e={},t=a.barFromPixel(a.cx),r=a.chart.xaxis[t];return r&&r.data&&(e.price=a.formatPrice(r.data[a.chart.defaultPlotField]),e.open=a.formatPrice(r.data.Open),e.close=a.formatPrice(r.data.Close),e.high=a.formatPrice(r.data.High),e.low=a.formatPrice(r.data.Low),e.volume=i.Pz.condenseInt(r.data.Volume)),this.isAndroid?e:JSON.stringify(e)},i.Pz.MobileBridge.getLayoutProperty=function(e){var t=a.layout[e];return this.isAndroid?t:JSON.stringify(t)},i.Pz.MobileBridge.getChartProperty=function(e){var t=a.chart[e];return this.isAndroid?t:JSON.stringify(t)},i.Pz.MobileBridge.setChartProperty=function(e,t){a.chart[e]=t},i.Pz.MobileBridge.getEngineProperty=function(e){var t=a[e];return this.isAndroid?t:JSON.stringify(t)},i.Pz.MobileBridge.setEngineProperty=function(e,t){a[e]=t},i.Pz.MobileBridge.setPeriodicity=function(e,t,r){var i={period:e,interval:t,timeUnit:r},n=document.querySelector("cq-loader");n&&n.show(),a.setPeriodicity(i,(function(){n&&n.hide()}))},i.Pz.MobileBridge.loadChart=function(e,t){const r=this;t&&(t=JSON.parse(t)),e||(e=a.chart.symbol);var n=document.querySelector("cq-loader");n&&n.show();a.loadChart(e,{masterData:t},(function(){n&&n.hide(),i.Pz.ChartEngine.restoreDrawings(a,e),r.isAndroid||webkit.messageHandlers.newSymbolCallbackHandler.postMessage(e)})),Object.values(a.chart.series).filter((e=>"study"!==e.parameters.bucket)).forEach((e=>a.removeSeries(e.id)))},i.Pz.MobileBridge.setChartType=function(e){a.setChartType(e)},i.Pz.MobileBridge.setAggregationType=function(e){a.setAggregationType(e)},i.Pz.MobileBridge.getSymbol=function(){return a.chart.symbol},i.Pz.MobileBridge.enableCrosshairs=function(e){a.layout.crosshair=e,a.doDisplayCrosshairs(),a.changeOccurred("layout")},i.Pz.MobileBridge.getCurrentVectorParameters=function(){return a.currentVectorParameters},i.Pz.MobileBridge.setCurrentVectorParameters=function(e,t){"vectorType"===e?a.changeVectorType(t):a.currentVectorParameters[e]=t},i.Pz.MobileBridge.addSeries=function(e,t,r){var i={color:t,isComparison:r};a.addSeries(e,i)},i.Pz.MobileBridge.removeSeries=function(e){a.removeSeries(e)},i.Pz.MobileBridge.modifySeries=function(e,t,r){let i={};i[t]=r,a.modifySeries(e,i)},i.Pz.MobileBridge.getAllSeries=function(){const e=i.Pz.clone(a.chart.series);let t={};for(const r in e)t[r]={},t[r].color=e[r].parameters.color,t[r].isComparison=e[r].parameters.isComparison;return JSON.stringify(t)},i.Pz.MobileBridge.setTheme=function(e){var t=document.querySelector("cq-context").classList,r=this.nightCss,i=this.dayCss;if("day"===e.toLowerCase())t.remove(r),t.add(i);else if("night"===e.toLowerCase())t.remove(i),t.add(r);else{if("none"!==e.toLowerCase())return;t.remove(r),t.remove(i)}a.setThemeSettings()},i.Pz.MobileBridge.toggleExtendedHours=function(e){a.extendedHours.set(e)},i.Pz.MobileBridge.getTranslations=function(e){return e?JSON.stringify(i.Pz.I18N.wordLists[e]):JSON.stringify(i.Pz.I18N.wordLists)},i.Pz.MobileBridge.setLanguage=function(e){a.preferences.language=e,a.changeOccurred("preferences"),i.Pz.I18N.localize(a,e),a.draw()},i.Pz.MobileBridge.restoreDefaultDrawingConfig=function(e,t){i.Pz.Drawing.restoreDefaultConfig(a,e,t)},i.Pz.MobileBridge.getDrawingParameters=function(e){const t=i.Pz.clone(i.Pz.Drawing.getDrawingParameters(a,e));if(!t)return;let r=Object.keys(t),n=a.currentVectorParameters.annotation.font;n.size||n.family||n.style||n.weight||(n.size="13px",n.family="Helvetica",n.style="normal",n.weight="300"),a.currentVectorParameters.active1||a.currentVectorParameters.active2||a.currentVectorParameters.active3||(a.currentVectorParameters.active1=!1,a.currentVectorParameters.active2=!1,a.currentVectorParameters.active3=!1),a.currentVectorParameters.color1||a.currentVectorParameters.color2||a.currentVectorParameters.color3||(a.currentVectorParameters.color1="",a.currentVectorParameters.color2="",a.currentVectorParameters.color3=""),a.currentVectorParameters.lineWidth1||a.currentVectorParameters.lineWidth2||a.currentVectorParameters.lineWidth3||(a.currentVectorParameters.lineWidth1=1,a.currentVectorParameters.lineWidth2=1,a.currentVectorParameters.lineWidth3=1),a.currentVectorParameters.pattern1||a.currentVectorParameters.pattern2||a.currentVectorParameters.pattern3||(a.currentVectorParameters.pattern1="dotted",a.currentVectorParameters.pattern2="dotted",a.currentVectorParameters.pattern3="dotted");let o=i.Pz.clone(a.currentVectorParameters);for(const e in o)r.includes(e)||"currentColor"==e||"fibonacci"==e||"annotation"==e||"volumeProfile"==e||delete o[e];if(o.waveParameters&&(o.waveParameters.corrective=o.waveParameters.corrective.join(" "),o.waveParameters.impulse=o.waveParameters.impulse.join(" ")),o.currentColor&&(o.color=o.currentColor,delete o.currentColor),o.annotation&&(o.font=o.annotation.font,delete o.annotation),o.fibonacci){o.fibs=o.fibonacci.fibs,delete o.fibonacci;for(let e=0;e<o.fibs.length;e++){let t=100*o.fibs[e].level;o.fibs[e].level=Number(t.toFixed(1)),delete o.fibs[e].color,delete o.fibs[e].parameters}}return JSON.stringify(o)},i.Pz.MobileBridge.setDrawingParameters=function(e,t){switch("color"==e&&(e="currentColor"),e){case"size":case"weight":case"family":case"style":a.currentVectorParameters.annotation.font[e]=t;break;case"impulse":case"corrective":let r=t.split(" ");a.currentVectorParameters.waveParameters[e]=r;break;case"decoration":case"showLines":a.currentVectorParameters.waveParameters[e]=t;break;case"pattern":case"lineWidth":const{fibonacci:i}=a.currentVectorParameters;Object.getOwnPropertyNames(a.currentVectorParameters).filter((t=>t.match(new RegExp(`^${e}`)))).forEach((e=>{a.currentVectorParameters[e]=t})),i.fibs.forEach((({parameters:r})=>{r[e]=t})),i.timezone.parameters[e]=t;break;case"fibs":const n=a.currentVectorParameters.fibonacci.fibs,o=atob(t).replace("\\","");let s=JSON.parse(o).map((e=>(Object.keys(e).forEach((t=>{let r=e[t].toString(),i=parseFloat(r);if(isNaN(i))["true","false"].includes(r)&&(r="true"===r);else{let e=(i.toString().split(".")[1]||"").length+2;r=parseFloat((i/100).toFixed(e))}e[t]=r})),e))).sort(((e,t)=>e.level>t.level?1:-1));const l=[];let c=0,u=0;for(;c<s.length||u<n.length;){let e=s[c]||{},t=n[u]||n[n.length-1];if(e.level===t.level)l.push(Object.assign({},t,e)),c++,u++;else if(void 0!==e.level&&(!n[u]||e.level<t.level))l.push(Object.assign({},t,e)),c++;else{if(void 0===e.level)break;u++}}a.currentVectorParameters.fibonacci.fibs=l;break;case"priceBuckets":a.currentVectorParameters.volumeProfile.priceBuckets=t;break;case"volumeProfile":let d=JSON.parse(t);a.currentVectorParameters.volumeProfile.priceBuckets=d.priceBuckets;break;default:a.currentVectorParameters[e]=t}},i.Pz.MobileBridge.deleteDrawing=function(){let e=a.drawingObjects;for(let t=0;t<e.length;t++){const r=e[t];if(r.highlighted){if(r.permanent)continue;const e=a.exportDrawings();a.removeDrawing(r),a.undoStamp(e,a.exportDrawings());break}}},i.Pz.MobileBridge.cloneDrawing=function(){let e=a.drawingObjects;for(let t=0;t<e.length;t++){const r=e[t];if(r.highlighted){const e=new i.Pz.Drawing[r.name];let t=r.serialize();e.reconstruct(a,t),e.repositioner=r.repositioner,e.highlighted=!0,r.highlighted=!1,a.addDrawing(e),a.activateRepositioning(e);break}}},i.Pz.MobileBridge.layerDrawing=function(e){let t=a.drawingObjects;for(let r=0;r<t.length;r++){const i=t[r];if(i.highlighted){let n=t.length-1,o=r,s=NaN;if(-1===o)return;switch(e){case"up":o<n&&(s=o+1);break;case"down":o>0&&(s=o-1);break;case"top":o<n&&(s=n);break;case"bottom":o>0&&(s=0)}if(isNaN(s))return;let l=a.exportDrawings();a.drawingObjects.splice(o,1),a.drawingObjects.splice(s,0,i),a.undoStamp(l,a.exportDrawings()),a.draw(),a.changeOccurred("vector");break}}},i.Pz.MobileBridge.undo=function(){const e=document.querySelector("cq-undo");if(!e)return JSON.stringify(!1);e.undo();const t=e.undostack.length>0;return JSON.stringify(t)},i.Pz.MobileBridge.redo=function(){const e=document.querySelector("cq-undo");if(!e)return JSON.stringify(!1);e.redo();const t=e.redostack.length>0;return JSON.stringify(t)},i.Pz.MobileBridge.addStudyAsSignal=function(e){const t=i.Pz.Studies.addStudy(a,e);return this.getSlimSd(t.name)},i.Pz.MobileBridge.removeSignal=function(e){this.removeStudy(e)},i.Pz.MobileBridge.saveSignal=function(e,t,r){const i=a.layout.studies[e];try{const e=JSON.parse(t);a.signalIQ.convertStudyToSignal(i,e,r)}catch(e){console.log(e)}},i.Pz.MobileBridge.toggleSignalStudy=function(e){const t=a.layout.studies[e];t&&t.toggleDisabledState(a)},i.Pz.MobileBridge.getActiveSignals=function(){var e=[];for(let i in a.layout.studies){var t={},r=a.layout.studies[i];r.signalData&&(t.conditions=r.signalData.conditions,t.description=r.signalData.description,t.joiner=r.signalData.joiner,t.signalName=r.signalData.name,t.studyName=r.name,t.disabled=r.disabled,t.outputs=r.outputMap,t.type=r.type,t.uniqueId=r.uniqueId,e.push(t))}return JSON.stringify(e)},i.Pz.MobileBridge.getSlimSd=function(e){const t=a.layout.studies[e];let r={};return r.outputs=t.outputMap,r.studyName=t.name,r.type=t.type,r.uniqueId=t.uniqueId,JSON.stringify(r)},i.Pz.MobileBridge.addStudy=function(e,t,r,n){t&&t.length&&(t=JSON.parse(t)),r&&r.length&&(r=JSON.parse(r)),n&&n.length&&(n=JSON.parse(n)),i.Pz.Studies.addStudy(a,e,t,r,n)},i.Pz.MobileBridge.removeStudy=function(e){var t=a.layout.studies;for(var r in t){var n=t[r];n.name===e&&i.Pz.Studies&&i.Pz.Studies.removeStudy(a,n)}},i.Pz.MobileBridge.removeAllStudies=function(){var e=a.layout.studies;for(var t in e){var r=e[t];i.Pz.Studies&&i.Pz.Studies.removeStudy(a,r)}},i.Pz.MobileBridge.getStudyList=function(){let e=i.Pz.Studies.studyLibrary,t=a.signalIQ.allowedStudies.filter((e=>!["AVWAP"].includes(e)));for(const r in e)t.includes(r)||(e[r].signalIQExclude=!0);return JSON.stringify(e)},i.Pz.MobileBridge.getActiveStudies=function(){var e=[];for(var t in a.layout.studies){var r={},i=a.layout.studies[t];i.signalData||(r.shortName=t,r.name=i.name,r.type=i.type,r.inputs=i.inputs,r.outputs=i.outputs,r.parameters=i.parameters,e.push(r))}if(this.isAndroid)return e;function n(e){return function(t,r){if("object"==typeof r&&null!==r){if(-1!==e.indexOf(r))return;e.push(r)}return r}}var o=[],s=[],l=[],c=[];for(var u in e){var d=e[u],g=JSON.stringify(d.inputs,n(s)),f=JSON.stringify(d.outputs,n(l)),m=JSON.stringify(d.parameters,n(c));o.push(d.name+"___"+d.type+"___"+g+"___"+f+"___"+m)}return o.join("|||")},i.Pz.MobileBridge.setStudy=function(e,t,r){var n=a.layout.studies,o={};for(var s in n){var l=n[s];l.name===e&&(o=l)}var c=new i.Pz.Studies.DialogHelper({sd:o,stx:a}),u=!1,d={},g={};for(var f in c.inputs){var m=c.inputs[f];m.name===t&&(u=!0,"text"===m.type||"select"===m.type?d[t]=r:"number"===m.type?d[t]=parseInt(r):"checkbox"===m.type&&(d[t]="false"!=r))}if(!1===u)for(f in c.outputs){c.outputs[f].name===t&&(g[t]=r)}u=!1,c.updateStudy({inputs:d,outputs:g})},i.Pz.MobileBridge.getStudyParameters=function(e,t){var r={stx:a};a.layout.studies&&a.layout.studies[e]?r.sd=a.layout.studies[e]:r.name=e;var n,o=new i.Pz.Studies.DialogHelper(r);switch(t){case"inputs":case!0:n=o.inputs;break;case"parameters":n=o.parameters;break;default:n=o.outputs}return this.isAndroid?n:JSON.stringify(n)},i.Pz.MobileBridge.setStudyParameter=function(e,t,r,n){var o=new i.Pz.Studies.DialogHelper({sd:a.layout.studies[e],stx:a});n?o.updateStudy({inputs:{key:r},outputs:{}}):o.updateStudy({inputs:{},outputs:{key:r}})},i.Pz.MobileBridge.addDrawingListener=function(){const e=this;a.addEventListener("drawing",(function(t){var r=t.drawings,i=[];for(var a in r){var n=r[a];i.push(n.serialize())}var o=JSON.stringify(i);e.isAndroid?ChartIQ.drawingChange(o):webkit.messageHandlers.drawingHandler.postMessage(o)}))},i.Pz.MobileBridge.addMeasureListener=function(){const e=this;document.addEventListener("touchend",(function(){let t=document.querySelector(".mMeasure");t.innerText="";let r=JSON.stringify(t.innerText);e.isAndroid?ChartIQ.measureChange(r):webkit.messageHandlers.measureHandler.postMessage(r)})),a.addEventListener("move",(function(){let t=document.querySelector(".mMeasure");if(t.innerText.length<=0)return;let r=JSON.stringify(t.innerText);e.isAndroid?ChartIQ.measureChange(r):webkit.messageHandlers.measureHandler.postMessage(r)}))},i.Pz.MobileBridge.addLayoutListener=function(){const e=this;a.addEventListener("layout",(function(t){var r=[];var i=JSON.stringify(t.layout,(function(e,t){if(null!==t&&"object"==typeof t){if(r.indexOf(t)>=0)return;r.push(t)}return t}));e.isAndroid?ChartIQ.layoutChange(i):webkit.messageHandlers.layoutHandler.postMessage(i)}))}}}]);